<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI - a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI - a Neural Search Company"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@Jina AI"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>May the Source Be With You: Understanding Jina through Star Wars | Jina AI</title><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/d6299e18a01a0ac2808b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d6299e18a01a0ac2808b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-94f262366e752bd48d82.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-13cdde2fb793b77184ee.js" as="script"/><link rel="preload" href="/_next/static/chunks/522-e45333ebcf36799b860c.js" as="script"/><link rel="preload" href="/_next/static/chunks/373-350caaa5387e56e8b807.js" as="script"/><link rel="preload" href="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" as="script"/><style id="__jsx-3792957869">.dropdown.jsx-3792957869{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.5rem;--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:24rem;border-radius:0.75rem;}.dropdown.jsx-3792957869>.jsx-3792957869:not([hidden])~.jsx-3792957869:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}.dropdown.jsx-3792957869{box-shadow:3px 6px 33px rgba(205,205,205,0.25);}</style><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-3949856645">.btn.jsx-3949856645{text-align:center;}.btn-base.jsx-3949856645{font-size:1.125rem;font-weight:600;}.btn-xl.jsx-3949856645{padding-top:1rem;padding-bottom:1rem;padding-left:1.5rem;padding-right:1.5rem;font-size:1.25rem;font-weight:800;}.btn-full-rounded.jsx-3949856645{border-radius:9999px;}.btn-primary.jsx-3949856645{border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(0,129,129,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));}.btn-primary.jsx-3949856645:hover{background-color:#009191;}.btn-secondary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(251,203,103,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));}.btn-secondary.jsx-3949856645:hover{background-color:#fbd076;}.btn-tertiary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border:1px solid #999999;}.btn-tertiary.jsx-3949856645:hover{background-color:#f6f6f6;}.btn-outlined.jsx-3949856645{border-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));background-color:transparent;}.btn-outlined.jsx-3949856645:hover{background-color:#f6f6f622;}</style><style id="__jsx-223001487">.navbar.jsx-223001487 a{display:inline-block;width:100%;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-223001487 a .btn{width:100%;}.navbar.jsx-223001487 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-223001487 a,.navbar.jsx-223001487 a .btn{width:auto;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0px;}.navbar.jsx-223001487>(li:not(:last-child)){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-4055754880">.markdown.jsx-4055754880{font-size:1.125rem;line-height:1.625;}.markdown.jsx-4055754880 p.jsx-4055754880,.markdown.jsx-4055754880 ul.jsx-4055754880,.markdown.jsx-4055754880 ol.jsx-4055754880,.markdown.jsx-4055754880 blockquote.jsx-4055754880{margin-top:1.5rem;margin-bottom:1.5rem;}.markdown.jsx-4055754880 h2.jsx-4055754880{margin-top:3rem;margin-bottom:1rem;font-size:1.875rem;line-height:1.375;}.markdown.jsx-4055754880 h3.jsx-4055754880{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;line-height:1.375;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20% / 30% url('/assets/images/planet-beige.svg');}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10% / 50% url('/assets/images/planet-green.svg');}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700">@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-2xl mx-auto px-3 py-6 undefined"><div class="jsx-223001487 flex flex-wrap justify-between items-center"><div class="jsx-223001487"><a class="jsx-223001487" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-223001487 sm:hidden"><button type="button" aria-label="show menu" class="jsx-223001487 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-223001487 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-223001487"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-223001487"></path></svg></button></div><nav class="jsx-223001487 w-full sm:w-auto sm:block mt-2 sm:mt-0 hidden"><ul class="jsx-223001487 navbar flex flex-col sm:flex-row sm:items-center font-medium text-xl text-gray-800 pt-3 pb-5 px-5 sm:p-0 bg-white sm:bg-transparent rounded"><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Products dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Products</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/core" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3792957869 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/hub" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3792957869 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Developers dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Developers</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contribute" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3792957869 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/join" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3792957869 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/learn" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3792957869 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Company dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Company</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/about" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3792957869 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/careers" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/events" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3792957869 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/news" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3792957869 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contact" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block mr-1 font-bold text-gray-700"><a href="/blog/">Blog</a></li><div class="jsx-3128403005 md:hidden h-96 overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/core" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3128403005 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/hub" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3128403005 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contribute" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3128403005 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/join" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3128403005 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/learn" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3128403005 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/about" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3128403005 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/events" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3128403005 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/news" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contact" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></div></ul><span class="jsx-3128403005 text-gray-700 font-semibold text-sm ml-2 p-4">Blog</span></div><li class="jsx-223001487"><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 md:hidden btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></li></ul></nav><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 hidden md:flex btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></div></div></div><div class="mt-24"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col"><img src="/assets/images/blog/star_wars/cover.svg" alt="May the Source Be With You: Understanding Jina through Star Wars-image" class="mb-4 w-full"/><article class="mb-32 md:max-w-6xl md:shadow-lg xl:rounded-3xl md:px-32 md:py-20 md:mx-auto md:-mt-20 bg-white shadow"><div class="mb-3"></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">May the Source Be With You: Understanding Jina through Star Wars</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/defaultProfileImg.svg" class="w-8 h-auto rounded-full mr-4" alt="Alex C-G"/><div class="text-gray-600">Alex C-G</div></div><time dateTime="2020-12-16T14:00:39.923Z">16 December, 2020</time></div><div class="jsx-4055754880 mx-auto markdown"><div class="jsx-4055754880"><h3>Introduction</h3>
<p>You've read <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a> and got an overview of all the Jina components. Let's take a look at how they work together in a simple Jina workflow to search text. Actually, let's go one better, and throw in some Star Wars. Because if there's ever been a year where as need a New Hope it's 2020...</p>
<p><img src="https://media.giphy.com/media/9gISqB3tncMmY/giphy.gif" alt=""></p>
<p>Bear in mind there are lots of ways to wire up a Jina workflow; we're just looking at a relatively simple use case for now, and an oversimplification at that. In future posts we'll look at searching different forms of media, see how we can scale up speed and reliability, run Jina remotely, etc.</p>
<div class="alert alert-warning" role="alert">
  The code in this post may not actually work in the real world, both because this is a simplified overview but also because Jina is constantly evolving. However, the general concepts should remain the same.
</div>
<h3>Prerequisites</h3>
<p>Some useful reading before you begin:</p>
<ul>
<li><a href="https://jina.ai/2020/07/06/What-is-Neural-Search-and-Why-Should-I-Care.html">What is Neural Search, and Why Should I Care?</a></li>
<li><a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a></li>
<li><a href="https://github.com/jina-ai/examples/tree/master/my-first-jina-app">Build My First Jina App</a></li>
</ul>
<h3>Lies! Evil Wicked Lies!</h3>
<p>In this post we're doing what Terry Pratchett calls "<a href="https://en.wikipedia.org/wiki/Lie-to-children">lies to children</a>", meaning we're skipping a lot of implementation details and simplifying things to make it easier to get a high-level overview without getting bogged down in messy details. We'll dig into some of these details as we go along, but if you yearn to learn about <a href="https://github.com/jina-ai/jinad">Jina's daemon</a> or other low-level things, you should probably check our <a href="http://docs.jina.ai">docs</a>.</p>
<p>We won't include commands to run the Flows because this is just an over-simplified explanation. The fictional example here lacks a few bits and bobs needed to run in the real world, and aims only to give you an idea of how things are hooked together.</p>
<div class="alert alert-secondary" role="alert">
<small>
<ul>
<li>Notes about lower-level implementation details will be in little boxes like this.</li>
<li>Yes, I use the terms <i>indexes</i> not <i>indices</i> in this post. I'm afraid you'll have to live with it</li>
</ul>
</small>
</div>
<h3>Search as a Black Box</h3>
<p>Let's start by looking at a simple "black box" overview of a search. It has several top-level "components":</p>
<p><img src="/assets/images/blog/star_wars/blackbox.svg" alt=""></p>
<p>| Component                       | Star Wars example                                                          |
| ---                             | ---                                                                        |
| Data you want to search         | All the text of the Star Wars movie scripts                                |
| Search query                    | A single line like <code>Give me a hand Mr Space Wizard</code>                        |
| Jina core                       | The magical box that finds the closest match to your query in all the data |
| Ranked results                  | A list of closest matches (for example, <code>Help me Obi Wan-Kenobi</code>)          |</p>
<p><img src="https://media.giphy.com/media/DrL54YGfFb5Bu/giphy.gif" alt=""></p>
<p>In this example we're using CSV files (all the Star Wars scripts) as our dataset, but if we wanted we could also use Jina to search through the movies themselves for soundbites or scenes, based on audio, video, and subtitle data.</p>
<p>First up we'll focus on <strong>indexing</strong>, so don't worry about the querying bit for now. After all you have to <strong>process</strong> the plans for the Death Star before you can <strong>search out</strong> it's vulnerability, right?</p>
<h3>Indexing</h3>
<h4>Flows</h4>
<p>The first step is to build a Flow and feed in our CSV files. As you've read from Jina 101, the <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#flow">Flow</a> is the high-level abstraction Jina uses for any search. Data is fed in, processed, and results spat out the other end. These Flows act as pipelines for indexing and querying:</p>
<p><img src="/assets/images/blog/star_wars/flow-index.svg" alt=""></p>
<p>Note: Since we're only interested in <strong>indexing</strong> for now, we've left out the results. They'll come when querying.</p>
<p>You can build a Flow in Python, YAML, or <a href="https://github.com/jina-ai/dashboard">Jina Dashboard</a>. In our case we'll use <strike>an elegant weapon for a more civilized age</strike> <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#yaml-config">YAML</a> to create an empty Flow:</p>
<pre><code class="language-yaml">!Flow
  # We'll fill this in soon, don't worry!
</code></pre>
<p>Let's save that as <code>flows/index.yml</code>. Don't worry if it looks as useful as Jar Jar Binks. We'll flesh it out in the next section.</p>
<p><img src="https://media.giphy.com/media/3owzWfuEMmNX4rquJ2/giphy.gif" alt=""></p>
<p>While we're at it, let's add our (currently useless) Flow to <code>app.py</code> and set it to index:</p>
<pre><code class="language-python">from jina.flow import Flow

def input_fn():
  # see above

f = Flow().load_config("flows/index.yml")

with f:
  f.index(filepath="scripts/*") # Note this isn't the exact method you'd use. It's a bit simplified
</code></pre>
<h4>Pods</h4>
<p>Each task in the Flow is performed by a different <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#pods">Pod</a> which can be written in YAML or Python. Our Star Wars example indexing Flow looks like:</p>
<p><img src="/assets/images/blog/star_wars/pods.svg" alt=""></p>
<p>Earlier we created a Flow using <code>flows/index.yml</code>. Let's expand that file with a list of Pods:</p>
<pre><code class="language-yaml">!Flow
version: '1'
pods:
  - name: crafter:
      uses: pods/craft.yml
  - name: encoder:
      uses: pods/encode.yml
  - name: chunk_indexer:
      uses: pods/chunk_index.yml
  - name: doc_indexer:
      uses: pods/doc_index.yml
</code></pre>
<p>Pods are configured in their own YAML files (like <code>pods/chunk_idx.yml</code>) and may behave differently depending on which Flow they're in:</p>
<p>| Pod             | Indexing Flow                                   | Querying Flow                                                         |
| ---             | ---                                             | ---                                                                   |
| <code>crafter</code>       | Break dataset into sub-documents                | N/A (user query is already same format as output i.e a sentence)      |
| <code>encoder</code>       | Encode sub-documents into vectors               | Encode user query into vectors                                        |
| <code>chunk_indexer</code> | <strong>Create</strong> vector and sub-document indexes      | <strong>Search</strong> vector and sub-document indexes for matches                |
| <code>doc_indexer</code>   | <strong>Create</strong> index of Documents and sub-documents | <strong>Search</strong> Doc indexes for matching sub-documents            |
| <code>ranker</code>        | N/A                                             | Rank results by relevance                                             |</p>
<p>We'll dig more into Pod YAML files in the Executor section below.</p>
<div class="alert alert-secondary" role="alert">
<small>
Technically each Pod contains at least one Pea as well. However, this is lower-level and we'll discuss that in another post.
</small>
</div>
<h5>What Does Each Pod Do?</h5>
<p><strong>Crafter</strong></p>
<p>A Crafter takes our CSV file as input and breaks it down into sub-documents:</p>
<p><img src="/assets/images/blog/star_wars/pod-craft.svg" alt=""></p>
<p>To keep things simple, in our example the Crafter is just splitting each line from the input CSVs into individual sentences. But if we wanted to do a more advanced text search, we could split the document (script) into any level of granularity (like line, sentence, word, etc, a.k.a sub-documents). Each sub-document comes with its own metadata (like <code>doc_id</code>, <code>parent_id</code>, <code>granularity</code>, etc).</p>
<div class="alert alert-secondary" role="alert">
<small>
Sometimes we call these sub-documents "Chunks". A sub-document and a Chunk are exactly the same thing.
</small>
</div>
<p><strong>Encoder</strong></p>
<p>An encoder takes a sub-document and converts it to a <a href="https://www.youtube.com/watch?v=gQddtTdmG_8&#x26;t=193s">vector embedding</a>:</p>
<p><img src="/assets/images/blog/star_wars/pod-encode.svg" alt=""></p>
<p>Closely related sub-documents have similar embeddings, for example <code>jedi</code> and <code>space_wizard</code> would have similar embeddings, while <code>death_star</code> and <code>princess</code> would be very different from each other.</p>
<p><strong>Chunk Indexer</strong></p>
<p>The Chunk indexer takes all of the sub-documents and their embeddings as input and creates two indexes as output:</p>
<ul>
<li><strong>Vector index</strong>: Stores <code>doc_id</code> and vector embedding of each sub-document</li>
<li><strong>Key-value index</strong>: Stores <code>doc_id</code>, <code>parent_id</code> and any metadata associated with each sub-document</li>
</ul>
<p><img src="/assets/images/blog/star_wars/pod-chunk_idx.svg" alt=""></p>
<p><strong>Document Indexer</strong></p>
<p>Creates an index of Documents and their associated <code>doc_id</code>s for each level of granularity specified:</p>
<p><img src="/assets/images/blog/star_wars/pod-doc_idx.svg" alt=""></p>
<p>And that's the last step of the Flow for indexing! But wait, there's more to learn before we jump into querying!</p>
<h4>Executors</h4>
<p>Now we've processed all that data - but we haven't even dived into the deep learning behind Jina.</p>
<p>That's where our <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#executors">Executors</a> come in. Like droids, some of them are "smart" (i.e. like an executor in the <code>encoder</code> Pod which uses artificial intelligence), while some are just more-or-less mindless automatons (like the indexers). Either way, they're the ones who do all the real work. Everything else is just higher-level wrappers to make them easier to work with.</p>
<p><img src="/assets/images/blog/star_wars/executors.svg" alt=""></p>
<p>We'll use the analogy of Luke flying his X-wing to blow up the Death Star:</p>
<p>| X-wing | Pod (the container and "interface" that lets R2 fly)
| R2D2 | Executor (the one who actually does all the work)
| Luke | Useless bag of flesh who doesn't do much except "trust the force", pull the trigger and get the glory</p>
<p><img src="https://media.giphy.com/media/EPPvrXLVm6Axy/giphy.gif" alt=""></p>
<p>Since each Pod has a different task, each Pod uses a different executor. After all, you wouldn't ask C3PO to fly an X-wing, and you wouldn't ask R2D2 to <strike>wander around like a useless gold mannequin who gets lost in the desert</strike> translate languages. Let's look at our <code>encoder.yml</code> Pod as an example:</p>
<pre><code class="language-yaml">!TransformerTorchEncoder
with:
  pooling_strategy: auto
  pretrained_model_name_or_path: distilbert-base-cased
  max_length: 96
# More stuff here
</code></pre>
<p>We can see that it uses <code>TransformerTorchEncoder</code> to encode our sub-documents into vector embeddings using the <code>distilbert-base-cased</code> language model. For example:</p>
<p>| Input | Output Vector           |
| ---                      | ---                     |
| <code>Help me Obi Wan-Kenobi</code> | <code>{1.2, 0.6, -3.1, ...}</code> |
| <code>You're my only hope</code>    | <code>{-0.3, 1.5, 0.7, ...}</code> |</p>
<p>In this way, <code>TransformerTorchEncoder</code> is like C3PO. It knows how to translate things to other things, like text to vector embeddings (admittedly, not over 6 million forms of translation, but we only have 3PO's word for that). However, it is probably equally useless at getting out of a desert.</p>
<p><img src="https://media.giphy.com/media/TZFmvyDvr3WaQ/source.gif" alt=""></p>
<h4>Storage</h4>
<p>Phew, that's a lot of data! But where is it all stored? Jina uses a working directory, usually <code>workspace</code> to store all of the indexes created by the Pods above.</p>
<p><img src="/assets/images/blog/star_wars/storage.svg" alt=""></p>
<p>Note that many of the Pods write <em>nothing</em> to storage. They merely pass their output to the next Pod in the Flow. It's only when data needs to be available <em>between</em> Flows that data needs to be written to storage (in our case, the indexes created by <code>chunk_indexer</code> and <code>doc_indexer</code>).</p>
<h3>Running the Indexing Flow</h3>
<p>In the introduction we mentioned this was just meant as an overview and not a "real" Flow (though it could be built into a working example). In short, it won't run as is. However, if you <em>did</em> want to run it, it's as simple as:</p>
<pre><code class="language-bash">python app.py index
</code></pre>
<h3>Querying</h3>
<p>At this point the index Flow is out of the picture, so we can safely ignore both the Flow and the original input documents:</p>
<p><img src="/assets/images/blog/star_wars/flow-query.svg" alt=""></p>
<p>The query Flow is very similar to the indexing Flow. It:</p>
<ul>
<li>Takes a user query as input (<code>Give me a hand Mr Space Wizard</code>)</li>
<li>Processes it (get its vector)</li>
<li>Pulls the indexes from storage</li>
<li>Finds the closest vectors in the vector index (like the vector for <code>Help me Obi-Wan Kenobi</code>) and gets the <code>doc_id</code>s</li>
<li>Ranks the closest matching Documents</li>
<li>Returns the ranked list to the user via REST or gRPC</li>
</ul>
<p>A human readable version of this ranked list might look like:</p>
<p>| Rank | Line                                                                     | Document ID | Parent Doc      | Metadata        |
| ---  | ---                                                                      | ---         | ---             | ---             |
| 1    | Help me Obi-Wan Kenobi                                                   | 4501        | 04              | speaker: LEIA   |
| 2    | Yes, I was once a Jedi Knight the same as your father                    | 4702        | 04              | speaker: OBIWAN |
| 3    | I'm looking for a Jedi Master                                            | 5304        | 05              | speaker: LUKE   |</p>
<p>And so on...</p>
<p>Like indexing, you'd run the Flow with:</p>
<pre><code class="language-bash">python app.py query
</code></pre>
<h3>Summary</h3>
<p>In this post we've covered most of the components from <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a>, what they do, and how they're hooked together in the context of a simple text-based search.</p>
<p>Hopefully by now you should understand:</p>
<ul>
<li>Jina searches require indexing and querying Flows</li>
<li>Flows can be built in YAML, Python, or <a href="https://github.com/jina-ai/dashboard">Jina Dashboard</a></li>
<li>Flows are called from <code>app.py</code></li>
<li>Documents go through a series of steps in each Flow, being passed through Pods which in turn use Executors to take input, process it, and pass it to the next Pod (and sometimes read from or write to storage)</li>
<li>There may be different Pods in each Flow (in our example, the query Flow lacks <code>crafter</code> Pod, and the indexing Flow lacks <code>ranker</code>)</li>
<li>Output is returned as a ranked list of matching Documents, based on similarity of embedding</li>
</ul>
<p>As we mentioned at the start, the above is over-simplified and certainly not exhaustive. There's always more to learn and deeper components to dive into.</p>
<h3>Next Time</h3>
<p>Of course, there's always more to learn, just as there's always yet another Death Star to take down. In future posts we'll cover running Pods and Flows remotely, speeding up performance, improving reliability, searching different kinds of things, and lots more. Let us know which you'd like to learn about via <a href="https://twitter.com/jinaAI_">Twitter</a> or our <a href="https://slack.jina.ai">Slack community</a>!</p>
<p>Until then, may the Force be with you...</p>
<p><img src="https://media.giphy.com/media/3o85xAojNshmzlySyc/giphy.gif" alt=""></p>
</div><div class="jsx-4055754880 hidden"><h3>Introduction</h3>
<p>You've read <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a> and got an overview of all the Jina components. Let's take a look at how they work together in a simple Jina workflow to search text. Actually, let's go one better, and throw in some Star Wars. Because if there's ever been a year where as need a New Hope it's 2020...</p>
<p><img src="https://media.giphy.com/media/9gISqB3tncMmY/giphy.gif" alt=""></p>
<p>Bear in mind there are lots of ways to wire up a Jina workflow; we're just looking at a relatively simple use case for now, and an oversimplification at that. In future posts we'll look at searching different forms of media, see how we can scale up speed and reliability, run Jina remotely, etc.</p>
<div class="alert alert-warning" role="alert">
  The code in this post may not actually work in the real world, both because this is a simplified overview but also because Jina is constantly evolving. However, the general concepts should remain the same.
</div>
<h3>Prerequisites</h3>
<p>Some useful reading before you begin:</p>
<ul>
<li><a href="https://jina.ai/2020/07/06/What-is-Neural-Search-and-Why-Should-I-Care.html">What is Neural Search, and Why Should I Care?</a></li>
<li><a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a></li>
<li><a href="https://github.com/jina-ai/examples/tree/master/my-first-jina-app">Build My First Jina App</a></li>
</ul>
<h3>Lies! Evil Wicked Lies!</h3>
<p>In this post we're doing what Terry Pratchett calls "<a href="https://en.wikipedia.org/wiki/Lie-to-children">lies to children</a>", meaning we're skipping a lot of implementation details and simplifying things to make it easier to get a high-level overview without getting bogged down in messy details. We'll dig into some of these details as we go along, but if you yearn to learn about <a href="https://github.com/jina-ai/jinad">Jina's daemon</a> or other low-level things, you should probably check our <a href="http://docs.jina.ai">docs</a>.</p>
<p>We won't include commands to run the Flows because this is just an over-simplified explanation. The fictional example here lacks a few bits and bobs needed to run in the real world, and aims only to give you an idea of how things are hooked together.</p>
<div class="alert alert-secondary" role="alert">
<small>
<ul>
<li>Notes about lower-level implementation details will be in little boxes like this.</li>
<li>Yes, I use the terms <i>indexes</i> not <i>indices</i> in this post. I'm afraid you'll have to live with it</li>
</ul>
</small>
</div>
<h3>Search as a Black Box</h3>
<p>Let's start by looking at a simple "black box" overview of a search. It has several top-level "components":</p>
<p><img src="/assets/images/blog/star_wars/blackbox.svg" alt=""></p>
<p>| Component                       | Star Wars example                                                          |
| ---                             | ---                                                                        |
| Data you want to search         | All the text of the Star Wars movie scripts                                |
| Search query                    | A single line like <code>Give me a hand Mr Space Wizard</code>                        |
| Jina core                       | The magical box that finds the closest match to your query in all the data |
| Ranked results                  | A list of closest matches (for example, <code>Help me Obi Wan-Kenobi</code>)          |</p>
<p><img src="https://media.giphy.com/media/DrL54YGfFb5Bu/giphy.gif" alt=""></p>
<p>In this example we're using CSV files (all the Star Wars scripts) as our dataset, but if we wanted we could also use Jina to search through the movies themselves for soundbites or scenes, based on audio, video, and subtitle data.</p>
<p>First up we'll focus on <strong>indexing</strong>, so don't worry about the querying bit for now. After all you have to <strong>process</strong> the plans for the Death Star before you can <strong>search out</strong> it's vulnerability, right?</p>
<h3>Indexing</h3>
<h4>Flows</h4>
<p>The first step is to build a Flow and feed in our CSV files. As you've read from Jina 101, the <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#flow">Flow</a> is the high-level abstraction Jina uses for any search. Data is fed in, processed, and results spat out the other end. These Flows act as pipelines for indexing and querying:</p>
<p><img src="/assets/images/blog/star_wars/flow-index.svg" alt=""></p>
<p>Note: Since we're only interested in <strong>indexing</strong> for now, we've left out the results. They'll come when querying.</p>
<p>You can build a Flow in Python, YAML, or <a href="https://github.com/jina-ai/dashboard">Jina Dashboard</a>. In our case we'll use <strike>an elegant weapon for a more civilized age</strike> <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#yaml-config">YAML</a> to create an empty Flow:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>!Flow
</span><span>  </span><span style="color:#ac65ff"># We&#x27;ll fill this in soon, don&#x27;t worry!</span><span>
</span>
</code></pre>
<p>Let's save that as <code>flows/index.yml</code>. Don't worry if it looks as useful as Jar Jar Binks. We'll flesh it out in the next section.</p>
<p><img src="https://media.giphy.com/media/3owzWfuEMmNX4rquJ2/giphy.gif" alt=""></p>
<p>While we're at it, let's add our (currently useless) Flow to <code>app.py</code> and set it to index:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">from</span><span> jina.flow </span><span style="color:#fb9e00;font-weight:normal">import</span><span> Flow
</span>
<span></span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">input_fn</span><span class="hljs-function">():</span><span>
</span><span>  </span><span style="color:#ac65ff"># see above</span><span>
</span>
<span>f = Flow().load_config(</span><span style="color:#4cd213">&quot;flows/index.yml&quot;</span><span>)
</span>
<span></span><span style="color:#fb9e00;font-weight:normal">with</span><span> f:
</span><span>  f.index(filepath=</span><span style="color:#4cd213">&quot;scripts/*&quot;</span><span>) </span><span style="color:#ac65ff"># Note this isn&#x27;t the exact method you&#x27;d use. It&#x27;s a bit simplified</span><span>
</span>
</code></pre>
<h4>Pods</h4>
<p>Each task in the Flow is performed by a different <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#pods">Pod</a> which can be written in YAML or Python. Our Star Wars example indexing Flow looks like:</p>
<p><img src="/assets/images/blog/star_wars/pods.svg" alt=""></p>
<p>Earlier we created a Flow using <code>flows/index.yml</code>. Let's expand that file with a list of Pods:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>!Flow
</span><span>version: </span><span style="color:#4cd213">&#x27;1&#x27;</span><span>
</span>pods:
<!-- -->  - name: crafter:
<!-- -->      uses: pods/craft.yml
<!-- -->  - name: encoder:
<!-- -->      uses: pods/encode.yml
<!-- -->  - name: chunk_indexer:
<!-- -->      uses: pods/chunk_index.yml
<!-- -->  - name: doc_indexer:
<!-- -->      uses: pods/doc_index.yml
<!-- -->
</code></pre>
<p>Pods are configured in their own YAML files (like <code>pods/chunk_idx.yml</code>) and may behave differently depending on which Flow they're in:</p>
<p>| Pod             | Indexing Flow                                   | Querying Flow                                                         |
| ---             | ---                                             | ---                                                                   |
| <code>crafter</code>       | Break dataset into sub-documents                | N/A (user query is already same format as output i.e a sentence)      |
| <code>encoder</code>       | Encode sub-documents into vectors               | Encode user query into vectors                                        |
| <code>chunk_indexer</code> | <strong>Create</strong> vector and sub-document indexes      | <strong>Search</strong> vector and sub-document indexes for matches                |
| <code>doc_indexer</code>   | <strong>Create</strong> index of Documents and sub-documents | <strong>Search</strong> Doc indexes for matching sub-documents            |
| <code>ranker</code>        | N/A                                             | Rank results by relevance                                             |</p>
<p>We'll dig more into Pod YAML files in the Executor section below.</p>
<div class="alert alert-secondary" role="alert">
<small>
Technically each Pod contains at least one Pea as well. However, this is lower-level and we'll discuss that in another post.
</small>
</div>
<h5>What Does Each Pod Do?</h5>
<p><strong>Crafter</strong></p>
<p>A Crafter takes our CSV file as input and breaks it down into sub-documents:</p>
<p><img src="/assets/images/blog/star_wars/pod-craft.svg" alt=""></p>
<p>To keep things simple, in our example the Crafter is just splitting each line from the input CSVs into individual sentences. But if we wanted to do a more advanced text search, we could split the document (script) into any level of granularity (like line, sentence, word, etc, a.k.a sub-documents). Each sub-document comes with its own metadata (like <code>doc_id</code>, <code>parent_id</code>, <code>granularity</code>, etc).</p>
<div class="alert alert-secondary" role="alert">
<small>
Sometimes we call these sub-documents "Chunks". A sub-document and a Chunk are exactly the same thing.
</small>
</div>
<p><strong>Encoder</strong></p>
<p>An encoder takes a sub-document and converts it to a <a href="https://www.youtube.com/watch?v=gQddtTdmG_8&#x26;t=193s">vector embedding</a>:</p>
<p><img src="/assets/images/blog/star_wars/pod-encode.svg" alt=""></p>
<p>Closely related sub-documents have similar embeddings, for example <code>jedi</code> and <code>space_wizard</code> would have similar embeddings, while <code>death_star</code> and <code>princess</code> would be very different from each other.</p>
<p><strong>Chunk Indexer</strong></p>
<p>The Chunk indexer takes all of the sub-documents and their embeddings as input and creates two indexes as output:</p>
<ul>
<li><strong>Vector index</strong>: Stores <code>doc_id</code> and vector embedding of each sub-document</li>
<li><strong>Key-value index</strong>: Stores <code>doc_id</code>, <code>parent_id</code> and any metadata associated with each sub-document</li>
</ul>
<p><img src="/assets/images/blog/star_wars/pod-chunk_idx.svg" alt=""></p>
<p><strong>Document Indexer</strong></p>
<p>Creates an index of Documents and their associated <code>doc_id</code>s for each level of granularity specified:</p>
<p><img src="/assets/images/blog/star_wars/pod-doc_idx.svg" alt=""></p>
<p>And that's the last step of the Flow for indexing! But wait, there's more to learn before we jump into querying!</p>
<h4>Executors</h4>
<p>Now we've processed all that data - but we haven't even dived into the deep learning behind Jina.</p>
<p>That's where our <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101#executors">Executors</a> come in. Like droids, some of them are "smart" (i.e. like an executor in the <code>encoder</code> Pod which uses artificial intelligence), while some are just more-or-less mindless automatons (like the indexers). Either way, they're the ones who do all the real work. Everything else is just higher-level wrappers to make them easier to work with.</p>
<p><img src="/assets/images/blog/star_wars/executors.svg" alt=""></p>
<p>We'll use the analogy of Luke flying his X-wing to blow up the Death Star:</p>
<p>| X-wing | Pod (the container and "interface" that lets R2 fly)
| R2D2 | Executor (the one who actually does all the work)
| Luke | Useless bag of flesh who doesn't do much except "trust the force", pull the trigger and get the glory</p>
<p><img src="https://media.giphy.com/media/EPPvrXLVm6Axy/giphy.gif" alt=""></p>
<p>Since each Pod has a different task, each Pod uses a different executor. After all, you wouldn't ask C3PO to fly an X-wing, and you wouldn't ask R2D2 to <strike>wander around like a useless gold mannequin who gets lost in the desert</strike> translate languages. Let's look at our <code>encoder.yml</code> Pod as an example:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>!TransformerTorchEncoder
</span><span></span><span style="color:#fb9e00;font-weight:normal">with</span><span>:
</span>  pooling_strategy: auto
<!-- -->  pretrained_model_name_or_path: distilbert-base-cased
<span>  max_length: </span><span style="color:#fa658d">96</span><span>
</span><span></span><span style="color:#ac65ff"># More stuff here</span><span>
</span>
</code></pre>
<p>We can see that it uses <code>TransformerTorchEncoder</code> to encode our sub-documents into vector embeddings using the <code>distilbert-base-cased</code> language model. For example:</p>
<p>| Input | Output Vector           |
| ---                      | ---                     |
| <code>Help me Obi Wan-Kenobi</code> | <code>{1.2, 0.6, -3.1, ...}</code> |
| <code>You're my only hope</code>    | <code>{-0.3, 1.5, 0.7, ...}</code> |</p>
<p>In this way, <code>TransformerTorchEncoder</code> is like C3PO. It knows how to translate things to other things, like text to vector embeddings (admittedly, not over 6 million forms of translation, but we only have 3PO's word for that). However, it is probably equally useless at getting out of a desert.</p>
<p><img src="https://media.giphy.com/media/TZFmvyDvr3WaQ/source.gif" alt=""></p>
<h4>Storage</h4>
<p>Phew, that's a lot of data! But where is it all stored? Jina uses a working directory, usually <code>workspace</code> to store all of the indexes created by the Pods above.</p>
<p><img src="/assets/images/blog/star_wars/storage.svg" alt=""></p>
<p>Note that many of the Pods write <em>nothing</em> to storage. They merely pass their output to the next Pod in the Flow. It's only when data needs to be available <em>between</em> Flows that data needs to be written to storage (in our case, the indexes created by <code>chunk_indexer</code> and <code>doc_indexer</code>).</p>
<h3>Running the Indexing Flow</h3>
<p>In the introduction we mentioned this was just meant as an overview and not a "real" Flow (though it could be built into a working example). In short, it won't run as is. However, if you <em>did</em> want to run it, it's as simple as:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>python app.py index
</span>
</code></pre>
<h3>Querying</h3>
<p>At this point the index Flow is out of the picture, so we can safely ignore both the Flow and the original input documents:</p>
<p><img src="/assets/images/blog/star_wars/flow-query.svg" alt=""></p>
<p>The query Flow is very similar to the indexing Flow. It:</p>
<ul>
<li>Takes a user query as input (<code>Give me a hand Mr Space Wizard</code>)</li>
<li>Processes it (get its vector)</li>
<li>Pulls the indexes from storage</li>
<li>Finds the closest vectors in the vector index (like the vector for <code>Help me Obi-Wan Kenobi</code>) and gets the <code>doc_id</code>s</li>
<li>Ranks the closest matching Documents</li>
<li>Returns the ranked list to the user via REST or gRPC</li>
</ul>
<p>A human readable version of this ranked list might look like:</p>
<p>| Rank | Line                                                                     | Document ID | Parent Doc      | Metadata        |
| ---  | ---                                                                      | ---         | ---             | ---             |
| 1    | Help me Obi-Wan Kenobi                                                   | 4501        | 04              | speaker: LEIA   |
| 2    | Yes, I was once a Jedi Knight the same as your father                    | 4702        | 04              | speaker: OBIWAN |
| 3    | I'm looking for a Jedi Master                                            | 5304        | 05              | speaker: LUKE   |</p>
<p>And so on...</p>
<p>Like indexing, you'd run the Flow with:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>python app.py query
</span>
</code></pre>
<h3>Summary</h3>
<p>In this post we've covered most of the components from <a href="https://github.com/jina-ai/jina/tree/master/docs/chapters/101">Jina 101</a>, what they do, and how they're hooked together in the context of a simple text-based search.</p>
<p>Hopefully by now you should understand:</p>
<ul>
<li>Jina searches require indexing and querying Flows</li>
<li>Flows can be built in YAML, Python, or <a href="https://github.com/jina-ai/dashboard">Jina Dashboard</a></li>
<li>Flows are called from <code>app.py</code></li>
<li>Documents go through a series of steps in each Flow, being passed through Pods which in turn use Executors to take input, process it, and pass it to the next Pod (and sometimes read from or write to storage)</li>
<li>There may be different Pods in each Flow (in our example, the query Flow lacks <code>crafter</code> Pod, and the indexing Flow lacks <code>ranker</code>)</li>
<li>Output is returned as a ranked list of matching Documents, based on similarity of embedding</li>
</ul>
<p>As we mentioned at the start, the above is over-simplified and certainly not exhaustive. There's always more to learn and deeper components to dive into.</p>
<h3>Next Time</h3>
<p>Of course, there's always more to learn, just as there's always yet another Death Star to take down. In future posts we'll cover running Pods and Flows remotely, speeding up performance, improving reliability, searching different kinds of things, and lots more. Let us know which you'd like to learn about via <a href="https://twitter.com/jinaAI_">Twitter</a> or our <a href="https://slack.jina.ai">Slack community</a>!</p>
<p>Until then, may the Force be with you...</p>
<p><img src="https://media.giphy.com/media/3o85xAojNshmzlySyc/giphy.gif" alt=""></p>
</div></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 pt-20 text-white"><div class="jsx-1956813867 flex flex-col md:flex-row justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin"></div><div class="jsx-1956813867 pr-4 md:py-16 md:mr-16"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/about/">About us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Careers</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contact/">Contact us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/core/">Core</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/hub/">Hub</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Developers</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contribute/">Contribute</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/learn/">Learn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/join/">Join</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://jina-ai.slack.com/">Slack</a></li></ul></nav></div></div><div class="jsx-1956813867 footer-right-margin"></div></div><div class="text-center bg-primary-400 text-gray-100 text-sm mt-12 py-6"><span class="block md:inline-block">© 2021 Jina AI, Ltd. All rights reserved.</span><span class="mx-4 hidden md:inline-block">|</span><a href="/legal"><span>Terms of Service</span></a><span class="mx-4">|</span><a href="/legal"><span>Privacy Policy</span></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"May the Source Be With You: Understanding Jina through Star Wars","date":"2020-12-16T14:00:39.923Z","slug":"star-wars-workflow","author":"Alex C-G","content":"\u003ch3\u003eIntroduction\u003c/h3\u003e\n\u003cp\u003eYou've read \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101\"\u003eJina 101\u003c/a\u003e and got an overview of all the Jina components. Let's take a look at how they work together in a simple Jina workflow to search text. Actually, let's go one better, and throw in some Star Wars. Because if there's ever been a year where as need a New Hope it's 2020...\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/9gISqB3tncMmY/giphy.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBear in mind there are lots of ways to wire up a Jina workflow; we're just looking at a relatively simple use case for now, and an oversimplification at that. In future posts we'll look at searching different forms of media, see how we can scale up speed and reliability, run Jina remotely, etc.\u003c/p\u003e\n\u003cdiv class=\"alert alert-warning\" role=\"alert\"\u003e\n  The code in this post may not actually work in the real world, both because this is a simplified overview but also because Jina is constantly evolving. However, the general concepts should remain the same.\n\u003c/div\u003e\n\u003ch3\u003ePrerequisites\u003c/h3\u003e\n\u003cp\u003eSome useful reading before you begin:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://jina.ai/2020/07/06/What-is-Neural-Search-and-Why-Should-I-Care.html\"\u003eWhat is Neural Search, and Why Should I Care?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101\"\u003eJina 101\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jina-ai/examples/tree/master/my-first-jina-app\"\u003eBuild My First Jina App\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eLies! Evil Wicked Lies!\u003c/h3\u003e\n\u003cp\u003eIn this post we're doing what Terry Pratchett calls \"\u003ca href=\"https://en.wikipedia.org/wiki/Lie-to-children\"\u003elies to children\u003c/a\u003e\", meaning we're skipping a lot of implementation details and simplifying things to make it easier to get a high-level overview without getting bogged down in messy details. We'll dig into some of these details as we go along, but if you yearn to learn about \u003ca href=\"https://github.com/jina-ai/jinad\"\u003eJina's daemon\u003c/a\u003e or other low-level things, you should probably check our \u003ca href=\"http://docs.jina.ai\"\u003edocs\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWe won't include commands to run the Flows because this is just an over-simplified explanation. The fictional example here lacks a few bits and bobs needed to run in the real world, and aims only to give you an idea of how things are hooked together.\u003c/p\u003e\n\u003cdiv class=\"alert alert-secondary\" role=\"alert\"\u003e\n\u003csmall\u003e\n\u003cul\u003e\n\u003cli\u003eNotes about lower-level implementation details will be in little boxes like this.\u003c/li\u003e\n\u003cli\u003eYes, I use the terms \u003ci\u003eindexes\u003c/i\u003e not \u003ci\u003eindices\u003c/i\u003e in this post. I'm afraid you'll have to live with it\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/small\u003e\n\u003c/div\u003e\n\u003ch3\u003eSearch as a Black Box\u003c/h3\u003e\n\u003cp\u003eLet's start by looking at a simple \"black box\" overview of a search. It has several top-level \"components\":\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/blackbox.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e| Component                       | Star Wars example                                                          |\n| ---                             | ---                                                                        |\n| Data you want to search         | All the text of the Star Wars movie scripts                                |\n| Search query                    | A single line like \u003ccode\u003eGive me a hand Mr Space Wizard\u003c/code\u003e                        |\n| Jina core                       | The magical box that finds the closest match to your query in all the data |\n| Ranked results                  | A list of closest matches (for example, \u003ccode\u003eHelp me Obi Wan-Kenobi\u003c/code\u003e)          |\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/DrL54YGfFb5Bu/giphy.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eIn this example we're using CSV files (all the Star Wars scripts) as our dataset, but if we wanted we could also use Jina to search through the movies themselves for soundbites or scenes, based on audio, video, and subtitle data.\u003c/p\u003e\n\u003cp\u003eFirst up we'll focus on \u003cstrong\u003eindexing\u003c/strong\u003e, so don't worry about the querying bit for now. After all you have to \u003cstrong\u003eprocess\u003c/strong\u003e the plans for the Death Star before you can \u003cstrong\u003esearch out\u003c/strong\u003e it's vulnerability, right?\u003c/p\u003e\n\u003ch3\u003eIndexing\u003c/h3\u003e\n\u003ch4\u003eFlows\u003c/h4\u003e\n\u003cp\u003eThe first step is to build a Flow and feed in our CSV files. As you've read from Jina 101, the \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101#flow\"\u003eFlow\u003c/a\u003e is the high-level abstraction Jina uses for any search. Data is fed in, processed, and results spat out the other end. These Flows act as pipelines for indexing and querying:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/flow-index.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eNote: Since we're only interested in \u003cstrong\u003eindexing\u003c/strong\u003e for now, we've left out the results. They'll come when querying.\u003c/p\u003e\n\u003cp\u003eYou can build a Flow in Python, YAML, or \u003ca href=\"https://github.com/jina-ai/dashboard\"\u003eJina Dashboard\u003c/a\u003e. In our case we'll use \u003cstrike\u003ean elegant weapon for a more civilized age\u003c/strike\u003e \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101#yaml-config\"\u003eYAML\u003c/a\u003e to create an empty Flow:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e!Flow\n  # We'll fill this in soon, don't worry!\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's save that as \u003ccode\u003eflows/index.yml\u003c/code\u003e. Don't worry if it looks as useful as Jar Jar Binks. We'll flesh it out in the next section.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/3owzWfuEMmNX4rquJ2/giphy.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eWhile we're at it, let's add our (currently useless) Flow to \u003ccode\u003eapp.py\u003c/code\u003e and set it to index:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom jina.flow import Flow\n\ndef input_fn():\n  # see above\n\nf = Flow().load_config(\"flows/index.yml\")\n\nwith f:\n  f.index(filepath=\"scripts/*\") # Note this isn't the exact method you'd use. It's a bit simplified\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003ePods\u003c/h4\u003e\n\u003cp\u003eEach task in the Flow is performed by a different \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101#pods\"\u003ePod\u003c/a\u003e which can be written in YAML or Python. Our Star Wars example indexing Flow looks like:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/pods.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eEarlier we created a Flow using \u003ccode\u003eflows/index.yml\u003c/code\u003e. Let's expand that file with a list of Pods:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e!Flow\nversion: '1'\npods:\n  - name: crafter:\n      uses: pods/craft.yml\n  - name: encoder:\n      uses: pods/encode.yml\n  - name: chunk_indexer:\n      uses: pods/chunk_index.yml\n  - name: doc_indexer:\n      uses: pods/doc_index.yml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePods are configured in their own YAML files (like \u003ccode\u003epods/chunk_idx.yml\u003c/code\u003e) and may behave differently depending on which Flow they're in:\u003c/p\u003e\n\u003cp\u003e| Pod             | Indexing Flow                                   | Querying Flow                                                         |\n| ---             | ---                                             | ---                                                                   |\n| \u003ccode\u003ecrafter\u003c/code\u003e       | Break dataset into sub-documents                | N/A (user query is already same format as output i.e a sentence)      |\n| \u003ccode\u003eencoder\u003c/code\u003e       | Encode sub-documents into vectors               | Encode user query into vectors                                        |\n| \u003ccode\u003echunk_indexer\u003c/code\u003e | \u003cstrong\u003eCreate\u003c/strong\u003e vector and sub-document indexes      | \u003cstrong\u003eSearch\u003c/strong\u003e vector and sub-document indexes for matches                |\n| \u003ccode\u003edoc_indexer\u003c/code\u003e   | \u003cstrong\u003eCreate\u003c/strong\u003e index of Documents and sub-documents | \u003cstrong\u003eSearch\u003c/strong\u003e Doc indexes for matching sub-documents            |\n| \u003ccode\u003eranker\u003c/code\u003e        | N/A                                             | Rank results by relevance                                             |\u003c/p\u003e\n\u003cp\u003eWe'll dig more into Pod YAML files in the Executor section below.\u003c/p\u003e\n\u003cdiv class=\"alert alert-secondary\" role=\"alert\"\u003e\n\u003csmall\u003e\nTechnically each Pod contains at least one Pea as well. However, this is lower-level and we'll discuss that in another post.\n\u003c/small\u003e\n\u003c/div\u003e\n\u003ch5\u003eWhat Does Each Pod Do?\u003c/h5\u003e\n\u003cp\u003e\u003cstrong\u003eCrafter\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eA Crafter takes our CSV file as input and breaks it down into sub-documents:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/pod-craft.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eTo keep things simple, in our example the Crafter is just splitting each line from the input CSVs into individual sentences. But if we wanted to do a more advanced text search, we could split the document (script) into any level of granularity (like line, sentence, word, etc, a.k.a sub-documents). Each sub-document comes with its own metadata (like \u003ccode\u003edoc_id\u003c/code\u003e, \u003ccode\u003eparent_id\u003c/code\u003e, \u003ccode\u003egranularity\u003c/code\u003e, etc).\u003c/p\u003e\n\u003cdiv class=\"alert alert-secondary\" role=\"alert\"\u003e\n\u003csmall\u003e\nSometimes we call these sub-documents \"Chunks\". A sub-document and a Chunk are exactly the same thing.\n\u003c/small\u003e\n\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003eEncoder\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eAn encoder takes a sub-document and converts it to a \u003ca href=\"https://www.youtube.com/watch?v=gQddtTdmG_8\u0026#x26;t=193s\"\u003evector embedding\u003c/a\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/pod-encode.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eClosely related sub-documents have similar embeddings, for example \u003ccode\u003ejedi\u003c/code\u003e and \u003ccode\u003espace_wizard\u003c/code\u003e would have similar embeddings, while \u003ccode\u003edeath_star\u003c/code\u003e and \u003ccode\u003eprincess\u003c/code\u003e would be very different from each other.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eChunk Indexer\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThe Chunk indexer takes all of the sub-documents and their embeddings as input and creates two indexes as output:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVector index\u003c/strong\u003e: Stores \u003ccode\u003edoc_id\u003c/code\u003e and vector embedding of each sub-document\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eKey-value index\u003c/strong\u003e: Stores \u003ccode\u003edoc_id\u003c/code\u003e, \u003ccode\u003eparent_id\u003c/code\u003e and any metadata associated with each sub-document\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/pod-chunk_idx.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDocument Indexer\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eCreates an index of Documents and their associated \u003ccode\u003edoc_id\u003c/code\u003es for each level of granularity specified:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/pod-doc_idx.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd that's the last step of the Flow for indexing! But wait, there's more to learn before we jump into querying!\u003c/p\u003e\n\u003ch4\u003eExecutors\u003c/h4\u003e\n\u003cp\u003eNow we've processed all that data - but we haven't even dived into the deep learning behind Jina.\u003c/p\u003e\n\u003cp\u003eThat's where our \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101#executors\"\u003eExecutors\u003c/a\u003e come in. Like droids, some of them are \"smart\" (i.e. like an executor in the \u003ccode\u003eencoder\u003c/code\u003e Pod which uses artificial intelligence), while some are just more-or-less mindless automatons (like the indexers). Either way, they're the ones who do all the real work. Everything else is just higher-level wrappers to make them easier to work with.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/executors.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eWe'll use the analogy of Luke flying his X-wing to blow up the Death Star:\u003c/p\u003e\n\u003cp\u003e| X-wing | Pod (the container and \"interface\" that lets R2 fly)\n| R2D2 | Executor (the one who actually does all the work)\n| Luke | Useless bag of flesh who doesn't do much except \"trust the force\", pull the trigger and get the glory\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/EPPvrXLVm6Axy/giphy.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eSince each Pod has a different task, each Pod uses a different executor. After all, you wouldn't ask C3PO to fly an X-wing, and you wouldn't ask R2D2 to \u003cstrike\u003ewander around like a useless gold mannequin who gets lost in the desert\u003c/strike\u003e translate languages. Let's look at our \u003ccode\u003eencoder.yml\u003c/code\u003e Pod as an example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e!TransformerTorchEncoder\nwith:\n  pooling_strategy: auto\n  pretrained_model_name_or_path: distilbert-base-cased\n  max_length: 96\n# More stuff here\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe can see that it uses \u003ccode\u003eTransformerTorchEncoder\u003c/code\u003e to encode our sub-documents into vector embeddings using the \u003ccode\u003edistilbert-base-cased\u003c/code\u003e language model. For example:\u003c/p\u003e\n\u003cp\u003e| Input | Output Vector           |\n| ---                      | ---                     |\n| \u003ccode\u003eHelp me Obi Wan-Kenobi\u003c/code\u003e | \u003ccode\u003e{1.2, 0.6, -3.1, ...}\u003c/code\u003e |\n| \u003ccode\u003eYou're my only hope\u003c/code\u003e    | \u003ccode\u003e{-0.3, 1.5, 0.7, ...}\u003c/code\u003e |\u003c/p\u003e\n\u003cp\u003eIn this way, \u003ccode\u003eTransformerTorchEncoder\u003c/code\u003e is like C3PO. It knows how to translate things to other things, like text to vector embeddings (admittedly, not over 6 million forms of translation, but we only have 3PO's word for that). However, it is probably equally useless at getting out of a desert.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/TZFmvyDvr3WaQ/source.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch4\u003eStorage\u003c/h4\u003e\n\u003cp\u003ePhew, that's a lot of data! But where is it all stored? Jina uses a working directory, usually \u003ccode\u003eworkspace\u003c/code\u003e to store all of the indexes created by the Pods above.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/storage.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eNote that many of the Pods write \u003cem\u003enothing\u003c/em\u003e to storage. They merely pass their output to the next Pod in the Flow. It's only when data needs to be available \u003cem\u003ebetween\u003c/em\u003e Flows that data needs to be written to storage (in our case, the indexes created by \u003ccode\u003echunk_indexer\u003c/code\u003e and \u003ccode\u003edoc_indexer\u003c/code\u003e).\u003c/p\u003e\n\u003ch3\u003eRunning the Indexing Flow\u003c/h3\u003e\n\u003cp\u003eIn the introduction we mentioned this was just meant as an overview and not a \"real\" Flow (though it could be built into a working example). In short, it won't run as is. However, if you \u003cem\u003edid\u003c/em\u003e want to run it, it's as simple as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003epython app.py index\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eQuerying\u003c/h3\u003e\n\u003cp\u003eAt this point the index Flow is out of the picture, so we can safely ignore both the Flow and the original input documents:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/star_wars/flow-query.svg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eThe query Flow is very similar to the indexing Flow. It:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTakes a user query as input (\u003ccode\u003eGive me a hand Mr Space Wizard\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eProcesses it (get its vector)\u003c/li\u003e\n\u003cli\u003ePulls the indexes from storage\u003c/li\u003e\n\u003cli\u003eFinds the closest vectors in the vector index (like the vector for \u003ccode\u003eHelp me Obi-Wan Kenobi\u003c/code\u003e) and gets the \u003ccode\u003edoc_id\u003c/code\u003es\u003c/li\u003e\n\u003cli\u003eRanks the closest matching Documents\u003c/li\u003e\n\u003cli\u003eReturns the ranked list to the user via REST or gRPC\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA human readable version of this ranked list might look like:\u003c/p\u003e\n\u003cp\u003e| Rank | Line                                                                     | Document ID | Parent Doc      | Metadata        |\n| ---  | ---                                                                      | ---         | ---             | ---             |\n| 1    | Help me Obi-Wan Kenobi                                                   | 4501        | 04              | speaker: LEIA   |\n| 2    | Yes, I was once a Jedi Knight the same as your father                    | 4702        | 04              | speaker: OBIWAN |\n| 3    | I'm looking for a Jedi Master                                            | 5304        | 05              | speaker: LUKE   |\u003c/p\u003e\n\u003cp\u003eAnd so on...\u003c/p\u003e\n\u003cp\u003eLike indexing, you'd run the Flow with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003epython app.py query\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eSummary\u003c/h3\u003e\n\u003cp\u003eIn this post we've covered most of the components from \u003ca href=\"https://github.com/jina-ai/jina/tree/master/docs/chapters/101\"\u003eJina 101\u003c/a\u003e, what they do, and how they're hooked together in the context of a simple text-based search.\u003c/p\u003e\n\u003cp\u003eHopefully by now you should understand:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJina searches require indexing and querying Flows\u003c/li\u003e\n\u003cli\u003eFlows can be built in YAML, Python, or \u003ca href=\"https://github.com/jina-ai/dashboard\"\u003eJina Dashboard\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eFlows are called from \u003ccode\u003eapp.py\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eDocuments go through a series of steps in each Flow, being passed through Pods which in turn use Executors to take input, process it, and pass it to the next Pod (and sometimes read from or write to storage)\u003c/li\u003e\n\u003cli\u003eThere may be different Pods in each Flow (in our example, the query Flow lacks \u003ccode\u003ecrafter\u003c/code\u003e Pod, and the indexing Flow lacks \u003ccode\u003eranker\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eOutput is returned as a ranked list of matching Documents, based on similarity of embedding\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs we mentioned at the start, the above is over-simplified and certainly not exhaustive. There's always more to learn and deeper components to dive into.\u003c/p\u003e\n\u003ch3\u003eNext Time\u003c/h3\u003e\n\u003cp\u003eOf course, there's always more to learn, just as there's always yet another Death Star to take down. In future posts we'll cover running Pods and Flows remotely, speeding up performance, improving reliability, searching different kinds of things, and lots more. Let us know which you'd like to learn about via \u003ca href=\"https://twitter.com/jinaAI_\"\u003eTwitter\u003c/a\u003e or our \u003ca href=\"https://slack.jina.ai\"\u003eSlack community\u003c/a\u003e!\u003c/p\u003e\n\u003cp\u003eUntil then, may the Force be with you...\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://media.giphy.com/media/3o85xAojNshmzlySyc/giphy.gif\" alt=\"\"\u003e\u003c/p\u003e\n","coverImage":"/assets/images/blog/star_wars/cover.svg"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"star-wars-workflow"},"buildId":"KJvUyrCoh0MXs5cG--Qn6","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" async=""></script><script src="/_next/static/chunks/framework-94f262366e752bd48d82.js" async=""></script><script src="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" async=""></script><script src="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" async=""></script><script src="/_next/static/chunks/596-13cdde2fb793b77184ee.js" async=""></script><script src="/_next/static/chunks/522-e45333ebcf36799b860c.js" async=""></script><script src="/_next/static/chunks/373-350caaa5387e56e8b807.js" async=""></script><script src="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_buildManifest.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_ssgManifest.js" async=""></script></body></html>