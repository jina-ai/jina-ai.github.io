<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI - a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI - a Neural Search Company"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@Jina AI"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>How To: Extract data from a PDF in Jina | Jina AI</title><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/d6299e18a01a0ac2808b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d6299e18a01a0ac2808b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-94f262366e752bd48d82.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-13cdde2fb793b77184ee.js" as="script"/><link rel="preload" href="/_next/static/chunks/522-e45333ebcf36799b860c.js" as="script"/><link rel="preload" href="/_next/static/chunks/373-350caaa5387e56e8b807.js" as="script"/><link rel="preload" href="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" as="script"/><style id="__jsx-3792957869">.dropdown.jsx-3792957869{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.5rem;--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:24rem;border-radius:0.75rem;}.dropdown.jsx-3792957869>.jsx-3792957869:not([hidden])~.jsx-3792957869:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}.dropdown.jsx-3792957869{box-shadow:3px 6px 33px rgba(205,205,205,0.25);}</style><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-3949856645">.btn.jsx-3949856645{text-align:center;}.btn-base.jsx-3949856645{font-size:1.125rem;font-weight:600;}.btn-xl.jsx-3949856645{padding-top:1rem;padding-bottom:1rem;padding-left:1.5rem;padding-right:1.5rem;font-size:1.25rem;font-weight:800;}.btn-full-rounded.jsx-3949856645{border-radius:9999px;}.btn-primary.jsx-3949856645{border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(0,129,129,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));}.btn-primary.jsx-3949856645:hover{background-color:#009191;}.btn-secondary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(251,203,103,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));}.btn-secondary.jsx-3949856645:hover{background-color:#fbd076;}.btn-tertiary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border:1px solid #999999;}.btn-tertiary.jsx-3949856645:hover{background-color:#f6f6f6;}.btn-outlined.jsx-3949856645{border-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));background-color:transparent;}.btn-outlined.jsx-3949856645:hover{background-color:#f6f6f622;}</style><style id="__jsx-223001487">.navbar.jsx-223001487 a{display:inline-block;width:100%;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-223001487 a .btn{width:100%;}.navbar.jsx-223001487 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-223001487 a,.navbar.jsx-223001487 a .btn{width:auto;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0px;}.navbar.jsx-223001487>(li:not(:last-child)){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-4055754880">.markdown.jsx-4055754880{font-size:1.125rem;line-height:1.625;}.markdown.jsx-4055754880 p.jsx-4055754880,.markdown.jsx-4055754880 ul.jsx-4055754880,.markdown.jsx-4055754880 ol.jsx-4055754880,.markdown.jsx-4055754880 blockquote.jsx-4055754880{margin-top:1.5rem;margin-bottom:1.5rem;}.markdown.jsx-4055754880 h2.jsx-4055754880{margin-top:3rem;margin-bottom:1rem;font-size:1.875rem;line-height:1.375;}.markdown.jsx-4055754880 h3.jsx-4055754880{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;line-height:1.375;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20% / 30% url('/assets/images/planet-beige.svg');}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10% / 50% url('/assets/images/planet-green.svg');}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700">@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-2xl mx-auto px-3 py-6 undefined"><div class="jsx-223001487 flex flex-wrap justify-between items-center"><div class="jsx-223001487"><a class="jsx-223001487" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-223001487 sm:hidden"><button type="button" aria-label="show menu" class="jsx-223001487 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-223001487 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-223001487"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-223001487"></path></svg></button></div><nav class="jsx-223001487 w-full sm:w-auto sm:block mt-2 sm:mt-0 hidden"><ul class="jsx-223001487 navbar flex flex-col sm:flex-row sm:items-center font-medium text-xl text-gray-800 pt-3 pb-5 px-5 sm:p-0 bg-white sm:bg-transparent rounded"><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Products dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Products</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/core" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3792957869 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/hub" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3792957869 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Developers dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Developers</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contribute" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3792957869 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/join" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3792957869 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/learn" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3792957869 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Company dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Company</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/about" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3792957869 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/careers" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/events" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3792957869 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/news" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3792957869 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contact" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block mr-1 font-bold text-gray-700"><a href="/blog/">Blog</a></li><div class="jsx-3128403005 md:hidden h-96 overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/core" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3128403005 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/hub" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3128403005 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contribute" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3128403005 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/join" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3128403005 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/learn" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3128403005 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/about" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3128403005 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/events" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3128403005 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/news" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contact" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></div></ul><span class="jsx-3128403005 text-gray-700 font-semibold text-sm ml-2 p-4">Blog</span></div><li class="jsx-223001487"><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 md:hidden btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></li></ul></nav><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 hidden md:flex btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></div></div></div><div class="mt-24"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col"><img src="/assets/images/blog/how-to-pdf-01.png" alt="How To: Extract data from a PDF in Jina-image" class="mb-4 w-full"/><article class="mb-32 md:max-w-6xl md:shadow-lg xl:rounded-3xl md:px-32 md:py-20 md:mx-auto md:-mt-20 bg-white shadow"><div class="mb-3"></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">How To: Extract data from a PDF in Jina</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/defaultProfileImg.svg" class="w-8 h-auto rounded-full mr-4" alt="Susana Guzmán"/><div class="text-gray-600">Susana Guzmán</div></div><time dateTime="2020-09-24T08:56:39.923Z">24 September, 2020</time></div><div class="jsx-4055754880 mx-auto markdown"><div class="jsx-4055754880"><p>Hello everyone!</p>
<p>In the past weeks, I was working on creating a <code>PDFExtractor</code> so today I’ll show you what I learned and how to extract data from your PDF in <a href="https://jina.ai/">Jina</a>. Also on the way, I learned what a <em>Segmenter</em> does and how it is different from a C_rafter_, so maybe that helps you too.</p>
<p><img src="https://miro.medium.com/max/812/1*AVmnea1f-zzeztIER9LC5Q.jpeg" alt=""></p>
<p>I will split this post into two sections; one will be <strong>how you can use it</strong>, and the other will be <strong>how does that work?</strong> So if for now, you are not interested in how exactly this works, or if you know already, and just want to see the flow-example, go straight into the second part, otherwise, let’s get into the code.</p>
<h3><strong>1) What kind of sorcery is this? (aka how does that work?)</strong></h3>
<p>Ok, the file we’ll be talking about today is the <strong>PDFExtractorSegmenter</strong>, as you can see, it doesn’t even have anything in the <code>__init__</code>function, everything is happening in the <code>craft</code>  function_._</p>
<pre><code class="language-python">def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

    def craft(self, uri: str, buffer: bytes, *args, **kwargs) -> List[Dict]:
        import fitz
        import PyPDF2

        # Open file
        if uri:
        elif buffer:
        else:
            raise ValueError('No value found in "buffer" or "uri"')

        chunks = []
        # Extract images
        with pdf_img:

        # Extract text
        with pdf_text:
      
        return chunks
</code></pre>
<p>So the first thing I noticed here*, was that the <em>Segmenter</em> is returning a <em>List[Dict]</em> instead of <em>Dict</em> as <em>Crafters</em> do, why is that? <strong>So one of the core differences between a <em>Crafter</em> and a <em>Segmenter</em> is that the <em>Crafter</em> transforms 1-to-1 documents, while the <em>Segmenter</em> transforms 1-to-n.</strong> And this was important to notice because when I said *<em>the first thing I noticed here</em>, what I actually meant was “after I finished everything, I realised it wasn’t working and I had no idea why, and it turns out, I couldn’t use a <em>Crafter</em> because a PDF can have images and text, which are multiple documents, and therefore I needed to use a <em>Segmenter</em>” but as you can see, that was too long to write.</p>
<p>So once we know this, we see why we need to use a Segmenter for this. Ok, got it, now what? The next part is to load the PDF document, in Jina we can use the URI of the document, as “cats_are_awesome.pdf”, or directly the buffer data from the file. So then the first part is to check what kind of input are we using:</p>
<pre><code class="language-python"># Open file
        if uri:
            pdf_img = fitz.open(uri)
            pdf_text = open(uri, 'rb')
        elif buffer:
            pdf_text = io.BytesIO(buffer)
            pdf_img = fitz.open(stream=buffer, filetype="pdf")
        else:
            raise ValueError('No value found in "buffer" or "uri"')

</code></pre>
<p>At the time of writing this, I didn’t find any good way to extract data from a PDF for both images and text together, so I decided to use two libraries that work very well for text or for images independently (but if you know of any that can handle both, you are super welcome to let us know or make a PR on <a href="https://github.com/jina-ai/jina/">our repo</a>, we are all for Open Source 🎉 ), and that’s why you see that we read the files twice: Once to extract the images, and once to extract the text.</p>
<p>The next part is pretty straightforward: We simply use those libraries and append the result to the list of chunks we have (aka documents). When we append those chunks we also set if it’s a <code>text</code> or a <code>blob</code> (the images in this case) and the <code>mime_type</code>.</p>
<pre><code class="language-python">if text:
  chunks.append(
    dict(text=text, weight=1.0, mime_type="text/plain"))
</code></pre>
<h3>2) Sure sure, but how can I use it?????</h3>
<p>Good, now that we know how that works we can go on our way to extract all beautiful c̶a̶t̶s̶ data from our PDFs.</p>
<p>In the tests folder, we can see two tests, one of them is to also show how can the <code>PDFExtractorSegmenter</code> works with your flow.</p>
<p>So let’s say you have your “cats_are_awesome.pdf”, which has images (of cats, shocking) and text (a cat poem nonetheless), and you want everything from it:</p>
<pre><code class="language-python">def test_pdf_flow_mix():
    path = os.path.join(cur_dir, 'cats_are_awesome.pdf')
    f = Flow().add(uses='PDFExtractorSegmenter', array_in_pb=True)
    with f:
        f.search(input_fn=search_generator(path=path, buffer=None), output_fn=validate_mix_fn)
</code></pre>
<p>So the first thing will be to create your Flow:</p>
<pre><code class="language-python">`f = Flow().add(uses='PDFExtractorSegmenter', array\_in\_pb=True)`
</code></pre>
<p>There we say that we will use the PDFExtractorSegmenter. For the moment no need to go into the <code>array-in-pb</code> details, but set it to <code>True</code> if you are using images and text combined.</p>
<p>Then we can start our search, and because I’m using <code>.search</code>instead of <code>.search_lines</code> or whatever, I need to create the <em>protobuf</em> <em>document</em> manually and I do that in the <code>search_generator</code>:</p>
<pre><code class="language-python">def search_generator(path: str, buffer: bytes):
    d = jina_pb2.Document()
    if buffer:
        d.buffer = buffer
    if path:
        d.uri = path
    yield d
</code></pre>
<p>Only thing to do there is specify the <em>buffer</em> or the <em>URI</em> to be used. After this, I will validate the results:</p>
<pre><code class="language-python">def validate_mix_fn(resp):
    for d in resp.search.docs:
        for chunk in range(len(d.chunks) - 1):
            img = Image.open(os.path.join(cur_dir, f'test_img_{chunk}.jpg'))
            blob = d.chunks[chunk].blob
            assert blob.shape[1], blob.shape[0] == img.size
        assert expected_text == d.chunks[2].text
</code></pre>
<p>Here is where you could get your data from the PDF and do all kinds of amazing stuff with it, I’m just checking that I’m getting the data I was expecting. The first <code>assert</code> validates the images and the second <code>assert</code> validates the text.</p>
<hr>
<p>And that’s it! You saw what this <code>PDFExtractorSegmenter</code> is doing and how to use it in your Flow 💃🏼💃🏼</p>
<p>Feel free to run this with your own data and contact us if you have any doubts/comments/pics of your cat to show.</p>
<p>You can follow us on <a href="https://twitter.com/jinaAI_">Twitter</a> or <a href="https://github.com/jina-ai">Github,</a> or join our <a href="slack.jina.ai">Slack community</a>.</p>
<p><img src="https://miro.medium.com/max/718/1*W5U_pUWidkqGC01h-9pwUw.jpeg" alt=""></p>
<p>By <a href="https://twitter.com/CapricaReloaded">Susana Guzmán</a> on September 24, 2020.</p>
</div><div class="jsx-4055754880 hidden"><p>Hello everyone!</p>
<p>In the past weeks, I was working on creating a <code>PDFExtractor</code> so today I’ll show you what I learned and how to extract data from your PDF in <a href="https://jina.ai/">Jina</a>. Also on the way, I learned what a <em>Segmenter</em> does and how it is different from a C_rafter_, so maybe that helps you too.</p>
<p><img src="https://miro.medium.com/max/812/1*AVmnea1f-zzeztIER9LC5Q.jpeg" alt=""></p>
<p>I will split this post into two sections; one will be <strong>how you can use it</strong>, and the other will be <strong>how does that work?</strong> So if for now, you are not interested in how exactly this works, or if you know already, and just want to see the flow-example, go straight into the second part, otherwise, let’s get into the code.</p>
<h3><strong>1) What kind of sorcery is this? (aka how does that work?)</strong></h3>
<p>Ok, the file we’ll be talking about today is the <strong>PDFExtractorSegmenter</strong>, as you can see, it doesn’t even have anything in the <code>__init__</code>function, everything is happening in the <code>craft</code>  function_._</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">__init__</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, *args, **kwargs</span><span class="hljs-function">):</span><span>
</span><span>        </span><span style="color:#fb9e00">super</span><span>().__init__(*args, **kwargs)
</span>
<span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">craft</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, uri: </span><span class="hljs-function hljs-params" style="color:#fb9e00">str</span><span class="hljs-function hljs-params">, buffer: </span><span class="hljs-function hljs-params" style="color:#fb9e00">bytes</span><span class="hljs-function hljs-params">, *args, **kwargs</span><span class="hljs-function">) -&gt; </span><span class="hljs-function hljs-type">List</span><span class="hljs-function">[</span><span class="hljs-function hljs-type">Dict</span><span class="hljs-function">]:</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">import</span><span> fitz
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">import</span><span> PyPDF2
</span>
<span>        </span><span style="color:#ac65ff"># Open file</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">if</span><span> uri:
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">elif</span><span> buffer:
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">else</span><span>:
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">raise</span><span> ValueError(</span><span style="color:#4cd213">&#x27;No value found in &quot;buffer&quot; or &quot;uri&quot;&#x27;</span><span>)
</span>
<!-- -->        chunks = []
<span>        </span><span style="color:#ac65ff"># Extract images</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">with</span><span> pdf_img:
</span>
<span>        </span><span style="color:#ac65ff"># Extract text</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">with</span><span> pdf_text:
</span>      
<span>        </span><span style="color:#fb9e00;font-weight:normal">return</span><span> chunks
</span>
</code></pre>
<p>So the first thing I noticed here*, was that the <em>Segmenter</em> is returning a <em>List[Dict]</em> instead of <em>Dict</em> as <em>Crafters</em> do, why is that? <strong>So one of the core differences between a <em>Crafter</em> and a <em>Segmenter</em> is that the <em>Crafter</em> transforms 1-to-1 documents, while the <em>Segmenter</em> transforms 1-to-n.</strong> And this was important to notice because when I said *<em>the first thing I noticed here</em>, what I actually meant was “after I finished everything, I realised it wasn’t working and I had no idea why, and it turns out, I couldn’t use a <em>Crafter</em> because a PDF can have images and text, which are multiple documents, and therefore I needed to use a <em>Segmenter</em>” but as you can see, that was too long to write.</p>
<p>So once we know this, we see why we need to use a Segmenter for this. Ok, got it, now what? The next part is to load the PDF document, in Jina we can use the URI of the document, as “cats_are_awesome.pdf”, or directly the buffer data from the file. So then the first part is to check what kind of input are we using:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#ac65ff"># Open file</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">if</span><span> uri:
</span><span>            pdf_img = fitz.</span><span style="color:#fb9e00">open</span><span>(uri)
</span><span>            pdf_text = </span><span style="color:#fb9e00">open</span><span>(uri, </span><span style="color:#4cd213">&#x27;rb&#x27;</span><span>)
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">elif</span><span> buffer:
</span>            pdf_text = io.BytesIO(buffer)
<span>            pdf_img = fitz.</span><span style="color:#fb9e00">open</span><span>(stream=buffer, filetype=</span><span style="color:#4cd213">&quot;pdf&quot;</span><span>)
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">else</span><span>:
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">raise</span><span> ValueError(</span><span style="color:#4cd213">&#x27;No value found in &quot;buffer&quot; or &quot;uri&quot;&#x27;</span><span>)
</span>
<!-- -->
</code></pre>
<p>At the time of writing this, I didn’t find any good way to extract data from a PDF for both images and text together, so I decided to use two libraries that work very well for text or for images independently (but if you know of any that can handle both, you are super welcome to let us know or make a PR on <a href="https://github.com/jina-ai/jina/">our repo</a>, we are all for Open Source 🎉 ), and that’s why you see that we read the files twice: Once to extract the images, and once to extract the text.</p>
<p>The next part is pretty straightforward: We simply use those libraries and append the result to the list of chunks we have (aka documents). When we append those chunks we also set if it’s a <code>text</code> or a <code>blob</code> (the images in this case) and the <code>mime_type</code>.</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">if</span><span> text:
</span>  chunks.append(
<span>    </span><span style="color:#fb9e00">dict</span><span>(text=text, weight=</span><span style="color:#fa658d">1.0</span><span>, mime_type=</span><span style="color:#4cd213">&quot;text/plain&quot;</span><span>))
</span>
</code></pre>
<h3>2) Sure sure, but how can I use it?????</h3>
<p>Good, now that we know how that works we can go on our way to extract all beautiful c̶a̶t̶s̶ data from our PDFs.</p>
<p>In the tests folder, we can see two tests, one of them is to also show how can the <code>PDFExtractorSegmenter</code> works with your flow.</p>
<p>So let’s say you have your “cats_are_awesome.pdf”, which has images (of cats, shocking) and text (a cat poem nonetheless), and you want everything from it:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">test_pdf_flow_mix</span><span class="hljs-function">():</span><span>
</span><span>    path = os.path.join(cur_dir, </span><span style="color:#4cd213">&#x27;cats_are_awesome.pdf&#x27;</span><span>)
</span><span>    f = Flow().add(uses=</span><span style="color:#4cd213">&#x27;PDFExtractorSegmenter&#x27;</span><span>, array_in_pb=</span><span style="font-weight:normal;color:#fa658d">True</span><span>)
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">with</span><span> f:
</span><span>        f.search(input_fn=search_generator(path=path, buffer=</span><span style="font-weight:normal;color:#fa658d">None</span><span>), output_fn=validate_mix_fn)
</span>
</code></pre>
<p>So the first thing will be to create your Flow:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>`f = Flow().add(uses=</span><span style="color:#4cd213">&#x27;PDFExtractorSegmenter&#x27;</span><span>, array\_</span><span style="color:#fb9e00;font-weight:normal">in</span><span>\_pb=</span><span style="font-weight:normal;color:#fa658d">True</span><span>)`
</span>
</code></pre>
<p>There we say that we will use the PDFExtractorSegmenter. For the moment no need to go into the <code>array-in-pb</code> details, but set it to <code>True</code> if you are using images and text combined.</p>
<p>Then we can start our search, and because I’m using <code>.search</code>instead of <code>.search_lines</code> or whatever, I need to create the <em>protobuf</em> <em>document</em> manually and I do that in the <code>search_generator</code>:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">search_generator</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">path: </span><span class="hljs-function hljs-params" style="color:#fb9e00">str</span><span class="hljs-function hljs-params">, buffer: </span><span class="hljs-function hljs-params" style="color:#fb9e00">bytes</span><span class="hljs-function">):</span><span>
</span>    d = jina_pb2.Document()
<span>    </span><span style="color:#fb9e00;font-weight:normal">if</span><span> buffer:
</span>        d.buffer = buffer
<span>    </span><span style="color:#fb9e00;font-weight:normal">if</span><span> path:
</span>        d.uri = path
<span>    </span><span style="color:#fb9e00;font-weight:normal">yield</span><span> d
</span>
</code></pre>
<p>Only thing to do there is specify the <em>buffer</em> or the <em>URI</em> to be used. After this, I will validate the results:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">validate_mix_fn</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resp</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">for</span><span> d </span><span style="color:#fb9e00;font-weight:normal">in</span><span> resp.search.docs:
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">for</span><span> chunk </span><span style="color:#fb9e00;font-weight:normal">in</span><span> </span><span style="color:#fb9e00">range</span><span>(</span><span style="color:#fb9e00">len</span><span>(d.chunks) - </span><span style="color:#fa658d">1</span><span>):
</span><span>            img = Image.</span><span style="color:#fb9e00">open</span><span>(os.path.join(cur_dir, </span><span style="color:#4cd213">f&#x27;test_img_</span><span style="color:#e3dfff">{chunk}</span><span style="color:#4cd213">.jpg&#x27;</span><span>))
</span>            blob = d.chunks[chunk].blob
<span>            </span><span style="color:#fb9e00;font-weight:normal">assert</span><span> blob.shape[</span><span style="color:#fa658d">1</span><span>], blob.shape[</span><span style="color:#fa658d">0</span><span>] == img.size
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">assert</span><span> expected_text == d.chunks[</span><span style="color:#fa658d">2</span><span>].text
</span>
</code></pre>
<p>Here is where you could get your data from the PDF and do all kinds of amazing stuff with it, I’m just checking that I’m getting the data I was expecting. The first <code>assert</code> validates the images and the second <code>assert</code> validates the text.</p>
<hr>
<p>And that’s it! You saw what this <code>PDFExtractorSegmenter</code> is doing and how to use it in your Flow 💃🏼💃🏼</p>
<p>Feel free to run this with your own data and contact us if you have any doubts/comments/pics of your cat to show.</p>
<p>You can follow us on <a href="https://twitter.com/jinaAI_">Twitter</a> or <a href="https://github.com/jina-ai">Github,</a> or join our <a href="slack.jina.ai">Slack community</a>.</p>
<p><img src="https://miro.medium.com/max/718/1*W5U_pUWidkqGC01h-9pwUw.jpeg" alt=""></p>
<p>By <a href="https://twitter.com/CapricaReloaded">Susana Guzmán</a> on September 24, 2020.</p>
</div></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 pt-20 text-white"><div class="jsx-1956813867 flex flex-col md:flex-row justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin"></div><div class="jsx-1956813867 pr-4 md:py-16 md:mr-16"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/about/">About us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Careers</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contact/">Contact us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/core/">Core</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/hub/">Hub</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Developers</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contribute/">Contribute</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/learn/">Learn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/join/">Join</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://jina-ai.slack.com/">Slack</a></li></ul></nav></div></div><div class="jsx-1956813867 footer-right-margin"></div></div><div class="text-center bg-primary-400 text-gray-100 text-sm mt-12 py-6"><span class="block md:inline-block">© 2021 Jina AI, Ltd. All rights reserved.</span><span class="mx-4 hidden md:inline-block">|</span><a href="/legal"><span>Terms of Service</span></a><span class="mx-4">|</span><a href="/legal"><span>Privacy Policy</span></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"How To: Extract data from a PDF in Jina","date":"2020-09-24T08:56:39.923Z","slug":"How-To-Extract-data-from-a-PDF-in-Jina","author":"Susana Guzmán","content":"\u003cp\u003eHello everyone!\u003c/p\u003e\n\u003cp\u003eIn the past weeks, I was working on creating a \u003ccode\u003ePDFExtractor\u003c/code\u003e so today I’ll show you what I learned and how to extract data from your PDF in \u003ca href=\"https://jina.ai/\"\u003eJina\u003c/a\u003e. Also on the way, I learned what a \u003cem\u003eSegmenter\u003c/em\u003e does and how it is different from a C_rafter_, so maybe that helps you too.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/812/1*AVmnea1f-zzeztIER9LC5Q.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eI will split this post into two sections; one will be \u003cstrong\u003ehow you can use it\u003c/strong\u003e, and the other will be \u003cstrong\u003ehow does that work?\u003c/strong\u003e So if for now, you are not interested in how exactly this works, or if you know already, and just want to see the flow-example, go straight into the second part, otherwise, let’s get into the code.\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003e1) What kind of sorcery is this? (aka how does that work?)\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eOk, the file we’ll be talking about today is the \u003cstrong\u003ePDFExtractorSegmenter\u003c/strong\u003e, as you can see, it doesn’t even have anything in the \u003ccode\u003e__init__\u003c/code\u003efunction, everything is happening in the \u003ccode\u003ecraft\u003c/code\u003e  function_._\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n\n    def craft(self, uri: str, buffer: bytes, *args, **kwargs) -\u003e List[Dict]:\n        import fitz\n        import PyPDF2\n\n        # Open file\n        if uri:\n        elif buffer:\n        else:\n            raise ValueError('No value found in \"buffer\" or \"uri\"')\n\n        chunks = []\n        # Extract images\n        with pdf_img:\n\n        # Extract text\n        with pdf_text:\n      \n        return chunks\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo the first thing I noticed here*, was that the \u003cem\u003eSegmenter\u003c/em\u003e is returning a \u003cem\u003eList[Dict]\u003c/em\u003e instead of \u003cem\u003eDict\u003c/em\u003e as \u003cem\u003eCrafters\u003c/em\u003e do, why is that? \u003cstrong\u003eSo one of the core differences between a \u003cem\u003eCrafter\u003c/em\u003e and a \u003cem\u003eSegmenter\u003c/em\u003e is that the \u003cem\u003eCrafter\u003c/em\u003e transforms 1-to-1 documents, while the \u003cem\u003eSegmenter\u003c/em\u003e transforms 1-to-n.\u003c/strong\u003e And this was important to notice because when I said *\u003cem\u003ethe first thing I noticed here\u003c/em\u003e, what I actually meant was “after I finished everything, I realised it wasn’t working and I had no idea why, and it turns out, I couldn’t use a \u003cem\u003eCrafter\u003c/em\u003e because a PDF can have images and text, which are multiple documents, and therefore I needed to use a \u003cem\u003eSegmenter\u003c/em\u003e” but as you can see, that was too long to write.\u003c/p\u003e\n\u003cp\u003eSo once we know this, we see why we need to use a Segmenter for this. Ok, got it, now what? The next part is to load the PDF document, in Jina we can use the URI of the document, as “cats_are_awesome.pdf”, or directly the buffer data from the file. So then the first part is to check what kind of input are we using:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Open file\n        if uri:\n            pdf_img = fitz.open(uri)\n            pdf_text = open(uri, 'rb')\n        elif buffer:\n            pdf_text = io.BytesIO(buffer)\n            pdf_img = fitz.open(stream=buffer, filetype=\"pdf\")\n        else:\n            raise ValueError('No value found in \"buffer\" or \"uri\"')\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAt the time of writing this, I didn’t find any good way to extract data from a PDF for both images and text together, so I decided to use two libraries that work very well for text or for images independently (but if you know of any that can handle both, you are super welcome to let us know or make a PR on \u003ca href=\"https://github.com/jina-ai/jina/\"\u003eour repo\u003c/a\u003e, we are all for Open Source 🎉 ), and that’s why you see that we read the files twice: Once to extract the images, and once to extract the text.\u003c/p\u003e\n\u003cp\u003eThe next part is pretty straightforward: We simply use those libraries and append the result to the list of chunks we have (aka documents). When we append those chunks we also set if it’s a \u003ccode\u003etext\u003c/code\u003e or a \u003ccode\u003eblob\u003c/code\u003e (the images in this case) and the \u003ccode\u003emime_type\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eif text:\n  chunks.append(\n    dict(text=text, weight=1.0, mime_type=\"text/plain\"))\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e2) Sure sure, but how can I use it?????\u003c/h3\u003e\n\u003cp\u003eGood, now that we know how that works we can go on our way to extract all beautiful c̶a̶t̶s̶ data from our PDFs.\u003c/p\u003e\n\u003cp\u003eIn the tests folder, we can see two tests, one of them is to also show how can the \u003ccode\u003ePDFExtractorSegmenter\u003c/code\u003e works with your flow.\u003c/p\u003e\n\u003cp\u003eSo let’s say you have your “cats_are_awesome.pdf”, which has images (of cats, shocking) and text (a cat poem nonetheless), and you want everything from it:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef test_pdf_flow_mix():\n    path = os.path.join(cur_dir, 'cats_are_awesome.pdf')\n    f = Flow().add(uses='PDFExtractorSegmenter', array_in_pb=True)\n    with f:\n        f.search(input_fn=search_generator(path=path, buffer=None), output_fn=validate_mix_fn)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo the first thing will be to create your Flow:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e`f = Flow().add(uses='PDFExtractorSegmenter', array\\_in\\_pb=True)`\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere we say that we will use the PDFExtractorSegmenter. For the moment no need to go into the \u003ccode\u003earray-in-pb\u003c/code\u003e details, but set it to \u003ccode\u003eTrue\u003c/code\u003e if you are using images and text combined.\u003c/p\u003e\n\u003cp\u003eThen we can start our search, and because I’m using \u003ccode\u003e.search\u003c/code\u003einstead of \u003ccode\u003e.search_lines\u003c/code\u003e or whatever, I need to create the \u003cem\u003eprotobuf\u003c/em\u003e \u003cem\u003edocument\u003c/em\u003e manually and I do that in the \u003ccode\u003esearch_generator\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef search_generator(path: str, buffer: bytes):\n    d = jina_pb2.Document()\n    if buffer:\n        d.buffer = buffer\n    if path:\n        d.uri = path\n    yield d\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnly thing to do there is specify the \u003cem\u003ebuffer\u003c/em\u003e or the \u003cem\u003eURI\u003c/em\u003e to be used. After this, I will validate the results:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef validate_mix_fn(resp):\n    for d in resp.search.docs:\n        for chunk in range(len(d.chunks) - 1):\n            img = Image.open(os.path.join(cur_dir, f'test_img_{chunk}.jpg'))\n            blob = d.chunks[chunk].blob\n            assert blob.shape[1], blob.shape[0] == img.size\n        assert expected_text == d.chunks[2].text\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is where you could get your data from the PDF and do all kinds of amazing stuff with it, I’m just checking that I’m getting the data I was expecting. The first \u003ccode\u003eassert\u003c/code\u003e validates the images and the second \u003ccode\u003eassert\u003c/code\u003e validates the text.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eAnd that’s it! You saw what this \u003ccode\u003ePDFExtractorSegmenter\u003c/code\u003e is doing and how to use it in your Flow 💃🏼💃🏼\u003c/p\u003e\n\u003cp\u003eFeel free to run this with your own data and contact us if you have any doubts/comments/pics of your cat to show.\u003c/p\u003e\n\u003cp\u003eYou can follow us on \u003ca href=\"https://twitter.com/jinaAI_\"\u003eTwitter\u003c/a\u003e or \u003ca href=\"https://github.com/jina-ai\"\u003eGithub,\u003c/a\u003e or join our \u003ca href=\"slack.jina.ai\"\u003eSlack community\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/718/1*W5U_pUWidkqGC01h-9pwUw.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBy \u003ca href=\"https://twitter.com/CapricaReloaded\"\u003eSusana Guzmán\u003c/a\u003e on September 24, 2020.\u003c/p\u003e\n","coverImage":"/assets/images/blog/how-to-pdf-01.png"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"How-To-Extract-data-from-a-PDF-in-Jina"},"buildId":"KJvUyrCoh0MXs5cG--Qn6","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" async=""></script><script src="/_next/static/chunks/framework-94f262366e752bd48d82.js" async=""></script><script src="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" async=""></script><script src="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" async=""></script><script src="/_next/static/chunks/596-13cdde2fb793b77184ee.js" async=""></script><script src="/_next/static/chunks/522-e45333ebcf36799b860c.js" async=""></script><script src="/_next/static/chunks/373-350caaa5387e56e8b807.js" async=""></script><script src="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_buildManifest.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_ssgManifest.js" async=""></script></body></html>