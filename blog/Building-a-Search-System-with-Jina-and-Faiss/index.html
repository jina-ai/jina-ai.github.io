<!DOCTYPE html><html lang="en"><head><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI - a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI - a Neural Search Company"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@Jina AI"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>Building a Search System with Jina and Faiss | Jina AI</title><meta name="next-head-count" content="30"/><link rel="preload" href="/_next/static/css/fe899bbacd9f421acb64.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fe899bbacd9f421acb64.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-c7e7b5bd25cf2fa33784.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-94f262366e752bd48d82.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-b8f858e798d8bb1fd679.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-13cdde2fb793b77184ee.js" as="script"/><link rel="preload" href="/_next/static/chunks/522-e45333ebcf36799b860c.js" as="script"/><link rel="preload" href="/_next/static/chunks/373-350caaa5387e56e8b807.js" as="script"/><link rel="preload" href="/_next/static/chunks/93-d39fe6d1ec4ad9d5d4fc.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-f696244b1bc09a37c8f2.js" as="script"/><style id="__jsx-3792957869">.dropdown.jsx-3792957869{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.5rem;--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:24rem;border-radius:0.75rem;}.dropdown.jsx-3792957869>.jsx-3792957869:not([hidden])~.jsx-3792957869:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}.dropdown.jsx-3792957869{box-shadow:3px 6px 33px rgba(205,205,205,0.25);}</style><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-3949856645">.btn.jsx-3949856645{text-align:center;}.btn-base.jsx-3949856645{font-size:1.125rem;font-weight:600;}.btn-xl.jsx-3949856645{padding-top:1rem;padding-bottom:1rem;padding-left:1.5rem;padding-right:1.5rem;font-size:1.25rem;font-weight:800;}.btn-full-rounded.jsx-3949856645{border-radius:9999px;}.btn-primary.jsx-3949856645{border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(0,129,129,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));}.btn-primary.jsx-3949856645:hover{background-color:#009191;}.btn-secondary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(251,203,103,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));}.btn-secondary.jsx-3949856645:hover{background-color:#fbd076;}.btn-tertiary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border:1px solid #999999;}.btn-tertiary.jsx-3949856645:hover{background-color:#f6f6f6;}.btn-outlined.jsx-3949856645{border-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));background-color:transparent;}.btn-outlined.jsx-3949856645:hover{background-color:#f6f6f622;}</style><style id="__jsx-223001487">.navbar.jsx-223001487 a{display:inline-block;width:100%;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-223001487 a .btn{width:100%;}.navbar.jsx-223001487 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-223001487 a,.navbar.jsx-223001487 a .btn{width:auto;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0px;}.navbar.jsx-223001487>(li:not(:last-child)){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-4055754880">.markdown.jsx-4055754880{font-size:1.125rem;line-height:1.625;}.markdown.jsx-4055754880 p.jsx-4055754880,.markdown.jsx-4055754880 ul.jsx-4055754880,.markdown.jsx-4055754880 ol.jsx-4055754880,.markdown.jsx-4055754880 blockquote.jsx-4055754880{margin-top:1.5rem;margin-bottom:1.5rem;}.markdown.jsx-4055754880 h2.jsx-4055754880{margin-top:3rem;margin-bottom:1rem;font-size:1.875rem;line-height:1.375;}.markdown.jsx-4055754880 h3.jsx-4055754880{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;line-height:1.375;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20% / 30% url('/assets/images/planet-beige.svg');}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10% / 50% url('/assets/images/planet-green.svg');}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap">@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-2xl mx-auto px-3 py-6 undefined"><div class="jsx-223001487 flex flex-wrap justify-between items-center"><div class="jsx-223001487"><a class="jsx-223001487" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-223001487 sm:hidden"><button type="button" aria-label="show menu" class="jsx-223001487 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-223001487 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-223001487"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-223001487"></path></svg></button></div><nav class="jsx-223001487 w-full sm:w-auto sm:block mt-2 sm:mt-0 hidden"><ul class="jsx-223001487 navbar flex flex-col sm:flex-row sm:items-center font-medium text-xl text-gray-800 pt-3 pb-5 px-5 sm:p-0 bg-white sm:bg-transparent rounded"><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Products dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Products</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/core" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3792957869 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/hub" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3792957869 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Developers dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Developers</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contribute" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3792957869 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/join" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3792957869 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/learn" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3792957869 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Company dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Company</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/about" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3792957869 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/careers" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/events" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3792957869 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/news" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3792957869 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contact" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block mr-1 font-bold text-gray-700"><a href="/blog/">Blog</a></li><div class="jsx-3128403005 md:hidden h-96 overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/core" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3128403005 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/hub" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3128403005 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contribute" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3128403005 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/join" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3128403005 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/learn" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3128403005 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/about" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3128403005 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/events" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3128403005 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/news" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contact" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></div></ul><span class="jsx-3128403005 text-gray-700 font-semibold text-sm ml-2 p-4">Blog</span></div><li class="jsx-223001487"><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 md:hidden btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></li></ul></nav><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 hidden md:flex btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></div></div></div><div class="mt-24"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col"><img src="/assets/images/blog/jina-and-faiss-01.png" alt="Building a Search System with Jina and Faiss-image" class="mb-4 w-full"/><article class="mb-32 md:max-w-6xl md:shadow-lg xl:rounded-3xl md:px-32 md:py-20 md:mx-auto md:-mt-20 bg-white shadow"><div class="mb-3"><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">FAISS</div><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">nlp</div></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">Building a Search System with Jina and Faiss</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/team/avatar-default.svg" class="w-8 h-auto rounded-full mr-4" alt="Susana Guzmán"/><div class="text-gray-600">Susana Guzmán</div></div><time dateTime="2020-08-07T08:56:39.923Z">7 August, 2020</time></div><div class="jsx-4055754880 mx-auto markdown"><div class="jsx-4055754880 "><p>So, today let’s create a Search System using <strong>Jina</strong> and <strong>Facebook AI Similarity Search</strong>, or <strong>FAISS</strong> for us pals. I’m using the example that is already in Jina documentation and going a bit deeper into some of the parts that I had trouble getting right.</p>
<p><img src="https://miro.medium.com/max/616/1*d2q2KvG6Zt_MDf3_aw2iWg.jpeg" alt=""></p>
<p>But first of all, let’s clone the code from <a href="https://github.com/jina-ai/examples/tree/master/advanced-vector-search">there</a> and make sure to get the <a href="https://hub.docker.com/u/jinahub">docker image</a> too.</p>
<h2>Prepare the data</h2>
<p>Ok, so now you have the code example and the docker image. You might think this is enough data preparation, but not really cause machine learning REALLY loves preparing data. So now let’s get the dataset we’ll use.</p>
<p>For this example we will use the <a href="http://corpus-texmex.irisa.fr/">ANN_SIFT10k</a> as our dataset, this one is already divided into 3 parts so we don’t need to worry about doing that ourselves.</p>
<ol>
<li>Vectors to index</li>
<li>Vectors to train</li>
<li>Vectors to query</li>
</ol>
<p>We will create a temporary folder and store the dataset there. You can do all that with the command</p>
<p><code>./get_siftsmall.sh</code></p>
<p>Then we will create a Workspace directory, where we will use the dataset we previously fetched, convert it into binary mode and use it as a training data</p>
<p><code>./generate_training_data.sh</code></p>
<h2>The cool part after the boring part</h2>
<p>So we have a lot of vectors now…yay? now what? The first thing we’ll do is to index the data</p>
<p><code>python app.py -t index -n $batch_size</code></p>
<p>You can use whatever you want as batch size, I used 30 as a reminder that 30s are the new 20s.</p>
<p>So because we passed the flag “index”, the first thing <code>app.py</code> will do is call <code>flow-index.yml</code> Flow.</p>
<p><strong>Jina</strong> uses <strong>Flows</strong> as a cool way to abstract high-level tasks, as indexing in this case, and querying later on the example. There’s a really nice documentation on how this works <a href="https://docs.jina.ai/chapters/101/index.html">here</a>. But even if you haven’t seen it and you’ll “check it out later”, you can still get the gist of the example. Just see it as a high-level task for the moment. So as an index Flow at the moment.</p>
<p>In <code>flow-index.yml</code> we use 3 <strong>Pods:</strong> crafter, encoder and indexer</p>
<p><img src="https://miro.medium.com/max/783/1*7Ri3hne2MXAm353YIVV8Lg.png" alt=""></p>
<p>Don’t worry about the <strong>crafter</strong> and the <strong>encoder</strong> now**,** let’s check what the <strong>indexer</strong> does.</p>
<p>The <code>indexer.yml</code>  will take care of setting the name of the index file (<code>faiss_index.tgz</code>), and the filepath (<code>./workspace</code>) and prepare it as a NumpyIndexer.</p>
<p>Okaaaaaay, that was a lot of stuff, but now we have our index ready.</p>
<p><img src="https://miro.medium.com/max/569/1*xb4glMrhrj4PUtB_GR9lag.gif" alt=""></p>
<h2>Query time!</h2>
<p>So now that we have our index ready, is time to search for something. Since we used the ANN_SIFT10k that is already divided, we can use the query subset that we have ready so no need to do anything else besides running the command:</p>
<p><code>python app.py -t query</code></p>
<p><img src="https://miro.medium.com/max/948/1*C4CWxp1iJdk1o1HSv9Rflw.png" alt=""></p>
<p>Uhm yeah ok? and what is happening here? what are those results? what is that recall? what’s the meaning of life? you may ask. I’m so glad you asked, thank you.</p>
<p>So what is happening here is that just as last time we used the <code>flow-index.yml</code>, this time we will use the <strong>Flow</strong> <code>flow-query.yml</code><em>,</em> and here is finally where we use the <strong>Faiss</strong> library.</p>
<p><img src="https://miro.medium.com/max/948/1*rbUAX6G_pz1HTPTVVFPPjQ.png" alt=""></p>
<p>This time we have 4 <strong>Pods</strong>; the <strong>crafter</strong>, the <strong>encoder</strong>, the <strong>indexer,</strong> and the <strong>ranker</strong>.</p>
<p>Let’s keep ignoring the crafter and indexer, for now, ¯\_(ツ)_/¯, and let’s see what the <strong>indexer</strong> is doing since it’s the interesting part.</p>
<p><img src="https://miro.medium.com/max/948/1*lPXRFMI-MmRe5mzeNDLshw.png" alt=""></p>
<p>Here we see that we are using the docker image we got from the <a href="https://hub.docker.com/u/jinahub">GitHub link</a>, as well as the <code>query-indexer.yml</code>. If we check the query-indexer, we can see it has a FaissIndexer, WHAT A COINCIDENCE, this is exactly what we’re talking about.</p>
<p><img src="https://miro.medium.com/max/604/1*U2ZlpFedQyIemcnnfEstUg.png" alt=""></p>
<p>Now, the <strong>FaissIndexer</strong> has 3 parameters:</p>
<ul>
<li><strong><code>index_key</code></strong>: This determines the type of vector index we use. In this case, we are using <strong>IVF10</strong> that will create an index with <strong>Inverted Index</strong> and with 10 clusters. You can change this and use more complex inverted indices that would lead to optimized results. We used IVF10 in this example and you can see its details in the <a href="https://github.com/facebookresearch/faiss/wiki/The-index-factory">faiss index factory</a> and tweak it if you want to.</li>
<li><strong><code>train_filepath</code></strong>: This is the path where we have our training data</li>
<li><strong><code>ref_indexer</code></strong>: This is showing it uses a <strong><code>numpyIndexer</code></strong>, since it is the format we used while creating the index in the previous step. And finally, we set the name of the file where to store the index.</li>
</ul>
<h2>Show me the results!</h2>
<p><img src="https://miro.medium.com/max/812/1*DDt2OpXjkFiFsPsgfuE4hQ.jpeg" alt=""></p>
<p>Wow, that was a lot of stuff doing stuff. Let’s see the results again, and see what they mean</p>
<p><img src="https://miro.medium.com/max/948/1*cjq8O5b1epQUTfnu4vwsIg.png" alt=""></p>
<p>So if you scroll on your terminal, you’ll see many query ids, 100 to be exact, and those are the 100 vectors we had on our query subset, so we are going through all of them, and for each one, you’ll see <strong><code>k-results</code></strong>.</p>
<p>The default <strong><code>k</code></strong> is 5, you can change that in <code>app.py</code> if you want, I set it as 50 for this example.</p>
<p><img src="https://miro.medium.com/max/948/1*fXe7pWi2Q-QuQC9y4kdcoQ.png" alt=""></p>
<p>So in this example, you’ll see 100 queries, with 50 results per query. It will show you the DocId and its Ranking Score.</p>
<h2>Test our results</h2>
<p>At the bottom you’ll also see the <code>recall@k</code>, this helps us to understand how well our prediction was by comparing it to the ground truth we already have.</p>
<p>What is happening here is that between the k-top results, so between the 50-top results in my case, it will check how many of those are actually the <strong>true</strong> <strong>nearest neighbor.</strong> Or in other words, it checks how many times the <strong>true</strong> <strong>nearest neighbor</strong> we have from the ground truth, is returned in my 50-top result, or the k-top result you specified.</p>
<p>And that’s it! that was a lot of doing stuff and learning stuff but we managed to build our vector search engine!</p>
<p><img src="https://miro.medium.com/max/812/1*B0XVPhMbivY65ZsX33X7Yg.jpeg" alt=""></p>
<p>So that’s it for today. I hope you enjoyed this and check all the other cool examples that the <a href="https://github.com/jina-ai/examples">Jina GitHub</a> has.</p>
</div></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 pt-20 text-white"><div class="jsx-1956813867 flex flex-col md:flex-row justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin"></div><div class="jsx-1956813867 pr-4 md:py-16 md:mr-16"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/about/">About us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Careers</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contact/">Contact us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/core/">Core</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/hub/">Hub</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Developers</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contribute/">Contribute</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/learn/">Learn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/join/">Join</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://jina-ai.slack.com/">Slack</a></li></ul></nav></div></div><div class="jsx-1956813867 footer-right-margin"></div></div><div class="text-center bg-primary-400 text-gray-100 text-sm mt-12 py-6"><span class="block md:inline-block">© 2021 Jina AI GmbH. All rights reserved.</span><span class="mx-4 hidden md:inline-block">|</span><a href="/legal"><span>Terms of Service</span></a><span class="mx-4">|</span><a href="/legal"><span>Privacy Policy</span></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Building a Search System with Jina and Faiss","date":"2020-08-07T08:56:39.923Z","slug":"Building-a-Search-System-with-Jina-and-Faiss","author":"Susana Guzmán","content":"\u003cp\u003eSo, today let’s create a Search System using \u003cstrong\u003eJina\u003c/strong\u003e and \u003cstrong\u003eFacebook AI Similarity Search\u003c/strong\u003e, or \u003cstrong\u003eFAISS\u003c/strong\u003e for us pals. I’m using the example that is already in Jina documentation and going a bit deeper into some of the parts that I had trouble getting right.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/616/1*d2q2KvG6Zt_MDf3_aw2iWg.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBut first of all, let’s clone the code from \u003ca href=\"https://github.com/jina-ai/examples/tree/master/advanced-vector-search\"\u003ethere\u003c/a\u003e and make sure to get the \u003ca href=\"https://hub.docker.com/u/jinahub\"\u003edocker image\u003c/a\u003e too.\u003c/p\u003e\n\u003ch2\u003ePrepare the data\u003c/h2\u003e\n\u003cp\u003eOk, so now you have the code example and the docker image. You might think this is enough data preparation, but not really cause machine learning REALLY loves preparing data. So now let’s get the dataset we’ll use.\u003c/p\u003e\n\u003cp\u003eFor this example we will use the \u003ca href=\"http://corpus-texmex.irisa.fr/\"\u003eANN_SIFT10k\u003c/a\u003e as our dataset, this one is already divided into 3 parts so we don’t need to worry about doing that ourselves.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eVectors to index\u003c/li\u003e\n\u003cli\u003eVectors to train\u003c/li\u003e\n\u003cli\u003eVectors to query\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWe will create a temporary folder and store the dataset there. You can do all that with the command\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e./get_siftsmall.sh\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThen we will create a Workspace directory, where we will use the dataset we previously fetched, convert it into binary mode and use it as a training data\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e./generate_training_data.sh\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003eThe cool part after the boring part\u003c/h2\u003e\n\u003cp\u003eSo we have a lot of vectors now…yay? now what? The first thing we’ll do is to index the data\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003epython app.py -t index -n $batch_size\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eYou can use whatever you want as batch size, I used 30 as a reminder that 30s are the new 20s.\u003c/p\u003e\n\u003cp\u003eSo because we passed the flag “index”, the first thing \u003ccode\u003eapp.py\u003c/code\u003e will do is call \u003ccode\u003eflow-index.yml\u003c/code\u003e Flow.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eJina\u003c/strong\u003e uses \u003cstrong\u003eFlows\u003c/strong\u003e as a cool way to abstract high-level tasks, as indexing in this case, and querying later on the example. There’s a really nice documentation on how this works \u003ca href=\"https://docs.jina.ai/chapters/101/index.html\"\u003ehere\u003c/a\u003e. But even if you haven’t seen it and you’ll “check it out later”, you can still get the gist of the example. Just see it as a high-level task for the moment. So as an index Flow at the moment.\u003c/p\u003e\n\u003cp\u003eIn \u003ccode\u003eflow-index.yml\u003c/code\u003e we use 3 \u003cstrong\u003ePods:\u003c/strong\u003e crafter, encoder and indexer\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/783/1*7Ri3hne2MXAm353YIVV8Lg.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eDon’t worry about the \u003cstrong\u003ecrafter\u003c/strong\u003e and the \u003cstrong\u003eencoder\u003c/strong\u003e now**,** let’s check what the \u003cstrong\u003eindexer\u003c/strong\u003e does.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003eindexer.yml\u003c/code\u003e  will take care of setting the name of the index file (\u003ccode\u003efaiss_index.tgz\u003c/code\u003e), and the filepath (\u003ccode\u003e./workspace\u003c/code\u003e) and prepare it as a NumpyIndexer.\u003c/p\u003e\n\u003cp\u003eOkaaaaaay, that was a lot of stuff, but now we have our index ready.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/569/1*xb4glMrhrj4PUtB_GR9lag.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2\u003eQuery time!\u003c/h2\u003e\n\u003cp\u003eSo now that we have our index ready, is time to search for something. Since we used the ANN_SIFT10k that is already divided, we can use the query subset that we have ready so no need to do anything else besides running the command:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003epython app.py -t query\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/948/1*C4CWxp1iJdk1o1HSv9Rflw.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eUhm yeah ok? and what is happening here? what are those results? what is that recall? what’s the meaning of life? you may ask. I’m so glad you asked, thank you.\u003c/p\u003e\n\u003cp\u003eSo what is happening here is that just as last time we used the \u003ccode\u003eflow-index.yml\u003c/code\u003e, this time we will use the \u003cstrong\u003eFlow\u003c/strong\u003e \u003ccode\u003eflow-query.yml\u003c/code\u003e\u003cem\u003e,\u003c/em\u003e and here is finally where we use the \u003cstrong\u003eFaiss\u003c/strong\u003e library.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/948/1*rbUAX6G_pz1HTPTVVFPPjQ.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eThis time we have 4 \u003cstrong\u003ePods\u003c/strong\u003e; the \u003cstrong\u003ecrafter\u003c/strong\u003e, the \u003cstrong\u003eencoder\u003c/strong\u003e, the \u003cstrong\u003eindexer,\u003c/strong\u003e and the \u003cstrong\u003eranker\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eLet’s keep ignoring the crafter and indexer, for now, ¯\\_(ツ)_/¯, and let’s see what the \u003cstrong\u003eindexer\u003c/strong\u003e is doing since it’s the interesting part.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/948/1*lPXRFMI-MmRe5mzeNDLshw.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eHere we see that we are using the docker image we got from the \u003ca href=\"https://hub.docker.com/u/jinahub\"\u003eGitHub link\u003c/a\u003e, as well as the \u003ccode\u003equery-indexer.yml\u003c/code\u003e. If we check the query-indexer, we can see it has a FaissIndexer, WHAT A COINCIDENCE, this is exactly what we’re talking about.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/604/1*U2ZlpFedQyIemcnnfEstUg.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eNow, the \u003cstrong\u003eFaissIndexer\u003c/strong\u003e has 3 parameters:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eindex_key\u003c/code\u003e\u003c/strong\u003e: This determines the type of vector index we use. In this case, we are using \u003cstrong\u003eIVF10\u003c/strong\u003e that will create an index with \u003cstrong\u003eInverted Index\u003c/strong\u003e and with 10 clusters. You can change this and use more complex inverted indices that would lead to optimized results. We used IVF10 in this example and you can see its details in the \u003ca href=\"https://github.com/facebookresearch/faiss/wiki/The-index-factory\"\u003efaiss index factory\u003c/a\u003e and tweak it if you want to.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003etrain_filepath\u003c/code\u003e\u003c/strong\u003e: This is the path where we have our training data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eref_indexer\u003c/code\u003e\u003c/strong\u003e: This is showing it uses a \u003cstrong\u003e\u003ccode\u003enumpyIndexer\u003c/code\u003e\u003c/strong\u003e, since it is the format we used while creating the index in the previous step. And finally, we set the name of the file where to store the index.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eShow me the results!\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/812/1*DDt2OpXjkFiFsPsgfuE4hQ.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eWow, that was a lot of stuff doing stuff. Let’s see the results again, and see what they mean\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/948/1*cjq8O5b1epQUTfnu4vwsIg.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eSo if you scroll on your terminal, you’ll see many query ids, 100 to be exact, and those are the 100 vectors we had on our query subset, so we are going through all of them, and for each one, you’ll see \u003cstrong\u003e\u003ccode\u003ek-results\u003c/code\u003e\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eThe default \u003cstrong\u003e\u003ccode\u003ek\u003c/code\u003e\u003c/strong\u003e is 5, you can change that in \u003ccode\u003eapp.py\u003c/code\u003e if you want, I set it as 50 for this example.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/948/1*fXe7pWi2Q-QuQC9y4kdcoQ.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eSo in this example, you’ll see 100 queries, with 50 results per query. It will show you the DocId and its Ranking Score.\u003c/p\u003e\n\u003ch2\u003eTest our results\u003c/h2\u003e\n\u003cp\u003eAt the bottom you’ll also see the \u003ccode\u003erecall@k\u003c/code\u003e, this helps us to understand how well our prediction was by comparing it to the ground truth we already have.\u003c/p\u003e\n\u003cp\u003eWhat is happening here is that between the k-top results, so between the 50-top results in my case, it will check how many of those are actually the \u003cstrong\u003etrue\u003c/strong\u003e \u003cstrong\u003enearest neighbor.\u003c/strong\u003e Or in other words, it checks how many times the \u003cstrong\u003etrue\u003c/strong\u003e \u003cstrong\u003enearest neighbor\u003c/strong\u003e we have from the ground truth, is returned in my 50-top result, or the k-top result you specified.\u003c/p\u003e\n\u003cp\u003eAnd that’s it! that was a lot of doing stuff and learning stuff but we managed to build our vector search engine!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/max/812/1*B0XVPhMbivY65ZsX33X7Yg.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eSo that’s it for today. I hope you enjoyed this and check all the other cool examples that the \u003ca href=\"https://github.com/jina-ai/examples\"\u003eJina GitHub\u003c/a\u003e has.\u003c/p\u003e\n","coverImage":"/assets/images/blog/jina-and-faiss-01.png","tags":["FAISS","nlp"]}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"Building-a-Search-System-with-Jina-and-Faiss"},"buildId":"ht-EdjN8iL7AN7mXirkr0","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-c7e7b5bd25cf2fa33784.js" async=""></script><script src="/_next/static/chunks/framework-94f262366e752bd48d82.js" async=""></script><script src="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" async=""></script><script src="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-b8f858e798d8bb1fd679.js" async=""></script><script src="/_next/static/chunks/596-13cdde2fb793b77184ee.js" async=""></script><script src="/_next/static/chunks/522-e45333ebcf36799b860c.js" async=""></script><script src="/_next/static/chunks/373-350caaa5387e56e8b807.js" async=""></script><script src="/_next/static/chunks/93-d39fe6d1ec4ad9d5d4fc.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f696244b1bc09a37c8f2.js" async=""></script><script src="/_next/static/ht-EdjN8iL7AN7mXirkr0/_buildManifest.js" async=""></script><script src="/_next/static/ht-EdjN8iL7AN7mXirkr0/_ssgManifest.js" async=""></script></body></html>