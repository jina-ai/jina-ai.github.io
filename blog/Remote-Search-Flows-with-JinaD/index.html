<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI - a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI - a Neural Search Company"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@Jina AI"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>Remote Search Flows with JinaD | Jina AI</title><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/d6299e18a01a0ac2808b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d6299e18a01a0ac2808b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-94f262366e752bd48d82.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-13cdde2fb793b77184ee.js" as="script"/><link rel="preload" href="/_next/static/chunks/522-e45333ebcf36799b860c.js" as="script"/><link rel="preload" href="/_next/static/chunks/373-350caaa5387e56e8b807.js" as="script"/><link rel="preload" href="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" as="script"/><style id="__jsx-3792957869">.dropdown.jsx-3792957869{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.5rem;--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:24rem;border-radius:0.75rem;}.dropdown.jsx-3792957869>.jsx-3792957869:not([hidden])~.jsx-3792957869:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}.dropdown.jsx-3792957869{box-shadow:3px 6px 33px rgba(205,205,205,0.25);}</style><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-3949856645">.btn.jsx-3949856645{text-align:center;}.btn-base.jsx-3949856645{font-size:1.125rem;font-weight:600;}.btn-xl.jsx-3949856645{padding-top:1rem;padding-bottom:1rem;padding-left:1.5rem;padding-right:1.5rem;font-size:1.25rem;font-weight:800;}.btn-full-rounded.jsx-3949856645{border-radius:9999px;}.btn-primary.jsx-3949856645{border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(0,129,129,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));}.btn-primary.jsx-3949856645:hover{background-color:#009191;}.btn-secondary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(251,203,103,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));}.btn-secondary.jsx-3949856645:hover{background-color:#fbd076;}.btn-tertiary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border:1px solid #999999;}.btn-tertiary.jsx-3949856645:hover{background-color:#f6f6f6;}.btn-outlined.jsx-3949856645{border-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));background-color:transparent;}.btn-outlined.jsx-3949856645:hover{background-color:#f6f6f622;}</style><style id="__jsx-223001487">.navbar.jsx-223001487 a{display:inline-block;width:100%;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-223001487 a .btn{width:100%;}.navbar.jsx-223001487 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-223001487 a,.navbar.jsx-223001487 a .btn{width:auto;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0px;}.navbar.jsx-223001487>(li:not(:last-child)){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-4055754880">.markdown.jsx-4055754880{font-size:1.125rem;line-height:1.625;}.markdown.jsx-4055754880 p.jsx-4055754880,.markdown.jsx-4055754880 ul.jsx-4055754880,.markdown.jsx-4055754880 ol.jsx-4055754880,.markdown.jsx-4055754880 blockquote.jsx-4055754880{margin-top:1.5rem;margin-bottom:1.5rem;}.markdown.jsx-4055754880 h2.jsx-4055754880{margin-top:3rem;margin-bottom:1rem;font-size:1.875rem;line-height:1.375;}.markdown.jsx-4055754880 h3.jsx-4055754880{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;line-height:1.375;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20% / 30% url('/assets/images/planet-beige.svg');}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10% / 50% url('/assets/images/planet-green.svg');}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700">@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-2xl mx-auto px-3 py-6 undefined"><div class="jsx-223001487 flex flex-wrap justify-between items-center"><div class="jsx-223001487"><a class="jsx-223001487" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-223001487 sm:hidden"><button type="button" aria-label="show menu" class="jsx-223001487 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-223001487 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-223001487"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-223001487"></path></svg></button></div><nav class="jsx-223001487 w-full sm:w-auto sm:block mt-2 sm:mt-0 hidden"><ul class="jsx-223001487 navbar flex flex-col sm:flex-row sm:items-center font-medium text-xl text-gray-800 pt-3 pb-5 px-5 sm:p-0 bg-white sm:bg-transparent rounded"><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Products dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Products</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/core" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3792957869 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/hub" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3792957869 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Developers dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Developers</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contribute" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3792957869 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/join" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3792957869 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/learn" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3792957869 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Company dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Company</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/about" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3792957869 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/careers" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/events" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3792957869 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/news" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3792957869 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contact" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block mr-1 font-bold text-gray-700"><a href="/blog/">Blog</a></li><div class="jsx-3128403005 md:hidden h-96 overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/core" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3128403005 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/hub" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3128403005 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contribute" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3128403005 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/join" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3128403005 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/learn" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3128403005 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/about" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3128403005 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/events" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3128403005 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/news" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contact" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></div></ul><span class="jsx-3128403005 text-gray-700 font-semibold text-sm ml-2 p-4">Blog</span></div><li class="jsx-223001487"><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 md:hidden btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></li></ul></nav><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 hidden md:flex btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></div></div></div><div class="mt-24"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col"><img alt="Remote Search Flows with JinaD-image" class="mb-4 w-full"/><article class="mb-32 md:max-w-6xl md:shadow-lg xl:rounded-3xl md:px-32 md:py-20 md:mx-auto md:-mt-20 bg-white shadow"><div class="mb-3"></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">Remote Search Flows with JinaD</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/defaultProfileImg.svg" class="w-8 h-auto rounded-full mr-4" alt="Susana Guzmán"/><div class="text-gray-600">Susana Guzmán</div></div><time dateTime="2020-12-21T00:54:00.550Z">21 December, 2020</time></div><div class="jsx-4055754880 mx-auto markdown"><div class="jsx-4055754880"><p>Hello everyone! Today I'd like to talk to you about JinaD! I just worked a bit with it the last week so I thought to share what I discovered with you all.</p>
<p>First things first…WHAT?</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*udMuiPhAV6k0O1ePUHYa3A.jpeg" alt=""></p>
<p>Yeah so, JinaD stands for Jina Daemon, and the core idea is to remember that Jina was born to be distributed, so we need to take advantage of that, and what JinaD aims at is to spin up Flows remotely.</p>
<p>I think the easiest will be to check some of the <a href="https://github.com/jina-ai/jinad/tree/main/tests">JinaD tests</a> to see what's going on, let's take a look at the <a href="https://github.com/jina-ai/jinad/tree/main/tests">test_query_with_shards</a>.</p>
<h3>Again…what?</h3>
<p>Let's define first what is the expected output and then let's see how we'll do it. For this test we want</p>
<ol>
<li>Build our Docker image with Docker compose</li>
<li>Create remote Flows</li>
<li>Index &#x26; Query</li>
</ol>
<h3>Right…let's see the implementation</h3>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nmN2DTHHRJeokYN6EEZepA.png" alt=""></p>
<p>As you can see with have several files here, and since our first step was to build our Dockerfile let's check that one first</p>
<pre><code class="language-Dockerfile">FROM jinaai/jina:test-pip

WORKDIR /

RUN apt-get update &#x26;&#x26; \
    apt-get install --no-install-recommends -y git \
    curl

RUN python -m pip install --no-cache-dir --upgrade pip &#x26;&#x26; \
    git clone https://github.com/jina-ai/jinad.git &#x26;&#x26; \
    pip install $(grep -ivE "jina" jinad/requirements.txt) --ignore-installed &#x26;&#x26; \
    cd jinad &#x26;&#x26; python setup.py install

COPY . /

COPY tests/integration/distributed/test_index_query_with_shards/entrypoint.sh .

RUN chmod +x entrypoint.sh

ENTRYPOINT ["bash", "-c", "./entrypoint.sh"]
</code></pre>
<p>Ok, so the first thing here is that we'll use the test-pip image as a base, if you don't have it yet you can build it with:</p>
<pre><code>docker build --build-arg PIP_TAG="[devel]" -f tests/integration/jinad/Dockerfiles/Dockerfile -t jinaai/jina:test-pip .
</code></pre>
<p>And then we get all the necessary requirements for JinaD.</p>
<p>Now the next step is to spin up our flow, so let's check the test_integration.py</p>
<pre><code class="language-python">def test_flow():
    if Path.cwd().name != 'jinad':
        sys.exit(
            'test_index_query_with_shards.py should only be run from the jinad base directory'
        )

    start_docker_compose(compose_yml)

    time.sleep(10)

    flow_id = send_flow(flow_yml, pod_dir)['flow_id']

    print(f'Successfully started the flow: {flow_id}. Lets index some data')
</code></pre>
<p>As you can see, after checking we're on the right folder, we run start_docker_compose, and this will take care to build up our image with the Dockerfile we just saw. After that, the next step is to spin up our Flow, we have a print to see our Flow id just (case you can never have enough prints for mental health) for sanity.</p>
<p>Ok! so we have our Flow spun up remotely already! <em>dances remotely</em> but now let's use it cause otherwise was just a lot of time I could have spent dancing remotely.</p>
<pre><code class="language-python">for x in range(100):
    text = 'text:hey, dude ' + str(x)
    text_indexed = call_api(
        method='post',
        url='http://0.0.0.0:45678/api/index',
        payload={'top_k': 10, 'data': [text]},
    )['index']['docs'][0]['text']

    assert text_indexed == text
</code></pre>
<p>In this case, I'm going to index 100 documents, each with the text "hey, dude" plus the document number. And we check that the text we indexed is actually what we wanted to index.</p>
<p>And just like that, we spun up our Flow and indexed some documents on it. If you run this, at this point you'd see on your terminal the confirmation of what we just did and the Flow ids:</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nRRE1m_FZRvyVbuF_HUMlg.png" alt=""></p>
<p>But then that's not really useful until we query data, so we need to spin up another Flow, this time for query.</p>
<p>Let's remember that a Flow is a Flow, it doesn't matter if it's for index or query, so we create another one that is exactly the same as we did for the index:</p>
<pre><code class="language-python">flow_id = send_flow(flow_yml, pod_dir)['flow_id']
print(f'Successfully started the flow: {flow_id}. Lets send some query')
</code></pre>
<p>And now in this new Flow we get the query results:</p>
<pre><code class="language-python">texts_matched = get_results(query='anything will match the same')
assert len(texts_matched['search']['docs'][0]['matches']) == 10
</code></pre>
<p>Let's look at this a bit closer, what is that get_results doing</p>
<pre><code class="language-python">def call_api(method, url, payload=None, headers={"Content-Type": "application/json"}):
    return getattr(requests, method)(
        url, data=json.dumps(payload), headers=headers
    ).json()

def get_results(query, top_k=10):
    return call_api(
        method="post",
        url="http://0.0.0.0:45678/api/search",
        payload={"top_k": top_k, "data": [query]},
    )
</code></pre>
<p>As you can see, here we are specifying the URL, the method, and the payload. We defined the top_k as 10, and that's why on the previous assert, I was verifying that I indeed receive 10 matches.</p>
<p>And that is iiiiit! the last part is just to stop everything docker related with</p>
<pre><code class="language-python">stop_docker_compose(compose_yml)
</code></pre>
<p>So this was fun and I hope was good enough for you to see how you can spin up Flows in different machines.</p>
<p>I feel very sad I couldn't speak not even once about cats in this post so I'll come back to fix that sometime soon.
In the meantime, keep checking our <a href="https://github.com/jina-ai/examples">other examples</a> and don't hesitate to contact us on our <a href="https://twitter.com/JinaAI_">Twitter</a>, <a href="https://github.com/jina-ai">Github</a>, or <a href="http://ina-ai.slack.com/">Slack</a></p>
</div><div class="jsx-4055754880 hidden"><p>Hello everyone! Today I'd like to talk to you about JinaD! I just worked a bit with it the last week so I thought to share what I discovered with you all.</p>
<p>First things first…WHAT?</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*udMuiPhAV6k0O1ePUHYa3A.jpeg" alt=""></p>
<p>Yeah so, JinaD stands for Jina Daemon, and the core idea is to remember that Jina was born to be distributed, so we need to take advantage of that, and what JinaD aims at is to spin up Flows remotely.</p>
<p>I think the easiest will be to check some of the <a href="https://github.com/jina-ai/jinad/tree/main/tests">JinaD tests</a> to see what's going on, let's take a look at the <a href="https://github.com/jina-ai/jinad/tree/main/tests">test_query_with_shards</a>.</p>
<h3>Again…what?</h3>
<p>Let's define first what is the expected output and then let's see how we'll do it. For this test we want</p>
<ol>
<li>Build our Docker image with Docker compose</li>
<li>Create remote Flows</li>
<li>Index &#x26; Query</li>
</ol>
<h3>Right…let's see the implementation</h3>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nmN2DTHHRJeokYN6EEZepA.png" alt=""></p>
<p>As you can see with have several files here, and since our first step was to build our Dockerfile let's check that one first</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>FROM jinaai/jina:test-pip
</span>
<!-- -->WORKDIR /
<!-- -->
<span>RUN apt-get update &amp;</span><span style="color:#ac65ff">#x26;&amp;#x26; \</span><span>
</span>    apt-get install --no-install-recommends -y git \
<!-- -->    curl
<!-- -->
<span>RUN python -m pip install --no-cache-</span><span style="color:#fb9e00">dir</span><span> --upgrade pip &amp;</span><span style="color:#ac65ff">#x26;&amp;#x26; \</span><span>
</span><span>    git clone https://github.com/jina-ai/jinad.git &amp;</span><span style="color:#ac65ff">#x26;&amp;#x26; \</span><span>
</span><span>    pip install $(grep -ivE </span><span style="color:#4cd213">&quot;jina&quot;</span><span> jinad/requirements.txt) --ignore-installed &amp;</span><span style="color:#ac65ff">#x26;&amp;#x26; \</span><span>
</span><span>    cd jinad &amp;</span><span style="color:#ac65ff">#x26;&amp;#x26; python setup.py install</span><span>
</span>
<!-- -->COPY . /
<!-- -->
<!-- -->COPY tests/integration/distributed/test_index_query_with_shards/entrypoint.sh .
<!-- -->
<!-- -->RUN chmod +x entrypoint.sh
<!-- -->
<span>ENTRYPOINT [</span><span style="color:#4cd213">&quot;bash&quot;</span><span>, </span><span style="color:#4cd213">&quot;-c&quot;</span><span>, </span><span style="color:#4cd213">&quot;./entrypoint.sh&quot;</span><span>]
</span>
</code></pre>
<p>Ok, so the first thing here is that we'll use the test-pip image as a base, if you don't have it yet you can build it with:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>docker build --build-arg PIP_TAG=</span><span style="color:#4cd213">&quot;[devel]&quot;</span><span> -f tests/integration/jinad/Dockerfiles/Dockerfile -t jinaai/jina:test-pip .
</span>
</code></pre>
<p>And then we get all the necessary requirements for JinaD.</p>
<p>Now the next step is to spin up our flow, so let's check the test_integration.py</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">test_flow</span><span class="hljs-function">():</span><span>
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">if</span><span> Path.cwd().name != </span><span style="color:#4cd213">&#x27;jinad&#x27;</span><span>:
</span>        sys.exit(
<span>            </span><span style="color:#4cd213">&#x27;test_index_query_with_shards.py should only be run from the jinad base directory&#x27;</span><span>
</span>        )
<!-- -->
<!-- -->    start_docker_compose(compose_yml)
<!-- -->
<span>    time.sleep(</span><span style="color:#fa658d">10</span><span>)
</span>
<span>    flow_id = send_flow(flow_yml, pod_dir)[</span><span style="color:#4cd213">&#x27;flow_id&#x27;</span><span>]
</span>
<span>    </span><span style="color:#fb9e00">print</span><span>(</span><span style="color:#4cd213">f&#x27;Successfully started the flow: </span><span style="color:#e3dfff">{flow_id}</span><span style="color:#4cd213">. Lets index some data&#x27;</span><span>)
</span>
</code></pre>
<p>As you can see, after checking we're on the right folder, we run start_docker_compose, and this will take care to build up our image with the Dockerfile we just saw. After that, the next step is to spin up our Flow, we have a print to see our Flow id just (case you can never have enough prints for mental health) for sanity.</p>
<p>Ok! so we have our Flow spun up remotely already! <em>dances remotely</em> but now let's use it cause otherwise was just a lot of time I could have spent dancing remotely.</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">for</span><span> x </span><span style="color:#fb9e00;font-weight:normal">in</span><span> </span><span style="color:#fb9e00">range</span><span>(</span><span style="color:#fa658d">100</span><span>):
</span><span>    text = </span><span style="color:#4cd213">&#x27;text:hey, dude &#x27;</span><span> + </span><span style="color:#fb9e00">str</span><span>(x)
</span>    text_indexed = call_api(
<span>        method=</span><span style="color:#4cd213">&#x27;post&#x27;</span><span>,
</span><span>        url=</span><span style="color:#4cd213">&#x27;http://0.0.0.0:45678/api/index&#x27;</span><span>,
</span><span>        payload={</span><span style="color:#4cd213">&#x27;top_k&#x27;</span><span>: </span><span style="color:#fa658d">10</span><span>, </span><span style="color:#4cd213">&#x27;data&#x27;</span><span>: [text]},
</span><span>    )[</span><span style="color:#4cd213">&#x27;index&#x27;</span><span>][</span><span style="color:#4cd213">&#x27;docs&#x27;</span><span>][</span><span style="color:#fa658d">0</span><span>][</span><span style="color:#4cd213">&#x27;text&#x27;</span><span>]
</span>
<span>    </span><span style="color:#fb9e00;font-weight:normal">assert</span><span> text_indexed == text
</span>
</code></pre>
<p>In this case, I'm going to index 100 documents, each with the text "hey, dude" plus the document number. And we check that the text we indexed is actually what we wanted to index.</p>
<p>And just like that, we spun up our Flow and indexed some documents on it. If you run this, at this point you'd see on your terminal the confirmation of what we just did and the Flow ids:</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nRRE1m_FZRvyVbuF_HUMlg.png" alt=""></p>
<p>But then that's not really useful until we query data, so we need to spin up another Flow, this time for query.</p>
<p>Let's remember that a Flow is a Flow, it doesn't matter if it's for index or query, so we create another one that is exactly the same as we did for the index:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>flow_id = send_flow(flow_yml, pod_dir)[</span><span style="color:#4cd213">&#x27;flow_id&#x27;</span><span>]
</span><span></span><span style="color:#fb9e00">print</span><span>(</span><span style="color:#4cd213">f&#x27;Successfully started the flow: </span><span style="color:#e3dfff">{flow_id}</span><span style="color:#4cd213">. Lets send some query&#x27;</span><span>)
</span>
</code></pre>
<p>And now in this new Flow we get the query results:</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>texts_matched = get_results(query=</span><span style="color:#4cd213">&#x27;anything will match the same&#x27;</span><span>)
</span><span></span><span style="color:#fb9e00;font-weight:normal">assert</span><span> </span><span style="color:#fb9e00">len</span><span>(texts_matched[</span><span style="color:#4cd213">&#x27;search&#x27;</span><span>][</span><span style="color:#4cd213">&#x27;docs&#x27;</span><span>][</span><span style="color:#fa658d">0</span><span>][</span><span style="color:#4cd213">&#x27;matches&#x27;</span><span>]) == </span><span style="color:#fa658d">10</span><span>
</span>
</code></pre>
<p>Let's look at this a bit closer, what is that get_results doing</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">call_api</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">method, url, payload=</span><span class="hljs-function hljs-params" style="font-weight:normal;color:#fa658d">None</span><span class="hljs-function hljs-params">, headers={</span><span class="hljs-function hljs-params" style="color:#4cd213">&quot;Content-Type&quot;</span><span class="hljs-function hljs-params">: </span><span class="hljs-function hljs-params" style="color:#4cd213">&quot;application/json&quot;</span><span class="hljs-function hljs-params">}</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">return</span><span> </span><span style="color:#fb9e00">getattr</span><span>(requests, method)(
</span>        url, data=json.dumps(payload), headers=headers
<!-- -->    ).json()
<!-- -->
<span></span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">get_results</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">query, top_k=</span><span class="hljs-function hljs-params" style="color:#fa658d">10</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">return</span><span> call_api(
</span><span>        method=</span><span style="color:#4cd213">&quot;post&quot;</span><span>,
</span><span>        url=</span><span style="color:#4cd213">&quot;http://0.0.0.0:45678/api/search&quot;</span><span>,
</span><span>        payload={</span><span style="color:#4cd213">&quot;top_k&quot;</span><span>: top_k, </span><span style="color:#4cd213">&quot;data&quot;</span><span>: [query]},
</span>    )
<!-- -->
</code></pre>
<p>As you can see, here we are specifying the URL, the method, and the payload. We defined the top_k as 10, and that's why on the previous assert, I was verifying that I indeed receive 10 matches.</p>
<p>And that is iiiiit! the last part is just to stop everything docker related with</p>
<pre class="rounded-xl m-2 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>stop_docker_compose(compose_yml)
</span>
</code></pre>
<p>So this was fun and I hope was good enough for you to see how you can spin up Flows in different machines.</p>
<p>I feel very sad I couldn't speak not even once about cats in this post so I'll come back to fix that sometime soon.
In the meantime, keep checking our <a href="https://github.com/jina-ai/examples">other examples</a> and don't hesitate to contact us on our <a href="https://twitter.com/JinaAI_">Twitter</a>, <a href="https://github.com/jina-ai">Github</a>, or <a href="http://ina-ai.slack.com/">Slack</a></p>
</div></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 pt-20 text-white"><div class="jsx-1956813867 flex flex-col md:flex-row justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin"></div><div class="jsx-1956813867 pr-4 md:py-16 md:mr-16"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/about/">About us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Careers</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contact/">Contact us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/core/">Core</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/hub/">Hub</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Developers</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contribute/">Contribute</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/learn/">Learn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/join/">Join</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://jina-ai.slack.com/">Slack</a></li></ul></nav></div></div><div class="jsx-1956813867 footer-right-margin"></div></div><div class="text-center bg-primary-400 text-gray-100 text-sm mt-12 py-6"><span class="block md:inline-block">© 2021 Jina AI, Ltd. All rights reserved.</span><span class="mx-4 hidden md:inline-block">|</span><a href="/legal"><span>Terms of Service</span></a><span class="mx-4">|</span><a href="/legal"><span>Privacy Policy</span></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Remote Search Flows with JinaD","date":"2020-12-21T00:54:00.550Z","slug":"Remote-Search-Flows-with-JinaD","author":"Susana Guzmán","content":"\u003cp\u003eHello everyone! Today I'd like to talk to you about JinaD! I just worked a bit with it the last week so I thought to share what I discovered with you all.\u003c/p\u003e\n\u003cp\u003eFirst things first…WHAT?\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/800/1*udMuiPhAV6k0O1ePUHYa3A.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eYeah so, JinaD stands for Jina Daemon, and the core idea is to remember that Jina was born to be distributed, so we need to take advantage of that, and what JinaD aims at is to spin up Flows remotely.\u003c/p\u003e\n\u003cp\u003eI think the easiest will be to check some of the \u003ca href=\"https://github.com/jina-ai/jinad/tree/main/tests\"\u003eJinaD tests\u003c/a\u003e to see what's going on, let's take a look at the \u003ca href=\"https://github.com/jina-ai/jinad/tree/main/tests\"\u003etest_query_with_shards\u003c/a\u003e.\u003c/p\u003e\n\u003ch3\u003eAgain…what?\u003c/h3\u003e\n\u003cp\u003eLet's define first what is the expected output and then let's see how we'll do it. For this test we want\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eBuild our Docker image with Docker compose\u003c/li\u003e\n\u003cli\u003eCreate remote Flows\u003c/li\u003e\n\u003cli\u003eIndex \u0026#x26; Query\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eRight…let's see the implementation\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/800/1*nmN2DTHHRJeokYN6EEZepA.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eAs you can see with have several files here, and since our first step was to build our Dockerfile let's check that one first\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-Dockerfile\"\u003eFROM jinaai/jina:test-pip\n\nWORKDIR /\n\nRUN apt-get update \u0026#x26;\u0026#x26; \\\n    apt-get install --no-install-recommends -y git \\\n    curl\n\nRUN python -m pip install --no-cache-dir --upgrade pip \u0026#x26;\u0026#x26; \\\n    git clone https://github.com/jina-ai/jinad.git \u0026#x26;\u0026#x26; \\\n    pip install $(grep -ivE \"jina\" jinad/requirements.txt) --ignore-installed \u0026#x26;\u0026#x26; \\\n    cd jinad \u0026#x26;\u0026#x26; python setup.py install\n\nCOPY . /\n\nCOPY tests/integration/distributed/test_index_query_with_shards/entrypoint.sh .\n\nRUN chmod +x entrypoint.sh\n\nENTRYPOINT [\"bash\", \"-c\", \"./entrypoint.sh\"]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, so the first thing here is that we'll use the test-pip image as a base, if you don't have it yet you can build it with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edocker build --build-arg PIP_TAG=\"[devel]\" -f tests/integration/jinad/Dockerfiles/Dockerfile -t jinaai/jina:test-pip .\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd then we get all the necessary requirements for JinaD.\u003c/p\u003e\n\u003cp\u003eNow the next step is to spin up our flow, so let's check the test_integration.py\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef test_flow():\n    if Path.cwd().name != 'jinad':\n        sys.exit(\n            'test_index_query_with_shards.py should only be run from the jinad base directory'\n        )\n\n    start_docker_compose(compose_yml)\n\n    time.sleep(10)\n\n    flow_id = send_flow(flow_yml, pod_dir)['flow_id']\n\n    print(f'Successfully started the flow: {flow_id}. Lets index some data')\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, after checking we're on the right folder, we run start_docker_compose, and this will take care to build up our image with the Dockerfile we just saw. After that, the next step is to spin up our Flow, we have a print to see our Flow id just (case you can never have enough prints for mental health) for sanity.\u003c/p\u003e\n\u003cp\u003eOk! so we have our Flow spun up remotely already! \u003cem\u003edances remotely\u003c/em\u003e but now let's use it cause otherwise was just a lot of time I could have spent dancing remotely.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efor x in range(100):\n    text = 'text:hey, dude ' + str(x)\n    text_indexed = call_api(\n        method='post',\n        url='http://0.0.0.0:45678/api/index',\n        payload={'top_k': 10, 'data': [text]},\n    )['index']['docs'][0]['text']\n\n    assert text_indexed == text\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this case, I'm going to index 100 documents, each with the text \"hey, dude\" plus the document number. And we check that the text we indexed is actually what we wanted to index.\u003c/p\u003e\n\u003cp\u003eAnd just like that, we spun up our Flow and indexed some documents on it. If you run this, at this point you'd see on your terminal the confirmation of what we just did and the Flow ids:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/800/1*nRRE1m_FZRvyVbuF_HUMlg.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBut then that's not really useful until we query data, so we need to spin up another Flow, this time for query.\u003c/p\u003e\n\u003cp\u003eLet's remember that a Flow is a Flow, it doesn't matter if it's for index or query, so we create another one that is exactly the same as we did for the index:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eflow_id = send_flow(flow_yml, pod_dir)['flow_id']\nprint(f'Successfully started the flow: {flow_id}. Lets send some query')\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd now in this new Flow we get the query results:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003etexts_matched = get_results(query='anything will match the same')\nassert len(texts_matched['search']['docs'][0]['matches']) == 10\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's look at this a bit closer, what is that get_results doing\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef call_api(method, url, payload=None, headers={\"Content-Type\": \"application/json\"}):\n    return getattr(requests, method)(\n        url, data=json.dumps(payload), headers=headers\n    ).json()\n\ndef get_results(query, top_k=10):\n    return call_api(\n        method=\"post\",\n        url=\"http://0.0.0.0:45678/api/search\",\n        payload={\"top_k\": top_k, \"data\": [query]},\n    )\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, here we are specifying the URL, the method, and the payload. We defined the top_k as 10, and that's why on the previous assert, I was verifying that I indeed receive 10 matches.\u003c/p\u003e\n\u003cp\u003eAnd that is iiiiit! the last part is just to stop everything docker related with\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003estop_docker_compose(compose_yml)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo this was fun and I hope was good enough for you to see how you can spin up Flows in different machines.\u003c/p\u003e\n\u003cp\u003eI feel very sad I couldn't speak not even once about cats in this post so I'll come back to fix that sometime soon.\nIn the meantime, keep checking our \u003ca href=\"https://github.com/jina-ai/examples\"\u003eother examples\u003c/a\u003e and don't hesitate to contact us on our \u003ca href=\"https://twitter.com/JinaAI_\"\u003eTwitter\u003c/a\u003e, \u003ca href=\"https://github.com/jina-ai\"\u003eGithub\u003c/a\u003e, or \u003ca href=\"http://ina-ai.slack.com/\"\u003eSlack\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"Remote-Search-Flows-with-JinaD"},"buildId":"KJvUyrCoh0MXs5cG--Qn6","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-8f6366ea4b5fafd77e96.js" async=""></script><script src="/_next/static/chunks/framework-94f262366e752bd48d82.js" async=""></script><script src="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" async=""></script><script src="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-afcb035e0413b2214f0f.js" async=""></script><script src="/_next/static/chunks/596-13cdde2fb793b77184ee.js" async=""></script><script src="/_next/static/chunks/522-e45333ebcf36799b860c.js" async=""></script><script src="/_next/static/chunks/373-350caaa5387e56e8b807.js" async=""></script><script src="/_next/static/chunks/93-1a5bac9fdf2b2295fba2.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-0d67fc13dbd9e7ddf27f.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_buildManifest.js" async=""></script><script src="/_next/static/KJvUyrCoh0MXs5cG--Qn6/_ssgManifest.js" async=""></script></body></html>