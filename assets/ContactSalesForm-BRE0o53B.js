import{j as Ie,a0 as Se,am as ue,u as ze,k as _,aU as Re,cY as Ue,w as Ce,W as Le,b6 as Te,aM as Pe,a$ as Be,n as Ee,a2 as je,a3 as c,a4 as I,a5 as i,aa as y,a6 as o,ad as me,ae as B,ah as S,ai as E,aq as Y,aj as K,af as x,ag as w,ab as Q,a9 as ge,ap as fe,a8 as j,q as R,aQ as U,b9 as De,as as We,ac as Ae,a7 as _e}from"./index-9BfnSc2e.js";import{Q as Oe}from"./QItemLabel-DHrnoIQr.js";import{Q as pe}from"./QTooltip-CdHor4tc.js";import{Q as Me}from"./QTab-CuDMVJA_.js";import{Q as Ne}from"./QTabs-DIMQHWS-.js";import{b as Ge,Q as He}from"./QChip-CuRen7Mq.js";import{Q as Je}from"./finetune-DJOfHFSk.js";import{Q as Ye}from"./QForm-BfiEhnpP.js";import{Q as Ke}from"./QLinearProgress-HyHjjfmK.js";import{Q as Xe,a as Ze,R as $e}from"./PurchaseTab-C-yDJRKa.js";import{u as ea}from"./use-dialog-plugin-component-5SV6JwRd.js";import{V as aa}from"./VideoDialog-CP0NNMN2.js";const X=".jpg, .jpeg, .png, .webp",V=5,la=Ie({__name:"ContactSalesForm",props:{showShortcuts:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!1},withLicenseConfig:{type:Boolean,default:!1},className:{default:""},maximizedWindow:{type:Boolean,default:!1}},setup(Z,{expose:s}){s();const d=Z,e=()=>{a.dialog({component:aa,componentProps:{videoSrc:"https://jina-ai-gmbh.ghost.io/content/media/2024/10/jina-ai-rate-limit.mp4",title:"contact_us_page.get_api_key",description:"contact_us_page.turn_on_volume",icon:"volume_up"}})},{t:f,te:C}=Se({useScope:"global"}),a=Ee(),q=ea(),{isPaidUser:D,isPremiumPaidUser:$}=ue(q),ee=ze(),{user:L,licenseConfig:v}=ue(ee),W=_(null),T=_(null),g=_({name:"",email:"",country:"",company:"",companySize:"",companyWebsite:"https://",department:"",role:"",other:"",agree:!1,products:[]}),A=_([]),b=_([]),ae=_(null),F=[...Re.value.map(l=>C(l.label)?f(l.label):l.label),...Ue.value.filter(l=>!l.subItem).map(l=>C(l.label)?f(l.label):l.label)].flat(),O=_(F),ye=_([{label:"contact_us_page.pricing",icon:"paid",to:"#pricing",maximizedTo:"/api-dashboard/pricing"},{label:"contact_us_page.get_api_key",icon:"smart_display",to:"#get-api-key",clickHandler:e},{label:"contact_us_page.rate_limit",icon:"speed",to:"#rate-limit",maximizedTo:"/api-dashboard/rate-limit"},{label:"estimator.title",icon:"calculate",to:"/api-dashboard/license-config?login=true",maximizedTo:"/api-dashboard/license-config?login=true"}]),le=(l="")=>{if(l==="")O.value=F;else{const t=l.toLowerCase();O.value=F.filter(n=>n.toLowerCase().includes(t))}},ve=(l,t)=>{t(()=>le(l))},be=(l,t)=>{l.length>0&&(F.includes(l)||F.push(l),t(l,"toggle"))},he=()=>{var l;(l=ae.value)==null||l.pickFiles()},ke=l=>{l.find(n=>n.failedPropValidation)&&a.notify({message:f("contact_us_page.image_validate",{_num:V}),type:"negative",icon:"error"})},M=async l=>{var r,k,z,ie,re,ce,de;if(!l)return;let t=l instanceof Array?l:[l];if(t.length+((k=(r=b.value)==null?void 0:r.length)!=null?k:0)>V){a.notify({message:f("contact_us_page.image_validate",{_num:V}),type:"negative",icon:"error"});const p=V-((ie=(z=b.value)==null?void 0:z.length)!=null?ie:0);if(p<=0)return;t=t.slice(0,p)}const u=t.filter(p=>p instanceof File);A.value=(ce=(re=A.value)==null?void 0:re.concat(u))!=null?ce:u;const m=t.map((p,Fe)=>({url:p instanceof File?URL.createObjectURL(p):p,image:void 0,file:p,name:p instanceof File?p.name:`image-${Fe}`}));b.value=b.value.concat(m),(de=T.value)==null||de.validate()},we=l=>{b.value.splice(l,1)},N=(l,t)=>{const u=t.split(",").map(r=>r.trim()).map(r=>r.replace(".","")).join("|");return new RegExp(u).test(l)},te=_(),h=_(!1),Qe=l=>{l.preventDefault(),l.stopPropagation(),h.value=!0},Ve=l=>{var n;l.preventDefault(),l.stopPropagation();const t=(n=te.value)==null?void 0:n.getBoundingClientRect();if(!t){h.value=!1;return}(l.x>t.left+t.width||l.x<t.left||l.y>t.top+t.height||l.y<t.top)&&(h.value=!1)},G=l=>{if(l.some(n=>!N(n.type,X))){a.notify({message:f("contact_us_page.image_validate",{_num:V}),color:"negative",icon:"error"});return}const t=[];for(let n=0;n<l.length;n++)t.push(l[n]);M(t)},oe=l=>new Promise(t=>{try{l.getAsString(n=>{t(n)})}catch{t("")}}),xe=async l=>{var m;l.preventDefault(),h!=null&&h.value&&(h.value=!1);const t=[],n=[],u=(m=l.dataTransfer)==null?void 0:m.items;if(u){for(let r=0;r<u.length;r++){const k=u[r];if(k.kind==="file"){const z=k.getAsFile();z&&t.push(z)}else k.kind==="string"&&k.type==="text/uri-list"&&n.push(k)}if(n.length>0){const r=await oe(n[0]);if(!r&&t.length>0){G([t[0]]);return}r&&M(r)}else t.length>0&&G(t)}},P=_(!1),H=_(!1),qe=async()=>{if(W.value&&await W.value.validate()){P.value=!0;const l={is_paid_user:D.value?$.value?"PREMIUM-paid":"paid":"no (can not tell from user browser)",name:g.value.name,role:g.value.role,email:g.value.email,country:g.value.country,company:g.value.company,company_size:g.value.companySize,company_website:g.value.companyWebsite,preferred_products:g.value.products,comment:g.value.other,...d.withLicenseConfig&&(v!=null&&v.value)?{license_config:v.value}:{}};try{(await fetch("https://contact-sales-sender.jina.ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).finally(()=>{P.value=!1})).ok?(a.notify({message:f("contact_us_page.submit_success"),icon:"check"}),H.value=!0):a.notify({message:f("contact_us_page.submit_failed"),color:"negative",icon:"close"}),setTimeout(()=>{H.value=!1},2e3)}catch(t){console.error("Submission error:",t),a.notify({message:f("contact_us_page.submit_failed"),color:"negative",icon:"close"}),P.value=!1}}},J=l=>{var n;const t=(n=l.clipboardData)==null?void 0:n.items;if(t){for(const u of t)if(u.type.startsWith("image/")){const m=u.getAsFile();if(!m)continue;const r=N(m.type,X);b.value.length<V&&r?b.value.push({url:URL.createObjectURL(m),image:void 0,file:m,name:m.name}):a.notify({message:f("contact_us_page.image_validate",{_num:V}),color:"negative",icon:"error"})}}},ne=()=>{var l,t,n,u,m;d.withLicenseConfig&&(g.value.name=((l=L.value)==null?void 0:l.displayName)||((n=(t=L.value.email)==null?void 0:t.split("@"))==null?void 0:n[0])||"",g.value.email=(m=(u=L.value)==null?void 0:u.email)!=null?m:"",v!=null&&v.value&&(g.value.products=[f("estimator.interests",{_Price:v.value.price})]))};Ce(()=>d.withLicenseConfig,l=>{l&&ne()}),Le(()=>{var l,t;(t=(l=T.value)==null?void 0:l.$el)==null||t.addEventListener("paste",J)}),Te(()=>{var l,t;(t=(l=T.value)==null?void 0:l.$el)==null||t.removeEventListener("paste",J)});const se={props:d,openVideoDialog:e,t:f,te:C,$q:a,embeddingStore:q,isPaidUser:D,isPremiumPaidUser:$,userStore:ee,user:L,licenseConfig:v,formRef:W,inputRef:T,models:g,uploadedFiles:A,images:b,imageRef:ae,acceptedTypes:X,maxImages:V,productOptions:F,filterOptions:O,shortcutBtns:ye,updateFilterOptions:le,filterFn:ve,createValue:be,onImageBtnClick:he,onImageRejected:ke,onImageUpload:M,onRemoveImage:we,validateFileType:N,containerRef:te,isDraggedOver:h,onDragOver:Qe,onDragLeave:Ve,handleFiles:G,dataTransferToString:oe,onDrop:xe,sendingFeedback:P,isSuccess:H,sendFeedback:qe,onPaste:J,init:ne,get QForm(){return Ye},get QSelect(){return Ke},get QFile(){return Xe},get QInput(){return Pe},get locateByHash(){return Be},get REG_URL(){return Ze},get REG_EMAIL(){return $e}};return Object.defineProperty(se,"__isScriptSetup",{enumerable:!1,value:!0}),se}}),ta={class:"row items-center q-col-gutter-y-md"},oa={class:"column items-center justify-center"},na={class:"row q-gutter-md"},sa={key:0,class:"column items-center"},ia={key:1,class:"column items-center"};function ra(Z,s,d,e,f,C){return c(),I(_e,{class:K([d.className,"column fit relative-position no-wrap"]),flat:"",bordered:!d.maximizedWindow,square:"",style:Ae({"max-height: 100vh;":d.maximizedWindow})},{default:i(()=>[d.showShortcuts?(c(),y(S,{key:0},[o(ge,null,{default:i(()=>[o(me,{class:"q-pa-none"},{default:i(()=>[o(B,{class:"q-pa-none"},{default:i(()=>[o(Oe,null,{default:i(()=>[(c(!0),y(S,null,E(e.shortcutBtns,a=>(c(),I(R,{label:e.t(a.label),key:a.label,icon:a.icon,onClick:q=>a.to.startsWith("/")?void 0:e.locateByHash(a.to),to:a.to.startsWith("/")?a.to:void 0,size:"sm","no-caps":"",flat:"",square:"",class:"q-mr-xs"},null,8,["label","icon","onClick","to"]))),128))]),_:1})]),_:1}),e.isPaidUser?(c(),I(B,{key:0,side:""},{default:i(()=>[o(Y,{name:"o_verified",class:K({"golden-foil":e.isPremiumPaidUser,"silver-foil":!e.isPremiumPaidUser&&e.isPaidUser})},{default:i(()=>[o(pe,null,{default:i(()=>[x(w(e.t("contact_us_page.priority")),1)]),_:1})]),_:1},8,["class"])]),_:1})):Q("",!0)]),_:1})]),_:1}),o(fe)],64)):Q("",!0),d.maximizedWindow?(c(),y(S,{key:1},[o(Ne,{align:"left",shrink:"","no-caps":"",dense:"","inline-label":!d.maximizedWindow,"indicator-color":"transparent",class:"full-width"},{default:i(()=>[(c(!0),y(S,null,E(e.shortcutBtns,a=>(c(),I(Me,{class:"q-pa-none","content-class":"q-pa-none",key:a.label},{default:i(()=>[o(R,{label:e.t(a.label),icon:a.icon,onClick:a.clickHandler,to:a.maximizedTo,padding:"md",stretch:"","no-caps":"","no-wrap":"",flat:"",square:""},null,8,["label","icon","onClick","to"])]),_:2},1024))),128))]),_:1},8,["inline-label"]),o(fe)],64)):Q("",!0),o(ge,{class:"relative-position"},{default:i(()=>[o(e.QForm,{onSubmit:e.sendFeedback,ref:"formRef"},{default:i(()=>[j("div",ta,[o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.models.name=a),label:`${e.t("contact_us_page.name")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.email,"onUpdate:modelValue":s[1]||(s[1]=a=>e.models.email=a),type:"email",label:`${e.t("contact_us_page.work_email")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>e.REG_EMAIL.test(a)||e.t("contact_us_page.invalid_email")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.role,"onUpdate:modelValue":s[2]||(s[2]=a=>e.models.role=a),label:`${e.t("contact_us_page.role")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-6",filled:"",square:"",modelValue:e.models.company,"onUpdate:modelValue":s[3]||(s[3]=a=>e.models.company=a),label:`${e.t("contact_us_page.company")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",type:"number",modelValue:e.models.companySize,"onUpdate:modelValue":s[4]||(s[4]=a=>e.models.companySize=a),label:`${e.t("contact_us_page.company_size")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>a>=1||e.t("contact_us_page.invalid_number")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",modelValue:e.models.country,"onUpdate:modelValue":s[5]||(s[5]=a=>e.models.country=a),label:`${e.t("contact_us_page.country")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-12",filled:"",square:"",modelValue:e.models.companyWebsite,"onUpdate:modelValue":s[6]||(s[6]=a=>e.models.companyWebsite=a),label:`${e.t("contact_us_page.company_website")}`,placeholder:`${e.t("contact_us_page.company_website_placeholder")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>e.REG_URL.test(a)||e.t("contact_us_page.invalid_url")]},null,8,["modelValue","label","placeholder","rules"]),o(e.QSelect,{class:"col-12",filled:"",square:"",label:e.t("contact_us_page.preferred_products"),modelValue:e.models.products,"onUpdate:modelValue":s[7]||(s[7]=a=>e.models.products=a),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",onNewValue:e.createValue,options:e.filterOptions,onFilter:e.filterFn,readonly:d.withLicenseConfig},{selected:i(()=>[(c(!0),y(S,null,E(e.models.products,a=>(c(),I(Ge,{key:a,dense:"",square:"","text-color":"primary",class:"bg-mixed-300",icon:d.withLicenseConfig?"diamond":void 0},{default:i(()=>[x(w(a),1)]),_:2},1032,["icon"]))),128))]),_:1},8,["label","modelValue","options","readonly"]),d.withLicenseConfig?Q("",!0):(c(),y("div",{key:0,class:"col-12 relative-position",onDragenter:e.onDragOver,onDragleave:e.onDragLeave,ref:"containerRef"},[o(e.QInput,{label:`${e.t("contact_us_page.anything_else")}`,modelValue:e.models.other,"onUpdate:modelValue":s[8]||(s[8]=a=>e.models.other=a),filled:"",square:"",rules:[a=>!!a&&a.length>5||e.images.length>0||e.t("contact_us_page.field_required")],"lazy-rules":!0,type:"textarea",class:"full-width",ref:"inputRef"},{append:i(()=>[o(R,{label:e.t("contact_us_page.image_upload"),outline:"",square:"",icon:"attach_file_add",disable:e.images.length===e.maxImages,onClick:U(e.onImageBtnClick,["stop"])},{default:i(()=>[o(pe,null,{default:i(()=>[x(w(e.t("contact_us_page.image_validate",{_num:e.maxImages})),1)]),_:1})]),_:1},8,["label","disable"])]),_:1},8,["label","modelValue","rules"]),o(e.QFile,{"model-value":e.uploadedFiles,"onUpdate:modelValue":e.onImageUpload,style:{display:"none"},ref:"imageRef",accept:e.acceptedTypes,multiple:"","max-files":e.maxImages,"max-file-size":"5120000",onRejected:e.onImageRejected},null,8,["model-value"]),e.isDraggedOver?(c(),y("div",{key:0,class:"drop-overlay column items-center justify-center bg-transparent lock-blur",style:{"z-index":"1"},onDragover:s[9]||(s[9]=U(()=>{},["prevent"])),onDrop:U(e.onDrop,["stop"])},[j("div",oa,[o(Y,{class:"q-mb-sm",size:"xl",name:"place_item"}),x(" "+w(e.t("contact_us_page.drop_area_for_image")),1)])],32)):Q("",!0),j("div",na,[e.uploadedFiles?(c(!0),y(S,{key:0},E(e.images,(a,q)=>(c(),I(_e,{flat:"",square:"",class:"relative-position cursor-pointer image-preview bg-mixed-200 q-pa-sm",key:q},{default:i(()=>[o(He,{src:a.url,class:"full-width full-height",fit:"contain"},null,8,["src"]),o(R,{flat:"",round:"",icon:"close",class:"absolute-top-right image-delete-btn",size:"sm",dense:"",onClick:U(D=>e.onRemoveImage(q),["stop"])},null,8,["onClick"])]),_:2},1024))),128)):Q("",!0)])],544)),o(me,{class:"col-12 q-my-md",tag:"label"},{default:i(()=>[o(B,{side:""},{default:i(()=>[o(De,{modelValue:e.models.agree,"onUpdate:modelValue":s[10]||(s[10]=a=>e.models.agree=a)},null,8,["modelValue"])]),_:1}),o(B,null,{default:i(()=>[x(w(e.t("contact_us_page.agreement"))+" ",1),j("a",{href:"/legal#privacy-policy",class:"text-dim",target:"_blank",onClick:s[11]||(s[11]=U(()=>{},["stop"]))},w(e.t("contact_us_page.private_statement")),1)]),_:1})]),_:1}),o(R,{type:"submit",disable:!e.models.agree||e.sendingFeedback,class:K(["q-mt-md",d.maximizedWindow?"col-auto":"col-12"]),outline:"",square:"",padding:"lg",label:e.t("contact_us_page.submit"),icon:"send",loading:e.sendingFeedback},null,8,["disable","class","label","loading"])])]),_:1},512)]),_:1}),o(Je,{showing:e.sendingFeedback||e.isSuccess,class:"non-selectable lock-blur"},{default:i(()=>[e.isSuccess?(c(),y("div",sa,[o(Y,{name:"check",size:"3em",class:"q-mb-lg"}),x(" "+w(e.t("contact_us_page.feedback_sent")),1)])):Q("",!0),e.sendingFeedback?(c(),y("div",ia,[o(We,{size:"3em",class:"q-mb-lg"}),x(" "+w(e.t("contact_us_page.sending_feedback")),1)])):Q("",!0)]),_:1},8,["showing"])]),_:1},8,["class","bordered","style"])}const ka=je(la,[["render",ra],["__scopeId","data-v-1e15b9ad"],["__file","ContactSalesForm.vue"]]);export{ka as C};
