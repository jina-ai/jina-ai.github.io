import{j as qe,a0 as Ie,am as ce,u as Se,k as g,aT as Re,de as Ue,w as xe,W as Le,ba as Ce,n as ze,aU as Ee,b4 as Pe,a2 as Be,a3 as u,a4 as V,a5 as i,a9 as de,a6 as o,ad as ue,ae as z,aa as F,ah as H,ai as J,q as E,aq as K,aj as me,af as q,ag as k,ab as w,ap as De,a8 as P,aP as U,a7 as ge,bd as je,as as Te}from"./index-DBnClI2x.js";import{Q as Oe}from"./QItemLabel-DpCHat5a.js";import{Q as fe}from"./QTooltip-DyxTSpbG.js";import{b as Ae,Q as Ne}from"./QChip-DllhVdUO.js";import{a as Me,Q as We}from"./finetune-DfygmyQT.js";import{Q as Ge}from"./QLinearProgress-B0iWel1D.js";import{Q as He,a as Je,R as Ke}from"./PurchaseTab-Cq-SZImE.js";import{u as Xe}from"./use-dialog-plugin-component-rx-2AxFM.js";const X=".jpg, .jpeg, .png, .webp",Q=5,Ye=qe({__name:"ContactSalesForm",props:{showShortcuts:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!1},withLicenseConfig:{type:Boolean,default:!1},className:{default:""}},setup(Y,{expose:s}){s();const f=Y,{t:e,te:x}=Ie({useScope:"global"}),v=ze(),l=Xe(),{isPaidUser:I,isPremiumPaidUser:B}=ce(l),Z=Se(),{user:L,licenseConfig:p}=ce(Z),D=g(null),C=g(null),m=g({name:"",email:"",country:"",company:"",companySize:"",companyWebsite:"https://",department:"",role:"",other:"",agree:!1,products:[]}),j=g([]),y=g([]),$=g(null),S=[...Re.value.map(a=>x(a.label)?e(a.label):a.label),...Ue.value.filter(a=>!a.subItem).map(a=>x(a.label)?e(a.label):a.label)].flat(),T=g(S),_e=g([{label:"contact_us_page.pricing",icon:"paid",to:"#pricing"},{label:"contact_us_page.get_api_key",icon:"smart_display",to:"#get-api-key"},{label:"contact_us_page.rate_limit",icon:"speed",to:"#rate-limit"},{label:"estimator.title",icon:"calculate",to:"/api-dashboard/license-config?login=true"}]),ee=(a="")=>{if(a==="")T.value=S;else{const t=a.toLowerCase();T.value=S.filter(n=>n.toLowerCase().includes(t))}},pe=(a,t)=>{t(()=>ee(a))},ye=(a,t)=>{a.length>0&&(S.includes(a)||S.push(a),t(a,"toggle"))},ve=()=>{var a;(a=$.value)==null||a.pickFiles()},be=a=>{a.find(n=>n.failedPropValidation)&&v.notify({message:e("contact_us_page.image_validate",{_num:Q}),type:"negative",icon:"error"})},O=async a=>{var c,h,R,ne,se,ie,re;if(!a)return;let t=a instanceof Array?a:[a];if(t.length+((h=(c=y.value)==null?void 0:c.length)!=null?h:0)>Q){v.notify({message:e("contact_us_page.image_validate",{_num:Q}),type:"negative",icon:"error"});const _=Q-((ne=(R=y.value)==null?void 0:R.length)!=null?ne:0);if(_<=0)return;t=t.slice(0,_)}const r=t.filter(_=>_ instanceof File);j.value=(ie=(se=j.value)==null?void 0:se.concat(r))!=null?ie:r;const d=t.map((_,Fe)=>({url:_ instanceof File?URL.createObjectURL(_):_,image:void 0,file:_,name:_ instanceof File?_.name:`image-${Fe}`}));y.value=y.value.concat(d),(re=C.value)==null||re.validate()},he=a=>{y.value.splice(a,1)},A=(a,t)=>{const r=t.split(",").map(c=>c.trim()).map(c=>c.replace(".","")).join("|");return new RegExp(r).test(a)},ae=g(),b=g(!1),ke=a=>{a.preventDefault(),a.stopPropagation(),b.value=!0},we=a=>{var n;a.preventDefault(),a.stopPropagation();const t=(n=ae.value)==null?void 0:n.getBoundingClientRect();if(!t){b.value=!1;return}(a.x>t.left+t.width||a.x<t.left||a.y>t.top+t.height||a.y<t.top)&&(b.value=!1)},N=a=>{if(a.some(n=>!A(n.type,X))){v.notify({message:e("contact_us_page.image_validate",{_num:Q}),color:"negative",icon:"error"});return}const t=[];for(let n=0;n<a.length;n++)t.push(a[n]);O(t)},le=a=>new Promise(t=>{try{a.getAsString(n=>{t(n)})}catch{t("")}}),Qe=async a=>{var d;a.preventDefault(),b!=null&&b.value&&(b.value=!1);const t=[],n=[],r=(d=a.dataTransfer)==null?void 0:d.items;if(r){for(let c=0;c<r.length;c++){const h=r[c];if(h.kind==="file"){const R=h.getAsFile();R&&t.push(R)}else h.kind==="string"&&h.type==="text/uri-list"&&n.push(h)}if(n.length>0){const c=await le(n[0]);if(!c&&t.length>0){N([t[0]]);return}c&&O(c)}else t.length>0&&N(t)}},M=g(!1),W=g(!1),Ve=async()=>{if(D.value&&await D.value.validate()){M.value=!0;const a={is_paid_user:I.value?B.value?"PREMIUM-paid":"paid":"no (can not tell from user browser)",name:m.value.name,role:m.value.role,email:m.value.email,country:m.value.country,company:m.value.company,company_size:m.value.companySize,company_website:m.value.companyWebsite,preferred_products:m.value.products.toString(),other:m.value.other};f.withLicenseConfig&&(p!=null&&p.value)&&(a.license_config=JSON.stringify(p.value));const t=new FormData;t.append("_app","website"),t.append("_title","ðŸ”” User Contacting"),t.append("_data",new Blob([JSON.stringify(a)],{type:"application/json"})),y.value.forEach(r=>{t.append(r.name,r.file)}),(await fetch("https://api.hubble.jina.ai/v2/rpc/feedback.collect",{method:"POST",body:t}).finally(()=>{M.value=!1})).status===200?(v.notify({message:e("contact_us_page.submit_success"),icon:"check"}),W.value=!0):v.notify({message:e("contact_us_page.submit_failed"),color:"negative",icon:"close"}),setTimeout(()=>{W.value=!1},2e3)}},G=a=>{var n;const t=(n=a.clipboardData)==null?void 0:n.items;if(t){for(const r of t)if(r.type.startsWith("image/")){const d=r.getAsFile();if(!d)continue;const c=A(d.type,X);y.value.length<Q&&c?y.value.push({url:URL.createObjectURL(d),image:void 0,file:d,name:d.name}):v.notify({message:e("contact_us_page.image_validate",{_num:Q}),color:"negative",icon:"error"})}}},te=()=>{var a,t,n,r,d;f.withLicenseConfig&&(m.value.name=((a=L.value)==null?void 0:a.displayName)||((n=(t=L.value.email)==null?void 0:t.split("@"))==null?void 0:n[0])||"",m.value.email=(d=(r=L.value)==null?void 0:r.email)!=null?d:"",p!=null&&p.value&&(m.value.products=[e("estimator.interests",{_Price:p.value.price})]))};xe(()=>f.withLicenseConfig,a=>{a&&te()}),Le(()=>{var a,t;(t=(a=C.value)==null?void 0:a.$el)==null||t.addEventListener("paste",G)}),Ce(()=>{var a,t;(t=(a=C.value)==null?void 0:a.$el)==null||t.removeEventListener("paste",G)});const oe={props:f,t:e,te:x,$q:v,embeddingStore:l,isPaidUser:I,isPremiumPaidUser:B,userStore:Z,user:L,licenseConfig:p,formRef:D,inputRef:C,models:m,uploadedFiles:j,images:y,imageRef:$,acceptedTypes:X,maxImages:Q,productOptions:S,filterOptions:T,shortcutBtns:_e,updateFilterOptions:ee,filterFn:pe,createValue:ye,onImageBtnClick:ve,onImageRejected:be,onImageUpload:O,onRemoveImage:he,validateFileType:A,containerRef:ae,isDraggedOver:b,onDragOver:ke,onDragLeave:we,handleFiles:N,dataTransferToString:le,onDrop:Qe,sendingFeedback:M,isSuccess:W,sendFeedback:Ve,onPaste:G,init:te,get QForm(){return Me},get QSelect(){return Ge},get QFile(){return He},get QInput(){return Ee},get locateByHash(){return Pe},get REG_URL(){return Je},get REG_EMAIL(){return Ke}};return Object.defineProperty(oe,"__isScriptSetup",{enumerable:!1,value:!0}),oe}}),Ze={class:"row items-center q-col-gutter-y-md"},$e={class:"column items-center justify-center"},ea={class:"row q-gutter-md"},aa={key:0,class:"column items-center"},la={key:1,class:"column items-center"};function ta(Y,s,f,e,x,v){return u(),V(ge,{class:me(f.className),flat:"",bordered:"",square:""},{default:i(()=>[f.showShortcuts?(u(),V(de,{key:0},{default:i(()=>[o(ue,{class:"q-pa-none"},{default:i(()=>[o(z,{class:"q-pa-none"},{default:i(()=>[o(Oe,null,{default:i(()=>[(u(!0),F(H,null,J(e.shortcutBtns,l=>(u(),V(E,{label:e.t(l.label),key:l.label,icon:l.icon,onClick:I=>l.to.startsWith("/")?void 0:e.locateByHash(l.to),to:l.to.startsWith("/")?l.to:void 0,size:"sm","no-caps":"",flat:"",square:"",class:"q-mr-xs"},null,8,["label","icon","onClick","to"]))),128))]),_:1})]),_:1}),e.isPaidUser?(u(),V(z,{key:0,side:""},{default:i(()=>[o(K,{name:"verified",class:me({"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser})},{default:i(()=>[o(fe,null,{default:i(()=>[q(k(e.t("contact_us_page.priority")),1)]),_:1})]),_:1},8,["class"])]),_:1})):w("",!0)]),_:1})]),_:1})):w("",!0),f.showShortcuts?(u(),V(De,{key:1})):w("",!0),o(de,{class:"relative-position"},{default:i(()=>[o(e.QForm,{onSubmit:e.sendFeedback,ref:"formRef"},{default:i(()=>[P("div",Ze,[o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.models.name=l),label:`${e.t("contact_us_page.name")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.email,"onUpdate:modelValue":s[1]||(s[1]=l=>e.models.email=l),type:"email",label:`${e.t("contact_us_page.work_email")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required"),l=>e.REG_EMAIL.test(l)||e.t("contact_us_page.invalid_email")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.role,"onUpdate:modelValue":s[2]||(s[2]=l=>e.models.role=l),label:`${e.t("contact_us_page.role")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-6",filled:"",square:"",modelValue:e.models.company,"onUpdate:modelValue":s[3]||(s[3]=l=>e.models.company=l),label:`${e.t("contact_us_page.company")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",type:"number",modelValue:e.models.companySize,"onUpdate:modelValue":s[4]||(s[4]=l=>e.models.companySize=l),label:`${e.t("contact_us_page.company_size")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required"),l=>l>=1||e.t("contact_us_page.invalid_number")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",modelValue:e.models.country,"onUpdate:modelValue":s[5]||(s[5]=l=>e.models.country=l),label:`${e.t("contact_us_page.country")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-12",filled:"",square:"",modelValue:e.models.companyWebsite,"onUpdate:modelValue":s[6]||(s[6]=l=>e.models.companyWebsite=l),label:`${e.t("contact_us_page.company_website")}`,placeholder:`${e.t("contact_us_page.company_website_placeholder")}`,"lazy-rules":!0,rules:[l=>!!l||e.t("contact_us_page.field_required"),l=>e.REG_URL.test(l)||e.t("contact_us_page.invalid_url")]},null,8,["modelValue","label","placeholder","rules"]),o(e.QSelect,{class:"col-12",filled:"",square:"",label:e.t("contact_us_page.preferred_products"),modelValue:e.models.products,"onUpdate:modelValue":s[7]||(s[7]=l=>e.models.products=l),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",onNewValue:e.createValue,options:e.filterOptions,onFilter:e.filterFn,readonly:f.withLicenseConfig},{selected:i(()=>[(u(!0),F(H,null,J(e.models.products,l=>(u(),V(Ae,{key:l,dense:"",square:"","text-color":"primary",class:"bg-mixed-300",icon:f.withLicenseConfig?"diamond":void 0},{default:i(()=>[q(k(l),1)]),_:2},1032,["icon"]))),128))]),_:1},8,["label","modelValue","options","readonly"]),f.withLicenseConfig?w("",!0):(u(),F("div",{key:0,class:"col-12 relative-position",onDragenter:e.onDragOver,onDragleave:e.onDragLeave,ref:"containerRef"},[o(e.QInput,{label:`${e.t("contact_us_page.anything_else")}`,modelValue:e.models.other,"onUpdate:modelValue":s[8]||(s[8]=l=>e.models.other=l),filled:"",square:"",rules:[l=>!!l&&l.length>5||e.images.length>0||e.t("contact_us_page.field_required")],"lazy-rules":!0,type:"textarea",class:"full-width",ref:"inputRef"},{append:i(()=>[o(E,{label:e.t("contact_us_page.image_upload"),outline:"",square:"",icon:"attach_file_add",disable:e.images.length===e.maxImages,onClick:U(e.onImageBtnClick,["stop"])},{default:i(()=>[o(fe,null,{default:i(()=>[q(k(e.t("contact_us_page.image_validate",{_num:e.maxImages})),1)]),_:1})]),_:1},8,["label","disable"])]),_:1},8,["label","modelValue","rules"]),o(e.QFile,{"model-value":e.uploadedFiles,"onUpdate:modelValue":e.onImageUpload,style:{display:"none"},ref:"imageRef",accept:e.acceptedTypes,multiple:"","max-files":e.maxImages,"max-file-size":"5120000",onRejected:e.onImageRejected},null,8,["model-value"]),e.isDraggedOver?(u(),F("div",{key:0,class:"drop-overlay column items-center justify-center bg-transparent lock-blur",style:{"z-index":"1"},onDragover:s[9]||(s[9]=U(()=>{},["prevent"])),onDrop:U(e.onDrop,["stop"])},[P("div",$e,[o(K,{class:"q-mb-sm",size:"xl",name:"place_item"}),q(" "+k(e.t("contact_us_page.drop_area_for_image")),1)])],32)):w("",!0),P("div",ea,[e.uploadedFiles?(u(!0),F(H,{key:0},J(e.images,(l,I)=>(u(),V(ge,{flat:"",square:"",class:"relative-position cursor-pointer image-preview bg-mixed-200 q-pa-sm",key:I},{default:i(()=>[o(Ne,{src:l.url,class:"full-width full-height",fit:"contain"},null,8,["src"]),o(E,{flat:"",round:"",icon:"close",class:"absolute-top-right image-delete-btn",size:"sm",dense:"",onClick:U(B=>e.onRemoveImage(I),["stop"])},null,8,["onClick"])]),_:2},1024))),128)):w("",!0)])],544)),o(ue,{class:"col-12 q-my-md",tag:"label"},{default:i(()=>[o(z,{side:""},{default:i(()=>[o(je,{modelValue:e.models.agree,"onUpdate:modelValue":s[10]||(s[10]=l=>e.models.agree=l)},null,8,["modelValue"])]),_:1}),o(z,null,{default:i(()=>[q(k(e.t("contact_us_page.agreement"))+" ",1),P("a",{href:"/legal#privacy-policy",class:"text-dim",target:"_blank",onClick:s[11]||(s[11]=U(()=>{},["stop"]))},k(e.t("contact_us_page.private_statement")),1)]),_:1})]),_:1}),o(E,{type:"submit",disable:!e.models.agree||e.sendingFeedback,class:"col-12 q-mt-md",outline:"",square:"",padding:"lg",label:e.t("contact_us_page.submit"),icon:"send",loading:e.sendingFeedback},null,8,["disable","label","loading"])])]),_:1},512)]),_:1}),o(We,{showing:e.sendingFeedback||e.isSuccess,class:"non-selectable lock-blur"},{default:i(()=>[e.isSuccess?(u(),F("div",aa,[o(K,{name:"check",size:"3em",class:"q-mb-lg"}),q(" "+k(e.t("contact_us_page.feedback_sent")),1)])):w("",!0),e.sendingFeedback?(u(),F("div",la,[o(Te,{size:"3em",class:"q-mb-lg"}),q(" "+k(e.t("contact_us_page.sending_feedback")),1)])):w("",!0)]),_:1},8,["showing"])]),_:1},8,["class"])}const ma=Be(Ye,[["render",ta],["__scopeId","data-v-8619d55b"],["__file","ContactSalesForm.vue"]]);export{ma as C};
