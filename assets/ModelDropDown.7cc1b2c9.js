import{P as E,a0 as ge,c6 as pe,e as be,an as _e,aH as W,aG as fe,f as z,h as H,w as ve,K as he,J as ye,am as we,ao as w,ap as t,ay as s,aq as k,au as o,bE as ke,bD as Me,U as G,ad as K,at as J,aw as b,ax as c,av as Z,aD as q,aB as ze,bW as X,bc as qe,aL as Fe,b0 as xe}from"./index.21236d54.js";import{a as F,b as v}from"./QChip.69fdd5a0.js";import{Q as h}from"./QTooltip.19b98387.js";import{a as Ae}from"./QSelect.d85896ab.js";import{u as Ce,C as Be}from"./ClosePopup.f590ee45.js";import{c as Ie}from"./copy-to-clipboard.5c6d402e.js";function Se(_){const m=Object.assign({noopener:!0},_),n=[];for(const d in m){const i=m[d];i===!0?n.push(d):(pe(i)||typeof i=="string"&&i!=="")&&n.push(d+"="+i)}return n.join(",")}function Y(_,m,n){let d=window.open;if(E.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)d=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(_,{openExternal:!0})}const i=d(_,"_blank",Se(n));if(i)return E.is.desktop&&i.focus(),i;m&&m()}var Te=(_,m,n)=>{if(E.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(d=>{d?window.SafariViewController.show({url:_},ge,m):Y(_,m,n)});return}return Y(_,m,n)};const ee=[{name:"bge-small-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-small-en",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-m3",meta_data:{token_length:1024,output_dim:2048,size:"1.3B",language:"multilingual"},request_path:["embedding"]}],Qe=be({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1},allowBAAI:{type:Boolean,default:!1},demoOnly:{type:Boolean,default:!1},spaceSaving:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded","switchToRerankerTab","switchToEmbeddingTab"],setup(_,{emit:m}){const{t:n}=_e({useScope:"global"}),d=Ce(),{models:i,baseDeModel:ae,baseEnModel:I,baseZhModel:te,jinaRerankerMultilingual:ne}=W(d),oe=fe(),{language:x}=W(oe),S=z(null);let r=null;const A=z(!1),y=_,f=m,g=H({get:()=>y.currentModel,set:e=>{f("chooseModel",e)}}),R=()=>{var e;f("chooseModel",(e=te.value)!=null?e:I.value)},D=()=>{var e;f("chooseModel",(e=ae.value)!=null?e:I.value)};ve(x,e=>{y.category==="multi-embeddings"&&(e&&["zh-CN","zh-TW"].includes(e)?R():e==="de"&&D())});const le=()=>{var l;const e=((l=S.value)==null?void 0:l.$el)||S.value;e instanceof HTMLElement?(r=new IntersectionObserver(async u=>{if(u[0].isIntersecting){r==null||r.unobserve(e);try{await ue(),r==null||r.disconnect()}catch(p){console.error("Failed to load models:",p),r==null||r.observe(e)}}},{root:null,threshold:.1}),r.observe(e)):console.error("Element is not an HTMLElement:",e)};he(()=>{ye(()=>{setTimeout(()=>{le()},100)})}),we(()=>{r&&r.disconnect()});const V=H(()=>{const e=l=>l.slug==="jina-reranker-v2-base-multilingual"||l.slug==="jina-clip-v1"?1e4:0;return i.value.filter(l=>{const u=y.category==="multi-embeddings",a=l.request_path,p=u?["multi-embeddings","embedding"]:[y.category];return Array.isArray(a)?a.some(B=>p.includes(B)):p.includes(a)}).sort((l,u)=>u.replicas+e(u)-(l.replicas+e(l)))}),M=z([]),C=z([]),se=()=>{y.allowBAAI?M.value=ee:M.value=V.value,C.value=M.value},ie=(e,l)=>{l(()=>{e?C.value=M.value.filter(u=>u.name.toLowerCase().includes(e.toLowerCase())):C.value=M.value})},ue=async()=>{var a;A.value=!0,(a=i.value)!=null&&a.length||await d.getModels(),A.value=!1,se();const e=new URL(window.location.href),l=e.searchParams.get("model"),u=l&&i.value.find(p=>p.name===l);if(u)f("chooseModel",u),e.searchParams.delete("model"),window.history.pushState({},"",e);else switch(y.category){case"embedding":case"multi-embeddings":i.value.length>0&&(x.value&&["zh-CN","zh-TW"].includes(x.value)?R():x.value==="de"?D():y.allowBAAI?f("chooseModel",ee[0]):f("chooseModel",I.value));break;case"rank":f("chooseModel",ne.value)}for(const p of V.value)p.replicas=await d.getReplicas(d.apiKey,p.name);f("modelsLoaded")},de=e=>{ce("event","embedding_view_model_detail",{location:me.location.href,model:e}),Te(`https://huggingface.co/jinaai/${e}`)},T=z(""),re=e=>{Ie(e).then(()=>{T.value=e}),setTimeout(()=>{T.value=""},1800)},ce=window.gtag,me=window.document,U=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,l)=>{var u;return k(),w(Ae,{borderless:"",ref_key:"componentRef",ref:S,class:"q-pa-md cursor-pointer","use-input":"","fill-input":"",filled:"",square:"","hide-selected":"","input-debounce":"0",modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=a=>g.value=a),"display-value":(u=g.value)==null?void 0:u.name,options:C.value,"option-label":a=>a.name,"option-value":a=>a.name,loading:A.value,disable:A.value,"label-color":"grey-5",label:e.category==="rank"?s(n)("embedding.select_rerank_model"):s(n)("embedding.select_embedding_model"),onFilter:ie},{prepend:t(()=>[o(G,{name:e.spaceSaving?void 0:"img:"+(e.category==="rank"?s(ke):s(Me))},null,8,["name"])]),"no-option":t(()=>[e.allowNone?K((k(),w(J,{key:0,clickable:"",active:!e.currentModel,onClick:l[0]||(l[0]=a=>f("chooseModel",null)),class:"q-pa-md"},{default:t(()=>[o(Z,null,{default:t(()=>[o(F,{overline:"",caption:""},{default:t(()=>[b(c(s(n)("embedding.none")),1)]),_:1}),o(F,{class:"text-weight-bold"},{default:t(()=>[b(c(s(n)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[xe],[Be]]):q("",!0)]),option:t(({opt:a,itemProps:p})=>{var B;return[o(J,Fe(p,{active:a.name===((B=g.value)==null?void 0:B.name),class:"q-pa-md"}),{default:t(()=>[o(Z,null,{default:t(()=>[o(F,{class:"text-weight-bold"},{default:t(()=>[ze("code",null,c(a.name),1),o(G,{class:"q-ml-sm cursor-pointer",name:T.value===a.name?"done":"content_copy",onClick:X(L=>re(a.name),["stop"])},null,8,["name","onClick"])]),_:2},1024),o(F,{overline:"",caption:""},{default:t(()=>[b(c(s(n)(`embedding.${a.name.replace(".","_")}_description`)),1)]),_:2},1024),o(F,{caption:"",class:"row"},{default:t(()=>{var L,N,Q,$,O,P,j;return[e.allowBAAI?q("",!0):(k(),w(v,{key:0,label:a.replicas>0?s(n)("embedding.running"):s(n)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:t(()=>[o(h,{"max-width":"300px"},{default:t(()=>[b(c(s(n)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"])),a.tags&&a.tags.includes("multimodal")?(k(),w(v,{key:1,square:"",size:"xs",outline:"",color:a.name!==((L=g.value)==null?void 0:L.name)?"grey-5":"",style:{"border-radius":"0"},label:s(n)("embedding.multimodal"),icon:"mms"},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.multimodal_explain")),1)]),_:1})]),_:2},1032,["color","label"])):q("",!0),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(k(),w(v,{key:2,color:a.name!==((N=g.value)==null?void 0:N.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:s(n)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):q("",!0),o(v,{label:a.meta_data.token_length,square:"",color:a.name!==((Q=g.value)==null?void 0:Q.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(k(),w(v,{key:3,label:a.meta_data.output_dim,square:"",color:a.name!==(($=g.value)==null?void 0:$.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):q("",!0),o(v,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((O=g.value)==null?void 0:O.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),o(v,{label:U(a.meta_data.language),square:"",color:a.name!==((P=g.value)==null?void 0:P.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.language_explain",{_language:U(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),K(o(v,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==((j=g.value)==null?void 0:j.name)?"grey-5":"",style:{"border-radius":"0"},onClick:X(Le=>de(a.name),["stop"]),clickable:"",label:s(n)("embedding.opensource")},{default:t(()=>[o(h,null,{default:t(()=>[b(c(s(n)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"]),[[qe,a.name!=="jina-reranker-v1-base-en"]])]}),_:2},1024)]),_:2},1024)]),_:2},1040,["active"])]}),_:1},8,["modelValue","display-value","options","option-label","option-value","loading","disable","label"])}}});export{Qe as _};
