import{j as Ie,a0 as Se,aE as ze,am as ue,u as Re,k as f,aX as Ue,d8 as Ce,w as Le,W as Te,b9 as Ee,aI as Pe,b2 as Be,n as De,a2 as je,a3 as d,a4 as I,a5 as s,aa as y,a6 as o,ad as me,ae as E,ah as S,ai as P,aq as X,aj as K,af as x,ag as w,ab as Q,a9 as ge,ap as fe,a8 as B,q as R,aT as U,bc as We,as as Oe,ac as Ae,a7 as _e}from"./index-BumM2D-P.js";import{Q as Ne}from"./QItemLabel-BUF9mLqU.js";import{Q as pe}from"./QTooltip-CvaMO2se.js";import{Q as Me}from"./QTab-BYSl96Fg.js";import{Q as Ge}from"./QTabs-FtJwfX3V.js";import{b as He,Q as Je}from"./QChip-FHURb6bB.js";import{Q as Xe}from"./finetune-qQubIZ-a.js";import{Q as Ke}from"./QForm-CPDprHrf.js";import{Q as Ye}from"./QLinearProgress-eIKK1Cj3.js";import{Q as Ze,a as $e,R as ea}from"./PurchaseTab-CAzWm4am.js";import{V as aa}from"./VideoDialog-ClA_0Sfw.js";const Y=".jpg, .jpeg, .png, .webp",V=5,la=Ie({__name:"ContactSalesForm",props:{showShortcuts:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!1},withLicenseConfig:{type:Boolean,default:!1},className:{default:""},maximizedWindow:{type:Boolean,default:!1}},setup(Z,{expose:i}){i();const u=Z,e=()=>{a.dialog({component:aa,componentProps:{videoSrc:"https://jina-ai-gmbh.ghost.io/content/media/2024/10/jina-ai-rate-limit.mp4",title:"contact_us_page.get_api_key",description:"contact_us_page.turn_on_volume",icon:"volume_up"}})},{t:_,te:C}=Se({useScope:"global"}),a=De(),q=ze(),{isPaidUser:D,isPremiumPaidUser:$}=ue(q),ee=Re(),{user:L,licenseConfig:b}=ue(ee),j=f(null),T=f(null),g=f({name:"",email:"",country:"",company:"",companySize:"",companyWebsite:"https://",department:"",role:"",other:"",agree:!1,products:[]}),W=f([]),v=f([]),ae=f(null),F=[...Ue.value.map(l=>C(l.label)?_(l.label):l.label),...Ce.value.filter(l=>!l.subItem).map(l=>C(l.label)?_(l.label):l.label)].flat(),O=f(F),ye=f([{label:"contact_us_page.pricing",icon:"paid",to:"#pricing",maximizedTo:"/api-dashboard/pricing"},{label:"contact_us_page.get_api_key",icon:"smart_display",to:"#get-api-key",clickHandler:e},{label:"contact_us_page.rate_limit",icon:"speed",to:"#rate-limit",maximizedTo:"/api-dashboard/rate-limit"},{label:"estimator.title",icon:"calculate",to:"/api-dashboard/license-config?login=true",maximizedTo:"/api-dashboard/license-config?login=true"}]),le=(l="")=>{if(l==="")O.value=F;else{const t=l.toLowerCase();O.value=F.filter(n=>n.toLowerCase().includes(t))}},be=(l,t)=>{t(()=>le(l))},ve=(l,t)=>{l.length>0&&(F.includes(l)||F.push(l),t(l,"toggle"))},he=()=>{var l;(l=ae.value)==null||l.pickFiles()},ke=l=>{l.find(n=>n.failedPropValidation)&&a.notify({message:_("contact_us_page.image_validate",{_num:V}),type:"negative",icon:"error"})},A=async l=>{var c,k,z,se,re,ce,de;if(!l)return;let t=l instanceof Array?l:[l];if(t.length+((k=(c=v.value)==null?void 0:c.length)!=null?k:0)>V){a.notify({message:_("contact_us_page.image_validate",{_num:V}),type:"negative",icon:"error"});const p=V-((se=(z=v.value)==null?void 0:z.length)!=null?se:0);if(p<=0)return;t=t.slice(0,p)}const r=t.filter(p=>p instanceof File);W.value=(ce=(re=W.value)==null?void 0:re.concat(r))!=null?ce:r;const m=t.map((p,Fe)=>({url:p instanceof File?URL.createObjectURL(p):p,image:void 0,file:p,name:p instanceof File?p.name:`image-${Fe}`}));v.value=v.value.concat(m),(de=T.value)==null||de.validate()},we=l=>{v.value.splice(l,1)},N=(l,t)=>{const r=t.split(",").map(c=>c.trim()).map(c=>c.replace(".","")).join("|");return new RegExp(r).test(l)},te=f(),h=f(!1),Qe=l=>{l.preventDefault(),l.stopPropagation(),h.value=!0},Ve=l=>{var n;l.preventDefault(),l.stopPropagation();const t=(n=te.value)==null?void 0:n.getBoundingClientRect();if(!t){h.value=!1;return}(l.x>t.left+t.width||l.x<t.left||l.y>t.top+t.height||l.y<t.top)&&(h.value=!1)},M=l=>{if(l.some(n=>!N(n.type,Y))){a.notify({message:_("contact_us_page.image_validate",{_num:V}),color:"negative",icon:"error"});return}const t=[];for(let n=0;n<l.length;n++)t.push(l[n]);A(t)},oe=l=>new Promise(t=>{try{l.getAsString(n=>{t(n)})}catch{t("")}}),xe=async l=>{var m;l.preventDefault(),h!=null&&h.value&&(h.value=!1);const t=[],n=[],r=(m=l.dataTransfer)==null?void 0:m.items;if(r){for(let c=0;c<r.length;c++){const k=r[c];if(k.kind==="file"){const z=k.getAsFile();z&&t.push(z)}else k.kind==="string"&&k.type==="text/uri-list"&&n.push(k)}if(n.length>0){const c=await oe(n[0]);if(!c&&t.length>0){M([t[0]]);return}c&&A(c)}else t.length>0&&M(t)}},G=f(!1),H=f(!1),qe=async()=>{if(j.value&&await j.value.validate()){G.value=!0;const l={is_paid_user:D.value?$.value?"PREMIUM-paid":"paid":"no (can not tell from user browser)",name:g.value.name,role:g.value.role,email:g.value.email,country:g.value.country,company:g.value.company,company_size:g.value.companySize,company_website:g.value.companyWebsite,preferred_products:g.value.products.toString(),other:g.value.other};u.withLicenseConfig&&(b!=null&&b.value)&&(l.license_config=JSON.stringify(b.value,void 0,2));const t=new FormData;t.append("_app","website"),t.append("_title","ðŸ”” User Contacting"),t.append("_data",new Blob([JSON.stringify(l)],{type:"application/json"})),v.value.forEach(r=>{t.append(r.name,r.file)}),(await fetch("https://api.hubble.jina.ai/v2/rpc/feedback.collect",{method:"POST",body:t}).finally(()=>{G.value=!1})).status===200?(a.notify({message:_("contact_us_page.submit_success"),icon:"check"}),H.value=!0):a.notify({message:_("contact_us_page.submit_failed"),color:"negative",icon:"close"}),setTimeout(()=>{H.value=!1},2e3)}},J=l=>{var n;const t=(n=l.clipboardData)==null?void 0:n.items;if(t){for(const r of t)if(r.type.startsWith("image/")){const m=r.getAsFile();if(!m)continue;const c=N(m.type,Y);v.value.length<V&&c?v.value.push({url:URL.createObjectURL(m),image:void 0,file:m,name:m.name}):a.notify({message:_("contact_us_page.image_validate",{_num:V}),color:"negative",icon:"error"})}}},ne=()=>{var l,t,n,r,m;u.withLicenseConfig&&(g.value.name=((l=L.value)==null?void 0:l.displayName)||((n=(t=L.value.email)==null?void 0:t.split("@"))==null?void 0:n[0])||"",g.value.email=(m=(r=L.value)==null?void 0:r.email)!=null?m:"",b!=null&&b.value&&(g.value.products=[_("estimator.interests",{_Price:b.value.price})]))};Le(()=>u.withLicenseConfig,l=>{l&&ne()}),Te(()=>{var l,t;(t=(l=T.value)==null?void 0:l.$el)==null||t.addEventListener("paste",J)}),Ee(()=>{var l,t;(t=(l=T.value)==null?void 0:l.$el)==null||t.removeEventListener("paste",J)});const ie={props:u,openVideoDialog:e,t:_,te:C,$q:a,embeddingStore:q,isPaidUser:D,isPremiumPaidUser:$,userStore:ee,user:L,licenseConfig:b,formRef:j,inputRef:T,models:g,uploadedFiles:W,images:v,imageRef:ae,acceptedTypes:Y,maxImages:V,productOptions:F,filterOptions:O,shortcutBtns:ye,updateFilterOptions:le,filterFn:be,createValue:ve,onImageBtnClick:he,onImageRejected:ke,onImageUpload:A,onRemoveImage:we,validateFileType:N,containerRef:te,isDraggedOver:h,onDragOver:Qe,onDragLeave:Ve,handleFiles:M,dataTransferToString:oe,onDrop:xe,sendingFeedback:G,isSuccess:H,sendFeedback:qe,onPaste:J,init:ne,get QForm(){return Ke},get QSelect(){return Ye},get QFile(){return Ze},get QInput(){return Pe},get locateByHash(){return Be},get REG_URL(){return $e},get REG_EMAIL(){return ea}};return Object.defineProperty(ie,"__isScriptSetup",{enumerable:!1,value:!0}),ie}}),ta={class:"row items-center q-col-gutter-y-md"},oa={class:"column items-center justify-center"},na={class:"row q-gutter-md"},ia={key:0,class:"column items-center"},sa={key:1,class:"column items-center"};function ra(Z,i,u,e,_,C){return d(),I(_e,{class:K([u.className,"column fit relative-position no-wrap"]),flat:"",bordered:!u.maximizedWindow,square:"",style:Ae({"max-height: 100vh;":u.maximizedWindow})},{default:s(()=>[u.showShortcuts?(d(),y(S,{key:0},[o(ge,null,{default:s(()=>[o(me,{class:"q-pa-none"},{default:s(()=>[o(E,{class:"q-pa-none"},{default:s(()=>[o(Ne,null,{default:s(()=>[(d(!0),y(S,null,P(e.shortcutBtns,a=>(d(),I(R,{label:e.t(a.label),key:a.label,icon:a.icon,onClick:q=>a.to.startsWith("/")?void 0:e.locateByHash(a.to),to:a.to.startsWith("/")?a.to:void 0,size:"sm","no-caps":"",flat:"",square:"",class:"q-mr-xs"},null,8,["label","icon","onClick","to"]))),128))]),_:1})]),_:1}),e.isPaidUser?(d(),I(E,{key:0,side:""},{default:s(()=>[o(X,{name:"o_verified",class:K({"golden-foil":e.isPremiumPaidUser,"silver-foil":!e.isPremiumPaidUser&&e.isPaidUser})},{default:s(()=>[o(pe,null,{default:s(()=>[x(w(e.t("contact_us_page.priority")),1)]),_:1})]),_:1},8,["class"])]),_:1})):Q("",!0)]),_:1})]),_:1}),o(fe)],64)):Q("",!0),u.maximizedWindow?(d(),y(S,{key:1},[o(Ge,{align:"left",shrink:"","no-caps":"",dense:"","inline-label":!u.maximizedWindow,"indicator-color":"transparent",class:"full-width"},{default:s(()=>[(d(!0),y(S,null,P(e.shortcutBtns,a=>(d(),I(Me,{class:"q-pa-none","content-class":"q-pa-none",key:a.label},{default:s(()=>[o(R,{label:e.t(a.label),icon:a.icon,onClick:a.clickHandler,to:a.maximizedTo,padding:"md",stretch:"","no-caps":"","no-wrap":"",flat:"",square:""},null,8,["label","icon","onClick","to"])]),_:2},1024))),128))]),_:1},8,["inline-label"]),o(fe)],64)):Q("",!0),o(ge,{class:"relative-position"},{default:s(()=>[o(e.QForm,{onSubmit:e.sendFeedback,ref:"formRef"},{default:s(()=>[B("div",ta,[o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.name,"onUpdate:modelValue":i[0]||(i[0]=a=>e.models.name=a),label:`${e.t("contact_us_page.name")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.email,"onUpdate:modelValue":i[1]||(i[1]=a=>e.models.email=a),type:"email",label:`${e.t("contact_us_page.work_email")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>e.REG_EMAIL.test(a)||e.t("contact_us_page.invalid_email")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-4",filled:"",square:"",modelValue:e.models.role,"onUpdate:modelValue":i[2]||(i[2]=a=>e.models.role=a),label:`${e.t("contact_us_page.role")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-6",filled:"",square:"",modelValue:e.models.company,"onUpdate:modelValue":i[3]||(i[3]=a=>e.models.company=a),label:`${e.t("contact_us_page.company")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",type:"number",modelValue:e.models.companySize,"onUpdate:modelValue":i[4]||(i[4]=a=>e.models.companySize=a),label:`${e.t("contact_us_page.company_size")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>a>=1||e.t("contact_us_page.invalid_number")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-3",filled:"",square:"",modelValue:e.models.country,"onUpdate:modelValue":i[5]||(i[5]=a=>e.models.country=a),label:`${e.t("contact_us_page.country")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required")]},null,8,["modelValue","label","rules"]),o(e.QInput,{class:"col-12",filled:"",square:"",modelValue:e.models.companyWebsite,"onUpdate:modelValue":i[6]||(i[6]=a=>e.models.companyWebsite=a),label:`${e.t("contact_us_page.company_website")}`,placeholder:`${e.t("contact_us_page.company_website_placeholder")}`,"lazy-rules":!0,rules:[a=>!!a||e.t("contact_us_page.field_required"),a=>e.REG_URL.test(a)||e.t("contact_us_page.invalid_url")]},null,8,["modelValue","label","placeholder","rules"]),o(e.QSelect,{class:"col-12",filled:"",square:"",label:e.t("contact_us_page.preferred_products"),modelValue:e.models.products,"onUpdate:modelValue":i[7]||(i[7]=a=>e.models.products=a),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",onNewValue:e.createValue,options:e.filterOptions,onFilter:e.filterFn,readonly:u.withLicenseConfig},{selected:s(()=>[(d(!0),y(S,null,P(e.models.products,a=>(d(),I(He,{key:a,dense:"",square:"","text-color":"primary",class:"bg-mixed-300",icon:u.withLicenseConfig?"diamond":void 0},{default:s(()=>[x(w(a),1)]),_:2},1032,["icon"]))),128))]),_:1},8,["label","modelValue","options","readonly"]),u.withLicenseConfig?Q("",!0):(d(),y("div",{key:0,class:"col-12 relative-position",onDragenter:e.onDragOver,onDragleave:e.onDragLeave,ref:"containerRef"},[o(e.QInput,{label:`${e.t("contact_us_page.anything_else")}`,modelValue:e.models.other,"onUpdate:modelValue":i[8]||(i[8]=a=>e.models.other=a),filled:"",square:"",rules:[a=>!!a&&a.length>5||e.images.length>0||e.t("contact_us_page.field_required")],"lazy-rules":!0,type:"textarea",class:"full-width",ref:"inputRef"},{append:s(()=>[o(R,{label:e.t("contact_us_page.image_upload"),outline:"",square:"",icon:"attach_file_add",disable:e.images.length===e.maxImages,onClick:U(e.onImageBtnClick,["stop"])},{default:s(()=>[o(pe,null,{default:s(()=>[x(w(e.t("contact_us_page.image_validate",{_num:e.maxImages})),1)]),_:1})]),_:1},8,["label","disable"])]),_:1},8,["label","modelValue","rules"]),o(e.QFile,{"model-value":e.uploadedFiles,"onUpdate:modelValue":e.onImageUpload,style:{display:"none"},ref:"imageRef",accept:e.acceptedTypes,multiple:"","max-files":e.maxImages,"max-file-size":"5120000",onRejected:e.onImageRejected},null,8,["model-value"]),e.isDraggedOver?(d(),y("div",{key:0,class:"drop-overlay column items-center justify-center bg-transparent lock-blur",style:{"z-index":"1"},onDragover:i[9]||(i[9]=U(()=>{},["prevent"])),onDrop:U(e.onDrop,["stop"])},[B("div",oa,[o(X,{class:"q-mb-sm",size:"xl",name:"place_item"}),x(" "+w(e.t("contact_us_page.drop_area_for_image")),1)])],32)):Q("",!0),B("div",na,[e.uploadedFiles?(d(!0),y(S,{key:0},P(e.images,(a,q)=>(d(),I(_e,{flat:"",square:"",class:"relative-position cursor-pointer image-preview bg-mixed-200 q-pa-sm",key:q},{default:s(()=>[o(Je,{src:a.url,class:"full-width full-height",fit:"contain"},null,8,["src"]),o(R,{flat:"",round:"",icon:"close",class:"absolute-top-right image-delete-btn",size:"sm",dense:"",onClick:U(D=>e.onRemoveImage(q),["stop"])},null,8,["onClick"])]),_:2},1024))),128)):Q("",!0)])],544)),o(me,{class:"col-12 q-my-md",tag:"label"},{default:s(()=>[o(E,{side:""},{default:s(()=>[o(We,{modelValue:e.models.agree,"onUpdate:modelValue":i[10]||(i[10]=a=>e.models.agree=a)},null,8,["modelValue"])]),_:1}),o(E,null,{default:s(()=>[x(w(e.t("contact_us_page.agreement"))+" ",1),B("a",{href:"/legal#privacy-policy",class:"text-dim",target:"_blank",onClick:i[11]||(i[11]=U(()=>{},["stop"]))},w(e.t("contact_us_page.private_statement")),1)]),_:1})]),_:1}),o(R,{type:"submit",disable:!e.models.agree||e.sendingFeedback,class:K(["q-mt-md",u.maximizedWindow?"col-auto":"col-12"]),outline:"",square:"",padding:"lg",label:e.t("contact_us_page.submit"),icon:"send",loading:e.sendingFeedback},null,8,["disable","class","label","loading"])])]),_:1},512)]),_:1}),o(Xe,{showing:e.sendingFeedback||e.isSuccess,class:"non-selectable lock-blur"},{default:s(()=>[e.isSuccess?(d(),y("div",ia,[o(X,{name:"check",size:"3em",class:"q-mb-lg"}),x(" "+w(e.t("contact_us_page.feedback_sent")),1)])):Q("",!0),e.sendingFeedback?(d(),y("div",sa,[o(Oe,{size:"3em",class:"q-mb-lg"}),x(" "+w(e.t("contact_us_page.sending_feedback")),1)])):Q("",!0)]),_:1},8,["showing"])]),_:1},8,["class","bordered","style"])}const ha=je(la,[["render",ra],["__scopeId","data-v-4bbf731b"],["__file","ContactSalesForm.vue"]]);export{ha as C};
