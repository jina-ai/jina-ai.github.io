import{Q as m,a as b}from"./QItemLabel.19d865f6.js";import{P as A,b1 as ee,bH as ae,e as oe,a6 as ne,az as V,ay as te,f as le,w as se,K as ie,h as re,a7 as _,a8 as o,ah as l,al as $,a9 as g,at as C,ad as t,af as d,ag as i,ae as q,Z as R,ac as T,ak as x,aa as de,ab as ue,bF as ce,ai as me,bY as ge,bB as pe,aN as U}from"./index.97b69255.js";import{Q as v}from"./QTooltip.3e3dcbea.js";import{Q as fe}from"./QList.a2b39bb8.js";import{Q as be}from"./QBtnDropdown.b2299051.js";import{C as P}from"./ClosePopup.bc1d9b97.js";import{u as _e}from"./embedding.9aeb37f5.js";function ve(c){const u=Object.assign({noopener:!0},c),n=[];for(const s in u){const r=u[s];r===!0?n.push(s):(ae(r)||typeof r=="string"&&r!=="")&&n.push(s+"="+r)}return n.join(",")}function W(c,u,n){let s=window.open;if(A.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(c,{openExternal:!0})}const r=s(c,"_blank",ve(n));if(r)return A.is.desktop&&r.focus(),r;u&&u()}var ye=(c,u,n)=>{if(A.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:c},ee,u):W(c,u,n)});return}return W(c,u,n)};const he={class:"full-width ellipsis q-pl-md"},Ae=oe({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded"],setup(c,{emit:u}){const{t:n}=ne({useScope:"global"}),s=_e(),{models:r,baseDeModel:j,baseEnModel:F,baseZhModel:K,jinaRerankerV1:Z}=V(s),G=te(),{language:h}=V(G),w=le(!1),y=c,p=u,B=()=>{var e;p("chooseModel",(e=K.value)!=null?e:F.value)},Q=()=>{var e;p("chooseModel",(e=j.value)!=null?e:F.value)};se(h,e=>{y.category==="embedding"&&(e&&["zh-CN","zh-TW"].includes(e)?B():e==="de"&&Q())}),ie(async()=>{await O()});const H=re(()=>r.value.filter(e=>{const f=y.category==="multi-embeddings",a=e.request_path,M=f?["multi-embeddings","embedding"]:[y.category];return Array.isArray(a)?a.some(k=>M.includes(k)):M.includes(a)}).sort((e,f)=>f.replicas-e.replicas)),O=async()=>{w.value=!0,await s.getModels(),w.value=!1,y.category==="embedding"||y.category==="multi-embeddings"?r.value.length>0&&(h.value&&["zh-CN","zh-TW"].includes(h.value)?B():h.value==="de"?Q():p("chooseModel",F.value)):y.category==="rank"&&p("chooseModel",Z.value);for(const e of s.models)e.replicas=await s.getReplicas(s.apiKey,e.name);p("modelsLoaded")},Y=e=>{J("event","embedding_view_model_detail",{location:X.location.href,model:e}),ye(`https://huggingface.co/jinaai/${e}`)},J=window.gtag,X=window.document,L=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,f)=>(g(),_(be,{"no-caps":"",flat:"",square:"",stretch:"",icon:"img:"+(e.category==="rank"?l(ge):l(pe)),loading:w.value,"disable-dropdown":w.value,class:$(e.$q.screen.lt.sm?"full-width q-py-md":"")},{label:o(()=>[C("div",he,[t(q,{class:$(e.currentModel?"dynamic-text":"")},{default:o(()=>[t(m,{caption:"",class:"text-grey text-left"},{default:o(()=>[d(i(e.category==="rank"?l(n)("embedding.select_rerank_model"):l(n)("embedding.select_embedding_model")),1)]),_:1}),e.currentModel?(g(),_(m,{key:0},{default:o(()=>{var a;return[C("code",null,i((a=e.currentModel)==null?void 0:a.name),1)]}),_:1})):(g(),_(m,{key:1},{default:o(()=>[d(i(l(n)("embedding.none")),1)]),_:1}))]),_:1},8,["class"])])]),default:o(()=>[t(fe,null,{default:o(()=>[e.allowNone?R((g(),_(T,{key:0,clickable:"",active:!e.currentModel,onClick:f[0]||(f[0]=a=>p("chooseModel",null)),class:"q-pa-md"},{default:o(()=>[t(q,null,{default:o(()=>[t(m,{overline:"",caption:""},{default:o(()=>[d(i(l(n)("embedding.none")),1)]),_:1}),t(m,{class:"text-weight-bold"},{default:o(()=>[d(i(l(n)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[U],[P]]):x("",!0),(g(!0),de(me,null,ue(H.value,(a,M)=>{var k;return R((g(),_(T,{key:M,clickable:"",active:a.name===((k=e.currentModel)==null?void 0:k.name),onClick:z=>p("chooseModel",a),class:"q-pa-md"},{default:o(()=>[t(q,null,{default:o(()=>[t(m,{overline:"",caption:""},{default:o(()=>[C("code",null,i(a.name),1)]),_:2},1024),t(m,{class:"text-weight-bold"},{default:o(()=>[d(i(l(n)(`embedding.${a.name}_description`)),1)]),_:2},1024),t(m,{caption:"",class:"row"},{default:o(()=>{var z,S,D,E,I,N;return[t(b,{label:a.replicas>0?l(n)("embedding.running"):l(n)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:o(()=>[t(v,{"max-width":"300px"},{default:o(()=>[d(i(l(n)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"]),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(g(),_(b,{key:0,color:a.name!==((z=e.currentModel)==null?void 0:z.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:l(n)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):x("",!0),t(b,{label:a.meta_data.token_length,square:"",color:a.name!==((S=e.currentModel)==null?void 0:S.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(g(),_(b,{key:1,label:a.meta_data.output_dim,square:"",color:a.name!==((D=e.currentModel)==null?void 0:D.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):x("",!0),t(b,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((E=e.currentModel)==null?void 0:E.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),t(b,{label:L(a.meta_data.language),square:"",color:a.name!==((I=e.currentModel)==null?void 0:I.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.language_explain",{_language:L(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),t(b,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==((N=e.currentModel)==null?void 0:N.name)?"grey-5":"",style:{"border-radius":"0"},onClick:ce(we=>Y(a.name),["stop"]),clickable:"",label:l(n)("embedding.opensource")},{default:o(()=>[t(v,null,{default:o(()=>[d(i(l(n)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"])]}),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[U],[P]])}),128))]),_:1})]),_:1},8,["icon","loading","disable-dropdown","class"]))}});export{Ae as _};
