import{s as Z,m as M,p as ue,K as ce,dl as me,dz as de,w as R,j as P,ag as $,a1 as F,aJ as q,aR as B,a2 as n,a3 as l,a4 as a,a5 as t,ak as c,ab as y,al as p,ad as d,aj as S,a7 as x,ac as i,ai as fe,u as _e,ao as E,k as Q,W as pe,n as ye,ap as ve,aq as ge,dI as be,cD as he,cN as ke,cO as Se,q as h,aN as H,a9 as L,a8 as N,ae as g,aL as xe,af as Te,a6 as Y,aa as J,T as De,an as we,aW as Ke}from"./index-DuaKnFp4.js";import{Q as Qe}from"./QToolbar-DFoN3PNY.js";import{u as Ce,a as Me,b as Ae,Q as Ee}from"./QTabs-BctnxX93.js";import{P as Le,d as Ne,Q as Re,a as qe,b as Be,c as Ie}from"./PurchaseSuccessDialog-BriztLZR.js";import{a as I,Q as W}from"./QItemLabel-BGKC4ZL9.js";import{Q as Pe}from"./QMenu-GiVJhfZA.js";import{Q as k}from"./QTooltip-Cu8chvFe.js";import{Q as Fe}from"./QBadge-CaK9k19N.js";import{c as Oe}from"./copy-to-clipboard-D0GO7Xwf.js";import{a as ze,b as Ue}from"./finetune-AluJIoNU.js";import{S as X,E as C,L as Ve,P as Ge}from"./PurchaseDialog-IrQMV7R2.js";import{u as je}from"./embedding-C6f_VsBD.js";import{u as He}from"./QForm-BWK3b3WG.js";import"./QResizeObserver-BydOpkPy.js";import"./QLinearProgress-CHxc0YSI.js";import"./format-DyQxkAtJ.js";import"./TouchPan-C98lBbBN.js";import"./touch-BjYP5sR0.js";import"./position-engine-Cd2CNaw8.js";import"./use-dialog-plugin-component-C8U0QgZr.js";import"./package-D9JPNs5w.js";import"./QBtnGroup-DNdwxS5e.js";import"./QExpansionItem-GZ4Jk0GJ.js";import"./QTable-eF42A3IR.js";import"./use-fullscreen-C-E9IpNs.js";import"./ClosePopup-B-uxLYaT.js";import"./QSpace-DZg7vdfV.js";const Ye=Z({name:"QToolbarTitle",props:{shrink:Boolean},setup(m,{slots:s}){const r=M(()=>"q-toolbar__title ellipsis"+(m.shrink===!0?" col-shrink":""));return()=>ue("div",{class:r.value},ce(s.default))}}),Je=Z({name:"QRouteTab",props:{...me,...Ce},emits:Me,setup(m,{slots:s,emit:r}){const e=de({useDisableForRouterLinkProps:!1}),{renderTab:v,$tabs:_}=Ae(m,s,r,{exact:M(()=>m.exact),...e});return R(()=>`${m.name} | ${m.exact} | ${(e.resolvedLink.value||{}).href}`,_.verifyRouteModel),()=>v(e.linkTag.value,e.linkAttrs.value)}}),We=P({__name:"DrawerItemComponent",props:{item:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},setup(m,{expose:s}){s();const{t:r}=$({useScope:"global"}),e={t:r};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function Xe(m,s,r,e,v,_){return q((n(),l(S,{to:{name:"api",params:{tab:r.item.name}},"active-class":"text-primary",clickable:""},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(y,{name:r.item.iconType==="svg"||r.item.icon.includes(".svg")?`img:${r.isActive?r.item.activeIcon:r.item.icon}`:r.item.icon},null,8,["name"])]),_:1}),t(c,null,{default:a(()=>[t(I,{lines:"1"},{default:a(()=>[p(d(e.t(r.item.label)),1)]),_:1})]),_:1})]),_:1},8,["to"])),[[B]])}const Ze=F(We,[["render",Xe],["__file","DrawerItemComponent.vue"]]),$e=P({__name:"AnimatedLogo",props:{miniState:Boolean},setup(m,{expose:s}){s();const r={};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),ea={style:{height:"56px"},class:"row items-center absolute-top"},aa={style:{"padding-left":"20px"}},ta={viewBox:"0 0 232 100",style:{width:"56px",height:"56px",transition:"all 0.2s ease-in-out"}},oa={fill:"#FFFFFF"};function sa(m,s,r,e,v,_){return n(),x("div",ea,[i("div",aa,[(n(),x("svg",ta,[i("g",oa,[s[1]||(s[1]=i("circle",{id:"j-dot",cx:"15",cy:"84.5",r:"15"},null,-1)),s[2]||(s[2]=i("path",{id:"letter-j",d:"M61.5 36.35c2 0 3.6 1.6 3.6 3.6v29.3c0 16.7-13.5 30.3-30 30.5V69.3l-.1-29.4c0-2 1.6-3.6 3.6-3.6h23.3z"},null,-1)),i("g",{style:fe({opacity:r.miniState?0:1,transition:"opacity 0.2s ease-in-out"})},s[0]||(s[0]=[i("circle",{id:"top-dot",cx:"96",cy:"15",r:"15"},null,-1),i("path",{id:"letter-i",d:"M81 40c0-2 1.5-3.6 3.6-3.6h23.4c2 0 3.6 1.6 3.6 3.6v41c0 2-1.6 3.6-3.6 3.6H84.6c-2 0-3.6-1.6-3.6-3.6V40z"},null,-1),i("path",{id:"letter-n",d:"M128.5 39.8c0-2 1.6-3.6 3.6-3.6h13.3l.5.1c15 .2 27.2 12.3 27.6 27.3v17.3c0 2-1.6 3.6-3.6 3.6h-37.8c-2 0-3.6-1.6-3.6-3.6V39.8z"},null,-1),i("path",{id:"letter-a",d:"M207.2 84h-.2c-12.6-.7-22.5-11.2-22.5-24 0-13.3 10.8-24.1 24.1-24.1 12.8 0 23.3 10 24 22.6h.1V80.4c0 2-1.6 3.6-3.6 3.6h-21.9z"},null,-1)]),4)])]))])])}const ra=F($e,[["render",sa],["__file","AnimatedLogo.vue"]]),na=P({__name:"SeFoLayout",setup(m,{expose:s}){s();const{t:r}=$({useScope:"global"}),e=ye(),v=ve(),_=ge(),T=_e(),{user:o}=E(T),f=je(),{apiKeyTokens:ee,isPremiumPaidUser:ae,isPaidUser:te}=E(f),b=He(),{keys:A,keysInfoCache:O}=E(b),oe=Q(!0),z=Q(!0),D=Q(),se=X.filter(u=>u.tooling),re=M(()=>{let u=[],j={};return X.forEach(K=>{K.name===C.KEY_MANAGER?j=K:K.showsOn.includes("menu")&&u.push(K)}),o.value.uid&&u.unshift(j),u}),ne=u=>{D.value&&clearTimeout(D.value),D.value=setTimeout(()=>{z.value=!u},100)},le=()=>{o.value.uid?v.push({params:{tab:C.KEY_MANAGER}}):(ke(Se,"click_login_button"),e.dialog({component:Ve,componentProps:{user:o},persistent:!0}))},ie=M(()=>o.value.uid?o.value.displayName||o.value.email||o.value.uid:r("key_manager.login"));function U(){if(_.query.purchase_status==="success"){const u=new Date(parseInt(_.query.session_id)).toLocaleString();be.create({component:Le,componentProps:{purchasedTime:u,hideActions:!0}})}}const V=async()=>{await b.fetchKeys(_.params.tab===C.KEY_MANAGER),A.value.length===0?(await b.addKey(f.apiKey),b.setPrimaryKey(f.apiKey)):b.checkPrimaryKey()};pe(async()=>{U()}),R(()=>f.apiKey,u=>{u&&f.getCurrentKeyInfo()}),R(()=>o.value.uid,async u=>{u?V():(A.value=[],O.value={},f.getCurrentKeyInfo())},{immediate:!0});const w=Q(!1),G={t:r,$q:e,router:v,route:_,userStore:T,user:o,embeddingStore:f,apiKeyTokens:ee,isPremiumPaidUser:ae,isPaidUser:te,apiKeyStore:b,keys:A,keysInfoCache:O,drawer:oe,miniState:z,timeout:D,seFoMoreRoutes:se,seFoRoutes:re,handleMouseMove:ne,login:le,userDisplayName:ie,checkPurchaseStatus:U,init:V,isApiKeyCopyDone:w,copyApiKey:()=>{!f.apiKey||w.value||(Oe(f.apiKey).then(()=>{e.notify({message:r("copy_to_clipboard_success"),icon:"done"}),w.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{w.value=!1},1800))},onBuy:()=>{e.dialog({component:Ge,componentProps:{purchaseKey:f.apiKey}})},get formatNumber(){return ze},get formatNumberShort(){return Ue},get EMBEDDING_TABS(){return C},DrawerItemComponent:Ze,AnimatedLogo:ra,get formatKey(){return he}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),la=["src","alt"],ia={class:"absolute-bottom"},ua={style:{"font-family":"monospace"}},ca=["src","alt"],ma={class:"ellipsis"};function da(m,s,r,e,v,_){const T=Ke("router-view");return n(),l(Ne,{view:"lHh Lpr lff",class:"main-layout"},{default:a(()=>[e.$q.screen.gt.sm?g("",!0):(n(),l(Re,{key:0,bordered:"",reveal:"",class:"bg-mixed-200 text-white","height-hint":"98"},{default:a(()=>[t(Qe,{class:"q-pa-none"},{default:a(()=>[t(h,{flat:"",square:"",stretch:"",icon:"img:/J.svg",to:{name:"landing"}}),t(Ye,{class:"my-font non-selectable"}),t(h,{flat:"",stretch:"",square:"",onClick:e.userStore.logout},{default:a(()=>[e.user.photoURL?(n(),l(H,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[i("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,la)]),_:1})):(n(),l(y,{key:1,size:"sm",round:"",name:"person"})),t(y,{name:"logout",class:"q-ml-md"})]),_:1},8,["onClick"])]),_:1}),e.user&&e.$q.screen.lt.md?(n(),l(Ee,{key:0,shrink:"","mobile-arrows":"",align:"left"},{default:a(()=>[(n(!0),x(N,null,L([...e.seFoRoutes,...e.seFoMoreRoutes],o=>(n(),l(Je,{key:o.name,to:{name:"api",params:{tab:o.name}},label:o.label?e.t(o.label):"",icon:o.tag==="usage"?`img:${o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)?o.activeIcon:o.icon}`:o.icon,"active-class":"text-primary","no-caps":"",exact:"",replace:""},null,8,["to","label","icon"]))),128))]),_:1})):g("",!0)]),_:1})),e.$q.screen.gt.sm?(n(),l(qe,{key:1,modelValue:e.drawer,"onUpdate:modelValue":s[1]||(s[1]=o=>e.drawer=o),"show-if-above":"",mini:e.miniState,onMouseover:s[2]||(s[2]=o=>e.handleMouseMove(!0)),onMouseout:s[3]||(s[3]=o=>e.handleMouseMove(!1)),"mini-to-overlay":"",width:250,breakpoint:500,bordered:"",class:"bg-mixed-200"},{default:a(()=>[i("div",{class:"row items-center absolute-top cursor-pointer",onClick:s[0]||(s[0]=o=>e.router.push({name:"landing"}))},[t(e.AnimatedLogo,{"mini-state":e.miniState},null,8,["mini-state"])]),t(Be,{class:"fit",style:{"max-height":"calc(100% - 112px)","margin-top":"56px"},"horizontal-thumb-style":{opacity:"0"}},{default:a(()=>[t(W,null,{default:a(()=>[t(xe,{"enter-to-class":"list-enter-from","enter-active-class":"animated bounceIn","leave-active-class":"animated backOutRight","leave-from-class":"list-leave-to","move-class":"list-move","enter-from-class":"list-enter-from","leave-to-class":"list-leave-to"},{default:a(()=>[(n(!0),x(N,null,L(e.seFoRoutes,o=>(n(),l(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)},null,8,["item","is-active"]))),128)),q((n(),l(S,{clickable:"","active-class":"text-primary",key:"tools"},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(y,{name:"service_toolbox"})]),_:1}),t(c,null,{default:a(()=>[t(I,{lines:"1"},{default:a(()=>[p(d(e.t("embedding.tools")),1)]),_:1})]),_:1}),t(Pe,{class:"bg-mixed-300 lock-blur","auto-close":""},{default:a(()=>[t(W,{class:"cursor-pointer",style:{width:"250px"}},{default:a(()=>[(n(!0),x(N,null,L(e.seFoMoreRoutes,o=>(n(),l(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)},null,8,["item","is-active"]))),128))]),_:1})]),_:1})]),_:1})),[[B]])]),_:1})]),_:1})]),_:1}),i("div",ia,[t(De,{appear:"","enter-active-class":"animated faster fadeInLeft","leave-active-class":"animated faster fadeOutLeft"},{default:a(()=>[e.miniState?g("",!0):(n(),l(Te,{key:0,flat:"",square:"",class:"bg-mixed-300"},{default:a(()=>[t(Y,{class:"q-pb-none text-dim"},{default:a(()=>[p(d(e.t("key_manager.available_resources")),1)]),_:1}),t(Y,{class:"q-pa-none"},{default:a(()=>[t(S,null,{default:a(()=>[t(c,{side:""},{default:a(()=>[t(y,{name:"o_data_usage"})]),_:1}),t(c,null,{default:a(()=>[i("span",{class:J(["text-h5",{"text-negative":e.apiKeyTokens<=0}])},d(e.formatNumberShort(e.apiKeyTokens)),3),t(k,null,{default:a(()=>[p(d(e.t("key_manager.balance_primary_key")+": "+e.formatNumber(e.apiKeyTokens)),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(h,{icon:"add_shopping_cart",flat:"",square:"",onClick:e.onBuy},{default:a(()=>[t(k,null,{default:a(()=>[p(d(e.t("embedding.buy_more_quota")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(c,{side:"",class:"relative-position"},{default:a(()=>[t(y,{name:"o_key"}),e.keys.length>0?(n(),l(Fe,{key:0,floating:"",rounded:"",label:e.keys.length,class:"bg-mixed-400"},{default:a(()=>[t(k,null,{default:a(()=>[p(d(e.t("key_manager.total_keys")+": "+e.keys.length),1)]),_:1})]),_:1},8,["label"])):g("",!0)]),_:1}),t(c,null,{default:a(()=>[i("span",ua,d(e.formatKey(e.embeddingStore.apiKey,{tailOnly:!0})),1),t(k,null,{default:a(()=>[p(d(e.t("key_manager.is_primary")),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(h,{icon:"content_copy",flat:"",square:"",onClick:e.copyApiKey})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),q((n(),l(S,{clickable:"",style:{height:"56px"},onClick:e.login},{default:a(()=>[t(c,{avatar:"",class:"q-my-sm q-pr-none user-avatar"},{default:a(()=>[e.user.photoURL?(n(),l(H,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[i("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,ca)]),_:1})):(n(),l(y,{key:1,size:"sm",round:"",name:"person"}))]),_:1}),t(c,null,{default:a(()=>[t(I,{lines:"1",class:"row items-center"},{default:a(()=>[i("span",ma,[e.isPaidUser?(n(),l(y,{key:0,name:"verified",class:J([{"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser},"q-mr-xs"])},null,8,["class"])):g("",!0),p(" "+d(e.userDisplayName),1)]),t(k,null,{default:a(()=>[p(d(e.userDisplayName),1)]),_:1})]),_:1})]),_:1}),e.user.uid&&!e.miniState?(n(),l(c,{key:0,side:""},{default:a(()=>[t(h,{flat:"",square:"",id:"more_menu",icon:"logout",onClick:we(e.userStore.logout,["stop"])},null,8,["onClick"])]),_:1})):g("",!0)]),_:1})),[[B]])])]),_:1},8,["modelValue","mini"])):g("",!0),t(Ie,null,{default:a(()=>[t(T)]),_:1})]),_:1})}const za=F(na,[["render",da],["__file","SeFoLayout.vue"]]);export{za as default};
