import{s as ee,m as M,p as fe,K as _e,d8 as ye,dh as pe,w as F,j as z,a0 as ae,a2 as U,aB as N,ay as O,a3 as l,a4 as n,a5 as a,a6 as t,ae as c,ao as v,af as y,ag as d,ad as K,aa as k,a8 as u,ac as ve,u as ge,ak as I,k as w,W as be,n as he,al as ke,am as Se,dJ as xe,cU as we,cV as Te,q as T,b2 as J,ai as q,ah as B,ab as p,b3 as De,a7 as Ke,a9 as W,T as P,aj as X,aM as Me,b8 as Qe}from"./index-BCtKUpm5.js";import{Q as Ce}from"./QToolbar-D6b9t5ob.js";import{u as Ee,a as Ae,b as Le,Q as Re}from"./QTabs-CY_RUxCi.js";import{P as Ie,d as qe,Q as Be,a as Pe,b as Fe,c as Ne}from"./PurchaseSuccessDialog-AHGf2eoz.js";import{a as L}from"./QItemLabel-CIx2E1gd.js";import{Q as Z}from"./QList-BWi8p2vw.js";import{Q as Oe}from"./QMenu-Cjp51KNU.js";import{Q as D}from"./QTooltip-5WUb9PXu.js";import{Q as ze}from"./QBadge-B-Xk4FBH.js";import{c as Ue}from"./copy-to-clipboard-BM9Fz0na.js";import{f as Ve,e as Ge,c as je}from"./date-DEKrXv3b.js";import{S as $,E as A,L as He,P as Ye}from"./PurchaseDialog-BZwyzcLW.js";import{u as Je}from"./embedding-BL8t8W2R.js";import{u as We}from"./finetune-unLoCPTO.js";import"./QResizeObserver-BZi5Ad-e.js";import"./QLinearProgress-BXmQZkt_.js";import"./TouchPan-C2_7ULGW.js";import"./touch-BjYP5sR0.js";import"./position-engine-DVINg0PI.js";import"./use-dialog-plugin-component-CwdVFGCD.js";import"./use-fullscreen-5_cULTCu.js";import"./package-D9JPNs5w.js";import"./QExpansionItem-BbghQw7S.js";import"./ClosePopup-CLKweR4O.js";const Xe=ee({name:"QToolbarTitle",props:{shrink:Boolean},setup(m,{slots:s}){const r=M(()=>"q-toolbar__title ellipsis"+(m.shrink===!0?" col-shrink":""));return()=>fe("div",{class:r.value},_e(s.default))}}),Ze=ee({name:"QRouteTab",props:{...ye,...Ee},emits:Ae,setup(m,{slots:s,emit:r}){const e=pe({useDisableForRouterLinkProps:!1}),{renderTab:g,$tabs:f}=Le(m,s,r,{exact:M(()=>m.exact),...e});return F(()=>`${m.name} | ${m.exact} | ${(e.resolvedLink.value||{}).href}`,f.verifyRouteModel),()=>g(e.linkTag.value,e.linkAttrs.value)}}),$e=z({__name:"DrawerItemComponent",props:{item:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},setup(m,{expose:s}){s();const{t:r}=ae({useScope:"global"}),e={t:r};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function ea(m,s,r,e,g,f){return N((l(),n(K,{to:{name:"api",params:{tab:r.item.name}},"active-class":"text-primary",clickable:""},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(v,{name:r.item.iconType==="svg"||r.item.icon.includes(".svg")?`img:${r.isActive?r.item.activeIcon:r.item.icon}`:r.item.icon},null,8,["name"])]),_:1}),t(c,null,{default:a(()=>[t(L,{lines:"1"},{default:a(()=>[y(d(e.t(r.item.label)),1)]),_:1})]),_:1})]),_:1},8,["to"])),[[O]])}const aa=U($e,[["render",ea],["__file","DrawerItemComponent.vue"]]),ta=z({__name:"AnimatedLogo",props:{miniState:Boolean},setup(m,{expose:s}){s();const r={};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),oa={style:{height:"56px"},class:"row items-center absolute-top"},sa={style:{"padding-left":"20px"}},ra={viewBox:"0 0 232 100",style:{width:"56px",height:"56px",transition:"all 0.2s ease-in-out"}},la={fill:"#FFFFFF"};function na(m,s,r,e,g,f){return l(),k("div",oa,[u("div",sa,[(l(),k("svg",ra,[u("g",la,[s[1]||(s[1]=u("circle",{id:"j-dot",cx:"15",cy:"84.5",r:"15"},null,-1)),s[2]||(s[2]=u("path",{id:"letter-j",d:"M61.5 36.35c2 0 3.6 1.6 3.6 3.6v29.3c0 16.7-13.5 30.3-30 30.5V69.3l-.1-29.4c0-2 1.6-3.6 3.6-3.6h23.3z"},null,-1)),u("g",{style:ve({opacity:r.miniState?0:1,transition:"opacity 0.2s ease-in-out"})},s[0]||(s[0]=[u("circle",{id:"top-dot",cx:"96",cy:"15",r:"15"},null,-1),u("path",{id:"letter-i",d:"M81 40c0-2 1.5-3.6 3.6-3.6h23.4c2 0 3.6 1.6 3.6 3.6v41c0 2-1.6 3.6-3.6 3.6H84.6c-2 0-3.6-1.6-3.6-3.6V40z"},null,-1),u("path",{id:"letter-n",d:"M128.5 39.8c0-2 1.6-3.6 3.6-3.6h13.3l.5.1c15 .2 27.2 12.3 27.6 27.3v17.3c0 2-1.6 3.6-3.6 3.6h-37.8c-2 0-3.6-1.6-3.6-3.6V39.8z"},null,-1),u("path",{id:"letter-a",d:"M207.2 84h-.2c-12.6-.7-22.5-11.2-22.5-24 0-13.3 10.8-24.1 24.1-24.1 12.8 0 23.3 10 24 22.6h.1V80.4c0 2-1.6 3.6-3.6 3.6h-21.9z"},null,-1)]),4)])]))])])}const ia=U(ta,[["render",na],["__file","AnimatedLogo.vue"]]),ua=z({__name:"SeFoLayout",setup(m,{expose:s}){s();const{t:r}=ae({useScope:"global"}),e=he(),g=ke(),f=Se(),Q=ge(),{user:o}=I(Q),_=Je(),{apiKeyTokens:te,isPremiumPaidUser:oe,isPaidUser:se}=I(_),b=We(),{keys:R,keysInfoCache:V}=I(b),re=w(!0),G=w(!0),C=w(),le=$.filter(i=>i.tooling),ne=w(!1),ie=M(()=>{let i=[],S={};return $.forEach(h=>{h.name===A.KEY_MANAGER?S=h:h.showsOn.includes("menu")&&i.push(h)}),o.value.uid&&i.unshift(S),i}),ue=i=>{C.value&&clearTimeout(C.value),C.value=setTimeout(()=>{G.value=!i},100)},ce=()=>{o.value.uid?g.push({params:{tab:A.KEY_MANAGER}}):(we(Te,"click_login_button"),e.dialog({component:He,componentProps:{user:o},persistent:!0}))},me=M(()=>o.value.uid?o.value.displayName||o.value.email||o.value.uid:r("key_manager.login")),de=M(()=>{var i,S;if(o.value.uid){const h=(S=(i=o.value.providerData)==null?void 0:i[0])==null?void 0:S.providerId;let x="";switch(h){case"google.com":x="Google";break;case"github.com":x="GitHub";break;case"password":x=r("key_manager.email");break}return x?r("key_manager.login_via",{_provider:x}):""}return""});function j(){if(f.query.purchase_status==="success"){const i=new Date(parseInt(f.query.session_id)).toLocaleString();xe.create({component:Ie,componentProps:{purchasedTime:i,hideActions:!0}})}else f.query.register_status==="success"&&e.notify({message:r("key_manager.auto_recharge_enable_success",{_key:f.query.api_key}),icon:"done"})}const H=async()=>{await b.fetchKeys(f.params.tab===A.KEY_MANAGER),R.value.length===0?(await b.addKey(_.apiKey),b.setPrimaryKey(_.apiKey)):b.checkPrimaryKey()};be(async()=>{j()}),F(()=>_.apiKey,i=>{i&&_.getCurrentKeyInfo()}),F(()=>o.value.uid,async i=>{i?H():(R.value=[],V.value={},_.getCurrentKeyInfo())},{immediate:!0});const E=w(!1),Y={t:r,$q:e,router:g,route:f,userStore:Q,user:o,embeddingStore:_,apiKeyTokens:te,isPremiumPaidUser:oe,isPaidUser:se,apiKeyStore:b,keys:R,keysInfoCache:V,drawer:re,miniState:G,timeout:C,seFoMoreRoutes:le,showFull:ne,seFoRoutes:ie,handleMouseMove:ue,login:ce,userDisplayName:me,userLoginType:de,checkPurchaseStatus:j,init:H,isApiKeyCopyDone:E,copyApiKey:()=>{!_.apiKey||E.value||(Ue(_.apiKey).then(()=>{e.notify({message:r("copy_to_clipboard_success"),icon:"done"}),E.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{E.value=!1},1800))},onBuy:()=>{e.dialog({component:Ye,componentProps:{purchaseKey:_.apiKey}})},get formatNumber(){return Ve},get formatNumberShort(){return Ge},get EMBEDDING_TABS(){return A},DrawerItemComponent:aa,AnimatedLogo:ia,get formatKey(){return je}};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}}),ca=["src","alt"],ma={class:"absolute-bottom"},da={class:"relative-position"},fa={style:{"font-family":"monospace"}},_a=["src","alt"],ya={class:"ellipsis"};function pa(m,s,r,e,g,f){const Q=Qe("router-view");return l(),n(qe,{view:"lHh Lpr lff",class:"main-layout"},{default:a(()=>[e.$q.screen.gt.sm?p("",!0):(l(),n(Be,{key:0,bordered:"",reveal:"",class:"bg-mixed-200 text-white","height-hint":"98"},{default:a(()=>[t(Ce,{class:"q-pa-none"},{default:a(()=>[t(T,{icon:"img:/Jina - Dark.svg",to:"/",stretch:"",size:"xl",dense:"",flat:"",class:"q-px-md q-pa-none",key:"logo"}),t(Xe,{class:"my-font non-selectable"}),t(T,{flat:"",stretch:"",square:"",onClick:e.userStore.logout},{default:a(()=>[e.user.photoURL?(l(),n(J,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[u("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,ca)]),_:1})):(l(),n(v,{key:1,size:"sm",round:"",name:"person"})),t(v,{name:"logout",class:"q-ml-md"})]),_:1},8,["onClick"])]),_:1}),e.user&&e.$q.screen.lt.md?(l(),n(Re,{key:0,shrink:"","mobile-arrows":"",align:"left"},{default:a(()=>[(l(!0),k(B,null,q([...e.seFoRoutes,...e.seFoMoreRoutes],o=>(l(),n(Ze,{key:o.name,to:{name:"api",params:{tab:o.name}},label:o.label?e.t(o.label):"",icon:o.tag==="usage"?`img:${o.name===(e.route.params.tab||e.EMBEDDING_TABS.READER_CODE)?o.activeIcon:o.icon}`:o.icon,"active-class":"text-primary","no-caps":"",exact:"",replace:""},null,8,["to","label","icon"]))),128))]),_:1})):p("",!0)]),_:1})),e.$q.screen.gt.sm?(l(),n(Pe,{key:1,modelValue:e.drawer,"onUpdate:modelValue":s[3]||(s[3]=o=>e.drawer=o),"show-if-above":"",mini:e.miniState,onMouseover:s[4]||(s[4]=o=>e.handleMouseMove(!0)),onMouseout:s[5]||(s[5]=o=>e.handleMouseMove(!1)),"mini-to-overlay":"",width:250,breakpoint:500,bordered:"",class:"bg-mixed-200"},{default:a(()=>[u("div",{class:"row items-center absolute-top cursor-pointer",onClick:s[0]||(s[0]=o=>e.router.push({name:"landing"}))},[t(e.AnimatedLogo,{"mini-state":e.miniState},null,8,["mini-state"])]),t(Fe,{class:"fit",style:{"max-height":"calc(100% - 112px)","margin-top":"56px"},"horizontal-thumb-style":{opacity:"0"}},{default:a(()=>[t(Z,null,{default:a(()=>[t(De,{"enter-to-class":"list-enter-from","enter-active-class":"animated bounceIn","leave-active-class":"animated backOutRight","leave-from-class":"list-leave-to","move-class":"list-move","enter-from-class":"list-enter-from","leave-to-class":"list-leave-to"},{default:a(()=>[(l(!0),k(B,null,q(e.seFoRoutes,o=>(l(),n(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.READER_CODE)},null,8,["item","is-active"]))),128)),N((l(),n(K,{clickable:"","active-class":"text-primary",key:"tools"},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(v,{name:"service_toolbox"})]),_:1}),t(c,null,{default:a(()=>[t(L,{lines:"1"},{default:a(()=>[y(d(e.t("embedding.tools")),1)]),_:1})]),_:1}),t(Oe,{class:"bg-mixed-300 lock-blur","auto-close":""},{default:a(()=>[t(Z,{class:"cursor-pointer",style:{width:"250px"}},{default:a(()=>[(l(!0),k(B,null,q(e.seFoMoreRoutes,o=>(l(),n(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)},null,8,["item","is-active"]))),128))]),_:1})]),_:1})]),_:1})),[[O]])]),_:1})]),_:1})]),_:1}),u("div",ma,[t(P,{appear:"","enter-active-class":"animated faster fadeInLeft","leave-active-class":"animated faster fadeOutLeft"},{default:a(()=>[e.miniState?p("",!0):(l(),n(Ke,{key:0,flat:"",square:"",class:"bg-mixed-300"},{default:a(()=>[t(W,{class:"q-pb-none text-dim"},{default:a(()=>[y(d(e.t("key_manager.available_resources")),1)]),_:1}),t(W,{class:"q-pa-none",onMouseenter:s[1]||(s[1]=o=>e.showFull=!0),onMouseleave:s[2]||(s[2]=o=>e.showFull=!1)},{default:a(()=>[t(K,null,{default:a(()=>[t(c,{side:""},{default:a(()=>[t(v,{name:"o_data_usage"})]),_:1}),t(c,null,{default:a(()=>[u("div",da,[t(P,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"},{default:a(()=>[(l(),k("span",{key:e.showFull?"full":"short",class:X(["text-h5",{"text-negative":e.apiKeyTokens<=0}])},d(e.showFull?e.formatNumber(e.apiKeyTokens):e.formatNumberShort(e.apiKeyTokens)),3))]),_:1})]),t(D,null,{default:a(()=>[y(d(e.t("key_manager.balance_primary_key")),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(T,{icon:"add_shopping_cart",flat:"",square:"",onClick:e.onBuy},{default:a(()=>[t(D,null,{default:a(()=>[y(d(e.t("embedding.buy_more_quota")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(c,{side:"",class:"relative-position"},{default:a(()=>[t(v,{name:"o_key"}),e.keys.length>0?(l(),n(ze,{key:0,floating:"",rounded:"",label:e.keys.length,class:"bg-mixed-400"},{default:a(()=>[t(D,null,{default:a(()=>[y(d(e.t("key_manager.total_keys")+": "+e.keys.length),1)]),_:1})]),_:1},8,["label"])):p("",!0)]),_:1}),t(c,null,{default:a(()=>[u("span",fa,d(e.formatKey(e.embeddingStore.apiKey,{tailOnly:!0})),1),t(D,null,{default:a(()=>[y(d(e.t("key_manager.is_primary")),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(T,{icon:"content_copy",flat:"",square:"",onClick:e.copyApiKey})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),N((l(),n(K,{clickable:"",style:{height:"56px"},onClick:e.login},{default:a(()=>[t(c,{avatar:"",class:"q-my-sm q-pr-none user-avatar"},{default:a(()=>[e.user.photoURL?(l(),n(J,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[u("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,_a)]),_:1})):(l(),n(v,{key:1,size:"sm",round:"",name:"person"}))]),_:1}),t(c,null,{default:a(()=>[t(L,{lines:"1",class:"row items-center"},{default:a(()=>[u("span",ya,[e.isPaidUser?(l(),n(v,{key:0,name:"verified",class:X([{"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser},"q-mr-xs"])},null,8,["class"])):p("",!0),y(" "+d(e.userDisplayName),1)]),e.user.email?(l(),n(D,{key:0},{default:a(()=>[y(d(e.user.email),1)]),_:1})):p("",!0)]),_:1}),e.userLoginType?(l(),n(L,{key:0,caption:"",class:"text-dim",lines:"1",style:{"font-size":"0.4rem"}},{default:a(()=>[y(d(e.userLoginType),1)]),_:1})):p("",!0)]),_:1}),t(P,{appear:"","enter-active-class":"animated slower fadeIn","leave-active-class":"animated faster fadeOut"},{default:a(()=>[e.user.uid&&!e.miniState?(l(),n(c,{key:0,side:""},{default:a(()=>[t(T,{flat:"",square:"",id:"more_menu",icon:"logout",onClick:Me(e.userStore.logout,["stop"])},null,8,["onClick"])]),_:1})):p("",!0)]),_:1})]),_:1})),[[O]])])]),_:1},8,["modelValue","mini"])):p("",!0),t(Ne,null,{default:a(()=>[t(Q)]),_:1})]),_:1})}const Ua=U(ua,[["render",pa],["__file","SeFoLayout.vue"]]);export{Ua as default};
