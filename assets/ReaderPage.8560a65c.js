import{Q as te}from"./QImg.2e34d44f.js";import{_ as ye,Q as we,a as xe}from"./AskAnythingToolTip.888fdb1b.js";import{e as le,a6 as ne,f as u,h as G,K as ie,a7 as v,a8 as a,at as J,u as de,aC as qe,a9 as c,ad as e,au as p,ah as t,bM as K,j as $,c0 as ae,af as y,ag as m,an as w,az as be,aa as T,ab as M,ai as R,am as se,ak as A,aj as ke,bA as je,as as s,al as f}from"./index.a1c4043e.js";import{u as $e}from"./useMetaTags.7b177c36.js";import{_ as Te}from"./EmbeddingComponent.eec08830.js";import{T as Re}from"./TitleBlock.130fdaf4.js";import{_ as Ce}from"./FAQComponent.c61d8f6d.js";import{Q as C}from"./QTooltip.0711e1a7.js";import{Q as H}from"./QSkeleton.eb01cdce.js";import{Q as re}from"./QLinearProgress.9f3b82f4.js";import{c as Qe}from"./copy-to-clipboard.fb4f017a.js";import{_ as oe}from"./TypingText.2916e6dc.js";import"./QItemLabel.5b2bd513.js";import"./QTabs.4fbec577.js";import"./QResizeObserver.4a13687d.js";import"./rtl.4aeb06d5.js";import"./QTabPanels.ede9a738.js";import"./use-panel.15be904e.js";import"./touch.3df10340.js";import"./position-engine.bbf16baa.js";import"./use-cache.b0833c75.js";import"./QList.ce7ede42.js";import"./QBtnDropdown.33dc3805.js";import"./QMenu.9c498780.js";import"./ClosePopup.258a6347.js";import"./embedding.de20a094.js";import"./QTable.39e0d003.js";import"./QSelect.14218940.js";import"./use-fullscreen.dcd7ac49.js";import"./ModelDropDown.afafce76.js";import"./regexp.d033247d.js";import"./QForm.3b85dd83.js";import"./QExpansionItem.47b83fdc.js";var Pe="/assets/explain.00d2d1a4.svg",Se="/assets/explain2.eda58d92.svg";const Ue=le({__name:"ReaderDemoComponent",setup(ce){const{t:d}=ne({useScope:"global"}),n=u(""),i=u(""),x=u(!1),h=u(!1),B=u("Summarize the content in two sentences."),ue=de(),W=["https://news.ycombinator.com/newest","https://huggingface.co/jinaai","https://twitter.com/elonmusk","https://en.wikipedia.org/wiki/Dot-com_bubble","https://arxiv.org/abs/2310.19923","https://arxiv.org/html/2310.19923v4","https://about.google/","https://www.stanford.edu/","https://stackoverflow.com/questions/45802404/failed-to-execute-setattribute-on-element-is-not-a-valid-attribute-name"],X=()=>W[Math.floor(Math.random()*W.length)],q=u(X()),Q=G(()=>`https://r.jina.ai/${q.value}`),me=G(()=>"https://corsproxy.io/?"+encodeURIComponent(q.value)),pe=async()=>{x.value=!0;try{const r=await fetch(me.value);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.text();n.value=`\`\`\`html
${l}
\`\`\``}catch(r){n.value=r.message}finally{x.value=!1}},Y=u(null),b=u([]),fe=u([]),P=u([]),L=u(!1),V=u(!1),z=u(!1),E=u(!1),N=u(!1),_e=async()=>{await Promise.all([Z(!0),Z(!1)])},Z=async r=>{var D,I,S;if(!await((D=Y.value)==null?void 0:D.validate()))return Promise.reject();const g={parameters:{question:B.value,context:r?n.value.slice(0,3e3):i.value.slice(0,3e3)}};r?(b.value=[],L.value=!0,z.value=!0):(P.value=[],V.value=!0,E.value=!0);const o="https://api.promptperfect.jina.ai/ERK3nqviaFRyfGbkBsXD";try{const _=await fetch(o,{headers:{"content-type":"application/json"},body:JSON.stringify(g),method:"POST"});if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);if((I=_.headers.get("content-type"))!=null&&I.includes("text/event-stream")){if(_.body){const U=_.body.getReader(),O=new TextDecoder;for(;;){const{done:k,value:j}=await U.read();if(k){r?z.value=!1:E.value=!1;break}j&&O.decode(j).split(`

`).forEach(ge=>{const F=ge.replace(/data: /g,"");F&&(r?b.value.push(F):P.value.push(F))})}}}else if((S=_.headers.get("content-type"))!=null&&S.includes("application/json")){const U=(await _.json()).data;r?b.value=[U]:P.value=[U]}else throw new Error("Unknown response type")}catch(_){ue.notify({color:"negative",message:d("landing_page.error",{message:_}),icon:"report_problem"})}finally{r?L.value=!1:V.value=!1}},ve=async()=>{var l,g;h.value=!0,fe.value=[];const r=await fetch(Q.value,{headers:{Accept:"text/event-stream","x-no-cache":"true"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);if((l=r.headers.get("content-type"))!=null&&l.includes("text/event-stream")){if(r.body){const o=r.body.getReader(),D=new TextDecoder;for(;;){const{done:I,value:S}=await o.read();if(I){h.value=!1;break}S&&D.decode(S).split(`

`).forEach(O=>{let k=O.replace(/^event: data\ndata: /,"");if(k)if(!k.trim().endsWith('"}'))i.value=`\`\`\`json
${k}
\`\`\``.trim();else{const j=JSON.parse(k);i.value=`\`\`\`markdown
Title: ${j.title}

URL Source: ${j.url}

Markdown Content: ${j.content}
\`\`\``.trim()}})}}}else if((g=r.headers.get("content-type"))!=null&&g.includes("application/json")){const o=(await r.json()).data.replace(/^event: data\ndata: /,"");i.value=`\`\`\`json
${o}
\`\`\``}else throw new Error("Unknown response type")},he=async()=>{h.value=!0;try{const r=await fetch(Q.value);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.text();i.value=`\`\`\`md
${l}
\`\`\``}catch(r){i.value=r.message}finally{h.value=!1}},ee=async()=>{await Promise.all([(N.value?ve:he)(),pe()])};return ie(()=>{ee().then(()=>{})}),(r,l)=>{const g=qe("q-markdown");return c(),v(J,{bordered:"",flat:"",square:"",class:"col-12 col-md-10"},{default:a(()=>[e(p,{horizontal:""},{default:a(()=>[e(p,{class:"col"},{default:a(()=>[e(t(K),{modelValue:q.value,"onUpdate:modelValue":l[2]||(l[2]=o=>q.value=o),label:t(d)("reader.demo.your_url"),type:"url",loading:x.value,hint:t(d)("reader.demo.your_url_hint")},{prepend:a(()=>[e($,{dense:"",square:"",flat:"",icon:"casino",onClick:l[0]||(l[0]=o=>q.value=X())})]),append:a(()=>[e($,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:l[1]||(l[1]=o=>t(ae)(q.value))},{default:a(()=>[e(C,null,{default:a(()=>[y(m(t(d)("demo.open")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","label","loading","hint"])]),_:1}),e(w,{vertical:""}),e(p,{class:"col"},{default:a(()=>[e(t(K),{"model-value":Q.value,label:t(d)("reader.demo.reader_url"),readonly:"",loading:h.value,"bottom-slots":""},{append:a(()=>[e($,{flat:"",dense:"",square:"",icon:"content_copy",onClick:l[3]||(l[3]=o=>t(Qe)(Q.value))},{default:a(()=>[e(C,null,{default:a(()=>[y(m(t(d)("copy")),1)]),_:1})]),_:1}),e($,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:l[4]||(l[4]=o=>t(ae)(Q.value))},{default:a(()=>[e(C,null,{default:a(()=>[y(m(t(d)("demo.open")),1)]),_:1})]),_:1})]),hint:a(()=>[e(be,{modelValue:N.value,"onUpdate:modelValue":l[5]||(l[5]=o=>N.value=o),label:t(d)("reader.demo.stream_mode"),class:"text-caption q-mr-md",icon:"water",dense:""},{default:a(()=>[e(C,{"max-width":"300px"},{default:a(()=>[y(m(t(d)("reader.demo.stream_mode_explain")),1)]),_:1})]),_:1},8,["modelValue","label"]),y(" "+m(t(d)("reader.demo.reader_url_hint")),1)]),_:1},8,["model-value","label","loading"])]),_:1})]),_:1}),e(w),e($,{square:"",label:t(d)("reader.demo.fetch"),class:"full-width",icon:"download",onClick:ee,padding:"md"},null,8,["label"]),e(w),e(p,{horizontal:""},{default:a(()=>[e(p,{class:"col"},{default:a(()=>[x.value?(c(),T(R,{key:0},M([100,200,300,300,200],o=>e(H,{type:"text",width:`${o}px`,key:o},null,8,["width"])),64)):(c(),v(g,{key:1,src:n.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1}),e(w,{vertical:""}),e(p,{class:"col"},{default:a(()=>[h.value?(c(),T(R,{key:0},M([100,300,200,200],o=>e(H,{type:"text",width:`${o}px`,key:o},null,8,["width"])),64)):(c(),v(g,{key:1,src:i.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1})]),_:1}),e(w),e(p,null,{default:a(()=>[e(t(K),{label:t(d)("reader.demo.ask_question"),modelValue:B.value,"onUpdate:modelValue":l[6]||(l[6]=o=>B.value=o),ref_key:"questionRef",ref:Y,hint:t(d)("reader.demo.ask_question_hint")},{append:a(()=>[e($,{icon:"send",onClick:_e,padding:"md",square:""})]),_:1},8,["label","modelValue","hint"])]),_:1}),e(w),e(p,{horizontal:""},{default:a(()=>[L.value||b.value.length?(c(),v(J,{key:0,class:"col"},{default:a(()=>[L.value?(c(),v(p,{key:0},{default:a(()=>[e(se,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:a(()=>[e(C,null,{default:a(()=>[y(m(t(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(c(),T(R,null,M([0,1,2,3],o=>e(H,{key:o,class:"q-my-xs",width:o>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(c(),T(R,{key:1},[e(p,{class:"q-pa-lg"},{default:a(()=>[e(oe,{text:b.value,"speed-time":b.value?50:0},null,8,["text","speed-time"])]),_:1}),z.value?(c(),v(re,{key:0,indeterminate:""})):A("",!0)],64))]),_:1})):A("",!0),e(w,{vertical:""}),V.value||P.value.length?(c(),v(J,{key:1,class:"col"},{default:a(()=>[V.value?(c(),v(p,{key:0},{default:a(()=>[e(se,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:a(()=>[e(C,null,{default:a(()=>[y(m(t(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(c(),T(R,null,M([0,1,2,3],o=>e(H,{key:o,class:"q-my-xs",width:o>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(c(),T(R,{key:1},[e(p,{class:"q-pa-lg"},{default:a(()=>[e(oe,{text:P.value,"speed-time":E.value?50:0},null,8,["text","speed-time"])]),_:1}),E.value?(c(),v(re,{key:0,indeterminate:""})):A("",!0)],64))]),_:1})):A("",!0)]),_:1})]),_:1})}}});const Be={class:"col-12 col-md-11 q-py-xl q-mx-xs-xs q-mx-sm-sm q-mx-md-md q-mx-lg-lg q-mx-xl-xl q-ma-xl relative-position"},Le={class:"row q-mt-xl q-pt-xl justify-center"},Ve={class:"row justify-center items-center"},Ee={class:"col-11 col-md-8"},De={class:"q-my-xl row justify-center items-center"},Ie={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},Me={class:"row q-mt-xl q-pt-xl justify-center"},Ae={class:"row justify-center items-center"},He={class:"col-11 col-md-8"},ze={class:"q-my-xl row justify-center items-center"},Ne={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},Oe={class:"row q-mt-xl q-pt-xl justify-center"},Fe={class:"q-my-xl row justify-center items-center"},Je={class:"row q-mt-xl q-py-xl justify-center"},Ke={class:"q-my-xl text-center text-grey-5 text-h6 text-weight-light"},Ge={class:"row justify-center"},We={class:"col-12 col-md-9 q-pb-xl"},Xe=le({__name:"ReaderPage",setup(ce){const d=ke(),{t:n}=ne({useScope:"global"});$e({page:"reader",banner:"banner-reader-api.png",url:"reader"});const i=de();G(()=>[{title:n("reader.better_input"),description:n("reader.better_input_description"),name:"improve_input",icon:"mdi-import",anchor:"apiform"},{title:n("reader.fast_stream"),description:n("reader.fast_stream_description"),name:"stream",icon:"mdi-hydro-power",anchor:"benchmark"},{title:n("reader.free"),description:n("reader.free_description"),name:"free_forever",icon:"mdi-currency-usd-off",anchor:"apiform"}]);const x=[{label:"landing_page.get_api_now",icon:"code",anchor:"#apiform"},{label:"reader.demo.try_demo",icon:"play_arrow",anchor:"#demo"},{label:"landing_page.source_code",icon:"fab fa-github",anchor:"https://github.com/jina-ai/reader"}];return ie(async()=>{je(d.hash)}),(h,B)=>(c(),v(we,null,{default:a(()=>[s("div",{class:f(["row items-center contact-us-background",t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"])},[s("div",Be,[e(Re,{title:t(n)("landing_page.reader"),tagline:t(n)("reader.reader_description"),"large-title":!0,buttons:x},null,8,["title","tagline"])])],2),s("div",{class:f(t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"what_reader"},[s("div",Le,[s("div",{class:f(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[s("h2",{class:f(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},m(t(n)("reader.what_is")),3)],2)]),s("div",Ve,[s("div",Ee,[e(te,{src:Pe})])]),s("div",De,[s("div",Ie,m(t(n)("reader.what_is_answer_long")),1)]),s("div",Me,[s("div",{class:f(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[s("h4",{class:f(["text-h4 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},m(t(n)("reader.reader_reads_images")),3)],2)]),s("div",Ae,[s("div",He,[e(te,{src:Se})])]),s("div",ze,[s("div",Ne,m(t(n)("reader.reader_also_read_images")),1)])],2),s("div",{class:f([t(i).screen.lt.sm?"q-pa-md":"q-pa-xl","bg-dark"]),id:"demo"},[s("div",Oe,[s("div",{class:f(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[s("h2",{class:f(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},m(t(n)("reader.demo.tagline")),3)],2)]),s("div",Fe,[e(Ue)])],2),s("div",{class:f(t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"apiform"},[s("div",Je,[s("div",{class:f(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[s("h2",{class:f(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},m(t(n)("reader.title")),3)],2)]),s("div",Ke,m(t(n)("reader.reader_description")),1),s("div",Ge,[s("div",We,[e(Te,{"show-function":"reader","require-a-p-i-key":!1})])])],2),e(Ce,{"faq-sources":["reader.faq_v1"],dark:!0},null,8,["faq-sources"]),e(xe)]),_:1}))}});var Ut=ye(Xe,[["__scopeId","data-v-26df08e8"]]);export{Ut as default};
