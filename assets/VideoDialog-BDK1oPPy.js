import{ca as S,c9 as C,cb as k,aK as P,bq as L,f as v,ag as A,ai as D,aj as x,ak as N,al as c,aq as i,aF as j,au as w,as as h,at as f,aD as B,ap as E,ar as m,ax as O,Y as I,k as Q,bu as R}from"./index-D2VKP4Ne.js";import{u as G}from"./blogs-ME1Ug7R6.js";import{Q as b}from"./QChip-9qyjc49X.js";import{u as V,C as Y}from"./EmbeddingDialog-Bk9fs5O-.js";const q=S.value.map(a=>({...a,type:"product"}));var M=(a=>(a.PRODUCT="product",a.NEWS="news",a.COMPANY="company",a.ELLIPSIS="ellipsis",a.HEADER="header",a.SEPARATOR="separator",a.ON_PAGE_RAG="onPageRAG",a.ASK_SOLUTION="askSolution",a))(M||{});const $=C("search",{state:()=>({answerChunks:[],isBusy:!1,isStreaming:!1,isComposing:!1,searchImmediate:!1}),getters:{},actions:{async composeResult(a){this.isComposing=!0;try{const r=G(),s=3;r.allBlogs.length===0&&await r.getAllNews();const l=r.allBlogs.map(o=>({label:o.title,icon:o.featureImage,value:o.title,description:o.excerpt,time:k(o.publishedAt).format("MMMM DD, YYYY"),slug:o.slug,type:"news"}));let t=[];if(a){t.push({type:"onPageRAG",label:a}),t.push({type:"askSolution",label:a});const o=q.filter(e=>{const u=this.te(e.label)?this.t(e.label):e.label,d=this.te(e.description)?this.t(e.description):e.description;return u.toLowerCase().includes(a.toLowerCase())||d.toLowerCase().includes(a.toLowerCase())}).map(e=>({type:"product",label:e.label,icon:e.icon,link:e.link,description:e.description}));o.length&&(t.length&&t.push({type:"separator"}),t.push({label:"header.products",number:o.length,type:"header"}),t=t.concat(o.slice(0,s)),o.length>s&&t.push({label:"header.see_all_products",type:"ellipsis",number:o.length-s}));const p=P.filter(e=>!e.external).filter(e=>this.t(e.label).toLowerCase().includes(a.toLowerCase())).map(e=>({type:"company",label:e.label,link:e.routerLink}));p.length&&(t.length&&t.push({type:"separator"}),t.push({label:"header.company",number:p.length,type:"header"}),t=t.concat(p.slice(0,s)),p.length>s&&t.push({label:"header.see_all_company",type:"ellipsis",number:p.length-s}));const n=l.filter(e=>e.label.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().replaceAll("-"," ").includes(a.toLowerCase())).map(e=>({type:"news",label:e.label,icon:e.icon,description:e.description,time:e.time,slug:e.slug}));n.length&&(t.length&&t.push({type:"separator"}),t.push({label:"header.news",number:n.length,type:"header"}),t=t.concat(n.slice(0,s)),n.length>s&&t.push({label:"header.see_all_news",type:"ellipsis",number:n.length-s}))}return t}finally{this.isComposing=!1}},async search(a,r){var o,p;this.answerChunks=[],this.isBusy=!0,this.isStreaming=!0;let s="";r==="onPageRAG"&&await fetch(`https://r.jina.ai/https://jina.ai${window.location.pathname}`).then(n=>n.text()).then(n=>{s=n});const l={parameters:{question:a,content:s}},t=r==="onPageRAG"?"https://api.promptperfect.jina.ai/BcHLFuKk3u9naJ4u4G1H":"https://api.promptperfect.jina.ai/EEBuotbLAugUDjr4mq1j";try{const n=await fetch(t,{headers:{"content-type":"application/json"},body:JSON.stringify(l),method:"POST"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);if((o=n.headers.get("content-type"))!=null&&o.includes("text/event-stream")){if(n.body){const e=n.body.getReader(),u=new TextDecoder;for(;;){const{done:d,value:g}=await e.read();if(d){this.isStreaming=!1;break}g&&(this.isBusy=!1,u.decode(g).split(`

`).forEach(y=>{const _=y.replace(/data: /g,"");_&&this.answerChunks.push(_)}))}}}else if((p=n.headers.get("content-type"))!=null&&p.includes("application/json")){const e=(await n.json()).data;this.answerChunks=[e]}else throw new Error("Unknown response type")}catch(n){L.create({color:"negative",message:this.t("landing_page.error",{message:n}),icon:"report_problem"})}finally{this.isBusy=!1}}}}),H=v({__name:"VideoDialog",props:{videoSrc:String,title:String,description:String,icon:String},setup(a,{expose:r}){r();const{t:s}=A({useScope:"global"}),{dialogRef:l}=V(),t={t:s,dialogRef:l};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),U={controls:"",style:{width:"100%",height:"auto"},autoplay:""},K=["src"];function F(a,r,s,l,t,o){return x(),N(R,{ref:"dialogRef"},{default:c(()=>[i(j,{square:"",flat:"",class:"bg-mixed-300"},{default:c(()=>[w("video",U,[w("source",{src:s.videoSrc,type:"video/mp4"},null,8,K),h(" "+f(l.t("video_not_supported")),1)]),i(B,null,{default:c(()=>[i(E,null,{default:c(()=>[i(m,{side:""},{default:c(()=>[i(O,{name:s.icon},null,8,["name"])]),_:1}),i(m,null,{default:c(()=>[i(b,{caption:""},{default:c(()=>[h(f(l.t(s.description)),1)]),_:1}),i(b,{class:"text-weight-bold"},{default:c(()=>[h(f(l.t(s.title)),1)]),_:1})]),_:1}),i(m,{side:""},{default:c(()=>[I(i(Q,{flat:"",round:"",icon:"close"},null,512),[[Y]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)}const ee=D(H,[["render",F],["__file","VideoDialog.vue"]]);export{M as R,ee as V,$ as u};
