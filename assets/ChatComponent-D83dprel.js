import{s as ge,m as H,p as D,bN as ve,i as pe,h as ye,j as J,a1 as $,dr as _e,a0 as G,u as le,am as W,k as B,n as Z,a2 as X,a3 as l,a4 as g,a5 as d,aa as E,ah as O,b1 as P,a6 as u,ab as U,aq as te,ad as se,ae as K,af as V,ag as Y,q as I,aj as be,aB as ke,aD as xe,aS as Se,aO as we,aN as Ce,aE as qe,aR as Qe,b7 as Te,a9 as Me,a7 as ze,V as ae,ap as De,a8 as L,ai as He,T as ne,bp as je}from"./index-CwAM9Eei.js";import{Q as ee,b as ie}from"./QChip-DMQSt865.js";import{Q as Ue}from"./QScrollObserver-CBCBh57E.js";import{Q as Ne}from"./QResizeObserver-wyRNBczb.js";import{Q as Ie}from"./finetune-BB48cvYc.js";import{f as Be,i as Re}from"./date-DsOSS6bD.js";import{Q as Le}from"./QSpinnerDots-BOBMLcQS.js";import{Q as Ee,d as Oe,U as Ye}from"./BrowserInfoDialog-zrDpmRfe.js";import{Q as oe}from"./QItemLabel-sBZxSaFp.js";import{Q as Ve}from"./QExpansionItem-BvYzFk57.js";import{T as Pe}from"./QSpinnerRings-BOWdrgMC.js";import{u as ce}from"./use-dialog-plugin-component-CLt_mNsK.js";import{P as We}from"./PurchaseDialog-tL9ZSS2z.js";import{Q as re}from"./QTooltip-Kd5CUivO.js";import{Q as Ae}from"./QForm-zx3ju81D.js";const Fe=ge({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(s,{slots:o}){const a=H(()=>s.sent===!0?"sent":"received"),e=H(()=>`q-message-text-content q-message-text-content--${a.value}`+(s.textColor!==void 0?` text-${s.textColor}`:"")),b=H(()=>`q-message-text q-message-text--${a.value}`+(s.bgColor!==void 0?` text-${s.bgColor}`:"")),m=H(()=>"q-message-container row items-end no-wrap"+(s.sent===!0?" reverse":"")),n=H(()=>s.size!==void 0?`col-${s.size}`:""),r=H(()=>({msg:s.textHtml===!0?"innerHTML":"textContent",stamp:s.stampHtml===!0?"innerHTML":"textContent",name:s.nameHtml===!0?"innerHTML":"textContent",label:s.labelHtml===!0?"innerHTML":"textContent"}));function v(c){return o.stamp!==void 0?[c,D("div",{class:"q-message-stamp"},o.stamp())]:s.stamp?[c,D("div",{class:"q-message-stamp",[r.value.stamp]:s.stamp})]:[c]}function T(c,q){const p=q===!0?c.length>1?k=>k:k=>D("div",[k]):k=>D("div",{[r.value.msg]:k});return c.map((k,Q)=>D("div",{key:Q,class:b.value},[D("div",{class:e.value},v(p(k)))]))}return()=>{const c=[];o.avatar!==void 0?c.push(o.avatar()):s.avatar!==void 0&&c.push(D("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:s.avatar,"aria-hidden":"true"}));const q=[];o.name!==void 0?q.push(D("div",{class:`q-message-name q-message-name--${a.value}`},o.name())):s.name!==void 0&&q.push(D("div",{class:`q-message-name q-message-name--${a.value}`,[r.value.name]:s.name})),o.default!==void 0?q.push(T(ve(o.default()),!0)):s.text!==void 0&&q.push(T(s.text)),c.push(D("div",{class:n.value},q));const p=[];return o.label!==void 0?p.push(D("div",{class:"q-message-label"},o.label())):s.label!==void 0&&p.push(D("div",{class:"q-message-label",[r.value.label]:s.label})),p.push(D("div",{class:m.value},c)),D("div",{class:`q-message q-message-${a.value}`},p)}}});var de={exports:{}};(function(s,o){(function(a,e){s.exports=e()})(pe,function(){var a,e,b=1e3,m=6e4,n=36e5,r=864e5,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T=31536e6,c=2592e6,q=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,p={years:T,months:c,days:r,hours:n,minutes:m,seconds:b,milliseconds:1,weeks:6048e5},k=function(h){return h instanceof N},Q=function(h,i,t){return new N(h,t,i.$l)},w=function(h){return e.p(h)+"s"},M=function(h){return h<0},y=function(h){return M(h)?Math.ceil(h):Math.floor(h)},_=function(h){return Math.abs(h)},x=function(h,i){return h?M(h)?{negative:!0,format:""+_(h)+i}:{negative:!1,format:""+h+i}:{negative:!1,format:""}},N=function(){function h(t,f,C){var S=this;if(this.$d={},this.$l=C,t===void 0&&(this.$ms=0,this.parseFromMilliseconds()),f)return Q(t*p[w(f)],this);if(typeof t=="number")return this.$ms=t,this.parseFromMilliseconds(),this;if(typeof t=="object")return Object.keys(t).forEach(function(R){S.$d[w(R)]=t[R]}),this.calMilliseconds(),this;if(typeof t=="string"){var z=t.match(q);if(z){var j=z.slice(2).map(function(R){return R!=null?Number(R):0});return this.$d.years=j[0],this.$d.months=j[1],this.$d.weeks=j[2],this.$d.days=j[3],this.$d.hours=j[4],this.$d.minutes=j[5],this.$d.seconds=j[6],this.calMilliseconds(),this}}return this}var i=h.prototype;return i.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(f,C){return f+(t.$d[C]||0)*p[C]},0)},i.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=y(t/T),t%=T,this.$d.months=y(t/c),t%=c,this.$d.days=y(t/r),t%=r,this.$d.hours=y(t/n),t%=n,this.$d.minutes=y(t/m),t%=m,this.$d.seconds=y(t/b),t%=b,this.$d.milliseconds=t},i.toISOString=function(){var t=x(this.$d.years,"Y"),f=x(this.$d.months,"M"),C=+this.$d.days||0;this.$d.weeks&&(C+=7*this.$d.weeks);var S=x(C,"D"),z=x(this.$d.hours,"H"),j=x(this.$d.minutes,"M"),R=this.$d.seconds||0;this.$d.milliseconds&&(R+=this.$d.milliseconds/1e3);var A=x(R,"S"),he=t.negative||f.negative||S.negative||z.negative||j.negative||A.negative,fe=z.format||j.format||A.format?"T":"",F=(he?"-":"")+"P"+t.format+f.format+S.format+fe+z.format+j.format+A.format;return F==="P"||F==="-P"?"P0D":F},i.toJSON=function(){return this.toISOString()},i.format=function(t){var f=t||"YYYY-MM-DDTHH:mm:ss",C={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return f.replace(v,function(S,z){return z||String(C[S])})},i.as=function(t){return this.$ms/p[w(t)]},i.get=function(t){var f=this.$ms,C=w(t);return C==="milliseconds"?f%=1e3:f=C==="weeks"?y(f/p[C]):this.$d[C],f===0?0:f},i.add=function(t,f,C){var S;return S=f?t*p[w(f)]:k(t)?t.$ms:Q(t,this).$ms,Q(this.$ms+S*(C?-1:1),this)},i.subtract=function(t,f){return this.add(t,f,!0)},i.locale=function(t){var f=this.clone();return f.$l=t,f},i.clone=function(){return Q(this.$ms,this)},i.humanize=function(t){return a().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},i.milliseconds=function(){return this.get("milliseconds")},i.asMilliseconds=function(){return this.as("milliseconds")},i.seconds=function(){return this.get("seconds")},i.asSeconds=function(){return this.as("seconds")},i.minutes=function(){return this.get("minutes")},i.asMinutes=function(){return this.as("minutes")},i.hours=function(){return this.get("hours")},i.asHours=function(){return this.as("hours")},i.days=function(){return this.get("days")},i.asDays=function(){return this.as("days")},i.weeks=function(){return this.get("weeks")},i.asWeeks=function(){return this.as("weeks")},i.months=function(){return this.get("months")},i.asMonths=function(){return this.as("months")},i.years=function(){return this.get("years")},i.asYears=function(){return this.as("years")},h}();return function(h,i,t){a=t,e=t().$utils(),t.duration=function(S,z){var j=t.locale();return Q(S,{$l:j},z)},t.isDuration=k;var f=i.prototype.add,C=i.prototype.subtract;i.prototype.add=function(S,z){return k(S)&&(S=S.asMilliseconds()),f.bind(this)(S,z)},i.prototype.subtract=function(S,z){return k(S)&&(S=S.asMilliseconds()),C.bind(this)(S,z)}}})})(de);var $e=de.exports;const Ke=ye($e),Je=J({__name:"MessageComponent",props:{message:{},width:{},index:{},disabled:{type:Boolean}},setup(s,{expose:o}){o(),$.extend(Ke),$.extend(_e);const a=s,e=Z(),{t:b}=G(),m=le(),{user:n}=W(m),r=ce(),v=B(!1),T=H(()=>a.message.role==="user"),c=H(()=>a.message.role==="assistant"),q=H(()=>{var _;return((_=a.message.usage)==null?void 0:_.total_tokens)||0}),p=H(()=>{const _=a.message.content,x="<think>",N="</think>";if(_.includes(x))if(_.includes(N)){const h=/<think>(.*?)<\/think>/s,i=_.match(h);if(i)return i[1]}else return _.substring(_.indexOf(x)+x.length);return""}),k=H(()=>a.message.content.includes("<think>")&&!a.message.content.includes("</think>")),Q=H(()=>{const _=a.message.content;let x="";const N="</think>";return _.includes(N)?x=_.substring(_.indexOf(N)+N.length):_.includes("<think>")||(x=_),x.replace(/<references>|<\/references>/g,"")}),w=()=>{e.dialog({component:We,componentProps:{purchaseKey:r.apiKey}})},M=H(()=>$(a.message.timestamp).fromNow()),y={props:a,$q:e,t:b,userStore:m,user:n,embeddingStore:r,isLoading:v,isUserRole:T,isAssistantRole:c,tokens:q,think:p,isThinking:k,answer:Q,onPurchase:w,thinkTime:M,TypingText:Pe,get formatNumber(){return Be}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),Ge={key:0},Ze={key:1,class:"relative-position"};function Xe(s,o,a,e,b,m){return l(),g(Fe,{class:be(["q-pa-sm q-pa-md-md q-pb-lg relative-position message",e.isUserRole?"user-message":"assistant-message"]),sent:e.isUserRole,"text-color":"white"},{avatar:d(()=>{var n;return[e.isUserRole?(l(),E(O,{key:0},[(n=e.user)!=null&&n.photoURL?(l(),g(P,{key:0,size:"sm",round:"",class:"bordered-avatar q-ml-md"},{default:d(()=>[u(ee,{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.user.displayName||""},null,8,["src","alt"])]),_:1})):(l(),g(P,{key:1,icon:"person",size:"sm",class:"bordered-avatar q-ml-md"}))],64)):(l(),E(O,{key:1},[e.$q.screen.gt.sm?(l(),g(P,{key:0,icon:"img:/J.svg",class:"bordered-avatar q-mr-md bg-mixed-200",size:"sm"})):U("",!0)],64))]}),stamp:d(()=>[a.message.timestamp?(l(),g(ie,{key:0,icon:"schedule",label:e.thinkTime,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])):U("",!0),e.tokens?(l(),g(ie,{key:1,icon:"straighten",label:`${e.formatNumber(e.tokens)} ${e.t("embedding.tokens")}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])):U("",!0),!e.isUserRole&&a.message.statusCode!==200?(l(),g(te,{key:2,name:"o_error",class:"text-negative"})):U("",!0)]),default:d(()=>[e.isUserRole?(l(),E("div",Ge,[u(e.TypingText,{text:a.message.content,dark:e.isAssistantRole},null,8,["text","dark"])])):(l(),E("div",Ze,[a.message.content.length?(l(),E(O,{key:1},[e.isLoading||!e.isLoading&&a.message.content.includes("<think>")?(l(),g(Ve,{key:0,class:"full-width","expand-separator":"","model-value":e.isThinking,"header-class":"bg-mixed-200 text-black"},{header:d(()=>[u(se,{class:"full-width",dense:""},{default:d(()=>[u(K,{side:""},{default:d(()=>[e.isThinking?(l(),g(Ee,{key:0})):(l(),g(te,{key:1,name:"task_alt"}))]),_:1}),u(K,null,{default:d(()=>[e.isThinking?(l(),g(oe,{key:0},{default:d(()=>[V(Y(e.t("deepsearch.chat_ui.thinking")),1)]),_:1})):(l(),g(oe,{key:1},{default:d(()=>[V(Y(e.t("deepsearch.chat_ui.thinking_done")),1)]),_:1}))]),_:1})]),_:1})]),default:d(()=>[u(se,{class:"q-pa-lg"},{default:d(()=>[u(K,{class:"text-dim",style:{"font-family":"monospace"}},{default:d(()=>[V(Y(e.think),1)]),_:1})]),_:1})]),_:1},8,["model-value"])):U("",!0),e.answer?(l(),g(e.TypingText,{key:1,text:e.answer,loading:e.isLoading,"content-class":a.message.statusCode!==200?"text-negative":void 0},null,8,["text","loading","content-class"])):U("",!0),a.message.statusCode===402?(l(),E(O,{key:2},[u(I,{color:"primary",square:"",outline:"",label:e.t("deepsearch.chat_ui.purchase"),onClick:e.onPurchase,icon:"shopping_cart",class:"q-ma-sm"},null,8,["label"]),u(I,{color:"white",square:"",outline:"",label:e.t("deepsearch.chat_ui.keyman"),to:"/api-dashboard/key-manager",icon:"o_key",class:"q-ma-sm"},null,8,["label"])],64)):U("",!0),a.message.statusCode===429?(l(),g(I,{key:3,color:"white",square:"",outline:"",label:e.t("rate_limit.title"),to:"/api-dashboard/rate-limit",icon:"speed",class:"q-ma-sm"},null,8,["label"])):U("",!0)],64)):(l(),g(Le,{key:0,size:"md",class:"q-ma-md"}))]))]),_:1},8,["class","sent"])}const et=X(Je,[["render",Xe],["__file","MessageComponent.vue"]]),tt=(s,o)=>{if(s.shiftKey&&s.key==="Enter")return 13;s.key==="Enter"&&(s.preventDefault(),o())},st="https://deepsearch.jina.ai",ue=ke("chatStore",{state:()=>({messages:[],response:[],isLoading:!1,isStreaming:!1,abortController:void 0}),getters:{usage:s=>{var o;return(o=s.response[s.response.length-1])==null?void 0:o.usage}},actions:{async send(s,o,a){var e;if(!this.isLoading){this.abortController=new AbortController,this.isLoading=!0;try{this.messages.push({role:"user",content:s,timestamp:Date.now()});const b={model:o,messages:this.messages.concat().filter(v=>!v.statusCode||v.statusCode===200),stream:!0};this.messages.push({role:"assistant",content:"",timestamp:Date.now()});const m={"Content-Type":"application/json"};a&&(m.Authorization=`Bearer ${a}`);const n=await fetch(`${st}/v1/chat/completions`,{method:"POST",headers:m,body:JSON.stringify(b),signal:this.abortController.signal}),r=this.messages[this.messages.length-1];if(r.statusCode=n.status,r.timestamp=Date.now(),(e=n.headers.get("content-type"))!=null&&e.includes("text/event-stream")){if(n.body){const v=n.body.getReader(),T=new TextDecoder;let c="";for(;;){const{done:q,value:p}=await v.read();if(q){this.isLoading=!1,this.isStreaming=!1;break}p&&(this.isStreaming=!0,T.decode(p).split(`

data:`).filter(Boolean).forEach(w=>{const M=w.replace(/data: /,"").trim();c+=M,console.log("Data:",c);try{if(c){const y=JSON.parse(c);c="",this.response.push(y),r.content+=y.choices[0].delta.content,y.usage&&(r.usage=y.usage)}}catch(y){console.error("Error parsing full JSON:",y),console.log("parital data",c)}}))}}}else{const v=await n.json();v&&(this.response=[v],this.messages.push(v.choices[0].message))}}catch(b){if(b.name!=="AbortError"){let m=b instanceof Error?b.message:String(b);this.messages[this.messages.length-1].statusCode===402&&(m=this.t("deepsearch.chat_ui.payment_required")),this.messages[this.messages.length-1].statusCode===429&&(m=this.t("deepsearch.chat_ui.rate_limit_exceeded")),this.messages[this.messages.length-1].content=m,xe.create({message:m,color:"negative",icon:"error"})}}finally{this.isLoading=!1,this.isStreaming=!1}}},cancel(){var o;(o=this.abortController)==null||o.abort(),this.isLoading=!1,this.messages[this.messages.length-1].role==="assistant"&&this.messages.pop()}}}),at=J({__name:"InputComponent",props:{maximizedWindow:{type:Boolean,default:!1},query:{type:String,default:""}},setup(s,{expose:o}){const{t:a}=G({useScope:"global"}),e=Z(),b=B(),m=B(""),n=ue(),{isLoading:r,messages:v}=W(n),T=ce(),c=le(),{user:q}=W(c),p=s,k=H(()=>!(typeof _(m.value)=="string"||r.value)),Q=B(!1),w=()=>{k.value&&(n.send(m.value,"jina-deepsearch-v1",Q.value?T.apiKey:void 0),x())},M=()=>{r.value=!1,n.cancel()},y=()=>{e.dialog({title:a("deepsearch.chat_ui.clear_context_title"),message:a("deepsearch.chat_ui.clear_context_message"),cancel:!0}).onOk(()=>{v.value=[]})},_=h=>h.trim().length===0?a("deepsearch.chat_ui.input_cant_be_empty"):!0,x=()=>{m.value=""};o({reset:x}),Se(()=>{p.query&&(m.value=p.query)});const N={t:a,$q:e,form:b,inputMessage:m,chatStore:n,isLoading:r,messages:v,embeddingStore:T,userStore:c,user:q,props:p,sendable:k,useUserKey:Q,onSubmit:w,onCancel:M,onClear:y,validateInput:_,reset:x,get QForm(){return Ae},get handleShiftEnter(){return tt}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}});function nt(s,o,a,e,b,m){return l(),g(e.QForm,{ref:"form",class:"full-width",onSubmit:Qe(e.onSubmit,["prevent"])},{default:d(()=>[u(we,{class:"full-height",modelValue:e.inputMessage,"onUpdate:modelValue":[o[2]||(o[2]=n=>e.inputMessage=n),n=>{}],outlined:"",autofocus:"",square:"",autogrow:"","hide-bottom-space":"","lazy-rules":"ondemand",rules:[e.validateInput],onKeydown:o[3]||(o[3]=n=>e.handleShiftEnter(n,()=>{var r;return(r=e.form)==null?void 0:r.submit(n)})),ref:"inputAnchor","input-style":"max-height: 50vh;",placeholder:e.t("deepsearch.chat_ui.input_placeholder")},Ce({after:d(()=>[!e.isLoading&&e.messages.length?(l(),g(I,{key:0,flat:"",square:"",stretch:"",icon:"delete",onClick:e.onClear},{default:d(()=>[u(re,null,{default:d(()=>[V(Y(e.t("deepsearch.chat_ui.new_chat")),1)]),_:1})]),_:1})):U("",!0)]),append:d(()=>[u(qe,{modelValue:e.useUserKey,"onUpdate:modelValue":o[0]||(o[0]=n=>e.useUserKey=n),color:"primary","checked-icon":"o_key","unchecked-icon":"key_off",disable:e.isLoading},{default:d(()=>[u(re,null,{default:d(()=>[V(Y(e.t("deepsearch.chat_ui.use_user_key")),1)]),_:1})]),_:1},8,["modelValue","disable"]),e.isLoading?(l(),g(I,{key:0,flat:"",round:"",icon:"o_stop_circle",color:"negative",onClick:e.onCancel})):(l(),g(I,{key:1,flat:"",square:"",stretch:"",icon:"send",disable:!e.sendable||e.isLoading,onClick:o[1]||(o[1]=n=>{var r;return(r=e.form)==null?void 0:r.submit(n)})},null,8,["disable"]))]),_:2},[!a.maximizedWindow&&e.$q.screen.gt.sm?{name:"prepend",fn:d(()=>{var n;return[(n=e.user)!=null&&n.photoURL?(l(),g(P,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:d(()=>[u(ee,{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.user.displayName||""},null,8,["src","alt"])]),_:1})):U("",!0)]}),key:"0"}:void 0]),1032,["modelValue","rules","placeholder"])]),_:1},512)}const it=X(at,[["render",nt],["__file","InputComponent.vue"]]);var me=(s=>(s[s.TOP=0]="TOP",s[s.BOTTOM=1]="BOTTOM",s))(me||{});const ot=J({__name:"ChatComponent",props:{maximizedWindow:{type:Boolean,default:!1}},setup(s,{expose:o}){o();const a=Z(),e=B(!0),{t:b}=G({useScope:"global"}),m=ue(),{messages:n}=W(m),r=B(null),v=B(!0),T=B(""),c=B(0),q=w=>{ae(()=>{v.value&&(c.value=w.height,k(1))})},p=w=>{ae(()=>{var _,x;const M=(_=r.value)==null?void 0:_.$el,y=M.offsetHeight+M.scrollTop-M.scrollHeight;w.direction==="up"&&((x=n.value)!=null&&x.length)&&y<-5&&(v.value=!1),w.direction==="down"&&y>=-5&&(v.value=!0)})},k=w=>{setTimeout(()=>{if(r.value&&r.value.$el){const M=w===0?0:r.value.$el.scrollHeight;r.value.$el.scrollTo({top:M,behavior:"smooth"})}},10)};Te(async()=>{v.value=!0});const Q={$q:a,visitNewUI:e,t:b,chatStore:m,messages:n,scrollTarget:r,autoScroll:v,exampleQuery:T,virtualScrollHeight:c,onResize:q,onScroll:p,SCROLL_POSITION:me,scrollTo:k,get QVirtualScroll(){return Re},get QCardSection(){return Me},get QCard(){return ze},MessageComponent:et,InputComponent:it,get deepSearchFlow(){return Oe},UsageHeader:Ye};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),rt={class:"row justify-center q-mt-xl"},lt={class:"col-xs-10 col-sm-8 col-md-6"},ct={class:"row justify-center q-mt-xl q-px-xl"},dt={class:"column no-wrap"},ut={class:"col-12"},mt={class:"col-12 col-md-8"},ht={class:"column items-center q-gutter-y-lg"},ft={class:"text-center q-mb-xl",style:{width:"60%"}};function gt(s,o,a,e,b,m){return l(),g(e.QCard,{bordered:!a.maximizedWindow,flat:"",square:"",class:"column fit relative-position no-wrap",style:{"max-height":"100vh"}},{default:d(()=>[a.maximizedWindow?(l(),E(O,{key:0},[u(e.UsageHeader,{class:"full-width","home-link":"/deepsearch","faq-link":"/deepsearch#faq","issue-link":"https://github.com/jina-ai/node-DeepResearch/issues","is-support-c-s-p":!1,"api-link":"https://github.com/jina-ai/node-DeepResearch?tab=readme-ov-file#openai-compatible-server-api"}),u(De)],64)):U("",!0),!a.maximizedWindow&&e.$q.screen.gt.md?(l(),g(I,{key:1,flat:"",round:"",icon:"fullscreen",class:"absolute-top-left q-ml-md q-mt-md",style:{"z-index":"1"},to:"/api-dashboard/deepsearch-chat"})):U("",!0),e.messages.length?(l(),g(e.QCardSection,{key:3,class:"column justify-between no-wrap q-px-lg scroll q-mb-xl",ref:"scrollTarget"},{default:d(()=>[u(Ue,{onScroll:e.onScroll,debounce:300}),L("div",dt,[u(ne,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",duration:50},{default:d(()=>[L("div",ut,[u(e.QVirtualScroll,{items:e.messages},{default:d(({item:n,index:r})=>[u(Ne,{onResize:e.onResize,debounce:300}),u(e.MessageComponent,{message:n,index:r},null,8,["message","index"])]),_:1},8,["items"])])]),_:1})])]),_:1},512)):(l(),g(e.QCardSection,{key:2,class:"full-height column justify-center"},{default:d(()=>[u(ee,{src:e.deepSearchFlow,"img-style":{opacity:.1},fit:"fill",class:"col-4"},null,8,["src"]),L("div",rt,[L("div",lt,[u(e.InputComponent,{maximizedWindow:a.maximizedWindow,query:e.exampleQuery},null,8,["maximizedWindow","query"])])]),L("div",ct,[(l(),E(O,null,He([1,2,3],n=>u(I,{"no-caps":"",square:"",flat:"",size:"sm",label:e.t(`deepsearch.chat_ui.example_q${n}`),key:n,clickable:"",class:"text-dim col-auto",onClick:r=>e.exampleQuery=e.t(`deepsearch.chat_ui.example_q${n}`)},null,8,["label","onClick"])),64))])]),_:1})),u(ne,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:d(()=>[e.messages.length?(l(),g(je,{key:0,class:"lock-blur absolute-bottom row justify-center"},{default:d(()=>[L("div",mt,[u(e.InputComponent,{maximizedWindow:a.maximizedWindow,query:e.exampleQuery},null,8,["maximizedWindow","query"])])]),_:1})):U("",!0)]),_:1}),u(Ie,{class:"lock-blur",size:"0",showing:e.visitNewUI},{default:d(()=>[L("div",ht,[L("span",ft,Y(e.t("deepsearch.chat_ui.move_to_new")),1),u(I,{outline:"",square:"",icon:"open_in_new",label:e.t("deepsearch.chat_ui.new_url"),href:"https://search.jina.ai",target:"_blank",padding:"lg"},null,8,["label"]),u(I,{square:"",label:e.t("deepsearch.chat_ui.stay"),flat:"",onClick:o[0]||(o[0]=n=>e.visitNewUI=!1)},null,8,["label"])])]),_:1},8,["showing"])]),_:1},8,["bordered"])}const Dt=X(ot,[["render",gt],["__file","ChatComponent.vue"]]);export{Dt as C};
