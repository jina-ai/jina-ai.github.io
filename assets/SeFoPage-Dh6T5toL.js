import{bS as ea,c1 as ca,cT as ma,cE as pa,bX as ha,dv as ba,dw as aa,cJ as ka,bZ as wa,cQ as Ea,cI as Ta,bU as Sa,cM as Pa,j as ie,a2 as ue,a3 as g,a4 as C,a5 as t,a6 as a,a7 as se,n as ke,a0 as ve,k as T,a9 as ee,af as y,ag as m,aM as Se,aq as Z,aa as J,ah as re,ai as me,bp as _a,q as W,aD as Oe,aE as ze,w as qe,W as Ve,a8 as Y,ac as Ra,ab as j,aN as ta,aO as Be,am as _e,ae as D,du as Ge,aQ as Te,aP as pe,ad as G,c6 as Me,b9 as Da,aL as Ye,aj as De,u as Ce,m as F,ap as le,V as fa,b8 as ga,_ as i,av as xa,s as Va,ax as Aa,p as Re,az as La,J as Ka,b6 as Ia,b1 as Xe,aR as Ca,dx as Ue,aA as Oa,b7 as qa,ao as Ma,an as Ba,cf as Ua}from"./index-B20kHXTP.js";import{Q as Na}from"./QBanner-DBl1ikHl.js";import{Q as ja}from"./QPage-DOt5Yywp.js";import{K as ye,E as Q,g as ra}from"./se-fo-Cb6_ydcT.js";import{d as Fa,a as We,u as we,Q as Ga,b as Ha}from"./use-dialog-plugin-component-Bdk19y3L.js";import{j as Qa,u as za,c as Ya,M as Xa,k as Wa,L as Ja,U as Za,A as $a,i as et,E as at,a as tt,R as rt,C as ot,b as lt,I as st,T as nt,S as oa,B as it,D as ut,e as dt}from"./BrowserInfoDialog-D-4eDugt.js";import{P as ct,Q as mt}from"./PurchaseTab-hHmGf9xt.js";import{Q as te}from"./QTooltip-CVef9qFm.js";import{c as fe,d as Le,e as Ke,f as Je,Q as _t}from"./date-BEe9r3Zr.js";import{u as Ae,A as ft,U as gt,R as vt}from"./finetune-Dqxg2ZTo.js";import{b as ge,Q as yt,a as pt}from"./QChip-BdZh8-CE.js";import{Q as be,a as xe,b as ht}from"./QLinearProgress-CNubECcB.js";import{C as Ze}from"./ClosePopup-C_1Khj42.js";import{Q as I}from"./QItemLabel-DoH96ll9.js";import{c as He}from"./copy-to-clipboard-DPI11mJ9.js";import{P as bt}from"./PurchaseDialog-0c5TH65_.js";import{Q as Ie}from"./QList-BWQVBtQJ.js";import{t as la,c as kt,L as wt}from"./LoginDialog-D-8V8vm5.js";import{t as sa}from"./toNumber-B9q4b6JG.js";import{a as Et,c as Tt}from"./_setToArray-DBQByNOK.js";import{a as St,c as Pt,f as Rt,o as Dt}from"./orderBy-BQmbewNS.js";import{_ as xt}from"./dynamic-import-helper-BheWnx7M.js";import{Q as Vt}from"./QForm-D42nirB0.js";import{C as At}from"./ChatComponent-yUMZrZG1.js";import{u as na}from"./useMetaTags-C9UWg08R.js";import{u as Lt}from"./useModels-D9EnYv23.js";import{C as Kt}from"./ContactSalesForm-B8jsiwkQ.js";import{Q as ia}from"./QBadge-Dp9cgbsn.js";import{Q as It}from"./QSpinnerRings-DBE_oHoX.js";import"./QMenu-krylmqLH.js";import"./position-engine-ryddagGN.js";import"./blogs-jrtbaqFb.js";import"./VideoDialog-CPONUox7.js";import"./TouchPan-CCG5fHBE.js";import"./touch-BjYP5sR0.js";import"./QTab-CAvYqesu.js";import"./QTabs-CWsGdc_p.js";import"./QResizeObserver-C5ZMpJMi.js";import"./QBtnDropdown-3oZlEkHg.js";import"./QExpansionItem-DNLHTGFJ.js";import"./use-fullscreen-CPrqcIQk.js";import"./package-D9JPNs5w.js";import"./isSymbol-aGwIdKjP.js";import"./QScrollObserver-DQcEYLAb.js";import"./QSpinnerDots-CPXaNWcn.js";var ua=ea?ea.isConcatSpreadable:void 0;function Ct(c){return ca(c)||ma(c)||!!(ua&&c&&c[ua])}function Ot(c,l,s,e,f){var h=-1,r=c.length;for(s||(s=Ct),f||(f=[]);++h<r;){var o=c[h];s(o)&&St(f,o)}return f}var Ne=function(){return pa.Date.now()},qt="Expected a function",Mt=Math.max,Bt=Math.min;function Ut(c,l,s){var e,f,h,r,o,d,p=0,S=!1,v=!1,w=!0;if(typeof c!="function")throw new TypeError(qt);l=sa(l)||0,ha(s)&&(S=!!s.leading,v="maxWait"in s,h=v?Mt(sa(s.maxWait)||0,l):h,w="trailing"in s?!!s.trailing:w);function _(O){var P=e,V=f;return e=f=void 0,p=O,r=c.apply(V,P),r}function R(O){return p=O,o=setTimeout(k,l),S?_(O):r}function K(O){var P=O-d,V=O-p,n=l-P;return v?Bt(n,h-V):n}function b(O){var P=O-d,V=O-p;return d===void 0||P>=l||P<0||v&&V>=h}function k(){var O=Ne();if(b(O))return x(O);o=setTimeout(k,K(O))}function x(O){return o=void 0,w&&e?_(O):(e=f=void 0,r)}function A(){o!==void 0&&clearTimeout(o),p=0,e=d=f=o=void 0}function U(){return o===void 0?r:x(Ne())}function N(){var O=Ne(),P=b(O);if(e=arguments,f=this,d=O,P){if(o===void 0)return R(d);if(v)return clearTimeout(o),o=setTimeout(k,l),_(d)}return o===void 0&&(o=setTimeout(k,l)),r}return N.cancel=A,N.flush=U,N}var Nt=200;function jt(c,l,s,e){var f=-1,h=Fa,r=!0,o=c.length,d=[],p=l.length;if(!o)return d;l.length>=Nt&&(h=Tt,r=!1,l=new Et(l));e:for(;++f<o;){var S=c[f],v=S;if(S=S!==0?S:0,r&&v===v){for(var w=p;w--;)if(l[w]===v)continue e;d.push(S)}else h(l,v,e)||d.push(S)}return d}var Ft=ba(function(c,l){return aa(c)?jt(c,Ot(l,1,aa)):[]}),Gt="[object Map]",Ht="[object Set]",Qt=Object.prototype,zt=Qt.hasOwnProperty;function Yt(c){if(c==null)return!0;if(ka(c)&&(ca(c)||typeof c=="string"||typeof c.splice=="function"||wa(c)||Ea(c)||ma(c)))return!c.length;var l=Pt(c);if(l==Gt||l==Ht)return!c.size;if(Ta(c))return!Rt(c).length;for(var s in c)if(zt.call(c,s))return!1;return!0}var Xt="[object Number]";function Wt(c){return typeof c=="number"||Sa(c)&&Pa(c)==Xt}function Jt(c){return Wt(c)&&c!=+c}const Zt=ie({__name:"ContainedPurchaseTab",setup(c,{expose:l}){l();const s={PurchaseTab:ct};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function $t(c,l,s,e,f,h){return g(),C(se,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.PurchaseTab)]),_:1})}const er=ue(Zt,[["render",$t],["__file","ContainedPurchaseTab.vue"]]),ar=ie({__name:"AddKeyDialog",setup(c,{expose:l}){l();const s=ke(),{t:e}=ve({useScope:"global"}),{dialogRef:f,onDialogOK:h}=We(),r=we(),o=Ae(),d=T(""),p=T(!1),S=T(!0),v=T(""),w=T(!0),_=T(["poc","test"]),K={$q:s,t:e,dialogRef:f,onDialogOK:h,embeddingStore:r,apiKeyStore:o,apiKey:d,isBusy:p,isKeyValid:S,errorMsg:v,isPwd:w,labels:_,onAdd:async()=>{if(d.value.trim()===""){S.value=!1,v.value=e("key_manager.invalid_key");return}try{p.value=!0,await r.getKeyInfo(d.value)?await o.addKey(d.value,{labels:_.value})?(s.notify({message:e("key_manager.add_success",{_key:fe(d.value)}),icon:"done"}),h()):(S.value=!1,v.value=e("key_manager.existing_key")):(S.value=!1,v.value=e("key_manager.invalid_key"))}catch(b){S.value=!1,v.value=b instanceof Error?b.message:String(b)}finally{p.value=!1}},get KEY_ACTIONS(){return ye}};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}});function tr(c,l,s,e,f,h){return g(),C(ze,{ref:"dialogRef",persistent:""},{default:t(()=>[a(se,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(ee,null,{default:t(()=>[y(m(e.t("key_manager.add_key_explain")),1)]),_:1}),a(ee,{class:"flex"},{default:t(()=>[a(Se,{modelValue:e.apiKey,"onUpdate:modelValue":l[1]||(l[1]=r=>e.apiKey=r),autofocus:"",filled:"",square:"",clearable:"",class:"full-width","input-class":"ellipsis",label:e.t("key_manager.add"),error:!e.isKeyValid,"error-message":e.errorMsg,type:e.isPwd?"password":"text",style:{width:"400px"}},{prepend:t(()=>[a(Z,{name:"o_key"})]),append:t(()=>[a(Z,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[0]||(l[0]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","label","error","error-message","type"])]),_:1}),a(ee,null,{default:t(()=>[y(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1}),a(ee,{class:"flex"},{default:t(()=>[a(be,{modelValue:e.labels,"onUpdate:modelValue":l[2]||(l[2]=r=>e.labels=r),label:e.t("key_manager.customized_tags"),square:"",filled:"",multiple:"","use-input":"","use-chips":"","dense-chips":"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",style:{width:"100%"},hint:e.t("key_manager.add_key_labels_input_explain")},{prepend:t(()=>[a(Z,{name:"rate_review"})]),selected:t(()=>[(g(!0),J(re,null,me(e.labels,r=>(g(),C(ge,{key:r,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-400"},{default:t(()=>[y(m(r),1)]),_:2},1024))),128))]),_:1},8,["modelValue","label","hint"])]),_:1}),a(_a,{align:"left"},{default:t(()=>[a(W,{padding:"md",flat:"",square:"",label:e.t("key_manager.generate_new_key"),disable:e.isBusy,icon:"casino",onClick:l[3]||(l[3]=r=>e.onDialogOK({action:e.KEY_ACTIONS.GENERATE,metadata:{labels:e.labels}}))},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.generate_new_key_tooltip")),1)]),_:1})]),_:1},8,["label","disable"]),a(Ga),Oe(a(W,{padding:"md",flat:"",square:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Ze]]),a(W,{padding:"md",flat:"",square:"",label:e.t("key_manager.ok"),color:"primary",loading:e.isBusy,onClick:e.onAdd},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},512)}const rr=ue(ar,[["render",tr],["__file","AddKeyDialog.vue"]]),or=ie({__name:"UsageChart",props:{apiKey:{},usage:{}},setup(c,{expose:l}){const s=c,e=T(!1),f=T({left:"0px",top:"0px"}),h=T(""),r=T([]),o=()=>{if(!s.usage||s.usage.length===0)return;const w=document.getElementById(`usage_${s.apiKey._id}`);if(!w)return;const _=w.getContext("2d"),R=window.devicePixelRatio||1,K=(w==null?void 0:w.clientWidth)||300,b=(w==null?void 0:w.clientHeight)||100;w.width=K*R,w.height=b*R,_.scale(R,R);let k=null,x=null;if(s.usage.forEach(L=>{if(L.type==="consume"){const q=new Date(L.created_at);(!k||q<k)&&(k=q),(!x||q>x)&&(x=q)}}),!k||!x)return;const A=new Date;A.setDate(A.getDate()-7),k>A&&(k=A);const U=new Date;x<U&&(x=U);const N=[],O=new Date(k);for(;O<=x;){const L=Le.formatDate(O,"YYYY-MM-DD HH");N.push(L),O.setHours(O.getHours()+1)}const P=s.usage.reduce((L,q)=>{if(q.type==="consume"){const B=new Date(q.created_at),$=`${B.getUTCFullYear()}-${String(B.getUTCMonth()+1).padStart(2,"0")}-${String(B.getUTCDate()).padStart(2,"0")} ${String(B.getUTCHours()).padStart(2,"0")}`;L[$]=(L[$]||0)+q.quantity}return L},{}),V=N.map(L=>P[L]||0);let n=Math.max(...V);n===0&&(n=1);const u=Math.max(1,K/V.length*.8),E=Math.max(0,K/V.length*.2);_.clearRect(0,0,K,b),r.value=[],V.forEach((L,q)=>{const B=L/n*b*.9,$=q*(u+E)+E/2,oe=b-B;B>0&&(r.value.push({x:$,y:oe,width:u,height:B,hour:N[q],usage:L}),_.shadowColor="rgba(129, 227, 238, 0.5)",_.shadowBlur=5,_.shadowOffsetX=0,_.shadowOffsetY=0,_.fillStyle="rgba(129, 227, 238, 0.7)",_.fillRect($,oe,u,B),_.strokeStyle="#81E3EE",_.lineWidth=1,_.strokeRect($,oe,u,B))}),_.shadowColor="transparent",_.shadowBlur=0,d(_,V,K,b,u,E)},d=(w,_,R,K,b,k)=>{if(_.length<2)return;const x=_.map((M,ae)=>({value:M,index:ae})).filter(M=>M.value>0);if(x.length<2)return;const A=x.length;let U=0,N=0,O=0,P=0;for(const M of x){const ae=M.index,de=M.value;U+=ae,N+=de,O+=ae*de,P+=ae*ae}const V=(A*O-U*N)/(A*P-U*U),n=(N-V*U)/A,u=M=>V*M+n;let E=Math.max(..._);E===0&&(E=1),w.beginPath();const L=x[0],q=L.index*(b+k)+k/2+b/2,B=K-u(L.index)/E*K*.9;w.moveTo(q,B);const $=x[x.length-1],oe=$.index*(b+k)+k/2+b/2,X=K-u($.index)/E*K*.9;w.lineTo(oe,X),w.strokeStyle="rgba(129, 227, 238, 0.8)",w.lineWidth=1,w.setLineDash([5,3]),w.stroke(),w.setLineDash([])},p=w=>{const R=document.getElementById(`usage_${s.apiKey._id}`).getBoundingClientRect(),K=w.clientX-R.left,b=w.clientY-R.top;let k=!1;for(const x of r.value)if(K>=x.x&&K<=x.x+x.width&&b>=x.y&&b<=x.y+x.height){const A=x.hour.split(" "),U=A[0],N=A[1]||"00",O=new Date(`${U}T${N}:00:00Z`),P=Le.formatDate(O,"MMM D, h:mm A");h.value=`${P}: ${x.usage>0?x.usage.toLocaleString():"0"} units`,f.value={left:`${K+10}px`,top:`${b-30}px`},e.value=!0,k=!0;break}k||S()},S=()=>{e.value=!1};qe(()=>s.usage,()=>{o()},{deep:!0}),l({initChart:o}),Ve(()=>{setTimeout(()=>{o()},100)});const v={props:s,showTooltip:e,tooltipStyle:f,tooltipText:h,barData:r,initChart:o,drawTrendline:d,handleMouseMove:p,hideTooltip:S};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),lr=["id"];function sr(c,l,s,e,f,h){return g(),C(se,{flat:"",square:"",class:"bg-transparent",style:{"max-height":"100px",width:"100%",height:"100%",position:"relative"}},{default:t(()=>[Y("canvas",{id:`usage_${s.apiKey._id}`,style:{width:"100%",height:"100%"},onMousemove:e.handleMouseMove,onMouseleave:e.hideTooltip},null,40,lr),e.showTooltip?(g(),J("div",{key:0,class:"tooltip",style:Ra(e.tooltipStyle)},[Y("div",null,m(e.tooltipText),1)],4)):j("",!0)]),_:1})}const nr=ue(or,[["render",sr],["__scopeId","data-v-3bd7efdf"],["__file","UsageChart.vue"]]),ir=ie({__name:"UsageReminderItem",props:ta({apiKey:{},isPaidKey:{type:Boolean}},{email:{type:String},emailModifiers:{},autoReminder:{type:Boolean},autoReminderModifiers:{},thresholds:{type:Array},thresholdsModifiers:{}}),emits:ta(["update"],["update:email","update:autoReminder","update:thresholds"]),setup(c,{expose:l,emit:s}){l();const e=c,f=s,h=Be(c,"email"),r=Be(c,"autoReminder"),o=Be(c,"thresholds"),{t:d}=ve({useScope:"global"}),p=ke(),S=we(),v=Ae(),{isBusyState:w}=_e(v),_=T([{label:"10M",value:1e7},{label:"100M",value:1e8},{label:"1B",value:1e9}]),R=T(_.value),K=T(!1),b=(n,u)=>{const E=Number(n);if(n.length>0&&!Jt(E)&&o.value.length<3){if(E<0||E>1e12){K.value=!0;return}K.value=!1;const L={label:Ke(E),value:E};_.value.some(q=>q.value===E)||_.value.push(L),u(L,"toggle")}},k=n=>{n===""?R.value=_.value:R.value=_.value.filter(u=>u.value===Number(n)||u.label===n).concat()},x=(n,u)=>{u(()=>k(n))},A=async n=>{var E,L;const u=n||h.value;if((E=o.value)!=null&&E.length&&u){w.value.add(e.apiKey);try{await S.setBalanceNotification(e.apiKey,{email:u,thresholds:((L=o.value)==null?void 0:L.slice(0,3))||[]})}finally{w.value.delete(e.apiKey)}f("update")}},U=async n=>{!n||!la(n)||n===h.value||A(n)},N=Ut(()=>{A()},1e3),O=n=>{var E,L,q;const u=(E=o.value)==null?void 0:E.indexOf(n);u===void 0||u<0||((L=o.value)==null||L.splice(u,1),(q=o.value)!=null&&q.length&&A())},P=n=>{var u;!n&&((u=o.value)!=null&&u.length)&&h.value&&p.dialog({title:d("key_manager.auto_reminder_cancel_title"),message:d("key_manager.auto_reminder_cancel_message"),cancel:!0}).onOk(async()=>{r.value=n,w.value.add(e.apiKey);try{await S.cancelBalanceNotification(e.apiKey)?o.value=[]:r.value=!n}finally{w.value.delete(e.apiKey)}f("update")}).onCancel(()=>{r.value=!0})};Ve(()=>{const n=Ft(o.value,_.value.map(u=>u.value));n.length&&(_.value.push(...n.map(u=>({label:Ke(u),value:u}))),_.value=Dt(_.value,"value","asc"))});const V={props:e,emit:f,email:h,autoReminder:r,thresholds:o,t:d,$q:p,embeddingStore:S,apiKeyStore:v,isBusyState:w,allOptions:_,filterOptions:R,hasError:K,createValue:b,updateFilterOptions:k,filterFn:x,saveConfig:A,saveEmail:U,saveThresholds:N,removeThreshold:O,updateAutoReminder:P,get QPopupEdit(){return Qa},get QSelect(){return be},get testEmail(){return la},get formatNumberShort(){return Ke}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),ur={class:"ellipsis"};function dr(c,l,s,e,f,h){return g(),C(G,{clickable:"","click.stop":""},{default:t(()=>[e.$q.screen.gt.sm?(g(),C(D,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"alarm_smart_wake"})]),_:1})):j("",!0),a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("key_manager.auto_reminder"))+" ",1),a(Z,{name:s.isPaidKey?"verified":"lock"},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(I,{caption:"",lines:"2"},{default:t(()=>[y(m(e.t("key_manager.auto_reminder_description"))+" ",1),a(te,{"max-width":"40rem"},{default:t(()=>[y(m(e.t("key_manager.auto_reminder_description")),1)]),_:1})]),_:1}),e.autoReminder?(g(),C(I,{key:0,class:"cursor-pointer"},{default:t(()=>[y(m(e.t("key_manager.auto_reminder_email"))+": ",1),Y("b",null,m(e.email),1),s.isPaidKey&&e.autoReminder?(g(),C(Z,{key:0,name:"edit",size:"20px",class:"on-right",color:"primary"})):j("",!0),a(e.QPopupEdit,{modelValue:e.email,"onUpdate:modelValue":l[0]||(l[0]=r=>e.email=r),buttons:"","label-set":e.t("key_manager.save"),"label-cancel":e.t("key_manager.cancel"),validate:e.testEmail,disable:!e.autoReminder,onSave:e.saveEmail},{default:t(r=>[a(Se,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,dense:"",autofocus:"",rules:[o=>e.testEmail(o)||e.t("key_manager.invalid_email")],label:e.t("key_manager.auto_reminder_email"),onKeyup:Ge(Te(r.set,["stop"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","label","onKeyup"])]),_:1},8,["modelValue","label-set","label-cancel","validate","disable"])]),_:1})):j("",!0)]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.autoReminder,"onUpdate:modelValue":[l[1]||(l[1]=r=>e.autoReminder=r),e.updateAutoReminder],color:"primary",disable:!s.isPaidKey,"checked-icon":"check","unchecked-icon":"close"},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.auto_reminder_toggle")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),_:1}),a(D,{side:""},{default:t(()=>[a(e.QSelect,{square:"",outline:"","use-input":"","use-chips":"",multiple:"","emit-value":"","map-options":"","new-value-mode":"add",style:{"max-width":"160px"},modelValue:e.thresholds,"onUpdate:modelValue":[l[2]||(l[2]=r=>e.thresholds=r),e.saveThresholds],"max-values":3,error:e.hasError,"error-message":e.t("key_manager.auto_reminder_threshold_error"),label:e.t("key_manager.auto_reminder_threshold"),disable:!e.autoReminder,options:e.filterOptions,onNewValue:e.createValue,onFilter:e.filterFn,onKeyup:l[3]||(l[3]=Ge(Te(()=>{},["stop"]),["enter"]))},{selected:t(()=>[(g(!0),J(re,null,me(e.thresholds,r=>(g(),C(ge,{dense:"",key:r,square:"",removable:"","text-color":"primary",class:"bg-mixed-300",onRemove:o=>e.removeThreshold(r)},{default:t(()=>{var o;return[Y("div",ur,m(`< ${((o=e.allOptions.find(d=>d.value===r))==null?void 0:o.label)||e.formatNumberShort(r)} ${e.t("embedding.tokens")}`),1),a(te,null,{default:t(()=>[y(m(r),1)]),_:2},1024)]}),_:2},1032,["onRemove"]))),128))]),option:t(r=>[a(G,Me(r.itemProps,{clickable:""}),{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(`< ${r.opt.label} ${e.t("embedding.tokens")}`)+" ",1),a(te,null,{default:t(()=>[y(m(r.opt.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error","error-message","label","disable","options","onUpdate:modelValue"])]),_:1})]),_:1})}const cr=ue(ir,[["render",dr],["__file","UsageReminderItem.vue"]]),mr=ie({__name:"RevokeKeyDialog",props:{apiKey:{},isPremiumKey:{type:Boolean}},setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global"}),{dialogRef:e,onDialogOK:f}=We(),h=Ae(),{keys:r,keysInfoCache:o}=_e(h),d=T(""),p=T(!1),S=T(""),w={t:s,dialogRef:e,onDialogOK:f,apiKeyStore:h,keys:r,keysInfoCache:o,confirmKey:d,withTransfer:p,transferKey:S,onConfirm:async()=>{p.value&&S.value?f(S.value):f()},get formatKey(){return fe}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}});function _r(c,l,s,e,f,h){return g(),C(ze,{ref:"dialogRef"},{default:t(()=>[a(se,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(ee,{class:"text-h6"},{default:t(()=>[y(m(e.t("key_manager.revoke")),1)]),_:1}),a(ee,null,{default:t(()=>[Y("div",null,m(e.t("key_manager.revoke_message")),1),a(Se,{autofocus:"",filled:"",square:"",class:"q-mt-md",modelValue:e.confirmKey,"onUpdate:modelValue":l[0]||(l[0]=r=>e.confirmKey=r),rules:[r=>r===s.apiKey||e.t("key_manager.revoke_error")],label:e.t("key_manager.revoke_label")},{prepend:t(()=>[a(Z,{name:"o_key"})]),_:1},8,["modelValue","rules","label"]),s.isPremiumKey?(g(),C(Da,{key:0,modelValue:e.withTransfer,"onUpdate:modelValue":l[1]||(l[1]=r=>e.withTransfer=r),label:e.t("key_manager.transfer_before_revoke")},null,8,["modelValue","label"])):j("",!0),s.isPremiumKey&&e.withTransfer?(g(),C(be,{key:1,square:"",filled:"","emit-value":"",clearable:"",modelValue:e.transferKey,"onUpdate:modelValue":l[2]||(l[2]=r=>e.transferKey=r),options:e.keys.filter(r=>r.key!==s.apiKey&&e.keysInfoCache[r.key].user_id),"option-value":r=>r.key,label:e.t("key_manager.transfer_label")},Ye({"no-option":t(()=>[a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(r=>[a(G,Me(r.itemProps,{clickable:""}),{default:t(()=>[a(D,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:De({"golden-foil":e.apiKeyStore.isPremiumPaidKey(r.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(r.opt.key)})},null,8,["class"])]),_:2},1024),a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[Y("code",null,m(e.formatKey(r.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(ge,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label"])):j("",!0)]),_:1}),a(_a,{align:"right"},{default:t(()=>[Oe(a(W,{flat:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Ze]]),a(W,{flat:"",label:e.t("key_manager.ok"),color:"primary",disable:e.confirmKey!==s.apiKey,onClick:e.onConfirm},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},512)}const fr=ue(mr,[["render",_r],["__file","RevokeKeyDialog.vue"]]),gr=ie({__name:"SettingsDialog",props:{apiKey:{}},setup(c,{expose:l}){l();const s=c,e=ke(),{t:f}=ve({useScope:"global"}),{dialogRef:h,onDialogOK:r}=We(),o=Ce(),{user:d}=_e(o),p=Ae(),{isBusyState:S,keys:v,primaryKey:w,keysInfoCache:_}=_e(p),R=T(),K=T(!1),b=T(""),k=T([]),x=T(!0),A=T(1e6),U=T(""),N=F(()=>!p.isFreeKey(s.apiKey)),O=F(()=>p.isPremiumPaidKey(s.apiKey)),P=F(()=>{var M;return N.value&&!!((M=R.value)!=null&&M.metadata.auto_recharge)}),V=F(()=>{var M;return!!((M=R==null?void 0:R.value)!=null&&M.user_id)}),n=F(()=>!V.value||S.value.has(s.apiKey)),u=async()=>{await p.getKeyInfo(s.apiKey,!0),E()},E=async()=>{var M,ae,de,H,z,ce,Ee,he,ne,Pe,$e;R.value=_.value[s.apiKey],K.value=!Yt((ae=(M=R.value)==null?void 0:M.wallet)==null?void 0:ae.metadata),b.value=((z=(H=(de=R.value)==null?void 0:de.wallet)==null?void 0:H.metadata)==null?void 0:z.notification_email)||d.value.email||"",k.value=((he=(Ee=(ce=R.value)==null?void 0:ce.wallet)==null?void 0:Ee.metadata)==null?void 0:he.notification_thresholds)||[],x.value=((ne=R.value)==null?void 0:ne.metadata.auto_recharge)||!1,A.value=(($e=(Pe=R.value)==null?void 0:Pe.metadata)==null?void 0:$e.threshold)||1e6};E();const L=()=>{if(w.value===s.apiKey&&v.value.length===1){e.notify({message:f("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({title:f("key_manager.remove_title"),message:f("key_manager.remove_message"),cancel:!0,persistent:!0}).onOk(async()=>{var M;await p.removeKey(s.apiKey),e.notify({message:f("key_manager.remove_success",{_key:fe(s.apiKey)}),icon:"done"}),w.value===s.apiKey&&p.setPrimaryKey(v.value[0].key),(M=h.value)==null||M.hide()})},q=()=>{if(w.value===s.apiKey&&v.value.length===1){e.notify({message:f("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({component:fr,componentProps:{apiKey:s.apiKey,isPremiumKey:O.value}}).onOk(M=>{r({action:ye.REVOKE,key:s.apiKey,transferTo:M})})},B=M=>{var ae;M&&e.dialog({title:f("key_manager.transfer_title"),message:`<div>
    ${f("key_manager.transfer_message",{_tokens:"<b>"+Je(((ae=R.value)==null?void 0:ae.wallet.regular_balance)||0)+"</b>",_source:'<code class="bg-mixed-300">'+fe(s.apiKey)+"</code>",_target:'<code class="bg-mixed-300">'+fe(U.value)+" </code>"})}
      <div>`,html:!0,cancel:!0,persistent:!0}).onOk(async()=>{r({action:ye.TRANSFER,source:s.apiKey,target:U.value})})},$=T(!1),oe=()=>{!s.apiKey||$.value||(He(s.apiKey).then(()=>{e.notify({message:f("copy_to_clipboard_success"),icon:"done"}),$.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{$.value=!1},1800))};qe(()=>_.value[s.apiKey],()=>{E()});const X={props:s,$q:e,t:f,dialogRef:h,onDialogOK:r,userStore:o,user:d,apiKeyStore:p,isBusyState:S,keys:v,primaryKey:w,keysInfoCache:_,apiKeyInfo:R,autoReminder:K,email:b,reminderThresholds:k,autoRecharge:x,rechargeThreshold:A,transferKey:U,isPaidKey:N,isPremiumPaidKey:O,isAutoCharge:P,isInputApiKeyValid:V,isInputApiKeyDisabled:n,getKeyInfo:u,init:E,onRemove:L,onRevoke:q,onTransfer:B,isApiKeyCopyDone:$,copyApiKey:oe,get formatKey(){return fe},AutoRechargeItem:ft,UsageReminderItem:cr};return Object.defineProperty(X,"__isScriptSetup",{enumerable:!1,value:!0}),X}});function vr(c,l,s,e,f,h){return g(),C(ze,{ref:"dialogRef",onBeforeShow:e.getKeyInfo},{default:t(()=>[a(se,{class:"bg-mixed-200",flat:"",square:"",style:{width:"900px","max-width":"80vw"}},{default:t(()=>[a(ee,null,{default:t(()=>[a(G,null,{default:t(()=>[e.$q.screen.gt.sm?(g(),C(D,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"settings"})]),_:1})):j("",!0),a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("key_manager.settings")),1)]),_:1}),a(I,{caption:"",style:{"font-family":"monospace"},lines:"1",class:"text-primary cursor-pointer",onClick:e.copyApiKey},{default:t(()=>[a(ge,{icon:"o_key",label:e.formatKey(e.props.apiKey),square:"",size:"sm",class:"bg-mixed-300"},null,8,["label"])]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[Oe(a(W,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ze]])]),_:1})]),_:1})]),_:1}),a(le),e.isBusyState.has(s.apiKey)?(g(),C(xe,{key:0,indeterminate:"",size:"1px"})):j("",!0),a(ee,null,{default:t(()=>[a(Ie,{class:"q-gutter-y-sm"},{default:t(()=>[a(e.AutoRechargeItem,{"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPaidKey,"is-auto-charge":e.isAutoCharge,mode:"dashboard","auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":l[0]||(l[0]=r=>e.autoRecharge=r),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":l[1]||(l[1]=r=>e.rechargeThreshold=r),disable:e.isInputApiKeyDisabled,"navigate-to-purchase":!0,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable"]),a(e.UsageReminderItem,{"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPremiumPaidKey,"auto-reminder":e.autoReminder,"onUpdate:autoReminder":l[2]||(l[2]=r=>e.autoReminder=r),email:e.email,"onUpdate:email":l[3]||(l[3]=r=>e.email=r),thresholds:e.reminderThresholds,"onUpdate:thresholds":l[4]||(l[4]=r=>e.reminderThresholds=r),onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","auto-reminder","email","thresholds"]),a(G,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(g(),C(D,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"sync"})]),_:1})):j("",!0),a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("key_manager.transfer_title"))+" ",1),a(Z,{name:e.isPremiumPaidKey?"verified":"lock"},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(I,{caption:"",lines:"2"},{default:t(()=>[y(m(e.t("key_manager.transfer_explain")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(be,{square:"",outline:"","emit-value":"",clearable:"",style:{width:"220px"},modelValue:e.transferKey,"onUpdate:modelValue":[l[5]||(l[5]=r=>e.transferKey=r),e.onTransfer],options:e.keys.filter(r=>{var o;return r.key!==s.apiKey&&((o=e.keysInfoCache[r.key])==null?void 0:o.user_id)}),"option-value":r=>r.key,label:e.t("key_manager.transfer_label"),disable:!e.isPremiumPaidKey},Ye({"no-option":t(()=>[a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(r=>[a(G,Me(r.itemProps,{clickable:""}),{default:t(()=>[a(D,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:De({"golden-foil":e.apiKeyStore.isPremiumPaidKey(r.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(r.opt.key)})},null,8,["class"])]),_:2},1024),a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[Y("code",null,m(e.formatKey(r.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(ge,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label","disable"])]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(g(),C(D,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"delete",color:"negative"})]),_:1})):j("",!0),a(D,null,{default:t(()=>[a(I,{class:"text-bold text-negative"},{default:t(()=>[y(m(e.t("key_manager.remove_title")),1)]),_:1}),a(I,{caption:"",lines:"2"},{default:t(()=>[y(m(e.t("key_manager.remove_explain")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(W,{flat:"",square:"",color:"negative",label:e.t("key_manager.remove"),onClick:e.onRemove,disable:e.isBusyState.has(s.apiKey)},null,8,["label","disable"])]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(g(),C(D,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"delete_forever",color:"negative"})]),_:1})):j("",!0),a(D,null,{default:t(()=>[a(I,{class:"text-bold text-negative"},{default:t(()=>[y(m(e.t("key_manager.revoke_title")),1)]),_:1}),a(I,{caption:"",lines:"2"},{default:t(()=>[y(m(e.t("key_manager.revoke_explain")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(W,{flat:"",square:"",color:"negative",label:e.t("key_manager.revoke"),onClick:e.onRevoke,disable:e.isBusyState.has(s.apiKey)||!e.isInputApiKeyValid},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)}const yr=ue(gr,[["render",vr],["__file","SettingsDialog.vue"]]),pr=ie({__name:"KeyItem",props:{apiKey:{}},emits:["execute"],setup(c,{expose:l,emit:s}){var ae,de;l();const e=c,f=s,{t:h}=ve({useScope:"global"}),r=ke(),o=Ae(),d=we(),{keysInfoCache:p,isBusyState:S}=_e(o),v=Ce(),{user:w}=_e(v),_=T(""),R=F({get:()=>e.apiKey.isPrimary?e.apiKey.key:"",set:async H=>{var z;if(H){if(await o.getKeyInfo(e.apiKey.key,!0),!((z=p.value[e.apiKey.key])!=null&&z.user_id)){r.notify({message:h("key_manager.invalid_key"),icon:"warning"});return}await o.setPrimaryKey(e.apiKey.key),d.apiKey=e.apiKey.key,r.notify({caption:h("key_manager.primary_key_set_caption"),message:h("key_manager.primary_key_set",{_apiKey:fe(e.apiKey.key)}),icon:"done"})}}}),K=T(!0),b=T((de=(ae=e.apiKey.metadata)==null?void 0:ae.labels)!=null?de:[]),k=T(null),x=F(()=>{var H,z;return b.value.join("").trim()!==((z=(H=e.apiKey.metadata)==null?void 0:H.labels)!=null?z:[]).join("").trim()}),A=()=>{var H,z;b.value=(z=(H=e.apiKey.metadata)==null?void 0:H.labels)!=null?z:[]},U=async()=>{var H;if(K.value)K.value=!1,await fa(),(H=k.value)==null||H.focus();else if(x.value)try{await o.updateKey(e.apiKey.key,{...e.apiKey.metadata,labels:b.value}),r.notify({message:h("key_manager.labels_updated"),icon:"done"}),K.value=!0}catch(z){r.notify({message:z instanceof Error?z.message:String(z),icon:"warning"}),A()}else K.value=!0},N=F(()=>o.isPremiumPaidKey(e.apiKey.key)),O=F(()=>o.isPaidKey(e.apiKey.key)),P=F(()=>o.isFreeKey(e.apiKey.key)),V=F(()=>{var H;return!((H=p.value[e.apiKey.key])!=null&&H.user_id)}),n=F(()=>{var H,z,ce;return(ce=(z=(H=p.value[e.apiKey.key])==null?void 0:H.wallet)==null?void 0:z.metadata)==null?void 0:ce.notification_email}),u=F(()=>{var H,z,ce;return(ce=(z=(H=p.value[e.apiKey.key])==null?void 0:H.wallet)==null?void 0:z.metadata)==null?void 0:ce.notification_thresholds}),E=F(()=>{var z,ce,Ee;const H=Array.from({length:7},(he,ne)=>{const Pe=new Date(Date.now());return Pe.setDate(Pe.getDate()-ne),Le.formatDate(Pe,"YYYY-MM-DD")});return Ke((Ee=(ce=(z=p.value[e.apiKey.key])==null?void 0:z.usage)==null?void 0:ce.reduce((he,ne)=>ne.type==="consume"&&H.includes(Le.formatDate(ne.created_at,"YYYY-MM-DD"))?he+ne.quantity:he,0))!=null?Ee:0)}),L=()=>{r.dialog({component:bt,componentProps:{purchaseKey:e.apiKey.key}})},q=H=>{!H||_.value||(He(H).then(()=>{r.notify({message:h("copy_to_clipboard_success"),icon:"done"}),_.value=H,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href,subLocation:"sefo-api-key-manager"})}),setTimeout(()=>{_.value=""},1800))},B=H=>{r.dialog({component:gt,componentProps:{apiKey:H}})},$=H=>{r.dialog({component:yr,componentProps:{apiKey:H}}).onOk(z=>{f("execute",z.action,z)})},oe=T(!1),M={props:e,emit:f,t:h,$q:r,apiKeyStore:o,embeddingStore:d,keysInfoCache:p,isBusyState:S,userStore:v,user:w,isApiKeyCopyDone:_,primaryKey:R,isReadOnly:K,labels:b,labelsRef:k,isLabelsDirty:x,resetLabels:A,updateLabels:U,isPremiumPaidKey:N,isPaidKey:O,isFreeKey:P,isInvalidKey:V,notifyEmail:n,notifyThresholds:u,totalUsage:E,onBuy:L,onCopy:q,openUsageHistoryDialog:B,openSettingsDialog:$,isShareBusy:oe,onShare:async()=>{oe.value||r.dialog({message:h("key_manager.share_key_confirm_message"),title:h("key_manager.share_key_confirm_title"),ok:{flat:!0,icon:"content_copy",padding:"md",square:!0,label:h("key_manager.copy_share_link"),textColor:"primary"}}).onOk(async()=>{var Ee,he;oe.value=!0;const H=window.location.origin+"/api-dashboard",z=e.apiKey.key,ce=w.value.displayName||((he=(Ee=w.value.email)==null?void 0:Ee.split("@"))==null?void 0:he[0])||"";try{const ne=await kt(H,ce,z);He(ne).then(()=>{r.notify({message:h("key_manager.share_link_copied"),icon:"done"})})}catch(ne){console.error(ne),r.notify({message:ne instanceof Error?ne.message:String(ne),icon:"warning"})}finally{oe.value=!1}})},get date(){return Le},get QSelect(){return be},UsageChart:nr,get formatNumber(){return Je},get formatNumberShort(){return Ke},get formatKey(){return fe}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),hr={class:"column full-width"},br={style:{"font-family":"monospace"}},kr={class:"row full-height"};function wr(c,l,s,e,f,h){return g(),J("div",hr,[e.isBusyState.has(s.apiKey.key)?(g(),C(xe,{key:0,indeterminate:"",size:"1px"})):j("",!0),a(G,{class:De(["full-width key-item",{column:e.$q.screen.lt.lg,"text-dim":e.isInvalidKey}]),tag:"label"},{default:t(()=>[a(D,{side:""},{default:t(()=>[a(ga,{disable:e.isInvalidKey,modelValue:e.primaryKey,"onUpdate:modelValue":l[0]||(l[0]=r=>e.primaryKey=r),val:s.apiKey.key},null,8,["disable","modelValue","val"]),a(te,null,{default:t(()=>[y(m(e.primaryKey===s.apiKey.key?e.t("key_manager.primary_key_set_caption"):e.t("key_manager.primary_key")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:De({"golden-foil":e.isPremiumPaidKey,"silver-foil":!e.isPremiumPaidKey&&e.isPaidKey})},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.isInvalidKey?e.t("key_manager.invalid_key"):e.isFreeKey?e.t("key_manager.free_key"):e.isPaidKey?e.t("paywall.standard_key"):e.t("key_manager.subscribed_key")),1)]),_:1})]),_:1},8,["class"])]),_:1}),a(D,{class:"col"},{default:t(()=>{var r,o,d;return[(r=s.apiKey.metadata)!=null&&r.sharedFrom?(g(),C(I,{key:0,caption:""},{default:t(()=>[y(m(e.t("key_manager.shared_from",{_user:s.apiKey.metadata.sharedFrom})),1)]),_:1})):j("",!0),a(I,{class:"row items-center q-gutter-x-sm no-wrap"},{default:t(()=>{var p;return[Y("span",br,m(e.formatKey(s.apiKey.key)),1),e.notifyEmail&&((p=e.notifyThresholds)!=null&&p.length)?(g(),C(Z,{key:0,name:"alarm_smart_wake"},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.auto_reminder_info",{_email:e.notifyEmail,_threshold:e.notifyThresholds.map(S=>e.formatNumberShort(S)).join(", ")})),1)]),_:1})]),_:1})):j("",!0),a(W,{flat:"",square:"",size:"sm",icon:e.isApiKeyCopyDone===s.apiKey.key?"check":"content_copy",color:e.isApiKeyCopyDone===s.apiKey.key?"primary":"",onClick:l[1]||(l[1]=Te(S=>e.onCopy(s.apiKey.key),["stop"]))},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.copy")),1)]),_:1})]),_:1},8,["icon","color"])]}),_:1}),e.isInvalidKey?j("",!0):(g(),C(I,{key:1,caption:"",class:De(((d=(o=e.keysInfoCache[s.apiKey.key])==null?void 0:o.wallet)==null?void 0:d.total_balance)<0?"text-negative":"")},{default:t(()=>{var p,S,v;return[y(m(e.formatNumber((v=(S=(p=e.keysInfoCache[s.apiKey.key])==null?void 0:p.wallet)==null?void 0:S.total_balance)!=null?v:0)+" "+e.t("embedding.tokens")),1)]}),_:1},8,["class"])),e.isInvalidKey&&!e.isBusyState.has(s.apiKey.key)?(g(),C(I,{key:2,caption:"",class:"text-negative"},{default:t(()=>[a(Z,{name:"warning"}),y(" "+m(e.t("key_manager.invalid_key")),1)]),_:1})):j("",!0)]}),_:1}),a(D,{class:"col"},{default:t(()=>[a(e.QSelect,{ref:"labelsRef",modelValue:e.labels,"onUpdate:modelValue":l[3]||(l[3]=r=>e.labels=r),square:"",multiple:"","use-input":"","use-chips":"",readonly:e.isReadOnly,outlined:!e.isReadOnly,borderless:e.isReadOnly,"hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique","input-class":"cursor-pointer",disable:e.isInvalidKey||e.isBusyState.has(s.apiKey.key),onKeyupCapture:l[4]||(l[4]=Ge(Te(()=>{},["stop"]),["enter"]))},{selected:t(()=>[(g(!0),J(re,null,me(e.labels,r=>(g(),C(ge,{key:r,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-400"},{default:t(()=>[y(m(r),1)]),_:2},1024))),128))]),append:t(()=>[e.isLabelsDirty?(g(),J(re,{key:0},[a(W,{dense:"",square:"",flat:"",icon:"close",onClick:l[2]||(l[2]=r=>e.resetLabels())},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.revert_changes")),1)]),_:1})]),_:1}),a(W,{dense:"",square:"",flat:"",icon:"check",color:"primary",onClick:e.updateLabels},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.update_label")),1)]),_:1})]),_:1})],64)):j("",!0)]),_:1},8,["modelValue","readonly","outlined","borderless","disable"])]),_:1}),a(D,{class:"q-py-sm col"},{default:t(()=>{var r,o;return[(r=e.keysInfoCache[s.apiKey.key])!=null&&r.last_used_at?(g(),C(I,{key:0,caption:""},{default:t(()=>{var d;return[y(m(e.t("key_manager.last_used")+": "+e.date.formatDate((d=e.keysInfoCache[s.apiKey.key])==null?void 0:d.last_used_at,"YYYY-MM-DD HH:mm")),1)]}),_:1})):j("",!0),(o=e.keysInfoCache[s.apiKey.key])!=null&&o.usage&&!e.isInvalidKey?(g(),C(I,{key:1},{default:t(()=>{var d;return[a(e.UsageChart,{"api-key":s.apiKey,usage:(d=e.keysInfoCache[s.apiKey.key])==null?void 0:d.usage},null,8,["api-key","usage"]),a(te,null,{default:t(()=>[y(m(e.t("key_manager.usage_summary",{_usage:e.totalUsage})),1)]),_:1})]}),_:1})):j("",!0)]}),_:1}),a(D,{side:"",class:De(["actions-section",{"always-show":e.primaryKey===s.apiKey.key}])},{default:t(()=>[Y("div",kr,[a(W,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"add_shopping_cart",onClick:Te(e.onBuy,["stop"]),label:e.t("key_manager.top_up")},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.purchase")),1)]),_:1})]),_:1},8,["disable","label"]),a(W,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"history",onClick:l[5]||(l[5]=Te(r=>e.openUsageHistoryDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.usage_history")),1)]),_:1})]),_:1},8,["disable"]),a(W,{square:"",flat:"",icon:"rate_review",padding:"md",onClick:e.updateLabels,color:e.isReadOnly?void 0:"primary"},{default:t(()=>[a(te,{"max-width":"300px"},{default:t(()=>[y(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1})]),_:1},8,["color"]),a(W,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"share",loading:e.isShareBusy,onClick:Te(e.onShare,["stop"])},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.share")),1)]),_:1})]),_:1},8,["disable","loading"]),a(W,{flat:"",square:"",padding:"md",icon:"more_horiz",onClick:l[6]||(l[6]=Te(r=>e.openSettingsDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("key_manager.advance_settings")),1)]),_:1})]),_:1})])]),_:1},8,["class"])]),_:1},8,["class"]),a(le)])}const Er=ue(pr,[["render",wr],["__scopeId","data-v-1da0acec"],["__file","KeyItem.vue"]]),Tr=ie({__name:"KeysTable",setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global"}),e=ke(),f=Ae(),h=Ce(),r=we(),{keys:o,isLoading:d,primaryKey:p}=_e(f),{user:S}=_e(h),{products:v}=_e(r),w=T(null),_=T(void 0),R={[ye.GENERATE]:async X=>{d.value=!0;try{const M=await r.generate0TokenApiKey(X);M&&(await f.addKey(M,_.value),e.notify({message:s("key_manager.generate_success",{_key:fe(M)}),icon:"done"}))}finally{_.value=void 0,d.value=!1}},[ye.REVOKE]:async X=>{var M;d.value=!0;try{let ae;if(n.value?ae=await r.transferToken({source:V.value,target:n.value,withRevoke:!0},X):ae=await r.revokeApiKey(V.value,X),ae){e.notify({message:s("key_manager.revoke_success",{_key:fe(V.value)}),icon:"done"}),n.value&&f.getKeyInfo(n.value,!0);const de=p.value===V.value;await f.removeKey(V.value),de&&await f.setPrimaryKey((M=o.value[0])==null?void 0:M.key)}}finally{V.value="",n.value="",d.value=!1}},[ye.TRANSFER]:async X=>{d.value=!0;try{await r.transferToken({source:E.value,target:u.value},X)&&(e.notify({message:s("key_manager.transfer_success",{_source:fe(E.value),_target:fe(u.value)}),icon:"done"}),f.getKeyInfo(E.value,!0),f.getKeyInfo(u.value,!0))}finally{d.value=!1,E.value="",u.value=""}}},K=async X=>{var M;console.log("handle key in callback"),w.value&&await((M=R[w.value])==null?void 0:M.call(R,X))},{turnstileToken:b,turnstileRef:k,turnstileVisible:x,proceeding:A,onUpdateToken:U,checkReady:N,resetVariables:O}=za(K),P=T(""),V=T(""),n=T(""),u=T(""),E=T(""),L=F(()=>o.value.some(X=>!f.isFreeKey(X.key))),q=F(()=>{const X=P.value.toLowerCase();return o.value.filter(M=>{var de;const ae=((de=M.metadata)==null?void 0:de.labels)||[];return ae.length>0&&ae.some(z=>z.toLowerCase().includes(X))?!0:M.key.toLowerCase().includes(X)})}),B=()=>{e.dialog({component:rr}).onOk(async({action:X,metadata:M})=>{_.value=M,X===ye.GENERATE&&(w.value=ye.GENERATE,N()&&(await K(b.value),O(),gtag==null||gtag("event","add_new_key",{location:document.location.href})))})},$=(X,M)=>{X===ye.REVOKE?(V.value=M.key,n.value=M.transferTo):X===ye.TRANSFER&&(u.value=M.target,E.value=M.source),w.value=X,N()&&(K(b.value),O())};Ve(async()=>{await f.fetchKeys(),f.checkPrimaryKey(),v.value.length===0&&await r.getProducts()});const oe={t:s,$q:e,apiKeyStore:f,userStore:h,embeddingStore:r,keys:o,isLoading:d,primaryKey:p,user:S,products:v,currentAction:w,currentMetadata:_,actionCallback:R,handleTurnstileCb:K,turnstileToken:b,turnstileRef:k,turnstileVisible:x,proceeding:A,onUpdateToken:U,checkReady:N,resetVariables:O,filterQuery:P,revokeKey:V,revokeWithTransferKey:n,transferTarget:u,transferSource:E,hasPaidKey:L,visibleKeys:q,openApiKeyDialog:B,onExecute:$,KeyItem:Er,TurnstileComponent:Ya};return Object.defineProperty(oe,"__isScriptSetup",{enumerable:!1,value:!0}),oe}});function Sr(c,l,s,e,f,h){return g(),C(se,{class:"fit"},{default:t(()=>[a(_t,{ref:"decisionTable",grid:"",rows:e.visibleKeys,flat:"","row-key":"_id","hide-header":"",loading:e.isLoading||e.proceeding,pagination:{rowsPerPage:10},"card-container-class":"tour-optimizer-result-table"},{top:t(()=>[a(se,{class:"full-width",flat:"",square:""},{default:t(()=>[a(ee,{class:"row q-pa-none"},{default:t(()=>[a(W,{disable:!e.user.uid||e.isLoading,flat:"",square:"","no-caps":"",padding:"md",icon:"add",label:e.t("key_manager.add"),onClick:e.openApiKeyDialog},null,8,["disable","label"]),a(W,{disable:!e.hasPaidKey,flat:"",square:"",padding:"md",icon:"receipt_long",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["disable","label"]),a(W,{flat:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/api-dashboard/contact-sales",padding:"md","no-caps":""},null,8,["label"]),a(Se,{filled:"",square:"",class:"full-width",debounce:"300",modelValue:e.filterQuery,"onUpdate:modelValue":l[0]||(l[0]=r=>e.filterQuery=r),placeholder:e.t("key_manager.filter_by")},{prepend:t(()=>[a(Z,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(le)]),_:1})]),item:t(r=>[(g(),C(e.KeyItem,{key:r.row.key,"api-key":r.row,onExecute:e.onExecute},null,8,["api-key"]))]),_:1},8,["rows","loading"]),e.turnstileVisible?(g(),C(e.TurnstileComponent,{key:0,ref:"turnstileRef",modelValue:e.turnstileToken,"onUpdate:modelValue":[l[1]||(l[1]=r=>e.turnstileToken=r),e.onUpdateToken]},null,8,["modelValue","onUpdate:modelValue"])):j("",!0)]),_:1})}const Pr=ue(Tr,[["render",Sr],["__file","KeysTable.vue"]]),da="https://api.jina.ai/v1/classify",je=6,Rr=ie({__name:"AvatarTab",setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global"}),e=ke(),f=T(!1),h=T([]),r=T(null),o=T(!1),d=T(""),p=T(""),S=we(),v=T(null),w=P=>{v.value=P},_={accessories:{Eyepatch:"person wearing a mysterious black eye patch",Glasses:"person wearing modern round glasses with clear lenses","Glasses 2":"person wearing thin-framed contemporary glasses","Glasses 3":"person wearing classic rectangular glasses","Glasses 4":"person wearing vintage round glasses","Glasses 5":"person wearing designer wire-frame glasses",None:"person without any eyewear or accessories",Sunglasses:"person wearing fashionable dark sunglasses","Sunglasses 2":"person wearing sporty aviator sunglasses"},body:{"Blazer Black Tee":"person wearing a black t-shirt under a professional blazer","Button Shirt 1":"person in a crisp button-up dress shirt","Button Shirt 2":"person in a light colored button-up shirt",Coffee:"person holding a coffee cup in casual attire",Device:"person using a mobile device in casual wear",Dress:"person wearing an elegant flowing dress",Explaining:"person gesturing while explaining in business attire","Fur Jacket":"person wearing a luxurious fur jacket",Gaming:"person in gaming attire with controller","Gym Shirt":"person wearing athletic workout clothes",Hoodie:"person in a comfortable casual hoodie",Killer:"person in dark mysterious attire",Macbook:"person working on laptop in casual clothes",Paper:"person holding papers in professional attire","Pointing Up":"person gesturing upward in business wear","Polka Dot Jacket":"person in playful polka dot jacket","Polo and Sweater":"person wearing polo shirt under sweater","Shirt and Coat":"person in formal shirt and coat combination","Sporty Tee":"person in athletic sports t-shirt","Striped Pocket Tee":"person in casual striped t-shirt with pocket","Striped Tee":"person wearing horizontal striped t-shirt",Sweater:"person in cozy knit sweater","Sweater Dots":"person wearing sweater with polka dot pattern","Tee 1":"person in basic solid t-shirt","Tee 2":"person in casual graphic t-shirt","Tee Arms Crossed":"person with crossed arms in t-shirt","Tee Selena":"person in fitted casual t-shirt","Thunder T-Shirt":"person wearing t-shirt with thunder design",Turtleneck:"person in sophisticated black turtleneck",Whatever:"person in casual wear with relaxed pose"},face:{"Angry with Fang":"person with an intense angry expression showing fangs",Awe:"person with an expression of wonder and amazement",Blank:"person with a neutral blank expression",Calm:"person with serene peaceful expression",Cheeky:"person with a playful mischievous expression",Concerned:"person with a worried concerned expression","Concerned Fear":"person with a worried fearful expression",Contempt:"person with a disdainful contemptuous expression",Cute:"person with adorable cheerful expression",Cyclops:"person has only one one-eye",Driven:"person with determined focused expression","Eating Happy":"person with a joyful expression while eating",Explaining:"person with an animated expression while explaining","Eyes Closed":"person with a peaceful expression and closed eyes",Fear:"person with a frightened fearful expression",Hectic:"person with a frantic overwhelmed expression","Loving Grin 1":"person with gentle loving smile","Loving Grin 2":"person with bright heartfelt smile",Monster:"person with a playful monster-like expression",Old:"person with an aged wise expression",Rage:"person with an intense angry expression",Serious:"person with professional serious expression",Smile:"person with friendly welcoming smile","Smile Big":"person with broad enthusiastic smile","Smile LOL":"person with joyful laughing expression","Smile Teeth Gap":"person with charming gap-toothed smile",Solemn:"person with a deeply serious thoughtful expression",Suspicious:"person with a skeptical suspicious expression",Tired:"person with an exhausted weary expression","Very Angry":"person with an extremely angry expression"},head:{Afro:"person with natural afro hairstyle",Bangs:"person with straight front bangs","Bangs 2":"person with side-swept bangs","Bantu Knots":"person with traditional bantu knots hairstyle",Bear:"person with bear-themed hairstyle",Bun:"person with hair styled in neat bun","Bun 2":"person with messy top bun",Buns:"person with double hair buns",Cornrows:"person with cornrow braided hairstyle","Cornrows 2":"person with intricate cornrow design","Flat Top":"person with classic flat top haircut","Flat Top Long":"person with long flat top haircut","Gray Bun":"person with gray hair in bun","Gray Medium":"person with medium-length gray hair","Gray Short":"person with short gray hair",Long:"person with long flowing hair","Long Afro":"person with long voluminous afro","Long Bangs":"person with long layered bangs","Long Curly":"person with long curly hair","Medium 1":"person with shoulder-length hair","Medium 2":"person with wavy medium hair","Medium 3":"person with textured medium hair","Medium Bangs":"person with medium hair and bangs","Medium Bangs 2":"person with feathered medium bangs","Medium Bangs 3":"person with side-parted medium bangs","Medium Straight":"person with straight medium-length hair",Mohawk:"person with classic mohawk style","Mohawk 2":"person with longer mohawk variation","No Hair 1":"person with smooth bald head","No Hair 2":"person with polished bald style","No Hair 3":"person with completely shaved head",Pomp:"person with pompadour hairstyle","Shaved 1":"person with partially shaved head style","Shaved 2":"person with modern shaved haircut","Shaved 3":"person with artistic shaved design","Short 1":"person with short textured cut","Short 2":"person with short faded haircut","Short 3":"person with short spiky style","Short 4":"person with short layered cut","Short 5":"person with short tapered haircut",Twists:"person with twisted loc hairstyle","Twists 2":"person with longer twisted locs","hat-beanie":"person wearing a casual beanie hat","hat-hip":"person wearing a trendy hip-hop style hat"}};async function R(P){var V;try{const n=P.includes("base64,")?P.split("base64,")[1]:P,u=await fetch(da,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.apiKey}`},body:JSON.stringify({model:(V=v==null?void 0:v.value)==null?void 0:V.name,input:[{image:n}],labels:{accessories:Object.values(_.accessories),body:Object.values(_.body),face:Object.values(_.face),head:Object.values(_.head)}})});if(!u.ok)throw new Error(`Classification failed: ${u.status}`);return await u.json()}catch(n){throw console.error("Classification error:",n),n}}async function K(P,V){try{return(await xt(Object.assign({"../../assets/avatar/accessories/Eyepatch.svg":()=>i(()=>import("./Eyepatch-CPtCE8NI.js"),[]),"../../assets/avatar/accessories/Glasses 2.svg":()=>i(()=>import("./Glasses 2-CisVqvW9.js"),[]),"../../assets/avatar/accessories/Glasses 3.svg":()=>i(()=>import("./Glasses 3--AGI-_U5.js"),[]),"../../assets/avatar/accessories/Glasses 4.svg":()=>i(()=>import("./Glasses 4-CkCSLu0z.js"),[]),"../../assets/avatar/accessories/Glasses 5.svg":()=>i(()=>import("./Glasses 5-BnBdJIiD.js"),[]),"../../assets/avatar/accessories/Glasses.svg":()=>i(()=>import("./Glasses-bHTDfG2F.js"),[]),"../../assets/avatar/accessories/None.svg":()=>i(()=>import("./None-CBIsyCCu.js"),[]),"../../assets/avatar/accessories/Sunglasses 2.svg":()=>i(()=>import("./Sunglasses 2-Bm0kyZv8.js"),[]),"../../assets/avatar/accessories/Sunglasses.svg":()=>i(()=>import("./Sunglasses-CCXW1Ow2.js"),[]),"../../assets/avatar/body/Blazer Black Tee.svg":()=>i(()=>import("./Blazer Black Tee-CCvV2dgG.js"),[]),"../../assets/avatar/body/Button Shirt 1.svg":()=>i(()=>import("./Button Shirt 1-CmLXOUNx.js"),[]),"../../assets/avatar/body/Button Shirt 2.svg":()=>i(()=>import("./Button Shirt 2-s_x7_Ujv.js"),[]),"../../assets/avatar/body/Coffee.svg":()=>i(()=>import("./Coffee-BWgpJV-A.js"),[]),"../../assets/avatar/body/Device.svg":()=>i(()=>import("./Device-DEcjonbR.js"),[]),"../../assets/avatar/body/Dress.svg":()=>i(()=>import("./Dress-_6EnLKsY.js"),[]),"../../assets/avatar/body/Explaining.svg":()=>i(()=>import("./Explaining-DadwYvu0.js"),[]),"../../assets/avatar/body/Fur Jacket.svg":()=>i(()=>import("./Fur Jacket-CdWbrdPB.js"),[]),"../../assets/avatar/body/Gaming.svg":()=>i(()=>import("./Gaming-BDiAmtUY.js"),[]),"../../assets/avatar/body/Gym Shirt.svg":()=>i(()=>import("./Gym Shirt-DQCaFZ3f.js"),[]),"../../assets/avatar/body/Hoodie.svg":()=>i(()=>import("./Hoodie-B07UN-Nl.js"),[]),"../../assets/avatar/body/Killer.svg":()=>i(()=>import("./Killer-DTtnEXXI.js"),[]),"../../assets/avatar/body/Macbook.svg":()=>i(()=>import("./Macbook-CZ7Tiuu8.js"),[]),"../../assets/avatar/body/Paper.svg":()=>i(()=>import("./Paper-DK__jVLJ.js"),[]),"../../assets/avatar/body/Pointing Up.svg":()=>i(()=>import("./Pointing Up-DMSWjUIR.js"),[]),"../../assets/avatar/body/Polka Dot Jacket.svg":()=>i(()=>import("./Polka Dot Jacket-Ccaxzz07.js"),[]),"../../assets/avatar/body/Polo and Sweater.svg":()=>i(()=>import("./Polo and Sweater-DtFh9BfC.js"),[]),"../../assets/avatar/body/Shirt and Coat.svg":()=>i(()=>import("./Shirt and Coat-CUM3_bbN.js"),[]),"../../assets/avatar/body/Sporty Tee.svg":()=>i(()=>import("./Sporty Tee-DC-mJGrt.js"),[]),"../../assets/avatar/body/Striped Pocket Tee.svg":()=>i(()=>import("./Striped Pocket Tee-CIvIqxDn.js"),[]),"../../assets/avatar/body/Striped Tee.svg":()=>i(()=>import("./Striped Tee-DNfZDSQM.js"),[]),"../../assets/avatar/body/Sweater Dots.svg":()=>i(()=>import("./Sweater Dots-BlH7xuFs.js"),[]),"../../assets/avatar/body/Sweater.svg":()=>i(()=>import("./Sweater-CuOBOSOz.js"),[]),"../../assets/avatar/body/Tee 1.svg":()=>i(()=>import("./Tee 1-BAomRkw9.js"),[]),"../../assets/avatar/body/Tee 2.svg":()=>i(()=>import("./Tee 2-C4UUC6VK.js"),[]),"../../assets/avatar/body/Tee Arms Crossed.svg":()=>i(()=>import("./Tee Arms Crossed-Cd7ErYZG.js"),[]),"../../assets/avatar/body/Tee Selena.svg":()=>i(()=>import("./Tee Selena-BuBczbrL.js"),[]),"../../assets/avatar/body/Thunder T-Shirt.svg":()=>i(()=>import("./Thunder T-Shirt-R3FQYUZD.js"),[]),"../../assets/avatar/body/Turtleneck.svg":()=>i(()=>import("./Turtleneck-CBu5E31v.js"),[]),"../../assets/avatar/body/Whatever.svg":()=>i(()=>import("./Whatever-C_L7o4PD.js"),[]),"../../assets/avatar/face/Angry with Fang.svg":()=>i(()=>import("./Angry with Fang-Cz56tpGA.js"),[]),"../../assets/avatar/face/Awe.svg":()=>i(()=>import("./Awe-BZkmV47x.js"),[]),"../../assets/avatar/face/Blank.svg":()=>i(()=>import("./Blank-NsmhZSM1.js"),[]),"../../assets/avatar/face/Calm.svg":()=>i(()=>import("./Calm-CPd4QvYU.js"),[]),"../../assets/avatar/face/Cheeky.svg":()=>i(()=>import("./Cheeky-CiEXIAta.js"),[]),"../../assets/avatar/face/Concerned Fear.svg":()=>i(()=>import("./Concerned Fear-DW5JY4CD.js"),[]),"../../assets/avatar/face/Concerned.svg":()=>i(()=>import("./Concerned-BgtD4Mod.js"),[]),"../../assets/avatar/face/Contempt.svg":()=>i(()=>import("./Contempt-CvrrLjDN.js"),[]),"../../assets/avatar/face/Cute.svg":()=>i(()=>import("./Cute-BwsaONwn.js"),[]),"../../assets/avatar/face/Cyclops.svg":()=>i(()=>import("./Cyclops-DTp1IdXY.js"),[]),"../../assets/avatar/face/Driven.svg":()=>i(()=>import("./Driven-De_O7WVZ.js"),[]),"../../assets/avatar/face/Eating Happy.svg":()=>i(()=>import("./Eating Happy-BgMnwg9g.js"),[]),"../../assets/avatar/face/Explaining.svg":()=>i(()=>import("./Explaining-THnIdgyB.js"),[]),"../../assets/avatar/face/Eyes Closed.svg":()=>i(()=>import("./Eyes Closed-CdI1KQdq.js"),[]),"../../assets/avatar/face/Fear.svg":()=>i(()=>import("./Fear-BexFCH5R.js"),[]),"../../assets/avatar/face/Hectic.svg":()=>i(()=>import("./Hectic-AExjuXjY.js"),[]),"../../assets/avatar/face/Loving Grin 1.svg":()=>i(()=>import("./Loving Grin 1-B_w88qcc.js"),[]),"../../assets/avatar/face/Loving Grin 2.svg":()=>i(()=>import("./Loving Grin 2-zoGieaDF.js"),[]),"../../assets/avatar/face/Monster.svg":()=>i(()=>import("./Monster-C1lwNnn2.js"),[]),"../../assets/avatar/face/Old.svg":()=>i(()=>import("./Old-D4BSyuLE.js"),[]),"../../assets/avatar/face/Rage.svg":()=>i(()=>import("./Rage-B2uNaaGQ.js"),[]),"../../assets/avatar/face/Serious.svg":()=>i(()=>import("./Serious-DI3hxq-4.js"),[]),"../../assets/avatar/face/Smile Big.svg":()=>i(()=>import("./Smile Big-aT5CkwfB.js"),[]),"../../assets/avatar/face/Smile LOL.svg":()=>i(()=>import("./Smile LOL-DC93Zyi_.js"),[]),"../../assets/avatar/face/Smile Teeth Gap.svg":()=>i(()=>import("./Smile Teeth Gap-DBZFawB0.js"),[]),"../../assets/avatar/face/Smile.svg":()=>i(()=>import("./Smile-0Wibgfy8.js"),[]),"../../assets/avatar/face/Solemn.svg":()=>i(()=>import("./Solemn-CxgWcI-i.js"),[]),"../../assets/avatar/face/Suspicious.svg":()=>i(()=>import("./Suspicious-D7j672A1.js"),[]),"../../assets/avatar/face/Tired.svg":()=>i(()=>import("./Tired-D_AtxcGW.js"),[]),"../../assets/avatar/face/Very Angry.svg":()=>i(()=>import("./Very Angry-D5F4ua3s.js"),[]),"../../assets/avatar/facialHair/Chin.svg":()=>i(()=>import("./Chin-DUNkMTkI.js"),[]),"../../assets/avatar/facialHair/Full 2.svg":()=>i(()=>import("./Full 2-gHgrzbn6.js"),[]),"../../assets/avatar/facialHair/Full 3.svg":()=>i(()=>import("./Full 3-Ds9Mi2Pn.js"),[]),"../../assets/avatar/facialHair/Full 4.svg":()=>i(()=>import("./Full 4-CpyHDOKi.js"),[]),"../../assets/avatar/facialHair/Full.svg":()=>i(()=>import("./Full--tLCytme.js"),[]),"../../assets/avatar/facialHair/Goatee 1.svg":()=>i(()=>import("./Goatee 1-CjxWNkM4.js"),[]),"../../assets/avatar/facialHair/Goatee 2.svg":()=>i(()=>import("./Goatee 2-DX91ea6G.js"),[]),"../../assets/avatar/facialHair/Moustache 1.svg":()=>i(()=>import("./Moustache 1-DCfFyVoz.js"),[]),"../../assets/avatar/facialHair/Moustache 2.svg":()=>i(()=>import("./Moustache 2-DvTVVVR4.js"),[]),"../../assets/avatar/facialHair/Moustache 3.svg":()=>i(()=>import("./Moustache 3-7DebNHil.js"),[]),"../../assets/avatar/facialHair/Moustache 4.svg":()=>i(()=>import("./Moustache 4-SJn7FG3B.js"),[]),"../../assets/avatar/facialHair/Moustache 5.svg":()=>i(()=>import("./Moustache 5-44Xj2EZF.js"),[]),"../../assets/avatar/facialHair/Moustache 6.svg":()=>i(()=>import("./Moustache 6-CEr5yFL1.js"),[]),"../../assets/avatar/facialHair/Moustache 7.svg":()=>i(()=>import("./Moustache 7-Bq0VvETl.js"),[]),"../../assets/avatar/facialHair/Moustache 8.svg":()=>i(()=>import("./Moustache 8-mUxMyGGc.js"),[]),"../../assets/avatar/facialHair/Moustache 9.svg":()=>i(()=>import("./Moustache 9-DOisYSjS.js"),[]),"../../assets/avatar/facialHair/None.svg":()=>i(()=>import("./None-DgNcDPcG.js"),[]),"../../assets/avatar/head/Afro.svg":()=>i(()=>import("./Afro-BcTe8cjZ.js"),[]),"../../assets/avatar/head/Bangs 2.svg":()=>i(()=>import("./Bangs 2-8gDxCaJT.js"),[]),"../../assets/avatar/head/Bangs.svg":()=>i(()=>import("./Bangs-VMnv_1Bg.js"),[]),"../../assets/avatar/head/Bantu Knots.svg":()=>i(()=>import("./Bantu Knots-FkG8IqlL.js"),[]),"../../assets/avatar/head/Bear.svg":()=>i(()=>import("./Bear-B_wppsaW.js"),[]),"../../assets/avatar/head/Bun 2.svg":()=>i(()=>import("./Bun 2-EtBMU_d9.js"),[]),"../../assets/avatar/head/Bun.svg":()=>i(()=>import("./Bun-B7Kj-Cx2.js"),[]),"../../assets/avatar/head/Buns.svg":()=>i(()=>import("./Buns-0MUj_y-O.js"),[]),"../../assets/avatar/head/Cornrows 2.svg":()=>i(()=>import("./Cornrows 2-m36CFRMN.js"),[]),"../../assets/avatar/head/Cornrows.svg":()=>i(()=>import("./Cornrows-D_tFOLo2.js"),[]),"../../assets/avatar/head/Flat Top Long.svg":()=>i(()=>import("./Flat Top Long-BYSVHErS.js"),[]),"../../assets/avatar/head/Flat Top.svg":()=>i(()=>import("./Flat Top-3MNwLsIB.js"),[]),"../../assets/avatar/head/Gray Bun.svg":()=>i(()=>import("./Gray Bun-6Dorz2Bf.js"),[]),"../../assets/avatar/head/Gray Medium.svg":()=>i(()=>import("./Gray Medium-lrleAuub.js"),[]),"../../assets/avatar/head/Gray Short.svg":()=>i(()=>import("./Gray Short-DEP2bB8l.js"),[]),"../../assets/avatar/head/Long Afro.svg":()=>i(()=>import("./Long Afro-CZArt9o6.js"),[]),"../../assets/avatar/head/Long Bangs.svg":()=>i(()=>import("./Long Bangs-CEgFEE8r.js"),[]),"../../assets/avatar/head/Long Curly.svg":()=>i(()=>import("./Long Curly-CzVOPxU6.js"),[]),"../../assets/avatar/head/Long.svg":()=>i(()=>import("./Long-mD9BOv0I.js"),[]),"../../assets/avatar/head/Medium 1.svg":()=>i(()=>import("./Medium 1-BIbsz7Fr.js"),[]),"../../assets/avatar/head/Medium 2.svg":()=>i(()=>import("./Medium 2-CnPtrhj9.js"),[]),"../../assets/avatar/head/Medium 3.svg":()=>i(()=>import("./Medium 3-B-FK1tKj.js"),[]),"../../assets/avatar/head/Medium Bangs 2.svg":()=>i(()=>import("./Medium Bangs 2-Cr7FTMco.js"),[]),"../../assets/avatar/head/Medium Bangs 3.svg":()=>i(()=>import("./Medium Bangs 3-CN81QHc8.js"),[]),"../../assets/avatar/head/Medium Bangs.svg":()=>i(()=>import("./Medium Bangs-DvU1aw27.js"),[]),"../../assets/avatar/head/Medium Straight.svg":()=>i(()=>import("./Medium Straight-C1jK9Qgd.js"),[]),"../../assets/avatar/head/Mohawk 2.svg":()=>i(()=>import("./Mohawk 2-BPHaakiH.js"),[]),"../../assets/avatar/head/Mohawk.svg":()=>i(()=>import("./Mohawk-BtkBrxTU.js"),[]),"../../assets/avatar/head/No Hair 1.svg":()=>i(()=>import("./No Hair 1-BM-4_kmR.js"),[]),"../../assets/avatar/head/No Hair 2.svg":()=>i(()=>import("./No Hair 2-DjnYbtaT.js"),[]),"../../assets/avatar/head/No Hair 3.svg":()=>i(()=>import("./No Hair 3-CDiHEwX9.js"),[]),"../../assets/avatar/head/Pomp.svg":()=>i(()=>import("./Pomp-Di6BypHV.js"),[]),"../../assets/avatar/head/Shaved 1.svg":()=>i(()=>import("./Shaved 1-DUFavbik.js"),[]),"../../assets/avatar/head/Shaved 2.svg":()=>i(()=>import("./Shaved 2-BIYv1-1_.js"),[]),"../../assets/avatar/head/Shaved 3.svg":()=>i(()=>import("./Shaved 3-DX966IJI.js"),[]),"../../assets/avatar/head/Short 1.svg":()=>i(()=>import("./Short 1-B-el4prz.js"),[]),"../../assets/avatar/head/Short 2.svg":()=>i(()=>import("./Short 2-YawmDo8u.js"),[]),"../../assets/avatar/head/Short 3.svg":()=>i(()=>import("./Short 3-Bq0t9n5E.js"),[]),"../../assets/avatar/head/Short 4.svg":()=>i(()=>import("./Short 4-B1nPxZXu.js"),[]),"../../assets/avatar/head/Short 5.svg":()=>i(()=>import("./Short 5-xc1sa6I2.js"),[]),"../../assets/avatar/head/Twists 2.svg":()=>i(()=>import("./Twists 2-1XiLWkyn.js"),[]),"../../assets/avatar/head/Twists.svg":()=>i(()=>import("./Twists-DxjfQDSj.js"),[]),"../../assets/avatar/head/hat-beanie.svg":()=>i(()=>import("./hat-beanie-3it8Xmnp.js"),[]),"../../assets/avatar/head/hat-hip.svg":()=>i(()=>import("./hat-hip-CbkFXWiS.js"),[])}),`../../assets/avatar/${P}/${V}.svg`,6)).default}catch(n){throw console.error("Error loading SVG:",n),e.notify({type:"negative",message:s("avatar.error_loading")}),n}}function b(P,V){return Object.entries(P).map(([n,u])=>({category:n,items:u.sort((E,L)=>L.score-E.score).slice(0,V).map(E=>{var L;return{label:E.label,score:E.score,feature:((L=Object.entries(_[n]).find(([q,B])=>B===E.label))==null?void 0:L[0])||Object.keys(_[n])[0]}})}))}function k(P,V){const n={};return P.forEach(({category:u,items:E})=>{const L=E[V%E.length];n[u]=L.feature}),n}async function x(){if(!p.value){e.notify({type:"warning",message:s("avatar.noImageSelected")});return}f.value=!0,h.value=[];try{const P=await R(p.value),V=b(P.data[0].predictions,je);for(let n=0;n<je;n++){const u=k(V,n),E=await Promise.all([K("body",u.body),K("head",u.head),K("face",u.face),K("accessories",u.accessories)]),L=["translate(0, 550)","translate(200, 50)","translate(320, 250)","translate(210, 310)"],B=`
        <svg
          width="380"
          height="380"
          viewBox="0 0 900 900"
          fill="none"
          stroke="black"
          stroke-width="0.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g>
            ${E.map(($,oe)=>{const X=$.slice($.indexOf(">",$.indexOf("<svg"))+1).replace("</svg>","");return`<g transform="${L[oe]}">${X}</g>`}).join("")}
          </g>
        </svg>
      `;h.value.push(B)}}catch(P){console.error("Error generating avatars:",P),h.value=[],e.notify({type:"negative",message:s("avatar.classificationError")})}finally{f.value=!1}}async function A(P){return new Promise((V,n)=>{const u=new Image,E=document.createElement("canvas"),L=E.getContext("2d");E.width=256,E.height=256,u.onload=()=>{const B=Math.max(E.width/u.width,E.height/u.height),$=(E.width-u.width*B)/2,oe=(E.height-u.height*B)/2;L.fillStyle="white",L.fillRect(0,0,E.width,E.height),L.drawImage(u,$,oe,u.width*B,u.height*B);const X=E.toDataURL(P.type),M=X.split(",")[1];d.value=X,p.value=M,V(M)},u.onerror=()=>{n(new Error(s("avatar.error_processing")))};const q=new FileReader;q.onload=B=>{u.src=B.target.result},q.onerror=()=>{n(new Error(s("avatar.error_processing")))},q.readAsDataURL(P)})}async function U(){if(r.value){o.value=!0;try{await A(r.value)}catch(P){console.error("Error processing image:",P),e.notify({type:"negative",message:s("avatar.error_processing")})}finally{o.value=!1}}else d.value=""}function N(P,V){const n=new Blob([P],{type:"image/svg+xml"}),u=window.URL.createObjectURL(n),E=document.createElement("a");E.href=u,E.download=`avatar-${V+1}.svg`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(u),e.notify({message:s("avatar.download_success",{index:V+1})})}const O={API_URL:da,t:s,$q:e,isLoading:f,svgContents:h,TOP_N:je,selectedFile:r,isProcessing:o,processedImage:d,imageBase64:p,embeddingStore:S,currentModel:v,onModelItemClick:w,featureMapping:_,classifyImage:R,importSVG:K,getTopNPredictions:b,generateFeatureCombination:k,generateAvatar:x,processImage:A,handleFileSelect:U,downloadSVG:N,ModelDropDown:Xa};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),Dr={class:"row full-width"},xr={class:"row q-col-gutter-md"},Vr=["innerHTML"];function Ar(c,l,s,e,f,h){return g(),C(se,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[Y("div",Dr,[a(mt,{class:"col",square:"",filled:"","input-class":"text-no-wrap ellipsis",modelValue:e.selectedFile,"onUpdate:modelValue":[l[0]||(l[0]=r=>e.selectedFile=r),e.handleFileSelect],label:e.t("avatar.select_file"),accept:".jpg,.jpeg,.png,.gif,.webp",loading:e.isProcessing},{prepend:t(()=>[e.processedImage?(g(),C(yt,{key:1,src:e.processedImage,width:"24px",height:"24px"},null,8,["src"])):(g(),C(Z,{key:0,name:"attach_file"}))]),_:1},8,["modelValue","label","loading"]),a(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,category:"clip",onChooseModel:e.onModelItemClick},null,8,["currentModel"]),a(W,{square:"",flat:"","no-caps":"",padding:"md",label:e.t("avatar.generate"),onClick:e.generateAvatar,icon:"play_arrow",loading:e.isLoading,disable:!e.currentModel||!e.selectedFile},null,8,["label","loading","disable"]),a(W,{square:"",flat:"",padding:"md","no-caps":"",label:e.t("avatar.how_does_it_work"),to:"/news/scaling-test-time-compute-for-embedding-models",icon:"help"},null,8,["label"])]),e.isProcessing||e.isLoading?(g(),C(xe,{key:0,indeterminate:"",size:"1px"})):j("",!0),a(le),a(ee,null,{default:t(()=>[Y("div",xr,[(g(!0),J(re,null,me(e.svgContents,(r,o)=>(g(),J("div",{key:o,class:"col-auto"},[a(se,{flat:"",bordered:"",class:"cursor-pointer q-hoverable",onClick:d=>e.downloadSVG(r,o)},{default:t(()=>[l[1]||(l[1]=Y("span",{class:"q-focus-helper"},null,-1)),a(ee,null,{default:t(()=>[Y("div",{class:"text-center",innerHTML:r},null,8,Vr)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})}const Lr=ue(Rr,[["render",Ar],["__file","AvatarTab.vue"]]),Kr={...xa,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:c=>c>=0&&c<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Qe=50,va=2*Qe,ya=va*Math.PI,Ir=Math.round(ya*1e3)/1e3,Cr=Va({name:"QCircularProgress",props:{...Kr,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(c,{slots:l}){const{proxy:{$q:s}}=Ka(),e=Aa(c),f=F(()=>{const _=(s.lang.rtl===!0?-1:1)*c.angle;return{transform:c.reverse!==(s.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-_}deg)`:`rotate3d(0, 0, 1, ${_-90}deg)`}}),h=F(()=>c.instantFeedback!==!0&&c.indeterminate!==!0?{transition:`stroke-dashoffset ${c.animationSpeed}ms ease 0s, stroke ${c.animationSpeed}ms ease`}:""),r=F(()=>va/(1-c.thickness/2)),o=F(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),d=F(()=>ht(c.value,c.min,c.max)),p=F(()=>c.max-c.min),S=F(()=>c.thickness/2*r.value),v=F(()=>{const _=(c.max-d.value)/p.value,R=c.rounded===!0&&d.value<c.max&&_<.25?S.value/2*(1-_/.25):0;return ya*_+R});function w({thickness:_,offset:R,color:K,cls:b,rounded:k}){return Re("circle",{class:"q-circular-progress__"+b+(K!==void 0?` text-${K}`:""),style:h.value,fill:"transparent",stroke:"currentColor","stroke-width":_,"stroke-dasharray":Ir,"stroke-dashoffset":R,"stroke-linecap":k,cx:r.value,cy:r.value,r:Qe})}return()=>{const _=[];c.centerColor!==void 0&&c.centerColor!=="transparent"&&_.push(Re("circle",{class:`q-circular-progress__center text-${c.centerColor}`,fill:"currentColor",r:Qe-S.value/2,cx:r.value,cy:r.value})),c.trackColor!==void 0&&c.trackColor!=="transparent"&&_.push(w({cls:"track",thickness:S.value,offset:0,color:c.trackColor})),_.push(w({cls:"circle",thickness:S.value,offset:v.value,color:c.color,rounded:c.rounded===!0?"round":void 0}));const R=[Re("svg",{class:"q-circular-progress__svg",style:f.value,viewBox:o.value,"aria-hidden":"true"},_)];return c.showValue===!0&&R.push(Re("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:c.fontSize}},l.default!==void 0?l.default():[Re("div",d.value)])),Re("div",{class:`q-circular-progress q-circular-progress--${c.indeterminate===!0?"in":""}determinate`,style:e.value,role:"progressbar","aria-valuemin":c.min,"aria-valuemax":c.max,"aria-valuenow":c.indeterminate===!0?void 0:d.value},La(l.internal,R))}}}),Or=ie({__name:"GroundingDemoComponent",props:{useLazyLoading:{type:Boolean,default:!0}},setup(c,{expose:l}){l();const s=c,e=we(),{apiKey:f}=_e(e),{t:h}=ve({useScope:"global"}),r=T("In 2012, President Barack Hussein Obama repealed the Smith-Mundt act, which had been in place in 1948. The law prevented the government from putting its propaganda on TV and Radio."),o=T(!1),d=T(!0),p=T(0),S=T(null),v=T(null),w=T(null);let _=null;const R=F(()=>{var P;return(P=S.value)==null?void 0:P.data}),K=F(()=>{var P;return(P=R.value)!=null&&P.factuality?R.value.factuality*100:0}),b=F(()=>{var P;return((P=R.value)==null?void 0:P.references.filter(V=>V.isSupportive))||[]}),k=F(()=>{const P=Math.floor(p.value/1e3),V=Math.floor(p.value%1e3/100);return`${P}.${V} s`}),x=F(()=>{var P,V;return v.value!==null?((P=R.value)==null?void 0:P.references.filter(n=>n.isSupportive===v.value))||[]:((V=R.value)==null?void 0:V.references)||[]}),A=P=>{v.value===P?v.value=null:v.value=P},U=async()=>{if(!r.value)return;d.value=!0,S.value=null;const P=Date.now(),V=`https://g.jina.ai/${encodeURIComponent(r.value)}${o.value?"?deepdive=true":""}`;try{const n=await fetch(V,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${f.value}`}});p.value=Date.now()-P,S.value=await n.json()}catch(n){S.value={message:n instanceof Error?n.message:String(n)}}finally{d.value=!1}},N=()=>{var V;const P=((V=w.value)==null?void 0:V.$el)||w.value;P instanceof HTMLElement?(_=new IntersectionObserver(n=>{n[0].isIntersecting&&(U(),_==null||_.disconnect())},{root:null,threshold:.1}),_.observe(P)):console.error("Element is not an HTMLElement:",P)};Ve(()=>{s.useLazyLoading?fa(()=>{setTimeout(()=>{N()},100)}):U()}),Ia(()=>{_&&_.disconnect()});const O={props:s,embeddingStore:e,apiKey:f,t:h,query:r,isDeepDive:o,isBusy:d,responseTime:p,response:S,filters:v,componentRef:w,get observer(){return _},set observer(P){_=P},responseData:R,factuality:K,supportiveNum:b,responseTimeString:k,references:x,onFilter:A,sendQuery:U,initIntersectionObserver:N,ref:T,get formatNumber(){return Je}};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),qr={class:"text-negative"};function Mr(c,l,s,e,f,h){return g(),C(se,{ref:"componentRef",flat:"",square:"",bordered:"",class:"col-12 col-md-10"},{default:t(()=>{var r;return[a(ee,{class:"q-pa-none"},{default:t(()=>[a(Vt,{onSubmit:e.sendQuery,ref:"formRef"},{default:t(()=>{var o,d;return[a(Se,{square:"",filled:"","bottom-slots":!!e.response,modelValue:e.query,"onUpdate:modelValue":l[1]||(l[1]=p=>e.query=p),disable:e.isBusy,clearable:"",label:e.t("reader.demo.your_statement")},Ye({prepend:t(()=>[a(pe,{modelValue:e.isDeepDive,"onUpdate:modelValue":l[0]||(l[0]=p=>e.isDeepDive=p),disable:e.isBusy,"checked-icon":"biotech","icon-color":"black","unchecked-icon":"bolt"},{default:t(()=>[a(te,null,{default:t(()=>[y(m(e.t("reader.demo.headers.deepdive")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),append:t(()=>[a(W,{square:"",flat:"",icon:"send",padding:"md",loading:e.isBusy,onClick:e.sendQuery,type:"submit"},null,8,["loading"])]),_:2},[(o=e.response)!=null&&o.name||(d=e.response)!=null&&d.message?{name:"hint",fn:t(()=>[Y("span",qr,[y(m(e.response.name||e.response.message)+" ",1),e.response.readableMessage?(g(),C(te,{key:0},{default:t(()=>[y(m(e.response.readableMessage),1)]),_:1})):j("",!0)])]),key:"0"}:e.response?{name:"hint",fn:t(()=>{var p;return[a(ge,{icon:"timer",label:`${e.responseTimeString}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"]),a(ge,{icon:"straighten",label:`${e.formatNumber(((p=e.responseData)==null?void 0:p.usage.tokens)||0)} ${e.t("embedding.tokens")}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])]}),key:"1"}:void 0]),1032,["bottom-slots","modelValue","disable","label"])]}),_:1},512)]),_:1}),e.isBusy?(g(),C(xe,{key:0,indeterminate:"",size:"1px"})):j("",!0),e.responseData?(g(),C(ee,{key:1,class:"q-mt-lg"},{default:t(()=>[a(G,null,{default:t(()=>[a(D,{side:""},{default:t(()=>[a(Cr,{"show-value":"",value:e.factuality,size:"60px",thickness:.1,color:e.factuality>50?"positive":"negative","track-color":"surface-mixed-200"},{default:t(()=>{var o,d;return[a(Z,{name:(o=e.responseData)!=null&&o.result?"check":"close",color:(d=e.responseData)!=null&&d.result?"accent":"negative",size:"30px"},null,8,["name","color"])]}),_:1},8,["value","color"])]),_:1}),a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.responseData.result?e.t("reader.demo.grounding_result_true"):e.t("reader.demo.grounding_result_false")),1)]),_:1}),a(I,{caption:""},{default:t(()=>{var o;return[y(m((o=e.responseData)==null?void 0:o.reason),1)]}),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pt,{outline:"",square:""},{default:t(()=>{var o,d,p;return[a(W,{label:(o=e.supportiveNum)==null?void 0:o.length,icon:"thumb_up",square:"",onClick:l[2]||(l[2]=S=>e.onFilter(!0)),outline:""},null,8,["label"]),a(le),a(W,{label:(((d=e.responseData)==null?void 0:d.references.length)||0)-((p=e.supportiveNum)==null?void 0:p.length),icon:"thumb_down",square:"",onClick:l[3]||(l[3]=S=>e.onFilter(!1)),outline:""},null,8,["label"])]}),_:1})]),_:1})]),_:1})]),_:1})):j("",!0),(r=e.responseData)!=null&&r.references.length?(g(),C(ee,{key:2},{default:t(()=>[a(Ie,null,{default:t(()=>[a(Xe,{name:"list2"},{default:t(()=>[(g(!0),J(re,null,me(e.references,o=>(g(),C(G,{clickable:"",key:o.url,href:o.url,target:"_blank",class:"card-details"},{default:t(()=>[a(D,{avatar:""},{default:t(()=>[a(Z,{name:o.isSupportive?"thumb_up":"thumb_down",color:o.isSupportive?"positive":"negative"},null,8,["name","color"])]),_:2},1024),a(D,null,{default:t(()=>[a(I,{lines:"1",class:"text-italic"},{default:t(()=>[y("... "+m(o.keyQuote)+" ...",1)]),_:2},1024),a(I,{caption:""},{default:t(()=>[a(ge,{square:"",size:"sm",icon:`img:https://www.google.com/s2/favicons?sz=32&domain_url=${o.url}`,label:o.url,class:"text-caption q-mx-none bg-mixed-200",style:{"max-width":"60%"}},null,8,["icon","label"])]),_:2},1024)]),_:2},1024),a(D,{side:""},{default:t(()=>[a(Z,{name:"open_in_new",size:"xs",class:"read-more-btn"})]),_:1})]),_:2},1032,["href"]))),128))]),_:1})]),_:1})]),_:1})):j("",!0)]}),_:1},512)}const Br=ue(Or,[["render",Mr],["__file","GroundingDemoComponent.vue"]]),Ur=ie({__name:"GroundingTab",setup(c,{expose:l}){l();const s={GroundingDemoComponent:Br};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function Nr(c,l,s,e,f,h){return g(),C(se,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.GroundingDemoComponent,{"use-lazy-loading":!1})]),_:1})}const jr=ue(Ur,[["render",Nr],["__scopeId","data-v-0622c9bb"],["__file","GroundingTab.vue"]]),Fe="https://llm-serp.jina.ai",Fr=ie({__name:"UsageComponent",setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global"}),e=ke(),f=we(),{apiKey:h}=_e(f),r=T(!1),o=T({}),d=T({q:"jina ai",location:""}),p=F(()=>{const b={};for(const[k,x]of Object.entries(d.value))x&&(b[k]=x);return b}),S=T({}),v=T([{header:"Authorization",value:`Bearer ${h.value}`,label:"auth_token",type:"toggle",url:"/api-dashboard/rate-limit",get disabled(){return!h.value},get indicator(){return!!S.value[this.header]},set(b){b?S.value[this.header]=this.value:delete S.value[this.header]}},{label:"country",type:"select",value:d.value.gl,options:[{value:"Default"},...Wa],indicator:!0,set(b){if(this.value=b,b==="Default"){delete d.value.gl;return}d.value.gl=b},init(){this.value="Default"}},{label:"location",type:"text",value:d.value.location,indicator:!0,set(b){this.value=b,d.value.location=b}},{label:"language",type:"select",value:d.value.hl,indicator:!0,options:[{value:"Default"},...Ja],set(b){if(this.value=b,b==="Default"){delete d.value.hl;return}d.value.hl=b},init(){this.value="Default"}},{label:"number",type:"select",options:[{value:10},{value:20},{value:30}],value:d.value.num,set(b){this.value=b||null;const k=Number(this.value);if(k===10){delete d.value.num;return}d.value.num=k},init(){this.set(10)}},{label:"page",type:"number",min:1,indicator:!0,value:d.value.page,set(b){this.value=b||null;const k=Number(this.value);if(k===1){delete d.value.page;return}d.value.page=k},init(){this.set(1)}}]),w=F(()=>{for(const A of v.value)A.disabled&&A.set(!1);const b=["Content-Type: application/json"];for(const[A,U]of Object.entries(S.value))if(U){if(typeof U=="string")b.push(`${A}: ${U}`);else if(Array.isArray(U))for(const N of U)b.push(`${A}: ${N}`)}const k=b.map(A=>`  -H "${A}"`).join(`\\
`);return`
\`\`\`bash
${[`curl ${Fe}`,`${k}`,`  -d @- <<EOFEOF
  {
    ${JSON.stringify(p.value,null,4).slice(1,-1).trim()}
  }
EOFEOF`].join(` \\
`)}
\`\`\`
  `}),_=T(!1),R=async()=>{if(!h.value||!p.value.q)return;o.value={};const b={"Content-Type":"application/json"};for(const k of v.value)k.indicator&&k.header&&(b[k.header]=k.value);r.value=!0,fetch(Fe,{method:"POST",headers:b,body:JSON.stringify(p.value)}).then(async k=>{var x;if((x=k.headers.get("content-type"))!=null&&x.includes("text/event-stream")){if(k.body){o.value={status:k.status,statusText:k.statusText,eventStream:!0,data:[]};const A=k.body.getReader(),U=new TextDecoder;for(;;){const{done:N,value:O}=await A.read();if(N){_.value=!1,r.value=!1;break}O&&(_.value=!0,U.decode(O).split(`

`).forEach(n=>{const E=n.split(`
`).find(q=>q.startsWith("data: "));if(!E)return;const L=E.replace(/data: /g,"");try{L&&o.value.data.push(L)}catch(q){console.error("Error:",q)}}))}}}else{o.value={status:k.status,statusText:k.statusText};const A=await k.json();o.value.data={status:k.status,type:"json",content:A}}}).catch(k=>{console.error("Error:",k),o.value={status:500,data:k.message}}).finally(()=>{r.value=!1,_.value=!1})};Ve(()=>{v.value.forEach(b=>{b.init&&b.init()})});const K={t:s,$q:e,embeddingStore:f,apiKey:h,isBusy:r,response:o,payload:d,BASE_URL:Fe,adaptablePayload:p,headers:S,availableParameters:v,adaptableCode:w,isStreaming:_,onExecute:R,UsageHeader:Za,APIPanel:$a};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}});function Gr(c,l,s,e,f,h){return g(),C(se,{flat:"",square:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.UsageHeader,{"home-link":"/llm-serp-demo","issue-link":"https://github.com/jina-ai/node-serp/issues","is-support-c-s-p":!1,"api-link":""}),a(le),a(ee,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none",style:{"flex-grow":"1"}},{default:t(()=>[a(ee,{class:"col-md-6 col-lg-5 col-xl-4 q-pa-none"},{default:t(()=>[a(Ie,{class:"full-width"},{default:t(()=>[a(Xe,{name:"list2"},{default:t(()=>[a(G,{key:"query",class:"q-pa-none"},{default:t(()=>[a(D,null,{default:t(()=>[a(Se,{type:"textarea",rows:"1",modelValue:e.payload.q,"onUpdate:modelValue":l[0]||(l[0]=r=>e.payload.q=r),class:"full-width text-caption",filled:"",square:"","hide-bottom-space":"",label:e.t("llm_serp.query_label"),rules:[r=>!!r]},{prepend:t(()=>[a(Z,{name:"search"})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1}),(g(!0),J(re,null,me(e.availableParameters,r=>(g(),J(re,{key:r.label},[r.disabled?j("",!0):(g(),C(G,{tag:"label",key:r.label},{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t(`llm_serp.parameters.${r.label}`)),1)]),_:2},1024),a(I,{caption:"",innerHTML:e.t(`llm_serp.parameters.${r.label}_explain`)},null,8,["innerHTML"]),r.url?(g(),C(I,{key:0,caption:"",class:"q-pt-sm"},{default:t(()=>[a(W,{href:r.url,label:e.t("deepsearch.learn_more"),size:"xs",outline:"",square:"",icon:"open_in_new",target:"_blank"},null,8,["href","label"])]),_:2},1024)):j("",!0)]),_:2},1024),r.type==="toggle"?(g(),C(D,{key:0,side:""},{default:t(()=>[a(pe,{disable:r.disabled,"model-value":r.indicator,"onUpdate:modelValue":o=>r.set(o)},null,8,["disable","model-value","onUpdate:modelValue"])]),_:2},1024)):r.type==="text"||r.type==="number"?(g(),C(D,{key:1,side:""},{default:t(()=>[a(Se,{"model-value":r.value,"onUpdate:modelValue":o=>r.set(o),filled:"",square:"",type:r.type,min:r.min,style:{"max-width":"100px"},disable:!r.indicator},null,8,["model-value","onUpdate:modelValue","type","min","disable"])]),_:2},1024)):r.type==="select"?(g(),C(D,{key:2,side:""},{default:t(()=>[a(be,{modelValue:r.value,"onUpdate:modelValue":[o=>r.value=o,o=>r.set(o)],options:r.options,style:{"min-width":"100px"},filled:"",square:"","hide-bottom-space":"","emit-value":"","map-options":""},{option:t(({opt:o,itemProps:d})=>[a(G,Me({ref_for:!0},d),{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[Y("code",null,m(o.value),1)]),_:2},1024),a(I,{caption:""},{default:t(()=>[y(m(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),selected:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[Y("code",null,m(r.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):j("",!0)]),_:2},1024))],64))),128))]),_:1})]),_:1})]),_:1}),a(le,{vertical:e.$q.screen.gt.sm},null,8,["vertical"]),a(e.APIPanel,{code:e.adaptableCode,onExecute:e.onExecute,loading:e.isBusy,"is-streaming":e.isStreaming,response:e.response,disabled:!e.apiKey},null,8,["code","loading","is-streaming","response","disabled"])]),_:1},8,["horizontal"])]),_:1})}const Hr=ue(Fr,[["render",Gr],["__file","UsageComponent.vue"]]),Qr=ie({__name:"CostEstimator",setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global",inheritLocale:!0}),e=Ce(),f=T("quarterly"),h=T(!1),r=T("business"),o=T(5);qe(r,u=>{o.value=u==="business"?5:1e4});const d=T("standard"),p=T(3),S=T(!1),v=T("steady"),w=T({"jina-embeddings":!0,"jina-clip":!1,"jina-colbert":!1,"jina-reranker":!1,ReaderLM:!1}),_=T("standard"),R=T(!1),K=T(!1),b=T(!1),k={usageTiers:{business:[{limit:5,price:0},{limit:10,price:2e3},{limit:25,price:5e3},{limit:50,price:1e4},{limit:100,price:2e4}],consumer:[{limit:1e4,price:0},{limit:5e4,price:2e3},{limit:1e5,price:5e3},{limit:5e5,price:1e4},{limit:1e6,price:2e4}]},modelPrices:{"jina-embeddings":0,"jina-clip":5e3,"jina-colbert":3e3,"jina-reranker":4e3,ReaderLM:2e3},supportTiers:{standard:0,premium:5e3,enterprise:15e3},features:{priorityResponse:2e3,dedicatedCSM:8e3,customModelTraining:1e4},basePrice:5e3},x=F(()=>{let u=k.basePrice;const E=k.usageTiers[r.value],L=E.find((q,B)=>o.value<=q.limit||B===E.length-1);if(u+=(L==null?void 0:L.price)||0,Object.entries(w.value).forEach(([q,B])=>{B&&k.modelPrices[q]>0&&(u+=k.modelPrices[q])}),u+=k.supportTiers[_.value],R.value&&(u+=k.features.priorityResponse),K.value&&(u+=k.features.dedicatedCSM),b.value&&(u+=k.features.customModelTraining),d.value==="poc")u=u*.4;else if(d.value==="department"){let q=.15;const B={limited:1,steady:.95,high:.9};S.value&&(u=u*1.1,q=.25),u=u*(1-q)*B[v.value]}return{monthly:u/3,quarterly:u,annual:u*4*.9,final:h.value?u*4*.9:u}}),A=[{label:s("estimator.labels.upTo",{count:5}),value:5},{label:s("estimator.labels.upTo",{count:10}),value:10},{label:s("estimator.labels.upTo",{count:25}),value:25},{label:s("estimator.labels.upTo",{count:50}),value:50},{label:s("estimator.labels.upTo",{count:100}),value:100}],U=[{label:s("estimator.labels.upTo",{count:1e4}),value:1e4},{label:s("estimator.labels.upTo",{count:5e4}),value:5e4},{label:s("estimator.labels.upTo",{count:1e5}),value:1e5},{label:s("estimator.labels.upTo",{count:5e5}),value:5e5},{label:s("estimator.labels.upTo",{count:1e6}),value:1e6}],N=F(()=>r.value==="business"&&o.value>100||r.value==="consumer"&&o.value>1e6),O=F({get(){return Object.entries(w.value).filter(([,u])=>u).map(([u])=>u)},set(u){for(let E of Object.keys(w.value))w.value[E]=!1;u.forEach(E=>{w.value[E]=!0})}}),P=["jina-embeddings","jina-clip","jina-colbert","jina-reranker","ReaderLM"],V=F(()=>[d.value==="standard"&&{title:s("estimator.messaging.standardFeatures"),icon:null,items:[{label:s("estimator.messaging.baseModelIncluded"),hasCheckmark:!0},{label:s("estimator.messaging.supportTierIncluded",{tier:s(`estimator.support.${_.value}`),hours:s("estimator.support.hoursQuarter",{hours:_.value==="standard"?10:_.value==="premium"?25:40})}),hasCheckmark:!0},{label:s(r.value==="business"?"estimator.messaging.usageTierBusiness":"estimator.messaging.usageTierConsumer",{count:o.value.toLocaleString()}),hasCheckmark:!0}]},O.value.length>1&&{title:s("estimator.messaging.selectedModels"),icon:"info",items:O.value.map(u=>({label:u}))},(R.value||K.value||b.value)&&{title:s("estimator.messaging.additionalFeatures"),icon:"info",items:[R.value&&{label:s("estimator.features.priority")},K.value&&{label:s("estimator.features.csm")},b.value&&{label:s("estimator.features.training")}].filter(Boolean)},d.value==="poc"&&{title:s("estimator.messaging.pocIncludes"),icon:"info",items:[{label:s("estimator.messaging.pocMetrics")},{label:s("estimator.messaging.pocCheckins")},{label:s("estimator.messaging.pocMigration")}]},d.value==="department"&&{title:s("estimator.messaging.deptIncludes"),icon:"info",items:[{label:s("estimator.messaging.deptReviews")},{label:s("estimator.messaging.deptRoadmap")},S.value&&{label:s("estimator.messaging.deptSponsor")},v.value==="high"&&{label:s("estimator.messaging.deptWorkshops")}].filter(Boolean)},N.value&&{title:s("estimator.messaging.enterpriseAlert"),icon:"warning",isAlert:!0,items:[]}].filter(Boolean));Ca(()=>{e.setLicenseConfig({contractType:d.value,pocDuration:p.value,hasBusinessSponsor:d.value==="department"?S.value:void 0,expectedGrowth:d.value==="department"?v.value:void 0,selectedModels:O.value,supportTier:_.value,priorityResponse:R.value,dedicatedCSM:K.value,customModelTraining:b.value,usageType:r.value,usageCount:o.value,paymentFrequency:h.value?"annual":"quarterly",price:x.value.final})});const n={t:s,userStore:e,paymentFrequency:f,isAnnual:h,usageType:r,usageCount:o,contractType:d,pocDuration:p,hasBusinessSponsor:S,expectedGrowth:v,selectedModels:w,supportTier:_,priorityResponse:R,dedicatedCSM:K,customModelTraining:b,prices:k,calculateTotalPrice:x,businessUsageOptions:A,consumerUsageOptions:U,showEnterpriseAlert:N,selectedModelsArray:O,allModelOptions:P,featuresSections:V};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function zr(c,l,s,e,f,h){return g(),C(se,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(ee,{horizontal:c.$q.screen.gt.sm,class:"full-height"},{default:t(()=>[a(Ie,{class:"col"},{default:t(()=>[a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.models.title")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.models.description")),1)]),_:1})]),_:1}),a(D,null,{default:t(()=>[a(be,{square:"",modelValue:e.selectedModelsArray,"onUpdate:modelValue":l[0]||(l[0]=r=>e.selectedModelsArray=r),multiple:"",options:e.allModelOptions,"use-chips":"","emit-value":"",filled:"",label:e.t("estimator.labels.selectAll")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.contractType.title")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t(`estimator.descriptions.contractType.${e.contractType}`)),1)]),_:1})]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(Ue,{modelValue:e.contractType,"onUpdate:modelValue":l[1]||(l[1]=r=>e.contractType=r),options:[{label:e.t("estimator.contractType.standard"),value:"standard"},{label:e.t("estimator.contractType.department"),value:"department"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),e.contractType==="poc"?(g(),C(G,{key:0},{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("estimator.poc.duration")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.poc.description")),1)]),_:1})]),_:1}),a(D,null,{default:t(()=>[a(et,{modelValue:e.pocDuration,"onUpdate:modelValue":l[2]||(l[2]=r=>e.pocDuration=r),min:3,max:6,step:1,label:"","label-always":""},null,8,["modelValue"])]),_:1})]),_:1})):j("",!0),e.contractType==="department"?(g(),J(re,{key:1},[a(G,{tag:"label"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.department.executionModel")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.department.sponsorDescription")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.hasBusinessSponsor,"onUpdate:modelValue":l[3]||(l[3]=r=>e.hasBusinessSponsor=r),label:e.t("estimator.department.businessSponsor")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.department.growthTitle")),1)]),_:1})]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(Ue,{modelValue:e.expectedGrowth,"onUpdate:modelValue":l[5]||(l[5]=r=>e.expectedGrowth=r),options:[{label:e.t("estimator.department.growth.limited"),value:"limited",caption:e.t("estimator.department.growth.limitedDesc")},{label:e.t("estimator.department.growth.steady"),value:"steady",caption:e.t("estimator.department.growth.steadyDesc")},{label:e.t("estimator.department.growth.high"),value:"high",caption:e.t("estimator.department.growth.highDesc")}],type:"radio"},{item:t(({opt:r,index:o})=>[Oe((g(),C(G,{tag:"label"},{default:t(()=>[a(D,{avatar:""},{default:t(()=>[a(ga,{modelValue:e.expectedGrowth,"onUpdate:modelValue":l[4]||(l[4]=d=>e.expectedGrowth=d),val:r.value},null,8,["modelValue","val"])]),_:2},1024),a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(r.label),1)]),_:2},1024),a(I,{caption:""},{default:t(()=>[y(m(r.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Oa]])]),_:1},8,["modelValue","options"])]),_:1})],64)):j("",!0),a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.usage.title")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t(`estimator.descriptions.usage.${e.usageType}`)),1)]),_:1})]),_:1}),a(D,null,{default:t(()=>[a(be,{class:"full-width",square:"",modelValue:e.usageCount,"onUpdate:modelValue":l[6]||(l[6]=r=>e.usageCount=r),options:e.usageType==="business"?e.businessUsageOptions:e.consumerUsageOptions,label:e.usageType==="business"?e.t("estimator.usage.businessCount"):e.t("estimator.usage.consumerCount"),filled:"","emit-value":"","map-options":"","option-label":"label","option-value":"value"},null,8,["modelValue","options","label"])]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(Ue,{modelValue:e.usageType,"onUpdate:modelValue":l[7]||(l[7]=r=>e.usageType=r),options:[{label:e.t("estimator.usage.business"),value:"business"},{label:e.t("estimator.usage.consumer"),value:"consumer"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.support.title")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t(`estimator.descriptions.support.${e.supportTier}`)),1)]),_:1})]),_:1}),a(D,null,{default:t(()=>[a(be,{modelValue:e.supportTier,"onUpdate:modelValue":l[8]||(l[8]=r=>e.supportTier=r),options:[{label:e.t("estimator.support.hoursQuarter",{hours:10}),value:"standard"},{label:e.t("estimator.support.hoursQuarter",{hours:25}),value:"premium"},{label:e.t("estimator.support.hoursQuarter",{hours:40}),value:"enterprise"}],filled:"",square:"","emit-value":"","map-options":"","option-label":"label","option-value":"value",label:e.t("estimator.labels.selectSupport")},null,8,["modelValue","options","label"])]),_:1})]),_:1}),e.contractType!=="poc"?(g(),J(re,{key:2},[a(G,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.features.title")),1)]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("estimator.features.priority")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.descriptions.features.priority")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.priorityResponse,"onUpdate:modelValue":l[9]||(l[9]=r=>e.priorityResponse=r)},null,8,["modelValue"])]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("estimator.features.csm")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.descriptions.features.csm")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.dedicatedCSM,"onUpdate:modelValue":l[10]||(l[10]=r=>e.dedicatedCSM=r)},null,8,["modelValue"])]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(e.t("estimator.features.training")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t("estimator.descriptions.features.training")),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.customModelTraining,"onUpdate:modelValue":l[11]||(l[11]=r=>e.customModelTraining=r)},null,8,["modelValue"])]),_:1})]),_:1})],64)):j("",!0)]),_:1}),a(le,{vertical:c.$q.screen.gt.sm},null,8,["vertical"]),a(se,{class:"col-4 bg-mixed-200",flat:"",square:""},{default:t(()=>[a(ee,{class:"q-pa-none"},{default:t(()=>[a(Ie,{dense:""},{default:t(()=>[a(G,{class:"q-my-lg"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,{overline:""},{default:t(()=>[y(m(e.t("estimator.pricing.title")),1)]),_:1}),a(Xe,{name:"list2"},{default:t(()=>[(g(),C(I,{key:e.calculateTotalPrice.final,class:"text-h5 q-py-md"},{default:t(()=>[y(m(e.contractType==="poc"?e.t("estimator.pricing.oneTime",{price:Math.round(e.calculateTotalPrice.monthly*e.pocDuration).toLocaleString()}):e.t("estimator.pricing.frequency",{price:e.calculateTotalPrice[e.isAnnual?"final":"quarterly"].toLocaleString(),frequency:e.t(`estimator.pricing.${e.isAnnual?"annual":"quarterly"}`)})),1)]),_:1}))]),_:1}),a(I,{caption:"",class:"text-dim"},{default:t(()=>[y(m(e.t("estimator.pricing.disclaimer")),1)]),_:1})]),_:1})]),_:1}),a(G,{tag:"label"},{default:t(()=>[a(D,null,{default:t(()=>[a(I,{class:"text-bold"},{default:t(()=>[y(m(e.t("estimator.payment.title")),1)]),_:1}),a(I,{caption:""},{default:t(()=>[y(m(e.t(`estimator.descriptions.payment.${e.isAnnual?"annual":"quarterly"}`)),1)]),_:1})]),_:1}),a(D,{side:""},{default:t(()=>[a(pe,{modelValue:e.isAnnual,"onUpdate:modelValue":l[12]||(l[12]=r=>e.isAnnual=r),label:e.t("estimator.payment.annual"),"checked-icon":"percent"},null,8,["modelValue","label"])]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(W,{square:"",outline:"",icon:"handshake",label:e.t("estimator.pricing.cta"),padding:"lg",class:"full-width q-my-lg",to:"/contact-sales?license-config=true"},null,8,["label"])]),_:1}),a(le),(g(!0),J(re,null,me(e.featuresSections,r=>(g(),J(re,{key:r.title},[a(I,{header:""},{default:t(()=>[y(m(r.title),1)]),_:2},1024),(g(!0),J(re,null,me(r.items,(o,d)=>(g(),C(G,{key:d},{default:t(()=>[a(D,{side:""},{default:t(()=>[a(Z,{name:"task_alt",size:"xs"})]),_:1}),a(D,null,{default:t(()=>[a(I,null,{default:t(()=>[y(m(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["horizontal"])]),_:1})}const Yr=ue(Qr,[["render",zr],["__file","CostEstimator.vue"]]),Xr=ie({__name:"ReaderDecideComponent",props:{originalURL:{type:String,default:""},disableQA:{type:Boolean,default:!1},disableOriginalURL:{type:Boolean,default:!1}},setup(c,{expose:l}){l();const{t:s}=ve({useScope:"global"}),e=we(),f=ke(),h=T(!0),r=T(!0),o=T(!1),d=c,p=T(d.originalURL||"https://jina.ai/news/a-practical-guide-to-implementing-deepsearch-deepresearch"),S=T(["engine_default","engine_default_timeout","engine_default_markdown","engine_default_html","browser","direct","cf_browser"]),v=T(S.value.reduce((n,u)=>(n[u]={content:"",timing:null,contentLength:null,isLoading:!1},n),{})),w=T(!1),_=n=>{const u=`https://r.jina.ai/${p.value}`,E=h.value?`"Authorization: Bearer ${e.apiKey}"`:"",L=r.value?'"X-No-Cache: true"':"";let q=`\`\`\`bash
curl ${u}`,B=!1;return n==="engine_default_markdown"?(q+=` \\
  -H "X-Return-Format: markdown"`,B=!0):n==="engine_default_html"?(q+=` \\
  -H "X-Return-Format: html"`,B=!0):n==="engine_default_timeout"?(q+=` \\
  -H "X-Timeout: 5"`,B=!0):n==="browser"?(q+=` \\
  -H "X-Engine: browser"`,B=!0):n==="cf_browser"?(q+=` \\
  -H "X-Engine: cf-browser-rendering"`,B=!0):n==="direct"&&(q+=` \\
  -H "X-Engine: direct"`,B=!0),r.value&&(q+=`${B?"":" \\"}
  -H ${L}`,B=!0),h.value&&(q+=`${B?"":" \\"}
  -H ${E}`),q+="\n```",q},R=n=>{const u={};return h.value&&(u.Authorization=`Bearer ${e.apiKey}`),r.value&&(u["X-No-Cache"]="true"),n==="engine_default_timeout"?u["X-Timeout"]="5":n==="engine_default_html"?u["X-Return-Format"]="html":n==="engine_default_markdown"?u["X-Return-Format"]="markdown":n==="browser"?u["X-Engine"]="browser":n==="cf_browser"?u["X-Engine"]="cf-browser-rendering":n==="direct"&&(u["X-Engine"]="direct"),u},K=async n=>{const u=`https://r.jina.ai/${p.value}`;v.value[n].isLoading=!0;const E=performance.now();try{const L=await fetch(u,{headers:R(n)}),q=performance.now();if(v.value[n].timing=Math.round(q-E),!L.ok){v.value[n].content=await L.json();return}const B=await L.text();v.value[n].contentLength=B.length,v.value[n].content=B}catch(L){v.value[n].content=L instanceof Error?L.message:String(L),v.value[n].contentLength=0,v.value[n].timing=0}finally{v.value[n].isLoading=!1}},b=async()=>{o.value=!0,w.value=!0,S.value.forEach(n=>{v.value[n]={content:"",timing:null,contentLength:null,isLoading:!0}});try{await Promise.all(S.value.map(n=>K(n)))}finally{w.value=!1}},k=F(()=>Object.values(v.value).some(n=>n.timing!==null)),x=F(()=>{let n=0;for(const u of S.value)v.value[u].timing!==null&&v.value[u].timing>n&&(n=v.value[u].timing);return n>0?n:1}),A=F(()=>{let n=0;for(const u of S.value)v.value[u].contentLength!==null&&v.value[u].contentLength>n&&(n=v.value[u].contentLength);return n>0?n:1}),V={t:s,embeddingStore:e,$q:f,useAuth:h,useNoCache:r,fetchWasClicked:o,props:d,originalURL:p,paramsGroup:S,results:v,isLoading:w,getReaderCode:_,getHeaders:R,fetchForParam:K,fetchAllURLs:b,hasResults:k,maxTiming:x,maxContentLength:A,getTimingPercentage:n=>v.value[n].timing===null?0:v.value[n].timing/x.value,getLengthPercentage:n=>v.value[n].contentLength===null?0:v.value[n].contentLength/A.value,getBarColor:n=>({engine_default:"primary",engine_default_timeout:"info",engine_default_markdown:"warning",engine_default_html:"negative",browser:"secondary",direct:"accent",cf_browser:"positive"})[n]||"primary",formatBytes:n=>{if(n===0)return"0 Bytes";const u=1024,E=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(n)/Math.log(u));return parseFloat((n/Math.pow(u,L)).toFixed(2))+" "+E[L]},get QInput(){return Se}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Wr={class:"row q-mt-sm"},Jr={class:"text-h6 q-mb-md"},Zr={class:"q-mb-lg"},$r={class:"text-subtitle2 q-mb-sm"},eo={class:"col-3 text-right q-pr-md"},ao={class:"col-8"},to={class:"absolute-full flex flex-center"},ro={class:"text-subtitle2 q-mb-sm"},oo={class:"col-3 text-right q-pr-md"},lo={class:"col-8"},so={class:"absolute-full flex flex-center"},no={class:"row items-center"},io={class:"overflow-auto q-px-xs"};function uo(c,l,s,e,f,h){const r=qa("q-markdown");return g(),C(se,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(ee,{class:"q-pa-none"},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.originalURL,"onUpdate:modelValue":l[0]||(l[0]=o=>e.originalURL=o),label:e.t("reader.demo.your_url"),type:"url",loading:e.isLoading},null,8,["modelValue","label","loading"]),Y("div",Wr,[a(pe,{modelValue:e.useAuth,"onUpdate:modelValue":l[1]||(l[1]=o=>e.useAuth=o),label:e.t("reader.demo.headers.auth_token"),size:"sm",icon:"o_key",class:"q-mr-md"},null,8,["modelValue","label"]),a(pe,{modelValue:e.useNoCache,"onUpdate:modelValue":l[2]||(l[2]=o=>e.useNoCache=o),label:e.t("reader.demo.headers.no_cache"),size:"sm",icon:"o_cached"},null,8,["modelValue","label"])])]),_:1}),a(le),a(ee,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none"},{default:t(()=>[(g(!0),J(re,null,me(e.paramsGroup,(o,d)=>(g(),J(re,{key:o},[a(se,{class:"col q-pa-none",flat:"",square:""},{default:t(()=>[a(G,null,{default:t(()=>[a(D,null,{default:t(()=>[a(I,{lines:"1"},{default:t(()=>[y(m(e.t(`reader.demo.headers.${o}`)),1)]),_:2},1024),a(I,{caption:"",class:"text-dim",lines:"2"},{default:t(()=>[y(m(e.t(`reader.demo.headers.${o}_explain`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(r,{src:e.getReaderCode(o),"no-line-numbers":"","show-copy":"","copy-icon":"content_copy",class:"overflow-auto"},null,8,["src"])]),_:2},1024),d<e.paramsGroup.length-1?(g(),C(le,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):j("",!0)],64))),128))]),_:1},8,["horizontal"]),a(le),a(W,{square:"",label:e.t("reader.demo.fetch"),class:"full-width",icon:"download",onClick:e.fetchAllURLs,flat:"",padding:"md",loading:e.isLoading},null,8,["label","loading"]),e.fetchWasClicked?(g(),J(re,{key:0},[a(le),e.hasResults?(g(),C(ee,{key:0},{default:t(()=>[Y("div",Jr,m(e.t("reader.demo.performance_compare")),1),Y("div",Zr,[Y("div",$r,m(e.t("reader.demo.response_time")),1),(g(!0),J(re,null,me(e.paramsGroup,o=>(g(),J("div",{class:"row items-center",key:o+"-time"},[Y("div",eo,m(e.t(`reader.demo.headers.${o}`)),1),Y("div",ao,[a(xe,{value:e.getTimingPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[Y("div",to,[e.results[o].timing!==null?(g(),C(ia,{key:0,color:"white","text-color":"black"},{default:t(()=>[y(m(e.results[o].timing)+"ms ",1)]),_:2},1024)):j("",!0)])]),_:2},1032,["value","color"])])]))),128))]),Y("div",null,[Y("div",ro,m(e.t("reader.demo.content_length")),1),(g(!0),J(re,null,me(e.paramsGroup,o=>(g(),J("div",{class:"row items-center",key:o+"-length"},[Y("div",oo,m(e.t(`reader.demo.headers.${o}`)),1),Y("div",lo,[a(xe,{value:e.getLengthPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[Y("div",so,[e.results[o].contentLength!==null?(g(),C(ia,{key:0,color:"white","text-color":"black"},{default:t(()=>[y(m(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):j("",!0)])]),_:2},1032,["value","color"])])]))),128))])]),_:1})):j("",!0),e.hasResults?(g(),C(le,{key:1})):j("",!0),a(ee,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none overflow-auto"},{default:t(()=>[(g(!0),J(re,null,me(e.paramsGroup,(o,d)=>(g(),J(re,{key:o},[a(ee,{class:"col column overflow-auto no-wrap q-pa-none"},{default:t(()=>[Y("div",no,[a(ge,{label:e.t(`reader.demo.headers.${o}`),size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim"},null,8,["label"]),e.results[o].timing!==null?(g(),C(ge,{key:0,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"timer"},{default:t(()=>[y(m(e.results[o].timing)+"ms ",1)]),_:2},1024)):j("",!0),e.results[o].contentLength!==null?(g(),C(ge,{key:1,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"straighten"},{default:t(()=>[y(m(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):j("",!0)]),e.isLoading&&!e.results[o].content?(g(),J(re,{key:0},me([100,300,200,200],p=>a(It,{type:"text",width:`${p}px`,key:p},null,8,["width"])),64)):j("",!0),Y("pre",io,""+m(e.results[o].content)+`
          `,1)]),_:2},1024),d<e.paramsGroup.length-1?(g(),C(le,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):j("",!0)],64))),128))]),_:1},8,["horizontal"]),a(le)],64)):j("",!0)]),_:1})}const co=ue(Xr,[["render",uo],["__file","ReaderDecideComponent.vue"]]),mo=ie({__name:"SeFoPage",setup(c,{expose:l}){l();const s={[Q.PRICING]:er,[Q.CODE]:at,[Q.RERANK_CODE]:tt,[Q.READER_CODE]:rt,[Q.CLASSIFY]:ot,[Q.TOKENIZER]:lt,[Q.INTEGRATIONS]:st,[Q.TEST]:nt,[Q.SEARCH]:oa,[Q.VISUALIZE]:oa,[Q.BULK]:it,[Q.ONPREM]:null,[Q.KEY_MANAGER]:Pr,[Q.AVATAR]:Lr,[Q.GROUNDING]:jr,[Q.DEEPSEARCH]:ut,[Q.LICENSE_CONFIG]:Yr,[Q.CHAT]:At,[Q.RATE_LIMIT]:vt,[Q.CONTACT_SALES]:Kt,[Q.LLM_SERP]:Hr,[Q.ENGINE_SPEED_TEST]:co},e=ke(),f=Ma(),h=Ba(),{t:r}=ve({useScope:"global"}),o=we(),{apiKey:d,classifiers:p,turnstileState:S}=_e(o),v=Ce(),{user:w}=_e(v),{models:_}=Lt();f.params.tab===Q.CHAT?na({page:"deepsearch.chat_ui",banner:"banner-deepsearch.png",url:"api-dashboard/deepsearch-chat"}):na({page:"key_manager",banner:"banner-api.png",url:"api-dashboard"});const R=T(ra(f.params.tab instanceof Array?f.params.tab[0]:f.params.tab));qe(()=>f.params.tab,x=>{const A=x instanceof Array?x[0]:x;!w.value.uid&&A===Q.KEY_MANAGER&&h.push({params:{tab:Q.READER_CODE},query:f.query}),R.value=A}),Ve(()=>{navigator.userAgent.toLowerCase().includes("headless")||K()});async function K(){console.log("checkURLForParam");const x=new URLSearchParams(window.location.search);if(x.has("login")&&!w.value.uid){const A=new URL(window.location.href);A.searchParams.delete("login"),window.history.pushState({},"",A),e.dialog({component:wt,persistent:!0})}if(x.has("sui")){const A=ra(x.get("sui")||"embedding");if(R.value!==A)h.replace({params:{tab:A},query:{...f.query,sui:void 0}});else{const U=new URL(window.location.href);U.searchParams.delete("sui"),window.history.pushState({},"",U)}}if(x.has("task")){o.task=x.get("task")||"";const A=new URL(window.location.href);A.searchParams.delete("task"),window.history.pushState({},"",A)}if(x.has("model")){const A=x.get("model"),U=A&&_.value.find(N=>N.name===A);if(U&&R.value!==Q.CLASSIFY){const N=U.metadata.endpoints||[];[Q.CODE,Q.RERANK_CODE].includes(R.value)||(N.some(O=>["embedding","multi-vector"].includes(O))?R.value=Q.CODE:N.includes("rank")&&(R.value=Q.RERANK_CODE))}else p.value.length===0&&await o.getClassifiers(d.value),p.value.find(O=>O.classifier_id===A)&&(R.value=Q.CLASSIFY)}}const k={COMPONENTS:s,$q:e,route:f,router:h,t:r,embeddingStore:o,apiKey:d,classifiers:p,turnstileState:S,userStore:v,user:w,allModels:_,currentTab:R,checkURLForParam:K,openBrowserInfoDialog:()=>{e.dialog({component:dt,componentProps:{state:S.value}})},get EMBEDDING_TABS(){return Q},get TurnstileState(){return Ha}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),_o={key:0},fo={key:1},go={class:"column no-wrap full-width",style:{"flex-grow":"1"}};function vo(c,l,s,e,f,h){return g(),C(ja,{class:"row"},{default:t(()=>[e.turnstileState===e.TurnstileState.ERROR||e.turnstileState===e.TurnstileState.UNSUPPORTED?(g(),C(Na,{key:0,"inline-actions":"",class:"text-white bg-negative full-width"},{action:t(()=>[a(W,{square:"",outline:"",class:"q-mr-sm",label:e.t("landing_page.view_browser_info"),onClick:e.openBrowserInfoDialog},null,8,["label"]),a(W,{square:"",outline:"",to:"/contact-sales",label:e.t("landing_page.contact_sales")},null,8,["label"])]),default:t(()=>[a(Z,{name:"report_problem",size:"sm",class:"q-mr-sm"}),e.turnstileState===e.TurnstileState.ERROR?(g(),J("span",_o,m(e.t("embedding.turnstile_error")),1)):e.turnstileState===e.TurnstileState.UNSUPPORTED?(g(),J("span",fo,m(e.t("embedding.turnstile_unsupported")),1)):j("",!0),y(" "+m(e.t("embedding.mistake_contact"))+" ",1)]),_:1})):j("",!0),Y("div",go,[(g(),C(Ua(e.COMPONENTS[e.currentTab]),{asVisualizer:e.currentTab===e.EMBEDDING_TABS.VISUALIZE,maximizedWindow:!0},null,8,["asVisualizer"]))])]),_:1})}const il=ue(mo,[["render",vo],["__file","SeFoPage.vue"]]);export{il as default};
