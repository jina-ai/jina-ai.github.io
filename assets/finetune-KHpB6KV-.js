import{Q as Ve,a as Xe}from"./QLinearProgress-CboNVET4.js";import{s as $e,au as ea,v as aa,aw as ta,C as na,m as E,p as pe,T as ia,J as sa,as as la,aB as oa,e as ce,aC as G,aD as he,j as be,a0 as ve,am as ye,k as q,a2 as we,a3 as m,a4 as v,a5 as t,a6 as n,a7 as de,ad as le,ae as x,aq as I,af as w,ag as u,a8 as g,aE as ze,q as X,aF as He,ap as ue,a9 as me,aG as Ie,aa as j,ah as oe,ai as fe,aH as ra,aI as da,aJ as Ue,aK as ca,aL as ua,aM as ma,aN as Se,ao as fa,aO as _a,ab as T,aP as Be,aQ as Ee,n as Fe,u as Ye,aR as Oe,aS as ya,aT as ga,W as pa,aU as ha,aV as ba,aj as ee,ac as va,aA as wa}from"./index-DzyhWxN2.js";import{Q as O}from"./QItemLabel-BmQP2SlY.js";import{Q as N}from"./QTooltip-k3Q7oyPX.js";import{a as Ze,Q as ka,b as Je}from"./QChip-C60oXdmJ.js";import{Q as je}from"./QList-NGAB2r69.js";import{Q as Pa}from"./QExpansionItem-Qj-4lF7X.js";import{c as qa}from"./copy-to-clipboard-C1nkVv69.js";import{u as ae,a as Sa,T as W,Q as xa}from"./use-dialog-plugin-component-DCJmVeiO.js";import{d as xe,f as Te,Q as Ge,a as te,b as Ke,c as Ka,e as Ta}from"./date-BuqSVZ1H.js";import{C as Ia}from"./ClosePopup-C0qC_96u.js";const Ne=$e({name:"QInnerLoading",props:{...ea,...aa,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(s,{slots:i}){const l=sa(),e=ta(s,l.proxy.$q),{transitionProps:f,transitionStyle:b}=na(s),a=E(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(e.value===!0?" q-inner-loading--dark":"")),d=E(()=>"q-inner-loading__label"+(s.labelClass!==void 0?` ${s.labelClass}`:""));function p(){const A=[pe(la,{size:s.size,color:s.color})];return s.label!==void 0&&A.push(pe("div",{class:d.value,style:s.labelStyle},[s.label])),A}function k(){return s.showing===!0?pe("div",{class:a.value,style:b.value},i.default!==void 0?i.default():p()):null}return()=>pe(ia,f.value,k)}}),Ce=oa("apiKey",{state:()=>({keys:[],isLoading:!1,keysInfoCache:{},isBusyState:new Set,isChecking:!1}),getters:{primaryKey:s=>{var i;return(i=s.keys.find(l=>l.isPrimary))==null?void 0:i.key},primaryKeyInfo:s=>{var i;return s.keysInfoCache[((i=s.keys.find(l=>l.isPrimary))==null?void 0:i.key)||""]}},actions:{async addKey(s,i){var l;if(!(!((l=ce.currentUser)!=null&&l.uid)||!s))try{const{data:e}=await G.request("apiKey","addKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await G.getIdToken()}`},body:JSON.stringify({key:s,metadata:i})});return e&&(this.keys.unshift(e),this.getKeyInfo(s)),e}catch(e){console.error(e),he.create({message:e instanceof Error?e.message:String(e),color:"negative",icon:"error"})}},async updateKey(s,i){var l;if(!(!((l=ce.currentUser)!=null&&l.uid)||!s)){this.isBusyState.add(s);try{const{data:e}=await G.request("apiKey","updateKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await G.getIdToken()}`},body:JSON.stringify({key:s,metadata:i})}),f=this.keys.find(b=>b.key===s);return f&&(f.metadata=i),e}catch(e){console.error(e),he.create({message:e instanceof Error?e.message:String(e),color:"negative",icon:"error"})}finally{this.isBusyState.delete(s)}}},async setPrimaryKey(s){var i;if((i=ce.currentUser)!=null&&i.uid){this.isBusyState.add(s);try{const{data:l}=await G.request("apiKey","setPrimaryKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await G.getIdToken()}`},body:JSON.stringify({key:s,isPrimary:!0})});return l&&(this.keys.forEach(e=>(e.key===s?e.isPrimary=!0:e.isPrimary=!1,e)),ae().apiKey=s),l}catch(l){console.error(l),he.create({message:l instanceof Error?l.message:String(l),color:"negative",icon:"error"})}finally{this.isBusyState.delete(s)}}},async checkPrimaryKey(){var s;if((s=ce.currentUser)!=null&&s.uid&&!this.isChecking)try{this.isChecking=!0;const i=ae();this.primaryKey&&this.primaryKey!==i.apiKey?i.isPaidUser?(this.keys.find(e=>e.key===i.apiKey)||await this.addKey(i.apiKey),await this.setPrimaryKey(i.apiKey)):i.apiKey=this.primaryKey:await this.getKeyInfo(i.apiKey)}finally{this.isChecking=!1}},async removeKey(s){var i;if((i=ce.currentUser)!=null&&i.uid){this.isBusyState.add(s);try{const{data:l}=await G.request("apiKey","removeKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await G.getIdToken()}`},body:JSON.stringify({key:s})});l&&(this.keys.splice(this.keys.findIndex(e=>e.key===s),1),delete this.keysInfoCache[s])}catch(l){console.error(l),he.create({message:l instanceof Error?l.message:String(l),color:"negative",icon:"error"})}finally{this.isBusyState.delete(s)}}},async fetchKeys(s=!0){var i;if(!(!((i=ce.currentUser)!=null&&i.uid)||this.isLoading)){this.isLoading=!0;try{const{data:l}=await G.request("apiKey","keyList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await G.getIdToken()}`}});if(this.keys=l,s)for(const e of this.keys)this.getKeyInfo(e.key)}catch(l){console.error(l)}finally{this.isLoading=!1}}},async getKeyInfo(s,{excludeUsage:i=!1,excludeUsageStats:l=!0}={}){var e,f,b,a;if(s&&!this.isBusyState.has(s))try{this.isBusyState.add(s);const d=await ae().getKeyInfo(s);if(!d)return;if(this.keysInfoCache[s]={...this.keysInfoCache[s],...d},s===ae().apiKey&&(ae().apiKeyInfo=d),(!l||(e=d.metadata)!=null&&e.pay_by_requests)&&await this.getKeyUsageStats(s),i){Object.assign(this.keysInfoCache[s],{usage:((f=this.keysInfoCache[s])==null?void 0:f.usage)||[],last_used_at:(b=this.keysInfoCache[s])==null?void 0:b.last_used_at});return}const p=await ae().getUsage(s);Object.assign(this.keysInfoCache[s],{usage:p,last_used_at:(a=p==null?void 0:p[0])==null?void 0:a.updated_at})}finally{this.isBusyState.delete(s)}},async getKeyUsageStats(s){var i,l;if(s)try{const e=this.keysInfoCache[s],f=ae(),b=[f.getTotalUsage(s)];e.metadata.pay_by_requests&&b.push(f.getTotalRequests(s));const[a,d]=await Promise.all(b);Object.assign(this.keysInfoCache[s],{usageStats:{consumedQuantity:(i=a==null?void 0:a.total_quantity)!=null?i:0,consumedRequests:(l=a==null?void 0:a.total_request)!=null?l:0,requestBalance:d?d-(a==null?void 0:a.total_request):0}})}catch{}},isFreeKey(s){var i,l;return s?!((l=(i=this.keysInfoCache[s])==null?void 0:i.metadata)!=null&&l.speed_level):!1},isPaidKey(s){var i,l;return s?((l=(i=this.keysInfoCache[s])==null?void 0:i.metadata)==null?void 0:l.speed_level)===1:!1},isPremiumPaidKey(s){var i,l;return s?((l=(i=this.keysInfoCache[s])==null?void 0:i.metadata)==null?void 0:l.speed_level)===2:!1}}});function Qe(s){setTimeout(()=>{window.URL.revokeObjectURL(s.href)},1e4),s.remove()}function Ca(s,i,l={}){const{mimeType:e,byteOrderMark:f,encoding:b}=typeof l=="string"?{mimeType:l}:l,a=b!==void 0?new TextEncoder(b).encode([i]):i,d=f!==void 0?[f,a]:[a],p=new Blob(d,{type:e||"application/octet-stream"}),k=document.createElement("a");k.href=window.URL.createObjectURL(p),k.setAttribute("download",s),typeof k.download=="undefined"&&k.setAttribute("target","_blank"),k.classList.add("hidden"),k.style.position="fixed",document.body.appendChild(k);try{return k.click(),Qe(k),!0}catch(A){return Qe(k),A}}const Aa=be({__name:"UsageHistoryDialog",props:{apiKey:{}},setup(s,{expose:i}){i();const l=s,{t:e}=ve({useScope:"global"}),f=Ce(),{keysInfoCache:b}=ye(f),{dialogRef:a}=Sa(),d=q(!1),p=q(""),k=q(!0),A=q({avg:0,p50:0,p90:0,p99:0,min:0,max:0,last7DaysTotal:0}),U=q({}),M=E(()=>{var c,h;const o=b.value[l.apiKey],r=o==null?void 0:o.usageStats;return{quantity:(c=r==null?void 0:r.consumedQuantity)!=null?c:0,request:(h=r==null?void 0:r.consumedRequests)!=null?h:0}}),P=()=>{var o;(o=Y.value)==null||o.requestServerInteraction(),R()},S=()=>{Z.value=[]},re=()=>{var o;(o=Y.value)==null||o.requestServerInteraction(),R()},Q=o=>{var c,h,y;if(!((c=o.request_path)==null?void 0:c.toLowerCase()))return"";switch((h=o.request_path)==null?void 0:h.toLowerCase()){case"/encode":case"/checkfact":return V((y=o.metadata)==null?void 0:y.model_name);case"/embeddings":case"/rerank":case"/classify":case"/train":return`api.jina.ai/v1${o.request_path}`;case"/multi-embeddings":return"api.jina.ai/v1/multi-vector";case"/segment":return"api.jina.ai/v1/segment";default:return o.request_path}},H=[{query:"reader-crawl",formatted:"r.jina.ai"},{query:"reader-search",formatted:"s.jina.ai"},{query:"grounding-checkfact",formatted:"g.jina.ai"},{query:"reader-deepresearch",formatted:"deepsearch.jina.ai"}],V=o=>{if(!o)return"";const r=o.toLowerCase(),c=H.find(h=>r.startsWith(h.query));return c?c.formatted:o},Y=q(null),Z=q([]),ne=q([{name:"icon",label:"",field:"icon",sortable:!1,align:"right"},{name:"createdAt",label:e("embedding.usage_time"),field:"createdAt",sortable:!1,align:"left",format:o=>xe.formatDate(o,d.value?"YYYY MMM Do":"YYYY MMM Do HH:mm")},{name:"requestNumber",label:e("key_manager.requests"),field:"request_number",sortable:!1,align:"right",format:o=>o?Te(o):""},{name:"amount",label:e("key_manager.tokens"),field:"amount",sortable:!1,align:"right",format:o=>o>0?`+${o}`:`${o}`},{name:"requestPath",label:e("embedding.request_path"),field:"request_path",sortable:!1,align:"left"},{name:"reason",label:e("embedding.usage_reason"),field:"reason",sortable:!1,align:"left"}]),C=async()=>{var c,h;await f.getKeyInfo(l.apiKey,{excludeUsageStats:!1});const o=(h=(c=f.keysInfoCache)==null?void 0:c[l.apiKey])==null?void 0:h.usage;if(!o||o.length===0)return;const r=d.value?F(o):$(o);Z.value=r,R(),ie()},$=o=>o.map(r=>{const c=new Date(r.updated_at);let h=r.quantity,y=e(`embedding.usage_reason_${r.type.replaceAll(" ","_")}`);return r.type===W.CONSUME||r.type===W.TRANSFER_OUT?(h=-h,r.metadata.model_name&&(y=y+": "+V(r.metadata.model_name))):(r.metadata.product_name&&(y=y+": "+r.metadata.product_name),r.metadata.order_quantity&&r.metadata.order_quantity>1&&(y=y+` (x ${r.metadata.order_quantity})`)),{createdAt:c,amount:h,reason:y,request_path:Q(r),request_number:r.request_number,type:r.type}}),F=o=>{const r=new Map;return o.forEach(c=>{const y=new Date(c.updated_at).toISOString().split("T")[0];r.has(y)||r.set(y,{createdAt:new Date(y),amount:0,request_number:0,request_paths:new Set,reasons:new Set});const K=r.get(y);let _=c.quantity;(c.type===W.CONSUME||c.type===W.TRANSFER_OUT)&&(_=-_),K.amount+=_,c.request_number&&(K.request_number+=c.request_number);const B=Q(c);B&&K.request_paths.add(B);let z=e(`embedding.usage_reason_${c.type.replaceAll(" ","_")}`);c.metadata.model_name?z+=": "+V(c.metadata.model_name):c.metadata.product_name&&(z+=": "+c.metadata.product_name),K.reasons.add(z)}),Array.from(r.values()).map(c=>({createdAt:c.createdAt,amount:c.amount,request_number:c.request_number,request_path:Array.from(c.request_paths).join(", "),reason:Array.from(c.reasons).join(", "),type:c.amount>0?W.TRANSFER_IN:W.CONSUME}))},R=()=>{const o=Z.value.filter(L=>L.type===W.CONSUME&&L.request_number>0&&L.createdAt);if(o.length===0){A.value={avg:0,p50:0,p90:0,p99:0,min:0,max:0,last7DaysTotal:0};return}const r=o.map(L=>{const D=d.value?1440:60;return L.request_number/D}),c=Math.min(...r),h=Math.max(...r),y=r.reduce((L,D)=>L+D,0)/r.length,K=[...r].sort((L,D)=>L-D),_=Math.floor(K.length*.5),B=Math.floor(K.length*.9),z=Math.floor(K.length*.99),_e=new Date;_e.setDate(_e.getDate()-7);const ke=Z.value.filter(L=>L.type===W.CONSUME&&L.request_number>0&&new Date(L.createdAt)>=_e).reduce((L,D)=>L+D.request_number,0);A.value={avg:Math.round(y),p50:Math.round(K[_])||0,p90:Math.round(K[B])||0,p99:Math.round(K[z])||0,min:Math.round(c),max:Math.round(h),last7DaysTotal:ke}},ie=()=>{const o={};Z.value.filter(r=>r.type===W.CONSUME&&r.request_path).forEach(r=>{const c=r.request_path.split(", ");if(c.length>1){const h=1/c.length;c.forEach(y=>{y&&(o[y]||(o[y]={tokens:0,requests:0}),o[y].tokens+=Math.abs(r.amount)*h,r.request_number&&(o[y].requests+=r.request_number*h))})}else{const h=r.request_path;if(!h)return;o[h]||(o[h]={tokens:0,requests:0}),o[h].tokens+=Math.abs(r.amount),r.request_number&&(o[h].requests+=r.request_number)}}),Object.keys(o).forEach(r=>{o[r].tokens=Math.round(o[r].tokens),o[r].requests=Math.round(o[r].requests)}),U.value=o};function J(o,r){let c=r!==void 0?r(o):o;return c=c==null?"":String(c),c=c.split('"').join('""'),`"${c}"`}const se={props:l,t:e,apiKeyStore:f,keysInfoCache:b,dialogRef:a,isDailyView:d,filter:p,showEndpointStats:k,rpmStats:A,endpointStats:U,totalStats:M,onUsageHistoryDialogShow:P,onUsageHistoryDialogHide:S,onViewChange:re,getEndpoint:Q,formattedNames:H,formatModelName:V,usageTableRef:Y,usageRows:Z,usageColumns:ne,getUsageHistory:C,processHourlyData:$,aggregateDataByDay:F,calculateRpmStats:R,calculateEndpointStats:ie,wrapCsvValue:J,exportTable:()=>{const o=d.value?y=>xe.formatDate(y,"YYYY-MM-DD"):y=>xe.formatDate(y,"YYYY-MM-DD-HH:mm:ss"),r=[ne.value.map(y=>J(y.label))].concat(Z.value.map(y=>ne.value.map(K=>K.name==="createdAt"?J(o(y[K.field]),void 0):J(y[K.field],K.format)).join(","))).join(`\r
`),c=d.value?"usage-history-daily.csv":"usage-history-hourly.csv";Ca(c,r,"text/csv")!==!0&&console.error("Browser denied file download...")},get QTable(){return Ge},get TRANSACTION_TYPE(){return W},get formatNumber(){return Te}};return Object.defineProperty(se,"__isScriptSetup",{enumerable:!1,value:!0}),se}}),Ma={class:"row q-gutter-x-sm"},La={key:0,class:"text-positive"},Ra={key:1,class:"text-negative"},Da={class:"row full-width"},Ua={class:"text-caption text-dim"},Ba={class:"text-bold"},Ea={class:"row full-width"},Oa={class:"text-caption text-dim"},ja={class:"text-bold"},Na={class:"row full-width"},Qa={class:"text-caption text-primary",style:{"font-family":"monospace"}},Va={class:"column q-mt-xs"},za={class:"col-6 text-right"},Ha={class:"text-caption text-dim"},Fa={class:"text-bold"},Ya={class:"col-6 text-right"},Za={class:"text-caption text-dim"},Ja={class:"text-bold"};function Ga(s,i,l,e,f,b){return m(),v(ra,{ref:"dialogRef",maximized:"",onShow:e.onUsageHistoryDialogShow,onHide:e.onUsageHistoryDialogHide},{default:t(()=>[n(de,null,{default:t(()=>[n(le,{class:"q-pa-md"},{default:t(()=>[n(x,{avatar:""},{default:t(()=>[n(I,{name:"history"})]),_:1}),n(x,null,{default:t(()=>[n(O,null,{default:t(()=>[w(u(e.t("embedding.usage_history")),1)]),_:1}),n(O,{caption:""},{default:t(()=>[w(u(e.t("embedding.usage_history_explain")),1)]),_:1})]),_:1}),n(x,{side:""},{default:t(()=>[g("div",Ma,[n(ze,{modelValue:e.isDailyView,"onUpdate:modelValue":[i[0]||(i[0]=a=>e.isDailyView=a),e.onViewChange],label:e.isDailyView?e.t("embedding.daily_view"):e.t("embedding.hourly_view")},null,8,["modelValue","label"]),n(X,{flat:"",square:"",stretch:"",icon:"download",label:e.t("embedding.export_csv"),onClick:e.exportTable},null,8,["label"]),He(n(X,{icon:"close",flat:"",round:""},null,512),[[Ia]])])]),_:1})]),_:1}),n(ue),n(me,{horizontal:""},{default:t(()=>[n(me,{class:"col"},{default:t(()=>[n(e.QTable,{ref:"usageTableRef",flat:"",class:"bg-transparent","row-key":"createdAt",rows:e.usageRows,columns:e.usageColumns,loading:e.apiKeyStore.isBusyState.has(e.props.apiKey),onRequest:e.getUsageHistory,pagination:{rowsPerPage:15},filter:e.filter},{top:t(()=>[n(Ie,{debounce:"300",modelValue:e.filter,"onUpdate:modelValue":i[1]||(i[1]=a=>e.filter=a),placeholder:e.t("key_manager.filter"),filled:"",square:"",class:"q-mr-md full-width"},{prepend:t(()=>[n(I,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-icon":t(a=>[n(te,{key:"icon",props:a},{default:t(()=>[a.row.amount>0||a.row.type===e.TRANSACTION_TYPE.TRANSFER_IN&&a.row.amount==0?(m(),j("span",La,"▲")):(m(),j("span",Ra,"▼"))]),_:2},1032,["props"])]),"body-cell-amount":t(a=>[n(te,{key:"amount",props:a},{default:t(()=>[w(u(e.formatNumber(Math.abs(a.row.amount))),1)]),_:2},1032,["props"])]),"body-cell-requestPath":t(a=>[n(te,{key:"request_path",props:a},{default:t(()=>[g("code",null,u(a.row.request_path),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter"])]),_:1}),n(ue,{vertical:""}),n(me,{class:"col-4 q-pa-none"},{default:t(()=>[g("div",Da,[(m(!0),j(oe,null,fe(e.totalStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col text-right q-hoverable q-pa-md"},{default:t(()=>[i[2]||(i[2]=g("span",{class:"q-focus-helper"},null,-1)),g("div",Ua,u(e.t(`embedding.total_${d}`)),1),g("div",Ba,u(e.formatNumber(a)),1)]),_:2},1024))),128))]),n(ue),g("div",Ea,[(m(!0),j(oe,null,fe(e.rpmStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col-4 text-right q-hoverable q-pa-md"},{default:t(()=>[i[3]||(i[3]=g("span",{class:"q-focus-helper"},null,-1)),g("div",Oa,u(e.t(`embedding.rpm_${d}`)),1),g("div",ja,u(e.formatNumber(a)),1)]),_:2},1024))),128))]),n(ue),g("div",Na,[(m(!0),j(oe,null,fe(e.endpointStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col-6 text-right q-hoverable q-pa-md"},{default:t(()=>[i[4]||(i[4]=g("span",{class:"q-focus-helper"},null,-1)),g("div",Qa,u(d),1),g("div",Va,[g("div",za,[g("div",Ha,u(e.t("key_manager.tokens")),1),g("div",Fa,u(e.formatNumber(a.tokens)),1)]),g("div",Ya,[g("div",Za,u(e.t("key_manager.requests")),1),g("div",Ja,u(e.formatNumber(a.requests)),1)])])]),_:2},1024))),128))])]),_:1})]),_:1})]),_:1})]),_:1},512)}const Wa=we(Aa,[["render",Ga],["__file","UsageHistoryDialog.vue"]]),Xa=be({__name:"RateLimitComponent",props:{showActionButtons:Boolean,maximizedWindow:{type:Boolean,default:!1}},setup(s,{expose:i}){i();const l=s,{t:e}=ve({useScope:"global"}),f=fa(),b=q(""),a=q([{icon:da,endpoint:"https://deepsearch.jina.ai/v1/chat/completions",name:e("deepsearch.title"),description:e("rate_limit.deepsearch"),requestType:"POST",woAPIkey:null,wAPIkey:"50 RPM",wPremium:"500 RPM",tokenCounting:e("rate_limit.total_token_counting"),latency:"56.7s",weight:f.name==="deepsearch"?100:99},{icon:Ue,endpoint:"https://r.jina.ai",name:e("reader.title"),description:e("rate_limit.rjinaai"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"500 RPM",wPremium:"5000 RPM",boostPossible:!0,tokenCounting:e("rate_limit.output_token_counting"),latency:"7.9s",weight:(f.name==="reader",100)},{icon:Ue,endpoint:"https://s.jina.ai",name:e("reader.title"),description:e("rate_limit.sjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"100 RPM",wPremium:"1000 RPM",boostPossible:!0,tokenCounting:e("rate_limit.flat_rate_per_request",{_number:1e4}),latency:"2.5s",weight:f.name==="reader"?99:100},{icon:ca,endpoint:"https://api.jina.ai/v1/segment",name:e("tokenizer.title"),description:e("rate_limit.tokenizer"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1,000 RPM",tokenCounting:e("rate_limit.no_token_counting"),latency:"0.3s",weight:f.name==="segmenter"?100:-1},{icon:ua,endpoint:"https://api.jina.ai/v1/embeddings",name:e("embedding.title"),description:e("rate_limit.embeddings"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",boostPossible:!0,tokenCounting:e("rate_limit.input_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),latencyExplain:e("rate_limit.batch_explain"),weight:f.name==="embeddings"?100:1},{icon:ma,endpoint:"https://api.jina.ai/v1/rerank",name:e("reranker.title"),description:e("rate_limit.reranker"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",boostPossible:!0,tokenCounting:e("rate_limit.input_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),latencyExplain:e("rate_limit.batch_explain"),weight:f.name==="reranker"?100:1},{icon:Se,endpoint:"https://api.jina.ai/v1/classify",name:`${e("classifier.title")} (${e("classifier.compare_table.zero_shot")})`,description:e("rate_limit.classifier_zero_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"200 RPM & 500,000 TPM",wPremium:"1,000 RPM & 3,000,000 TPM",tokenCounting:e("rate_limit.classifier_zero_shot_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?100:0},{icon:Se,endpoint:"https://api.jina.ai/v1/classify",name:`${e("classifier.title")} (${e("classifier.compare_table.few_shot")})`,description:e("rate_limit.classifier_few_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:e("rate_limit.classifier_few_shot_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?98:0},{icon:Se,endpoint:"https://api.jina.ai/v1/train",name:e("classifier.title"),description:e("rate_limit.classifier"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:e("rate_limit.classifier_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?99:0}]),d=q([{name:"icon",field:"icon",label:"",align:"left"},{name:"name",field:"name",label:e("rate_limit.product"),align:"left"},{name:"endpoint",field:"endpoint",label:e("rate_limit.endpoint"),align:"left"},{name:"description",field:"description",label:e("rate_limit.description"),align:"left",sortable:!0},{name:"woAPIkey",field:"woAPIkey",label:e("rate_limit.woAPIkey"),align:"right"},{name:"wAPIkey",field:"wAPIkey",label:e("rate_limit.wAPIkey"),align:"right"},{name:"wPremium",field:"wPremium",label:e("rate_limit.wPremium"),align:"right"},{name:"latency",field:"latency",label:e("rate_limit.latency"),align:"right"},{name:"tokenCounting",field:"tokenCounting",label:e("rate_limit.tokenCounting"),align:"left"},{name:"requestType",field:"requestType",label:e("rate_limit.requestType"),align:"left"}]),p=q(d.value.map(M=>M.name)),k=E(()=>a.value.sort((M,P)=>M.experimental&&!P.experimental?1:!M.experimental&&P.experimental?-1:M.weight===P.weight?M.name.localeCompare(P.name):P.weight-M.weight)),A=q({rowsPerPage:12}),U={props:l,t:e,route:f,filter:b,rows:a,columns:d,visibleColumns:p,sortedRows:k,initialPagination:A};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),$a=["innerHTML"],et={class:"text-bold silver-foil"},at={class:"text-bold golden-foil"},tt={class:"row q-pa-md justify-center full-width"},nt={key:1},it={class:"silver-foil text-bold"},st={class:"golden-foil text-bold"},lt={key:1};function ot(s,i,l,e,f,b){return m(),v(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[n(Ge,{class:"my-sticky-column-table",flat:"",square:"","title-class":"q-pa-md",title:e.t("rate_limit.title"),rows:e.sortedRows,columns:e.columns,"row-key":"endpoint",pagination:e.initialPagination,"hide-pagination":"",filter:e.filter,"visible-columns":e.visibleColumns},_a({top:t(a=>[n(le,{class:"full-width q-pa-lg"},{default:t(()=>[n(x,null,{default:t(()=>[n(O,{class:"text-weight-bold"},{default:t(()=>[w(u(e.t("rate_limit.title")),1)]),_:1}),n(O,{caption:""},{default:t(()=>[g("span",{innerHTML:e.t("rate_limit.explain")},null,8,$a)]),_:1})]),_:1}),n(xa),n(x,{side:""},{default:t(()=>[n(Ie,{modelValue:e.filter,"onUpdate:modelValue":i[0]||(i[0]=d=>e.filter=d),outlined:"",square:"",dense:"",placeholder:e.t("rate_limit.search")},null,8,["modelValue","placeholder"])]),_:1}),n(x,{side:""},{default:t(()=>[n(Ve,{modelValue:e.visibleColumns,"onUpdate:modelValue":i[1]||(i[1]=d=>e.visibleColumns=d),multiple:"",outlined:"",square:"",dense:"","options-dense":"","display-value":s.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns.map(d=>d.name==="icon"?{...d,label:e.t("rate_limit.icon")}:d),"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),_:1}),l.maximizedWindow?T("",!0):(m(),v(x,{key:0,side:""},{default:t(()=>[n(X,{flat:"",square:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]),"header-cell-woAPIkey":t(a=>[n(Ke,{props:a},{default:t(()=>[g("span",null,u(a.col.label),1),n(I,{name:"key_off",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(N,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.no_key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"header-cell-wAPIkey":t(a=>[n(Ke,{props:a},{default:t(()=>[g("span",et,u(a.col.label),1),n(I,{name:"o_key",class:"cursor-pointer silver-foil q-ml-sm"},{default:t(()=>[n(N,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"header-cell-wPremium":t(a=>[n(Ke,{props:a},{default:t(()=>[g("span",at,u(a.col.label),1),n(I,{name:"o_key",class:"cursor-pointer golden-foil q-ml-sm"},{default:t(()=>[n(N,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.premium_key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"body-cell-icon":t(a=>[n(te,{props:a},{default:t(()=>[n(ka,{src:a.value,width:"36px",class:"relative-position"},{default:t(()=>[a.row.experimental?(m(),v(I,{key:0,name:"o_warning",color:"warning",class:"absolute-bottom-right"})):T("",!0)]),_:2},1032,["src"])]),_:2},1032,["props"])]),"body-cell-endpoint":t(a=>[n(te,{props:a},{default:t(()=>[g("code",null,u(a.value),1)]),_:2},1032,["props"])]),"body-cell-woAPIkey":t(a=>[n(te,{props:a},{default:t(()=>[a.value?(m(),j("span",nt,u(a.value),1)):(m(),v(I,{key:0,name:"block",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-wAPIkey":t(a=>[n(te,{props:a},{default:t(()=>[g("span",it,u(a.value),1),String(a.value).includes("X")?(m(),v(I,{key:0,name:"keyboard_double_arrow_up",color:"primary",class:"cursor-pointer"},{default:t(()=>[n(N,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.batch_explain")),1)]),_:1})]),_:1})):T("",!0)]),_:2},1032,["props"])]),"body-cell-wPremium":t(a=>[n(te,{props:a},{default:t(()=>[a.row.boostPossible?(m(),v(I,{key:0,name:"trending_up",class:"golden-foil q-mr-xs"},{default:t(()=>[n(N,null,{default:t(()=>[w(u(e.t("rate_limit.further_boost")),1)]),_:1})]),_:1})):T("",!0),g("span",st,u(a.value),1)]),_:2},1032,["props"])]),"body-cell-latency":t(a=>[n(te,{props:a},{default:t(()=>[a.value?(m(),j("span",lt,u(a.value),1)):(m(),v(Je,{key:0,icon:"ssid_chart",label:a.row.latencyDepends,size:"sm"},{default:t(()=>[w(u(a.value)+" ",1),a.row.latencyExplain?(m(),v(I,{key:0,name:"help",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(N,{"max-width":"300px"},{default:t(()=>[w(u(a.row.latencyExplain),1)]),_:2},1024)]),_:2},1024)):T("",!0)]),_:2},1032,["label"]))]),_:2},1032,["props"])]),_:2},[l.showActionButtons?{name:"bottom",fn:t(()=>[g("div",tt,[n(Ze,{outline:"",square:""},{default:t(()=>[n(X,{outline:"",label:e.t("get_new_key"),square:"",icon:"o_key",href:"/?sui=apikey",padding:"md",target:"_blank"},null,8,["label"]),n(ue),n(X,{outline:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/contact-sales",padding:"md"},null,8,["label"])]),_:1})])]),key:"0"}:void 0]),1032,["title","rows","columns","pagination","filter","visible-columns"])]),_:1})}const rt=we(Xa,[["render",ot],["__file","RateLimitComponent.vue"]]),dt=be({__name:"AutoRechargeItem",props:Be({apiKey:{},disable:{type:Boolean},isAutoCharge:{type:Boolean},isPaidKey:{type:Boolean},navigateToPurchase:{type:Boolean},mode:{}},{autoRecharge:{type:Boolean},autoRechargeModifiers:{},rechargeThreshold:{type:Number},rechargeThresholdModifiers:{}}),emits:Be(["update"],["update:autoRecharge","update:rechargeThreshold"]),setup(s,{expose:i,emit:l}){i();const e=s,f=l,b=Ee(s,"autoRecharge"),a=Ee(s,"rechargeThreshold"),{t:d}=ve({useScope:"global"}),p=Fe(),k=Ye(),{user:A}=ye(k),U=ae(),{products:M}=ye(U),P=Ce(),{isBusyState:S}=ye(P),re=[{label:"10K",value:1e4},{label:"1M",value:1e6},{label:"1B",value:1e9}],Q=q(!1),H=E(()=>M.value.filter(C=>C.price>0).map(C=>({label:`$${C.price} / `+d(`embedding.${C.product_name.replace(".","_")}`),value:C.price_id}))),V=E(()=>{var C;return e.mode==="dashboard"||e.mode==="home"&&!((C=A.value)!=null&&C.uid)||e.disable}),ne={props:e,emit:f,autoRecharge:b,rechargeThreshold:a,t:d,$q:p,userStore:k,user:A,embeddingStore:U,products:M,apiKeyStore:P,isBusyState:S,rechargeThresholdOptions:re,hideSelected:Q,productOptions:H,invokeApi:V,updateAutoRecharge:async C=>{var $;V.value&&(!e.isAutoCharge&&C?p.dialog({title:d("embedding.auto_recharge_enable_title"),message:d("embedding.auto_recharge_enable_message2"),options:{type:"radio",model:H.value[0].value,items:H.value},cancel:($=e.navigateToPurchase)!=null?$:!1}).onOk(async F=>{var se,o,r,c;S.value.delete(e.apiKey);const R=new URL(window.location.href),ie=Date.now().toString();R.searchParams.set("price_id",F),R.searchParams.set("session_id",ie),R.searchParams.set("register_status","success"),R.searchParams.set("api_key",Ka(e.apiKey));const J=R.toString();R.searchParams.set("register_status","cancel");const ge=R.toString();if(a.value)try{S.value.add(e.apiKey);const h={successUrl:J,cancelUrl:ge,priceId:F,threshold:a.value,email:(o=(se=A.value)==null?void 0:se.email)!=null?o:void 0,currency:(r=navigator.language)!=null&&r.includes("zh")||(c=k.language)!=null&&c.includes("zh")?"eur":void 0},y=await U.setAutoRecharge(e.apiKey,h);y&&(window.location.href=y)}finally{S.value.delete(e.apiKey)}}).onCancel(()=>{b.value=!1}):e.isAutoCharge&&!C&&p.dialog({title:d("embedding.auto_recharge_confirm_title"),message:d("embedding.auto_recharge_confirm_message"),cancel:!0}).onOk(async()=>{S.value.add(e.apiKey);try{await U.cancelAutoRecharge(e.apiKey)||(b.value=!0)}finally{S.value.delete(e.apiKey)}f("update")}).onCancel(()=>{b.value=!0}))},updateThreshold:async C=>{if(!V.value)return;const $=a.value;b.value&&e.isAutoCharge&&(Q.value=!0,p.dialog({title:d("key_manager.recharge_threshold_confirm_title"),message:d("key_manager.recharge_threshold_confirm_message",{_threshold:Ta(C)}),cancel:!0}).onOk(async()=>{S.value.add(e.apiKey),Q.value=!1;try{await U.updateAutoRecharge(e.apiKey,C)}finally{S.value.delete(e.apiKey)}}).onCancel(()=>{Q.value=!1,a.value=$}))}};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}});function ct(s,i,l,e,f,b){return m(),v(le,{tag:"label",disable:l.disable,onClick:i[3]||(i[3]=Oe(()=>{},["stop"]))},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(x,{key:0,avatar:""},{default:t(()=>[n(I,{name:"currency_exchange"})]),_:1})):T("",!0),n(x,null,{default:t(()=>[n(O,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.auto_recharge")),1)]),_:1}),n(O,{caption:"",lines:"2"},{default:t(()=>[w(u(e.t("embedding.auto_recharge_description"))+" ",1),n(N,{"max-width":"40rem"},{default:t(()=>[w(u(l.isAutoCharge?e.t("embedding.auto_recharge_enable"):e.t("embedding.auto_recharge_description")),1)]),_:1})]),_:1})]),_:1}),n(x,{side:""},{default:t(()=>[n(ze,{modelValue:e.autoRecharge,"onUpdate:modelValue":[i[0]||(i[0]=a=>e.autoRecharge=a),e.updateAutoRecharge],color:"primary",disable:l.disable||e.isBusyState.has(l.apiKey),"checked-icon":"check"},null,8,["modelValue","disable"])]),_:1}),n(x,{side:""},{default:t(()=>[n(Ve,{modelValue:e.rechargeThreshold,"onUpdate:modelValue":[i[1]||(i[1]=a=>e.rechargeThreshold=a),e.updateThreshold],options:e.rechargeThresholdOptions,"hide-selected":e.hideSelected,disable:l.disable||e.isBusyState.has(l.apiKey),label:e.t("embedding.recharge_threshold"),style:{"min-width":"160px"},"option-label":a=>`< ${a.label} ${e.t("embedding.tokens")}`,onClick:i[2]||(i[2]=Oe(()=>{},["prevent"])),"emit-value":"","map-options":""},null,8,["modelValue","hide-selected","disable","label","option-label"])]),_:1})]),_:1},8,["disable"])}const ut=we(dt,[["render",ct],["__file","AutoRechargeItem.vue"]]),mt=be({__name:"PurchaseComponent",props:{purchaseKey:{default:""},hideUsage:{type:Boolean,default:!1},hideKey:{type:Boolean,default:!1},hideStripeInfo:{type:Boolean,default:!1},hideFreePlan:{type:Boolean,default:!1},autoCharge:{type:Boolean},threshold:{},mode:{default:"home"}},setup(s,{expose:i}){i();const l=s,{t:e}=ve({useScope:"global"}),f=Fe(),b=Ye(),a=Ce(),d=ae(),{apiKey:p,products:k,isApiKeyInfoLoading:A,isPremiumPaidUser:U,apiKeyInfo:M}=ye(d),P=q(l.purchaseKey||p.value),S=q(M==null?void 0:M.value),re=q(!1);ya(async()=>{re.value=!0;try{S.value=await d.getKeyInfo(P.value)}catch(_){console.log("Error getting key info",_)}H.value=l.autoCharge||!F.value||R.value,V.value=l.threshold||1e6,re.value=!1});const Q=q(0),H=q(!0),V=q(1e6),Y=q(""),Z=q(!0),ne={"1M tokens":["paywall.no_commercial"],"1B tokens":["paywall.standard_key","paywall.key_manager","paywall.priority_support"],"11B tokens":["paywall.premium_key","paywall.premium_key_manager","paywall.premium_support","paywall.consulting_us"]},C=E(()=>k.value.map(_=>({..._,isActive:()=>Y.value===_.price_id,tag:()=>e(`embedding.${_.product_name}_targetUser`),title:()=>e(`embedding.${_.product_name.replace(".","_")}`),description:()=>e(`embedding.${_.product_name.replace(".","_")}_intuition1`),isFree:_.price===0,priceLabel:()=>_.price>0?`$${_.price}`:e("embedding.free"),priceDescription:()=>_.price>0?`${(_.price/_.token_quantity*1e6).toFixed(3)} ${e("embedding.per_m")}`:e("embedding.1M_free_description"),handler:()=>_.price>0?se(_.price_id):void 0}))),$=E(()=>{var _,B;return(B=(_=S.value)==null?void 0:_.wallet.total_balance)!=null?B:0}),F=E(()=>{var _;return!!((_=S.value)!=null&&_.email)}),R=E(()=>{var _;return F.value&&!!((_=S.value)!=null&&_.metadata.auto_recharge)}),ie=E(()=>!!P.value&&(S==null?void 0:S.value)!==void 0),J=E(()=>!ie.value||A.value),ge=E(()=>{var _;return((_=S.value)==null?void 0:_.metadata.disable_self_purchase)||!1}),se=async _=>{var Le,Re,De;if(J.value||Y.value)return;const B=k.value.find(qe=>qe.price_id===_),z=new URL(window.location.href),_e=Date.now().toString();z.searchParams.set("price_id",_),z.searchParams.set("session_id",_e),z.searchParams.set("purchase_status","cancel");const ke=z.toString();z.searchParams.set("purchase_status","success");const L=z.toString();Y.value=_;const D={price_id:_,success_url:L,cancel_url:ke};(Le=b.user)!=null&&Le.email&&(D.email=b.user.email);const Ae=localStorage.getItem(ga);Ae&&(D.metadata={sales_key:Ae}),H.value&&(D.metadata={...D.metadata,auto_recharge:!0,threshold:V.value});const Pe=navigator.language,We=(Re=b.language)!=null?Re:"";(Pe!=null&&Pe.includes("zh")||We.includes("zh"))&&(D.metadata={...D.metadata,currency:"eur"}),B&&gtag("event","begin_checkout",{currency:B.currency,value:B.price,items:[{id:B.product_id,name:B.product_name}]});const Me=await d.checkoutWithStripe(P.value,D);if(Y.value="",!Me)return;d.apiKey=P.value,((De=a.keys)==null?void 0:De.some(qe=>qe.key===P.value))||await a.addKey(P.value),await a.setPrimaryKey(d.apiKey),d.getCurrentKeyInfo(),window.location.href=Me.url},o=async()=>{S.value=await d.getKeyInfo(P.value),H.value=!F.value||R.value,p.value===P.value&&d.setApiKeyInfo(S.value)},r=async()=>{ie.value&&P.value!==p.value&&f.dialog({title:e("embedding.api_key_update_title"),message:e("embedding.api_key_update_message"),cancel:!0}).onOk(async()=>{p.value=P.value,o(),await a.addKey(P.value),a.setPrimaryKey(P.value)})},c=()=>{J.value||f.dialog({component:Wa,componentProps:{apiKey:P.value}})};pa(async()=>{await d.getProducts(),setInterval(()=>{Q.value=(Q.value+1)%ha.length},3e3)});const h=q(!1),K={props:l,t:e,$q:f,userStore:b,apiKeyStore:a,embeddingStore:d,apiKey:p,products:k,isApiKeyInfoLoading:A,isPremiumPaidUser:U,apiKeyInfo:M,inputApiKey:P,inputApiKeyInfo:S,isBusy:re,currentIndex:Q,autoRecharge:H,rechargeThreshold:V,currentPriceID:Y,isPwd:Z,tierFeatures:ne,productCards:C,apiKeyTokens:$,isPaidUser:F,isAutoRecharge:R,isInputApiKeyValid:ie,isInputApiKeyDisabled:J,isSelfPurchaseDisabled:ge,checkoutProduct:se,getKeyInfo:o,updateApiKey:r,openUsageHistoryDialog:c,isApiKeyCopyDone:h,copyApiKey:()=>{!p.value||h.value||(qa(p.value).then(()=>{f.notify({message:e("copy_to_clipboard_success"),icon:"done"}),h.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{h.value=!1},1800))},get flatEnterprises(){return ba},get formatNumber(){return Te},RateLimitComponent:rt,AutoRechargeItem:ut};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),ft=["innerHTML"],_t=["innerHTML","data-text"],yt={class:"row justify-center text-caption text-dim q-pt-md q-pb-sm"},gt={class:"row justify-center q-gutter-x-sm"};function pt(s,i,l,e,f,b){return m(),j(oe,null,[e.isBusy?(m(),v(Xe,{key:0,indeterminate:"",size:"1px"})):T("",!0),n(je,{class:"q-pa-md q-gutter-y-sm"},{default:t(()=>[!l.hideUsage&&e.isInputApiKeyValid?(m(),v(le,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(x,{key:0,avatar:""},{default:t(()=>[n(I,{name:"data_usage"})]),_:1})):T("",!0),n(x,null,{default:t(()=>[n(O,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.remaining")),1)]),_:1}),n(O,{class:ee({"text-negative":e.apiKeyTokens<0})},{default:t(()=>[g("span",{innerHTML:e.t("embedding.remaining_left",{_leftTokens:e.formatNumber(e.apiKeyTokens)})},null,8,ft)]),_:1},8,["class"])]),_:1}),n(x,{side:""},{default:t(()=>[n(Ze,{square:"",outline:""},{default:t(()=>[n(X,{outline:"",square:"",icon:"refresh",disable:e.isInputApiKeyDisabled,onClick:e.getKeyInfo,loading:e.isApiKeyInfoLoading},{default:t(()=>[n(N,null,{default:t(()=>[w(u(e.t("embedding.refresh_token_count1")),1)]),_:1})]),_:1},8,["disable","loading"]),n(ue),n(X,{square:"",outline:"","no-caps":"",label:e.t("embedding.last_7_days"),disable:e.isInputApiKeyDisabled,onClick:e.openUsageHistoryDialog},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})):T("",!0),l.hideKey?T("",!0):(m(),v(le,{key:1},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(x,{key:0,avatar:""},{default:t(()=>[n(I,{name:"o_key",class:ee({"golden-foil":e.isPremiumPaidUser,"silver-foil":!e.isPremiumPaidUser&&e.isPaidUser})},null,8,["class"])]),_:1})):T("",!0),n(x,null,{default:t(()=>[n(Ie,{"input-style":"font-family: monospace",modelValue:e.inputApiKey,"onUpdate:modelValue":i[1]||(i[1]=a=>e.inputApiKey=a),"hide-bottom-space":"",type:e.isPwd?"password":"text",hint:e.t("embedding.key_to_top_up"),filled:"",square:"",label:e.inputApiKey?`${e.t("embedding.key_warn_v2")}`:e.t("embedding.key_enter_placeholder_to_topup"),error:!e.isInputApiKeyValid,"error-message":e.inputApiKey?e.t("embedding.input_api_key_error1"):"","input-class":"ellipsis"},{append:t(()=>[n(I,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:i[0]||(i[0]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),prepend:t(()=>[n(X,{flat:"",square:"",icon:e.isApiKeyCopyDone?"done":"content_copy",color:e.isApiKeyCopyDone?"primary":"",onClick:e.copyApiKey,stretch:""},{default:t(()=>[n(N,null,{default:t(()=>[w(u(e.t("copy")),1)]),_:1})]),_:1},8,["icon","color"])]),after:t(()=>[e.isInputApiKeyValid&&e.inputApiKey!==e.apiKey?(m(),v(X,{key:0,icon:"save",onClick:e.updateApiKey,stretch:"",square:"",flat:""})):T("",!0)]),_:1},8,["modelValue","type","hint","label","error","error-message"])]),_:1})]),_:1})),e.isSelfPurchaseDisabled?T("",!0):(m(),j(oe,{key:2},[l.hideStripeInfo?T("",!0):(m(),v(le,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(x,{key:0,avatar:"",side:"",class:"relative-position"},{default:t(()=>[n(I,{name:"fab fa-stripe"}),n(I,{name:"o_verified_user",size:"xs",class:"absolute-bottom-right q-mr-sm q-mb-xs text-positive"})]),_:1})):T("",!0),n(x,null,{default:t(()=>[n(O,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.buy_more_quota")),1)]),_:1}),n(O,{caption:"",lines:"2"},{default:t(()=>[w(u(e.t("embedding.tax_may_apply")),1)]),_:1})]),_:1}),e.isPaidUser?(m(),v(x,{key:1,side:"",class:"q-pa-none"},{default:t(()=>[n(X,{outline:"","icon-right":"open_in_new",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[n(N,null,{default:t(()=>[w(u(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["label"])]),_:1})):T("",!0)]),_:1})),n(de,{class:"row q-pa-md q-py-none bg-transparent",flat:""},{default:t(()=>[(m(!0),j(oe,null,fe(e.productCards.filter(a=>!l.hideFreePlan||!a.isFree),(a,d)=>(m(),j("div",{key:d,class:ee(["col-12 col-sm-6 q-pa-sm cursor-pointer",{"col-lg-4":!l.hideFreePlan}])},[He((m(),v(de,{bordered:"",flat:"",class:ee(["full-width full-height column justify-between",!e.isInputApiKeyDisabled&&!e.currentPriceID&&!a.isFree?"q-hoverable bg-mixed-200":"cursor-not-allowed"]),square:"",style:va(a.isActive()?"cursor: wait !important;":""),onClick:a.handler},{default:t(()=>[i[5]||(i[5]=g("span",{class:"q-focus-helper"},null,-1)),n(me,{class:"column items-center non-selectable text-h2 q-pt-xl"},{default:t(()=>[n(Je,{label:a.tag(),outline:"",square:"",style:{"border-radius":"0"},size:"sm",class:ee(["q-my-xl",{"silver-border":a.product_name==="1B tokens","gold-border":a.product_name==="11B tokens"}])},null,8,["label","class"]),g("span",{innerHTML:a.title(),"data-text":a.title(),class:ee(["text-weight-bold",{"text-dim":a.product_name==="1M tokens","silver-foil":a.product_name==="1B tokens","golden-foil":a.product_name==="11B tokens"}])},null,10,_t),g("div",yt,[w(u(e.t("embedding.includes"))+" ",1),n(N,{"max-width":"300px"},{default:t(()=>[w(u(a.description()),1)]),_:2},1024)]),g("div",gt,[(m(!0),j(oe,null,fe(e.flatEnterprises,p=>(m(),v(I,{key:p.label,name:`img:${p.icon}`,size:"sm"},{default:t(()=>[n(N,null,{default:t(()=>[g("b",null,u(e.t(p.label)),1),i[4]||(i[4]=g("br",null,null,-1)),w(" "+u(e.t(p.caption)),1)]),_:2},1024)]),_:2},1032,["name"]))),128))])]),_:2},1024),n(me,{class:"column items-center non-selectable"},{default:t(()=>[n(je,{dense:""},{default:t(()=>[(m(!0),j(oe,null,fe(e.tierFeatures[a.product_name],(p,k)=>(m(),v(le,{key:p},{default:t(()=>[n(x,null,{default:t(()=>[n(O,{caption:""},{default:t(()=>[a.product_name!=="1M tokens"?(m(),v(I,{key:0,name:k===0?"key":"task_alt",class:ee({"golden-foil":a.product_name==="11B tokens","silver-foil":a.product_name==="1B tokens"})},null,8,["name","class"])):T("",!0),w(" "+u(e.t(p)),1)]),_:2},1024),n(N,{"max-width":"300px"},{default:t(()=>[w(u(e.t(`${p}_description`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),n(me,{class:ee({"bg-mixed-300":!a.isFree})},{default:t(()=>[n(le,null,{default:t(()=>[n(x,null,{default:t(()=>[n(O,{class:ee({"text-bold":!a.isFree})},{default:t(()=>[w(u(a.priceLabel()),1)]),_:2},1032,["class"]),n(O,{caption:""},{default:t(()=>[w(u(a.priceDescription()),1)]),_:2},1024)]),_:2},1024),a.isFree?T("",!0):(m(),v(x,{key:0,side:""},{default:t(()=>[n(I,{name:"add_shopping_cart"})]),_:1}))]),_:2},1024)]),_:2},1032,["class"]),n(Ne,{showing:e.currentPriceID===a.price_id,label:e.t("embedding.wait_stripe"),"label-style":"font-size: 0.8em",size:"sm",class:"non-selectable lock-blur"},null,8,["showing","label"])]),_:2},1032,["class","style","onClick"])),[[wa,!a.isFree&&!e.isInputApiKeyDisabled&&!e.currentPriceID]])],2))),128)),n(Ne,{showing:!e.isInputApiKeyValid,class:"lock-small-blur",label:e.t("embedding.right_api_key_to_charge"),size:"0"},null,8,["showing","label"])]),_:1})],64)),n(Pa,{label:e.t("rate_limit.understanding"),icon:e.$q.screen.gt.sm?"speed":void 0,"header-class":"text-bold",caption:e.t("rate_limit.understanding_description")},{default:t(()=>[n(e.RateLimitComponent,{"show-action-buttons":!1})]),_:1},8,["label","icon","caption"]),e.isSelfPurchaseDisabled?T("",!0):(m(),v(e.AutoRechargeItem,{key:3,"api-key":e.inputApiKey,"api-key-info":e.inputApiKeyInfo,"is-paid-key":e.isPaidUser,"is-auto-charge":e.isAutoRecharge,"auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":i[2]||(i[2]=a=>e.autoRecharge=a),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":i[3]||(i[3]=a=>e.rechargeThreshold=a),disable:e.isInputApiKeyDisabled,mode:l.mode,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable","mode"]))]),_:1})],64)}const Ct=we(mt,[["render",pt],["__scopeId","data-v-a668d2ff"],["__file","PurchaseComponent.vue"]]),At="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='320'%20zoomAndPan='magnify'%20viewBox='0%200%20240%20239.999995'%20height='320'%20preserveAspectRatio='xMidYMid%20meet'%20version='1.0'%3e%3cpath%20fill='%23ffffff'%20d='M%20164.820312%2048%20L%20195%2048%20L%20195%2078.179688%20L%20164.820312%2078.179688%20Z%20M%20164.820312%2085.726562%20L%20195%2085.726562%20L%20195%20115.90625%20L%20164.820312%20115.90625%20Z%20M%20195%20123.449219%20L%20164.820312%20123.449219%20L%20164.820312%20153.632812%20L%20195%20153.632812%20Z%20M%20164.820312%20161.175781%20L%20195%20161.175781%20L%20195%20191.359375%20L%20164.820312%20191.359375%20Z%20M%2076.792969%2053.28125%20L%2067.707031%2063.375%20L%2077.796875%2072.460938%20L%2086.886719%2062.367188%20Z%20M%2067.707031%20101.101562%20L%2076.792969%2091.007812%20L%2086.886719%20100.09375%20L%2077.796875%20110.1875%20Z%20M%2076.792969%20128.734375%20L%2067.707031%20138.824219%20L%2077.796875%20147.914062%20L%2086.886719%20137.820312%20Z%20M%2067.707031%20176.550781%20L%2076.792969%20166.460938%20L%2086.886719%20175.546875%20L%2077.796875%20185.640625%20Z%20M%2048.96875%2057.054688%20L%2045%2065.191406%20L%2053.136719%2069.160156%20L%2057.105469%2061.023438%20Z%20M%2045%20102.917969%20L%2048.96875%2094.78125%20L%2057.105469%2098.75%20L%2053.136719%20106.886719%20Z%20M%2048.96875%20132.507812%20L%2045%20140.644531%20L%2053.136719%20144.613281%20L%2057.105469%20136.476562%20Z%20M%2045%20178.371094%20L%2048.96875%20170.230469%20L%2057.105469%20174.199219%20L%2053.136719%20182.339844%20Z%20M%20113.113281%2050.261719%20L%2097.757812%2059.859375%20L%20107.355469%2075.214844%20L%20122.710938%2065.621094%20Z%20M%2097.757812%2097.585938%20L%20113.113281%2087.988281%20L%20122.710938%20103.347656%20L%20107.355469%20112.941406%20Z%20M%20113.113281%20125.714844%20L%2097.757812%20135.3125%20L%20107.355469%20150.667969%20L%20122.710938%20141.070312%20Z%20M%2097.757812%20173.035156%20L%20113.113281%20163.441406%20L%20122.710938%20178.796875%20L%20107.355469%20188.394531%20Z%20M%20152.050781%2048%20L%20128.839844%2054.65625%20L%20135.496094%2077.863281%20L%20158.703125%2071.210938%20Z%20M%20128.839844%2092.378906%20L%20152.050781%2085.726562%20L%20158.703125%20108.933594%20L%20135.496094%20115.589844%20Z%20M%20152.050781%20123.449219%20L%20128.839844%20130.105469%20L%20135.496094%20153.316406%20L%20158.703125%20146.660156%20Z%20M%20128.839844%20167.832031%20L%20152.050781%20161.175781%20L%20158.703125%20184.386719%20L%20135.496094%20191.042969%20Z%20M%20128.839844%20167.832031%20'%20fill-opacity='1'%20fill-rule='evenodd'/%3e%3c/svg%3e";export{ut as A,Ct as P,Ne as Q,rt as R,Wa as U,Ca as e,At as t,Ce as u};
