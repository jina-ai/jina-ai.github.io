import{s as Se,m as Ee,p as Be,K as Ae,j as Re,a0 as De,k as j,u as Oe,am as Ne,n as qe,a2 as Le,a3 as oe,a4 as Qe,a5 as M,a6 as b,a7 as je,a9 as G,ad as Ue,ae as ie,aq as le,af as U,ag as z,aU as ze,q as J,aa as Ke,ah as We,bT as Ve,ab as Ze,aE as He}from"./index-DkNN5_pm.js";import{Q as se}from"./QItemLabel-zDDzZGT8.js";import{Q as Ge}from"./QTooltip-DJCy-JYB.js";import{c as Je}from"./copy-to-clipboard-DRefCvHq.js";import{a as ce,u as Xe}from"./use-dialog-plugin-component-BhQSZpwJ.js";const oa=Se({name:"QToolbar",props:{inset:Boolean},setup(I,{slots:v}){const p=Ee(()=>"q-toolbar row no-wrap items-center"+(I.inset===!0?" q-toolbar--inset":""));return()=>Be("div",{class:p.value,role:"toolbar"},Ae(v.default))}});var X={};(function I(v,p,u,x){var A=!!(v.Worker&&v.Blob&&v.Promise&&v.OffscreenCanvas&&v.OffscreenCanvasRenderingContext2D&&v.HTMLCanvasElement&&v.HTMLCanvasElement.prototype.transferControlToOffscreen&&v.URL&&v.URL.createObjectURL),k=typeof Path2D=="function"&&typeof DOMMatrix=="function",R=function(){if(!v.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function O(){}function S(a){var e=p.exports.Promise,r=e!==void 0?e:v.Promise;return typeof r=="function"?new r(a):(a(O,O),null)}var D=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var t=new OffscreenCanvas(r.width,r.height),o=t.getContext("2d");return o.drawImage(r,0,0),e.set(r,t),t},clear:function(){e.clear()}}}(R,new Map),E=function(){var a=Math.floor(16.666666666666668),e,r,t={},o=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(i){var l=Math.random();return t[l]=requestAnimationFrame(function n(s){o===s||o+a-1<s?(o=s,delete t[l],i()):t[l]=requestAnimationFrame(n)}),l},r=function(i){t[i]&&cancelAnimationFrame(t[i])}):(e=function(i){return setTimeout(i,a)},r=function(i){return clearTimeout(i)}),{frame:e,cancel:r}}(),K=function(){var a,e,r={};function t(o){function i(l,n){o.postMessage({options:l||{},callback:n})}o.init=function(n){var s=n.transferControlToOffscreen();o.postMessage({canvas:s},[s])},o.fire=function(n,s,d){if(e)return i(n,null),e;var m=Math.random().toString(36).slice(2);return e=S(function(h){function g(y){y.data.callback===m&&(delete r[m],o.removeEventListener("message",g),e=null,D.clear(),d(),h())}o.addEventListener("message",g),i(n,m),r[m]=g.bind(null,{data:{callback:m}})}),e},o.reset=function(){o.postMessage({reset:!0});for(var n in r)r[n](),delete r[n]}}return function(){if(a)return a;if(!u&&A){var o=["var CONFETTI, SIZE = {}, module = {};","("+I.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([o])))}catch(i){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",i),null}t(a)}return a}}(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function B(a,e){return e?e(a):a}function W(a){return a!=null}function f(a,e,r){return B(a&&W(a[e])?a[e]:N[e],r)}function Y(a){return a<0?0:Math.floor(a)}function q(a,e){return Math.floor(Math.random()*(e-a))+a}function L(a){return parseInt(a,16)}function V(a){return a.map(Q)}function Q(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:L(e.substring(0,2)),g:L(e.substring(2,4)),b:L(e.substring(4,6))}}function de(a){var e=f(a,"origin",Object);return e.x=f(e,"x",Number),e.y=f(e,"y",Number),e}function he(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function fe(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function me(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function ge(a,e,r,t,o,i,l,n,s){a.save(),a.translate(e,r),a.rotate(i),a.scale(t,o),a.arc(0,0,1,l,n,s),a.restore()}function ve(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function pe(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,t=e.x+e.random*e.tiltCos,o=e.y+e.random*e.tiltSin,i=e.wobbleX+e.random*e.tiltCos,l=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),k&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(be(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(i-t)*.1,Math.abs(l-o)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var n=Math.PI/10*e.wobble,s=Math.abs(i-t)*.1,d=Math.abs(l-o)*.1,m=e.shape.bitmap.width*e.scalar,h=e.shape.bitmap.height*e.scalar,g=new DOMMatrix([Math.cos(n)*s,Math.sin(n)*s,-Math.sin(n)*d,Math.cos(n)*d,e.x,e.y]);g.multiplySelf(new DOMMatrix(e.shape.matrix));var y=a.createPattern(D.transform(e.shape.bitmap),"no-repeat");y.setTransform(g),a.globalAlpha=1-r,a.fillStyle=y,a.fillRect(e.x-m/2,e.y-h/2,m,h),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(i-t)*e.ovalScalar,Math.abs(l-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):ge(a,e.x,e.y,Math.abs(i-t)*e.ovalScalar,Math.abs(l-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var c=Math.PI/2*3,w=4*e.scalar,C=8*e.scalar,F=e.x,T=e.y,P=5,_=Math.PI/P;P--;)F=e.x+Math.cos(c)*C,T=e.y+Math.sin(c)*C,a.lineTo(F,T),c+=_,F=e.x+Math.cos(c)*w,T=e.y+Math.sin(c)*w,a.lineTo(F,T),c+=_;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(o)),a.lineTo(Math.floor(i),Math.floor(l)),a.lineTo(Math.floor(t),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function ye(a,e,r,t,o){var i=e.slice(),l=a.getContext("2d"),n,s,d=S(function(m){function h(){n=s=null,l.clearRect(0,0,t.width,t.height),D.clear(),o(),m()}function g(){u&&!(t.width===x.width&&t.height===x.height)&&(t.width=a.width=x.width,t.height=a.height=x.height),!t.width&&!t.height&&(r(a),t.width=a.width,t.height=a.height),l.clearRect(0,0,t.width,t.height),i=i.filter(function(y){return pe(l,y)}),i.length?n=E.frame(g):h()}n=E.frame(g),s=h});return{addFettis:function(m){return i=i.concat(m),d},canvas:a,promise:d,reset:function(){n&&E.cancel(n),s&&s()}}}function $(a,e){var r=!a,t=!!f(e||{},"resize"),o=!1,i=f(e,"disableForReducedMotion",Boolean),l=A&&!!f(e||{},"useWorker"),n=l?K():null,s=r?he:fe,d=a&&n?!!a.__confetti_initialized:!1,m=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,h;function g(c,w,C){for(var F=f(c,"particleCount",Y),T=f(c,"angle",Number),P=f(c,"spread",Number),_=f(c,"startVelocity",Number),Ce=f(c,"decay",Number),Fe=f(c,"gravity",Number),_e=f(c,"drift",Number),ae=f(c,"colors",V),Te=f(c,"ticks",Number),re=f(c,"shapes"),xe=f(c,"scalar"),Pe=!!f(c,"flat"),ne=de(c),te=F,H=[],Ie=a.width*ne.x,ke=a.height*ne.y;te--;)H.push(ve({x:Ie,y:ke,angle:T,spread:P,startVelocity:_,color:ae[te%ae.length],shape:re[q(0,re.length)],ticks:Te,decay:Ce,gravity:Fe,drift:_e,scalar:xe,flat:Pe}));return h?h.addFettis(H):(h=ye(a,H,s,w,C),h.promise)}function y(c){var w=i||f(c,"disableForReducedMotion",Boolean),C=f(c,"zIndex",Number);if(w&&m)return S(function(_){_()});r&&h?a=h.canvas:r&&!a&&(a=me(C),document.body.appendChild(a)),t&&!d&&s(a);var F={width:a.width,height:a.height};n&&!d&&n.init(a),d=!0,n&&(a.__confetti_initialized=!0);function T(){if(n){var _={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};s(_),n.postMessage({resize:{width:_.width,height:_.height}});return}F.width=F.height=null}function P(){h=null,t&&(o=!1,v.removeEventListener("resize",T)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,d=!1)}return t&&!o&&(o=!0,v.addEventListener("resize",T,!1)),n?n.fire(c,F,P):g(c,F,P)}return y.reset=function(){n&&n.reset(),h&&h.reset()},y}var Z;function ee(){return Z||(Z=$(null,{useWorker:!0,resize:!0})),Z}function be(a,e,r,t,o,i,l){var n=new Path2D(a),s=new Path2D;s.addPath(n,new DOMMatrix(e));var d=new Path2D;return d.addPath(s,new DOMMatrix([Math.cos(l)*o,Math.sin(l)*o,-Math.sin(l)*i,Math.cos(l)*i,r,t])),d}function Me(a){if(!k)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var t=new Path2D(e),o=document.createElement("canvas"),i=o.getContext("2d");if(!r){for(var l=1e3,n=l,s=l,d=0,m=0,h,g,y=0;y<l;y+=2)for(var c=0;c<l;c+=2)i.isPointInPath(t,y,c,"nonzero")&&(n=Math.min(n,y),s=Math.min(s,c),d=Math.max(d,y),m=Math.max(m,c));h=d-n,g=m-s;var w=10,C=Math.min(w/h,w/g);r=[C,0,0,C,-Math.round(h/2+n)*C,-Math.round(g/2+s)*C]}return{type:"path",path:e,matrix:r}}function we(a){var e,r=1,t="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,o="fontFamily"in a?a.fontFamily:o,t="color"in a?a.color:t);var i=10*r,l=""+i+"px "+o,n=new OffscreenCanvas(i,i),s=n.getContext("2d");s.font=l;var d=s.measureText(e),m=Math.ceil(d.actualBoundingBoxRight+d.actualBoundingBoxLeft),h=Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent),g=2,y=d.actualBoundingBoxLeft+g,c=d.actualBoundingBoxAscent+g;m+=g+g,h+=g+g,n=new OffscreenCanvas(m,h),s=n.getContext("2d"),s.font=l,s.fillStyle=t,s.fillText(e,y,c);var w=1/r;return{type:"bitmap",bitmap:n.transferToImageBitmap(),matrix:[w,0,0,w,-m*w/2,-h*w/2]}}p.exports=function(){return ee().apply(this,arguments)},p.exports.reset=function(){ee().reset()},p.exports.create=$,p.exports.shapeFromPath=Me,p.exports.shapeFromText=we})(function(){return typeof window!="undefined"?window:typeof self!="undefined"?self:this||{}}(),X,!1);const ue=X.exports;X.exports.create;const Ye=Re({__name:"PurchaseSuccessDialog",props:{purchasedTime:{},hideActions:{type:Boolean},mode:{}},emits:[...ce.emits],setup(I,{expose:v}){v();const{t:p}=De({useScope:"global"}),{dialogRef:u,onDialogHide:x,onDialogOK:A}=ce(),k=Xe(),R=j(k.apiKey),O=j(!1),S=Oe(),{user:D}=Ne(S),E=I,K=j(!0),N=qe(),B=j(!1),W=()=>{!R.value||B.value||(Je(R.value).then(()=>{N.notify({message:p("copy_to_clipboard_success"),icon:"done"}),B.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{B.value=!1},1800))},f={particleCount:100,spread:100,origin:{y:.6},colors:["#FF1493","#00FFFF","#FFD700","#FF4500","#7FFF00","#FF69B4","#40E0D0","#FFA500","#00FF00","#FF00FF"],disableForReducedMotion:!0},q={t:p,dialogRef:u,onDialogHide:x,onDialogOK:A,embeddingStore:k,apiKey:R,isBusy:O,userStore:S,user:D,props:E,isPwd:K,$q:N,isApiKeyCopyDone:B,copyApiKey:W,confettiConfig:f,triggerConfetti:()=>{E.mode!=="generate"&&requestAnimationFrame(()=>{const V=Date.now()+300,Q=()=>{ue({...f,origin:{x:.3+Math.random()*.4,y:.6},zIndex:9999}),Date.now()<V&&requestAnimationFrame(Q)};Q(),setTimeout(()=>{ue.reset()},5300)})}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}});function $e(I,v,p,u,x,A){return oe(),Qe(He,{ref:"dialogRef",onShow:u.triggerConfetti},{default:M(()=>[b(je,{flat:"",square:"",class:"bg-mixed-200"},{default:M(()=>[b(G,null,{default:M(()=>[b(Ue,null,{default:M(()=>[b(ie,{side:""},{default:M(()=>[b(le,{name:p.mode==="generate"?"key":"celebration",size:"2em"},null,8,["name"])]),_:1}),b(ie,null,{default:M(()=>[b(se,{class:"text-h6"},{default:M(()=>[U(z(p.mode==="generate"?u.t("purchase.generation"):u.t("purchase.success")),1)]),_:1}),b(se,{caption:"",class:"text-dim"},{default:M(()=>[U(z(u.t(`purchase.${p.mode==="generate"?"generation_caption":"success_caption"}`,{_purchasedTime:p.purchasedTime})),1)]),_:1})]),_:1})]),_:1})]),_:1}),b(G,null,{default:M(()=>[b(ze,{"input-style":"font-family: monospace",readonly:"","model-value":u.apiKey,"hide-bottom-space":"",type:u.isPwd?"password":"text",filled:"",square:"",label:p.mode==="generate"?u.t("purchase.free_key"):u.t("purchase.api_key"),"input-class":"ellipsis"},{append:M(()=>[b(le,{name:u.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:v[0]||(v[0]=k=>u.isPwd=!u.isPwd)},null,8,["name"])]),prepend:M(()=>[b(J,{flat:"",square:"",icon:u.isApiKeyCopyDone?"done":"content_copy",color:u.isApiKeyCopyDone?"primary":"",onClick:u.copyApiKey,stretch:""},{default:M(()=>[b(Ge,null,{default:M(()=>[U(z(u.t("copy")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["model-value","type","label"])]),_:1}),p.hideActions?Ze("",!0):(oe(),Ke(We,{key:0},[b(G,{class:"q-pa-lg"},{default:M(()=>[U(z(u.t("key_manager.login_explain_long")),1)]),_:1}),b(Ve,{align:"right"},{default:M(()=>[b(J,{flat:"",square:"",label:u.t("key_manager.do_it_later"),onClick:u.onDialogHide},null,8,["label","onClick"]),b(J,{flat:"",square:"",label:u.user.uid?u.t("key_manager.to_dashboard"):u.t("key_manager.login"),color:"primary",onClick:u.onDialogOK,icon:u.user.uid?"key":"login"},null,8,["label","onClick","icon"])]),_:1})],64))]),_:1})]),_:1},512)}const ia=Le(Ye,[["render",$e],["__file","PurchaseSuccessDialog.vue"]]);export{ia as P,oa as Q};
