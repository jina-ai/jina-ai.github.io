import{Q as g,a as _}from"./QItemLabel.e5892677.js";import{P as E,b2 as te,bI as le,e as se,a6 as ie,aA as N,az as re,f as V,w as de,K as ue,J as ce,a5 as me,h as ge,a7 as v,a8 as n,ah as l,an as U,a9 as f,ak as x,ad as t,af as d,ag as i,ae as A,Z as O,ac as P,am as I,aa as fe,ab as pe,bG as be,ai as _e,bC as ve,bB as ye,aO as W}from"./index.c682e0c4.js";import{Q as y}from"./QTooltip.9b59c442.js";import{Q as he}from"./QList.a29cefd0.js";import{Q as we}from"./QBtnDropdown.c76d0441.js";import{C as j}from"./ClosePopup.92783d20.js";import{u as Me}from"./embedding.aa9901d4.js";function ke(c){const u=Object.assign({noopener:!0},c),o=[];for(const s in u){const r=u[s];r===!0?o.push(s):(le(r)||typeof r=="string"&&r!=="")&&o.push(s+"="+r)}return o.join(",")}function G(c,u,o){let s=window.open;if(E.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(c,{openExternal:!0})}const r=s(c,"_blank",ke(o));if(r)return E.is.desktop&&r.focus(),r;u&&u()}var Fe=(c,u,o)=>{if(E.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:c},te,u):G(c,u,o)});return}return G(c,u,o)};const Ce={class:"full-width ellipsis q-pl-md"},Qe=se({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded"],setup(c,{emit:u}){const{t:o}=ie({useScope:"global"}),s=Me(),{models:r,baseDeModel:H,baseEnModel:C,baseZhModel:K,jinaRerankerV1:Z}=N(s),J=re(),{language:M}=N(J),z=V(null);let p=null;const k=V(!1),h=c,b=u,L=()=>{var e;b("chooseModel",(e=K.value)!=null?e:C.value)},B=()=>{var e;b("chooseModel",(e=H.value)!=null?e:C.value)};de(M,e=>{h.category==="embedding"&&(e&&["zh-CN","zh-TW"].includes(e)?L():e==="de"&&B())});const X=()=>{var m;const e=((m=z.value)==null?void 0:m.$el)||z.value;e instanceof HTMLElement?(p=new IntersectionObserver(async a=>{a[0].isIntersecting&&(await ee(),p==null||p.disconnect())},{root:null,threshold:.1}),p.observe(e)):console.error("Element is not an HTMLElement:",e)};ue(()=>{ce(()=>{setTimeout(()=>{X()},100)})}),me(()=>{p&&p.disconnect()});const Y=ge(()=>r.value.filter(e=>{const m=h.category==="multi-embeddings",a=e.request_path,w=m?["multi-embeddings","embedding"]:[h.category];return Array.isArray(a)?a.some(F=>w.includes(F)):w.includes(a)}).sort((e,m)=>m.replicas-e.replicas)),ee=async()=>{k.value=!0,await s.getModels(),k.value=!1,h.category==="embedding"||h.category==="multi-embeddings"?r.value.length>0&&(M.value&&["zh-CN","zh-TW"].includes(M.value)?L():M.value==="de"?B():b("chooseModel",C.value)):h.category==="rank"&&b("chooseModel",Z.value);for(const e of s.models)e.replicas=await s.getReplicas(s.apiKey,e.name);b("modelsLoaded")},ae=e=>{ne("event","embedding_view_model_detail",{location:oe.location.href,model:e}),Fe(`https://huggingface.co/jinaai/${e}`)},ne=window.gtag,oe=window.document,Q=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,m)=>(f(),v(we,{"no-caps":"",flat:"",square:"",stretch:"",icon:"img:"+(e.category==="rank"?l(ve):l(ye)),loading:k.value,"disable-dropdown":k.value,class:U(e.$q.screen.lt.sm?"full-width q-py-md":""),ref_key:"componentRef",ref:z},{label:n(()=>[x("div",Ce,[t(A,{class:U(e.currentModel?"dynamic-text":"")},{default:n(()=>[t(g,{caption:"",class:"text-grey text-left"},{default:n(()=>[d(i(e.category==="rank"?l(o)("embedding.select_rerank_model"):l(o)("embedding.select_embedding_model")),1)]),_:1}),e.currentModel?(f(),v(g,{key:0},{default:n(()=>{var a;return[x("code",null,i((a=e.currentModel)==null?void 0:a.name),1)]}),_:1})):(f(),v(g,{key:1},{default:n(()=>[d(i(l(o)("embedding.none")),1)]),_:1}))]),_:1},8,["class"])])]),default:n(()=>[t(he,null,{default:n(()=>[e.allowNone?O((f(),v(P,{key:0,clickable:"",active:!e.currentModel,onClick:m[0]||(m[0]=a=>b("chooseModel",null)),class:"q-pa-md"},{default:n(()=>[t(A,null,{default:n(()=>[t(g,{overline:"",caption:""},{default:n(()=>[d(i(l(o)("embedding.none")),1)]),_:1}),t(g,{class:"text-weight-bold"},{default:n(()=>[d(i(l(o)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[W],[j]]):I("",!0),(f(!0),fe(_e,null,pe(Y.value,(a,w)=>{var F;return O((f(),v(P,{key:w,clickable:"",active:a.name===((F=e.currentModel)==null?void 0:F.name),onClick:q=>b("chooseModel",a),class:"q-pa-md"},{default:n(()=>[t(A,null,{default:n(()=>[t(g,{overline:"",caption:""},{default:n(()=>[x("code",null,i(a.name),1)]),_:2},1024),t(g,{class:"text-weight-bold"},{default:n(()=>[d(i(l(o)(`embedding.${a.name}_description`)),1)]),_:2},1024),t(g,{caption:"",class:"row"},{default:n(()=>{var q,S,D,R,T,$;return[t(_,{label:a.replicas>0?l(o)("embedding.running"):l(o)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:n(()=>[t(y,{"max-width":"300px"},{default:n(()=>[d(i(l(o)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"]),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(f(),v(_,{key:0,color:a.name!==((q=e.currentModel)==null?void 0:q.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:l(o)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):I("",!0),t(_,{label:a.meta_data.token_length,square:"",color:a.name!==((S=e.currentModel)==null?void 0:S.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(f(),v(_,{key:1,label:a.meta_data.output_dim,square:"",color:a.name!==((D=e.currentModel)==null?void 0:D.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):I("",!0),t(_,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((R=e.currentModel)==null?void 0:R.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),t(_,{label:Q(a.meta_data.language),square:"",color:a.name!==((T=e.currentModel)==null?void 0:T.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.language_explain",{_language:Q(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),t(_,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==(($=e.currentModel)==null?void 0:$.name)?"grey-5":"",style:{"border-radius":"0"},onClick:be(ze=>ae(a.name),["stop"]),clickable:"",label:l(o)("embedding.opensource")},{default:n(()=>[t(y,null,{default:n(()=>[d(i(l(o)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"])]}),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[W],[j]])}),128))]),_:1})]),_:1},8,["icon","loading","disable-dropdown","class"]))}});export{Qe as _};
