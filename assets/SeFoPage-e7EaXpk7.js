import{bS as $e,c1 as ca,cT as _a,cE as ya,bX as pa,dv as ha,dw as ea,cJ as ba,bZ as ka,cQ as wa,cI as Ea,bU as Ta,cM as Pa,j as oe,a2 as se,a3 as p,a4 as K,a5 as t,a6 as a,a7 as re,n as fe,a0 as ie,k as T,a9 as $,af as h,ag as _,aM as ve,aq as Z,bp as ma,q as X,aD as De,aE as qe,W as we,aa as W,a8 as Y,aN as aa,aO as Ve,am as ne,ae as P,ab as B,du as ta,aQ as ye,aP as _e,ah as ae,ai as de,ad as j,c6 as Ae,b9 as Sa,aL as Me,aj as be,u as Re,m as N,w as Be,ap as te,b8 as fa,_ as i,av as Ra,s as Da,ax as Aa,p as he,az as Va,J as xa,V as Ka,b6 as La,b1 as Ue,aR as Ia,dx as xe,aA as Oa,b7 as Ca,ao as qa,an as Ma,cf as Ba}from"./index-9BfnSc2e.js";import{Q as Ua}from"./QBanner-B9TShvHy.js";import{Q as Na}from"./QPage-DHZZKYMK.js";import{K as ce,E as Q,g as ra}from"./se-fo-Czb9jmnD.js";import{d as ja,a as Ne,u as ge,Q as Ga,b as Fa}from"./use-dialog-plugin-component-5SV6JwRd.js";import{j as Qa,u as Ha,c as za,M as Ya,k as Wa,L as Xa,U as Ja,A as Za,i as $a,E as et,a as at,R as tt,C as rt,b as ot,I as st,T as nt,S as oa,B as lt,D as it,e as ut}from"./BrowserInfoDialog-JGPS2RkV.js";import{P as dt,Q as ct}from"./PurchaseTab-C-yDJRKa.js";import{Q as ee}from"./QTooltip-CdHor4tc.js";import{c as le,d as Te,e as Pe,f as je,Q as _t}from"./date-DFxSzWCi.js";import{u as Ee,A as mt,U as ft,R as gt}from"./finetune-DJOfHFSk.js";import{C as Ge}from"./ClosePopup-DKQuwxVq.js";import{Q as pe,a as ke,b as vt}from"./QLinearProgress-HyHjjfmK.js";import{Q as V}from"./QItemLabel-DHrnoIQr.js";import{c as Oe}from"./copy-to-clipboard-eV_TC7i8.js";import{P as yt}from"./PurchaseDialog-BNScjHfa.js";import{b as me,Q as pt,a as ht}from"./QChip-CuRen7Mq.js";import{Q as Se}from"./QList-BY7ifkRx.js";import{t as sa,c as bt,L as kt}from"./LoginDialog-BnFWY_87.js";import{t as na}from"./toNumber-C04byEhu.js";import{a as wt,c as Et}from"./_setToArray-QHWvHqW0.js";import{a as Tt,c as Pt,f as St,o as Rt}from"./orderBy-BwW1w8wY.js";import{_ as Dt}from"./dynamic-import-helper-BheWnx7M.js";import{Q as At}from"./QForm-BfiEhnpP.js";import{C as Vt}from"./ChatComponent-DdviZcO4.js";import{u as la}from"./useMetaTags-SBRWo-4G.js";import{u as xt}from"./useModels-B3EooCUh.js";import{C as Kt}from"./ContactSalesForm-BRE0o53B.js";import{Q as ia}from"./QBadge-CORwORlm.js";import{Q as Lt}from"./QSpinnerRings-CSAJs4Am.js";import"./QMenu-DFQmh0S3.js";import"./position-engine-Axka7HgE.js";import"./blogs-BRoWK3yq.js";import"./VideoDialog-CP0NNMN2.js";import"./TouchPan-DOA-Qnst.js";import"./touch-BjYP5sR0.js";import"./QTab-CuDMVJA_.js";import"./QTabs-DIMQHWS-.js";import"./QResizeObserver-43XEfT3C.js";import"./QBtnDropdown-BAvl7nSV.js";import"./QExpansionItem-OpjJorMk.js";import"./use-fullscreen-UCytSZ8e.js";import"./package-D9JPNs5w.js";import"./isSymbol-ClsD4an6.js";import"./QScrollObserver-BRE9f5h9.js";import"./QSpinnerDots-XLvaI1sz.js";var ua=$e?$e.isConcatSpreadable:void 0;function It(d){return ca(d)||_a(d)||!!(ua&&d&&d[ua])}function Ot(d,s,n,e,m){var f=-1,r=d.length;for(n||(n=It),m||(m=[]);++f<r;){var o=d[f];n(o)&&Tt(m,o)}return m}var Ke=function(){return ya.Date.now()},Ct="Expected a function",qt=Math.max,Mt=Math.min;function Bt(d,s,n){var e,m,f,r,o,c,v=0,b=!1,g=!1,R=!0;if(typeof d!="function")throw new TypeError(Ct);s=na(s)||0,pa(n)&&(b=!!n.leading,g="maxWait"in n,f=g?qt(na(n.maxWait)||0,s):f,R="trailing"in n?!!n.trailing:R);function y(q){var w=e,L=m;return e=m=void 0,v=q,r=d.apply(L,w),r}function E(q){return v=q,o=setTimeout(k,s),b?y(q):r}function I(q){var w=q-c,L=q-v,l=s-w;return g?Mt(l,f-L):l}function x(q){var w=q-c,L=q-v;return c===void 0||w>=s||w<0||g&&L>=f}function k(){var q=Ke();if(x(q))return O(q);o=setTimeout(k,I(q))}function O(q){return o=void 0,R&&e?y(q):(e=m=void 0,r)}function D(){o!==void 0&&clearTimeout(o),v=0,e=c=m=o=void 0}function U(){return o===void 0?r:O(Ke())}function F(){var q=Ke(),w=x(q);if(e=arguments,m=this,c=q,w){if(o===void 0)return E(c);if(g)return clearTimeout(o),o=setTimeout(k,s),y(c)}return o===void 0&&(o=setTimeout(k,s)),r}return F.cancel=D,F.flush=U,F}var Ut=200;function Nt(d,s,n,e){var m=-1,f=ja,r=!0,o=d.length,c=[],v=s.length;if(!o)return c;s.length>=Ut&&(f=Et,r=!1,s=new wt(s));e:for(;++m<o;){var b=d[m],g=b;if(b=b!==0?b:0,r&&g===g){for(var R=v;R--;)if(s[R]===g)continue e;c.push(b)}else f(s,g,e)||c.push(b)}return c}var jt=ha(function(d,s){return ea(d)?Nt(d,Ot(s,1,ea)):[]}),Gt="[object Map]",Ft="[object Set]",Qt=Object.prototype,Ht=Qt.hasOwnProperty;function zt(d){if(d==null)return!0;if(ba(d)&&(ca(d)||typeof d=="string"||typeof d.splice=="function"||ka(d)||wa(d)||_a(d)))return!d.length;var s=Pt(d);if(s==Gt||s==Ft)return!d.size;if(Ea(d))return!St(d).length;for(var n in d)if(Ht.call(d,n))return!1;return!0}var Yt="[object Number]";function Wt(d){return typeof d=="number"||Ta(d)&&Pa(d)==Yt}function Xt(d){return Wt(d)&&d!=+d}const Jt=oe({__name:"ContainedPurchaseTab",setup(d,{expose:s}){s();const n={PurchaseTab:dt};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function Zt(d,s,n,e,m,f){return p(),K(re,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.PurchaseTab)]),_:1})}const $t=se(Jt,[["render",Zt],["__file","ContainedPurchaseTab.vue"]]),er=oe({__name:"AddKeyDialog",setup(d,{expose:s}){s();const n=fe(),{t:e}=ie({useScope:"global"}),{dialogRef:m,onDialogOK:f}=Ne(),r=ge(),o=Ee(),c=T(""),v=T(!1),b=T(!0),g=T(""),R=T(!0),E={$q:n,t:e,dialogRef:m,onDialogOK:f,embeddingStore:r,apiKeyStore:o,apiKey:c,isBusy:v,isKeyValid:b,errorMsg:g,isPwd:R,onAdd:async()=>{if(c.value.trim()===""){b.value=!1,g.value=e("key_manager.invalid_key");return}try{v.value=!0,await r.getKeyInfo(c.value)?await o.addKey(c.value)?(n.notify({message:e("key_manager.add_success",{_key:le(c.value)}),icon:"done"}),f()):(b.value=!1,g.value=e("key_manager.existing_key")):(b.value=!1,g.value=e("key_manager.invalid_key"))}catch(I){b.value=!1,g.value=I instanceof Error?I.message:String(I)}finally{v.value=!1}},get KEY_ACTIONS(){return ce}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}});function ar(d,s,n,e,m,f){return p(),K(qe,{ref:"dialogRef",persistent:""},{default:t(()=>[a(re,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a($,null,{default:t(()=>[h(_(e.t("key_manager.add_key_explain")),1)]),_:1}),a($,{class:"flex justify-center"},{default:t(()=>[a(ve,{modelValue:e.apiKey,"onUpdate:modelValue":s[1]||(s[1]=r=>e.apiKey=r),autofocus:"",filled:"",square:"",clearable:"",class:"full-width","input-class":"ellipsis",label:e.t("key_manager.add"),error:!e.isKeyValid,"error-message":e.errorMsg,type:e.isPwd?"password":"text",style:{width:"400px"}},{prepend:t(()=>[a(Z,{name:"o_key"})]),append:t(()=>[a(Z,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[0]||(s[0]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","label","error","error-message","type"])]),_:1}),a(ma,{align:"left"},{default:t(()=>[a(X,{flat:"",square:"",label:e.t("key_manager.generate_new_key"),disable:e.isBusy,onClick:s[2]||(s[2]=r=>e.onDialogOK(e.KEY_ACTIONS.GENERATE))},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.generate_new_key_tooltip")),1)]),_:1})]),_:1},8,["label","disable"]),a(Ga),De(a(X,{flat:"",square:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Ge]]),a(X,{flat:"",square:"",label:e.t("key_manager.ok"),color:"primary",loading:e.isBusy,onClick:e.onAdd},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},512)}const tr=se(er,[["render",ar],["__file","AddKeyDialog.vue"]]),rr=oe({__name:"UsageChart",props:{apiKey:{},usage:{}},setup(d,{expose:s}){const n=d,e=()=>{var x;const f=document.getElementById(`usage_${n.apiKey._id}`),r=f.getContext("2d"),o=window.devicePixelRatio||1,c=f==null?void 0:f.clientWidth,v=f==null?void 0:f.clientHeight;f.width=c*o,f.height=v*o,r.scale(o,o);const b=new Date,g=Array.from({length:7},(k,O)=>{const D=new Date(b);return D.setDate(D.getDate()-O),Te.formatDate(D,"YYYY-MM-DD")}).reverse(),R=(x=n.usage)==null?void 0:x.reduce((k,O)=>{if(O.type==="consume"){const D=Te.formatDate(O.created_at,"YYYY-MM-DD");k[D]=(k[D]||0)+O.quantity}return k},{}),y=g.map(k=>(R==null?void 0:R[k])||0),E=v;let I=Math.max(...y);I===0&&(I=1),r.clearRect(0,0,f.width,f.height),r.beginPath(),r.moveTo(0,E-y[0]/I*E),y.forEach((k,O)=>{const D=c/(y.length-1)*O,U=E-k/I*E;r.lineTo(D,U)}),r.strokeStyle="#81E3EE",r.lineWidth=1,r.stroke(),r.shadowColor="rgba(129, 227, 238, 0.5)",r.shadowBlur=10,r.shadowOffsetX=0,r.shadowOffsetY=0,r.beginPath(),r.moveTo(0,E),y.forEach((k,O)=>{const D=c/(y.length-1)*O,U=E-k/I*E;r.lineTo(D,U)}),r.lineTo(c,E),r.closePath(),r.fillStyle="rgba(129, 227, 238, 0.2)",r.fill()};s({initChart:e}),we(()=>{e()});const m={props:n,initChart:e};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),or={style:{width:"100%",height:"100%",padding:"12px 24px",position:"relative"}},sr=["id"];function nr(d,s,n,e,m,f){return p(),W("div",or,[Y("canvas",{id:`usage_${n.apiKey._id}`,style:{width:"100%",height:"100%"}},null,8,sr)])}const lr=se(rr,[["render",nr],["__file","UsageChart.vue"]]),ir=oe({__name:"UsageReminderItem",props:aa({apiKey:{},isPaidKey:{type:Boolean}},{email:{type:String},emailModifiers:{},autoReminder:{type:Boolean},autoReminderModifiers:{},thresholds:{type:Array},thresholdsModifiers:{}}),emits:aa(["update"],["update:email","update:autoReminder","update:thresholds"]),setup(d,{expose:s,emit:n}){s();const e=d,m=n,f=Ve(d,"email"),r=Ve(d,"autoReminder"),o=Ve(d,"thresholds"),{t:c}=ie({useScope:"global"}),v=fe(),b=ge(),g=Ee(),{isBusyState:R}=ne(g),y=T([{label:"10M",value:1e7},{label:"100M",value:1e8},{label:"1B",value:1e9}]),E=T(y.value),I=T(!1),x=(l,u)=>{const S=Number(l);if(l.length>0&&!Xt(S)&&o.value.length<3){if(S<0||S>1e12){I.value=!0;return}I.value=!1;const M={label:Pe(S),value:S};y.value.some(A=>A.value===S)||y.value.push(M),u(M,"toggle")}},k=l=>{l===""?E.value=y.value:E.value=y.value.filter(u=>u.value===Number(l)||u.label===l).concat()},O=(l,u)=>{u(()=>k(l))},D=async l=>{var S,M;const u=l||f.value;if((S=o.value)!=null&&S.length&&u){R.value.add(e.apiKey);try{await b.setBalanceNotification(e.apiKey,{email:u,thresholds:((M=o.value)==null?void 0:M.slice(0,3))||[]})}finally{R.value.delete(e.apiKey)}m("update")}},U=async l=>{!l||!sa(l)||l===f.value||D(l)},F=Bt(()=>{D()},1e3),q=l=>{var S,M,A;const u=(S=o.value)==null?void 0:S.indexOf(l);u===void 0||u<0||((M=o.value)==null||M.splice(u,1),(A=o.value)!=null&&A.length&&D())},w=l=>{var u;!l&&((u=o.value)!=null&&u.length)&&f.value&&v.dialog({title:c("key_manager.auto_reminder_cancel_title"),message:c("key_manager.auto_reminder_cancel_message"),cancel:!0}).onOk(async()=>{r.value=l,R.value.add(e.apiKey);try{await b.cancelBalanceNotification(e.apiKey)?o.value=[]:r.value=!l}finally{R.value.delete(e.apiKey)}m("update")}).onCancel(()=>{r.value=!0})};we(()=>{const l=jt(o.value,y.value.map(u=>u.value));l.length&&(y.value.push(...l.map(u=>({label:Pe(u),value:u}))),y.value=Rt(y.value,"value","asc"))});const L={props:e,emit:m,email:f,autoReminder:r,thresholds:o,t:c,$q:v,embeddingStore:b,apiKeyStore:g,isBusyState:R,allOptions:y,filterOptions:E,hasError:I,createValue:x,updateFilterOptions:k,filterFn:O,saveConfig:D,saveEmail:U,saveThresholds:F,removeThreshold:q,updateAutoReminder:w,get QPopupEdit(){return Qa},get QSelect(){return pe},get testEmail(){return sa},get formatNumberShort(){return Pe}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),ur={class:"ellipsis"};function dr(d,s,n,e,m,f){return p(),K(j,{clickable:"","click.stop":""},{default:t(()=>[e.$q.screen.gt.sm?(p(),K(P,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"alarm_smart_wake"})]),_:1})):B("",!0),a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("key_manager.auto_reminder"))+" ",1),a(Z,{name:n.isPaidKey?"verified":"lock"},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(V,{caption:"",lines:"2"},{default:t(()=>[h(_(e.t("key_manager.auto_reminder_description"))+" ",1),a(ee,{"max-width":"40rem"},{default:t(()=>[h(_(e.t("key_manager.auto_reminder_description")),1)]),_:1})]),_:1}),e.autoReminder?(p(),K(V,{key:0,class:"cursor-pointer"},{default:t(()=>[h(_(e.t("key_manager.auto_reminder_email"))+": ",1),Y("b",null,_(e.email),1),n.isPaidKey&&e.autoReminder?(p(),K(Z,{key:0,name:"edit",size:"20px",class:"on-right",color:"primary"})):B("",!0),a(e.QPopupEdit,{modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=r=>e.email=r),buttons:"","label-set":e.t("key_manager.save"),"label-cancel":e.t("key_manager.cancel"),validate:e.testEmail,disable:!e.autoReminder,onSave:e.saveEmail},{default:t(r=>[a(ve,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,dense:"",autofocus:"",rules:[o=>e.testEmail(o)||e.t("key_manager.invalid_email")],label:e.t("key_manager.auto_reminder_email"),onKeyup:ta(ye(r.set,["stop"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","label","onKeyup"])]),_:1},8,["modelValue","label-set","label-cancel","validate","disable"])]),_:1})):B("",!0)]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.autoReminder,"onUpdate:modelValue":[s[1]||(s[1]=r=>e.autoReminder=r),e.updateAutoReminder],color:"primary",disable:!n.isPaidKey,"checked-icon":"check","unchecked-icon":"close"},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.auto_reminder_toggle")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),_:1}),a(P,{side:""},{default:t(()=>[a(e.QSelect,{square:"",outline:"","use-input":"","use-chips":"",multiple:"","emit-value":"","map-options":"","new-value-mode":"add",style:{"max-width":"160px"},modelValue:e.thresholds,"onUpdate:modelValue":[s[2]||(s[2]=r=>e.thresholds=r),e.saveThresholds],"max-values":3,error:e.hasError,"error-message":e.t("key_manager.auto_reminder_threshold_error"),label:e.t("key_manager.auto_reminder_threshold"),disable:!e.autoReminder,options:e.filterOptions,onNewValue:e.createValue,onFilter:e.filterFn,onKeyup:s[3]||(s[3]=ta(ye(()=>{},["stop"]),["enter"]))},{selected:t(()=>[(p(!0),W(ae,null,de(e.thresholds,r=>(p(),K(me,{dense:"",key:r,square:"",removable:"","text-color":"primary",class:"bg-mixed-300",onRemove:o=>e.removeThreshold(r)},{default:t(()=>{var o;return[Y("div",ur,_(`< ${((o=e.allOptions.find(c=>c.value===r))==null?void 0:o.label)||e.formatNumberShort(r)} ${e.t("embedding.tokens")}`),1),a(ee,null,{default:t(()=>[h(_(r),1)]),_:2},1024)]}),_:2},1032,["onRemove"]))),128))]),option:t(r=>[a(j,Ae(r.itemProps,{clickable:""}),{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(`< ${r.opt.label} ${e.t("embedding.tokens")}`)+" ",1),a(ee,null,{default:t(()=>[h(_(r.opt.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error","error-message","label","disable","options","onUpdate:modelValue"])]),_:1})]),_:1})}const cr=se(ir,[["render",dr],["__file","UsageReminderItem.vue"]]),_r=oe({__name:"RevokeKeyDialog",props:{apiKey:{},isPremiumKey:{type:Boolean}},setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global"}),{dialogRef:e,onDialogOK:m}=Ne(),f=Ee(),{keys:r,keysInfoCache:o}=ne(f),c=T(""),v=T(!1),b=T(""),R={t:n,dialogRef:e,onDialogOK:m,apiKeyStore:f,keys:r,keysInfoCache:o,confirmKey:c,withTransfer:v,transferKey:b,onConfirm:async()=>{v.value&&b.value?m(b.value):m()},get formatKey(){return le}};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}});function mr(d,s,n,e,m,f){return p(),K(qe,{ref:"dialogRef"},{default:t(()=>[a(re,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a($,{class:"text-h6"},{default:t(()=>[h(_(e.t("key_manager.revoke")),1)]),_:1}),a($,null,{default:t(()=>[Y("div",null,_(e.t("key_manager.revoke_message")),1),a(ve,{autofocus:"",filled:"",square:"",class:"q-mt-md",modelValue:e.confirmKey,"onUpdate:modelValue":s[0]||(s[0]=r=>e.confirmKey=r),rules:[r=>r===n.apiKey||e.t("key_manager.revoke_error")],label:e.t("key_manager.revoke_label")},{prepend:t(()=>[a(Z,{name:"o_key"})]),_:1},8,["modelValue","rules","label"]),n.isPremiumKey?(p(),K(Sa,{key:0,modelValue:e.withTransfer,"onUpdate:modelValue":s[1]||(s[1]=r=>e.withTransfer=r),label:e.t("key_manager.transfer_before_revoke")},null,8,["modelValue","label"])):B("",!0),n.isPremiumKey&&e.withTransfer?(p(),K(pe,{key:1,square:"",filled:"","emit-value":"",clearable:"",modelValue:e.transferKey,"onUpdate:modelValue":s[2]||(s[2]=r=>e.transferKey=r),options:e.keys.filter(r=>r.key!==n.apiKey&&e.keysInfoCache[r.key].user_id),"option-value":r=>r.key,label:e.t("key_manager.transfer_label")},Me({"no-option":t(()=>[a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(r=>[a(j,Ae(r.itemProps,{clickable:""}),{default:t(()=>[a(P,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:be({"golden-foil":e.apiKeyStore.isPremiumPaidKey(r.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(r.opt.key)})},null,8,["class"])]),_:2},1024),a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[Y("code",null,_(e.formatKey(r.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(me,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label"])):B("",!0)]),_:1}),a(ma,{align:"right"},{default:t(()=>[De(a(X,{flat:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Ge]]),a(X,{flat:"",label:e.t("key_manager.ok"),color:"primary",disable:e.confirmKey!==n.apiKey,onClick:e.onConfirm},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},512)}const fr=se(_r,[["render",mr],["__file","RevokeKeyDialog.vue"]]),gr=oe({__name:"SettingsDialog",props:{apiKey:{}},setup(d,{expose:s}){s();const n=d,e=fe(),{t:m}=ie({useScope:"global"}),{dialogRef:f,onDialogOK:r}=Ne(),o=Re(),{user:c}=ne(o),v=Ee(),{isBusyState:b,keys:g,primaryKey:R,keysInfoCache:y}=ne(v),E=T(),I=T(!1),x=T(""),k=T([]),O=T(!0),D=T(1e6),U=T(""),F=N(()=>!v.isFreeKey(n.apiKey)),q=N(()=>v.isPremiumPaidKey(n.apiKey)),w=N(()=>{var G;return F.value&&!!((G=E.value)!=null&&G.metadata.auto_recharge)}),L=N(()=>{var G;return!!((G=E==null?void 0:E.value)!=null&&G.user_id)}),l=N(()=>!L.value||b.value.has(n.apiKey)),u=async()=>{await v.getKeyInfo(n.apiKey,!0),S()},S=async()=>{var G,ue,Fe,Qe,He,ze,Ye,We,Xe,Je,Ze;E.value=y.value[n.apiKey],I.value=!zt((ue=(G=E.value)==null?void 0:G.wallet)==null?void 0:ue.metadata),x.value=((He=(Qe=(Fe=E.value)==null?void 0:Fe.wallet)==null?void 0:Qe.metadata)==null?void 0:He.notification_email)||c.value.email||"",k.value=((We=(Ye=(ze=E.value)==null?void 0:ze.wallet)==null?void 0:Ye.metadata)==null?void 0:We.notification_thresholds)||[],O.value=((Xe=E.value)==null?void 0:Xe.metadata.auto_recharge)||!1,D.value=((Ze=(Je=E.value)==null?void 0:Je.metadata)==null?void 0:Ze.threshold)||1e6};S();const M=()=>{if(R.value===n.apiKey&&g.value.length===1){e.notify({message:m("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({title:m("key_manager.remove_title"),message:m("key_manager.remove_message"),cancel:!0,persistent:!0}).onOk(async()=>{var G;await v.removeKey(n.apiKey),e.notify({message:m("key_manager.remove_success",{_key:le(n.apiKey)}),icon:"done"}),R.value===n.apiKey&&v.setPrimaryKey(g.value[0].key),(G=f.value)==null||G.hide()})},A=()=>{if(R.value===n.apiKey&&g.value.length===1){e.notify({message:m("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({component:fr,componentProps:{apiKey:n.apiKey,isPremiumKey:q.value}}).onOk(G=>{r({action:ce.REVOKE,key:n.apiKey,transferTo:G})})},C=G=>{var ue;G&&e.dialog({title:m("key_manager.transfer_title"),message:`<div>
    ${m("key_manager.transfer_message",{_tokens:"<b>"+je(((ue=E.value)==null?void 0:ue.wallet.regular_balance)||0)+"</b>",_source:'<code class="bg-mixed-300">'+le(n.apiKey)+"</code>",_target:'<code class="bg-mixed-300">'+le(U.value)+" </code>"})}
      <div>`,html:!0,cancel:!0,persistent:!0}).onOk(async()=>{r({action:ce.TRANSFER,source:n.apiKey,target:U.value})})},J=T(!1),H=()=>{!n.apiKey||J.value||(Oe(n.apiKey).then(()=>{e.notify({message:m("copy_to_clipboard_success"),icon:"done"}),J.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{J.value=!1},1800))};Be(()=>y.value[n.apiKey],()=>{S()});const z={props:n,$q:e,t:m,dialogRef:f,onDialogOK:r,userStore:o,user:c,apiKeyStore:v,isBusyState:b,keys:g,primaryKey:R,keysInfoCache:y,apiKeyInfo:E,autoReminder:I,email:x,reminderThresholds:k,autoRecharge:O,rechargeThreshold:D,transferKey:U,isPaidKey:F,isPremiumPaidKey:q,isAutoCharge:w,isInputApiKeyValid:L,isInputApiKeyDisabled:l,getKeyInfo:u,init:S,onRemove:M,onRevoke:A,onTransfer:C,isApiKeyCopyDone:J,copyApiKey:H,get formatKey(){return le},AutoRechargeItem:mt,UsageReminderItem:cr};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}});function vr(d,s,n,e,m,f){return p(),K(qe,{ref:"dialogRef",onBeforeShow:e.getKeyInfo},{default:t(()=>[a(re,{class:"bg-mixed-200",flat:"",square:"",style:{width:"900px","max-width":"80vw"}},{default:t(()=>[a($,null,{default:t(()=>[a(j,null,{default:t(()=>[e.$q.screen.gt.sm?(p(),K(P,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"settings"})]),_:1})):B("",!0),a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("key_manager.settings")),1)]),_:1}),a(V,{caption:"",style:{"font-family":"monospace"},lines:"1",class:"text-primary cursor-pointer",onClick:e.copyApiKey},{default:t(()=>[a(me,{icon:"o_key",label:e.formatKey(e.props.apiKey),square:"",size:"sm",class:"bg-mixed-300"},null,8,["label"])]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[De(a(X,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ge]])]),_:1})]),_:1})]),_:1}),a(te),e.isBusyState.has(n.apiKey)?(p(),K(ke,{key:0,indeterminate:"",size:"1px"})):B("",!0),a($,null,{default:t(()=>[a(Se,{class:"q-gutter-y-sm"},{default:t(()=>[a(e.AutoRechargeItem,{"api-key":n.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPaidKey,"is-auto-charge":e.isAutoCharge,mode:"dashboard","auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":s[0]||(s[0]=r=>e.autoRecharge=r),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":s[1]||(s[1]=r=>e.rechargeThreshold=r),disable:e.isInputApiKeyDisabled,"navigate-to-purchase":!0,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable"]),a(e.UsageReminderItem,{"api-key":n.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPremiumPaidKey,"auto-reminder":e.autoReminder,"onUpdate:autoReminder":s[2]||(s[2]=r=>e.autoReminder=r),email:e.email,"onUpdate:email":s[3]||(s[3]=r=>e.email=r),thresholds:e.reminderThresholds,"onUpdate:thresholds":s[4]||(s[4]=r=>e.reminderThresholds=r),onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","auto-reminder","email","thresholds"]),a(j,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(p(),K(P,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"sync"})]),_:1})):B("",!0),a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("key_manager.transfer_title"))+" ",1),a(Z,{name:e.isPremiumPaidKey?"verified":"lock"},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(V,{caption:"",lines:"2"},{default:t(()=>[h(_(e.t("key_manager.transfer_explain")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(pe,{square:"",outline:"","emit-value":"",clearable:"",style:{width:"220px"},modelValue:e.transferKey,"onUpdate:modelValue":[s[5]||(s[5]=r=>e.transferKey=r),e.onTransfer],options:e.keys.filter(r=>{var o;return r.key!==n.apiKey&&((o=e.keysInfoCache[r.key])==null?void 0:o.user_id)}),"option-value":r=>r.key,label:e.t("key_manager.transfer_label"),disable:!e.isPremiumPaidKey},Me({"no-option":t(()=>[a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(r=>[a(j,Ae(r.itemProps,{clickable:""}),{default:t(()=>[a(P,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:be({"golden-foil":e.apiKeyStore.isPremiumPaidKey(r.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(r.opt.key)})},null,8,["class"])]),_:2},1024),a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[Y("code",null,_(e.formatKey(r.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(me,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label","disable"])]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(p(),K(P,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"delete",color:"negative"})]),_:1})):B("",!0),a(P,null,{default:t(()=>[a(V,{class:"text-bold text-negative"},{default:t(()=>[h(_(e.t("key_manager.remove_title")),1)]),_:1}),a(V,{caption:"",lines:"2"},{default:t(()=>[h(_(e.t("key_manager.remove_explain")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(X,{flat:"",square:"",color:"negative",label:e.t("key_manager.remove"),onClick:e.onRemove,disable:e.isBusyState.has(n.apiKey)},null,8,["label","disable"])]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(p(),K(P,{key:0,avatar:""},{default:t(()=>[a(Z,{name:"delete_forever",color:"negative"})]),_:1})):B("",!0),a(P,null,{default:t(()=>[a(V,{class:"text-bold text-negative"},{default:t(()=>[h(_(e.t("key_manager.revoke_title")),1)]),_:1}),a(V,{caption:"",lines:"2"},{default:t(()=>[h(_(e.t("key_manager.revoke_explain")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(X,{flat:"",square:"",color:"negative",label:e.t("key_manager.revoke"),onClick:e.onRevoke,disable:e.isBusyState.has(n.apiKey)||!e.isInputApiKeyValid},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)}const yr=se(gr,[["render",vr],["__file","SettingsDialog.vue"]]),pr=oe({__name:"KeyItem",props:{apiKey:{}},emits:["execute"],setup(d,{expose:s,emit:n}){s();const e=d,m=n,{t:f}=ie({useScope:"global"}),r=fe(),o=Ee(),c=ge(),{keysInfoCache:v,isBusyState:b}=ne(o),g=Re(),{user:R}=ne(g),y=T(""),E=N({get:()=>e.apiKey.isPrimary?e.apiKey.key:"",set:async A=>{var C;if(A){if(await o.getKeyInfo(e.apiKey.key,!0),!((C=v.value[e.apiKey.key])!=null&&C.user_id)){r.notify({message:f("key_manager.invalid_key"),icon:"warning"});return}await o.setPrimaryKey(e.apiKey.key),c.apiKey=e.apiKey.key,r.notify({caption:f("key_manager.primary_key_set_caption"),message:f("key_manager.primary_key_set",{_apiKey:le(e.apiKey.key)}),icon:"done"})}}}),I=N(()=>o.isPremiumPaidKey(e.apiKey.key)),x=N(()=>o.isPaidKey(e.apiKey.key)),k=N(()=>o.isFreeKey(e.apiKey.key)),O=N(()=>{var A;return!((A=v.value[e.apiKey.key])!=null&&A.user_id)}),D=N(()=>{var A,C,J;return(J=(C=(A=v.value[e.apiKey.key])==null?void 0:A.wallet)==null?void 0:C.metadata)==null?void 0:J.notification_email}),U=N(()=>{var A,C,J;return(J=(C=(A=v.value[e.apiKey.key])==null?void 0:A.wallet)==null?void 0:C.metadata)==null?void 0:J.notification_thresholds}),F=N(()=>{var C,J,H;const A=Array.from({length:7},(z,G)=>{const ue=new Date(Date.now());return ue.setDate(ue.getDate()-G),Te.formatDate(ue,"YYYY-MM-DD")});return Pe((H=(J=(C=v.value[e.apiKey.key])==null?void 0:C.usage)==null?void 0:J.reduce((z,G)=>G.type==="consume"&&A.includes(Te.formatDate(G.created_at,"YYYY-MM-DD"))?z+G.quantity:z,0))!=null?H:0)}),q=()=>{r.dialog({component:yt,componentProps:{purchaseKey:e.apiKey.key}})},w=A=>{!A||y.value||(Oe(A).then(()=>{r.notify({message:f("copy_to_clipboard_success"),icon:"done"}),y.value=A,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href,subLocation:"sefo-api-key-manager"})}),setTimeout(()=>{y.value=""},1800))},L=A=>{r.dialog({component:ft,componentProps:{apiKey:A}})},l=A=>{r.dialog({component:yr,componentProps:{apiKey:A}}).onOk(C=>{m("execute",C.action,C)})},u=T(!1),M={props:e,emit:m,t:f,$q:r,apiKeyStore:o,embeddingStore:c,keysInfoCache:v,isBusyState:b,userStore:g,user:R,isApiKeyCopyDone:y,primaryKey:E,isPremiumPaidKey:I,isPaidKey:x,isFreeKey:k,isInvalidKey:O,notifyEmail:D,notifyThresholds:U,totalUsage:F,onBuy:q,onCopy:w,openUsageHistoryDialog:L,openSettingsDialog:l,isShareBusy:u,onShare:async()=>{u.value||r.dialog({message:f("key_manager.share_key_confirm_message"),title:f("key_manager.share_key_confirm_title"),ok:{flat:!0,icon:"content_copy",padding:"md",square:!0,label:f("key_manager.copy_share_link"),textColor:"primary"}}).onOk(async()=>{var H,z;u.value=!0;const A=window.location.origin+"/api-dashboard",C=e.apiKey.key,J=R.value.displayName||((z=(H=R.value.email)==null?void 0:H.split("@"))==null?void 0:z[0])||"";try{const G=await bt(A,J,C);Oe(G).then(()=>{r.notify({message:f("key_manager.share_link_copied"),icon:"done"})})}catch(G){console.error(G),r.notify({message:G instanceof Error?G.message:String(G),icon:"warning"})}finally{u.value=!1}})},get date(){return Te},UsageChart:lr,get formatNumber(){return je},get formatNumberShort(){return Pe},get formatKey(){return le}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),hr={class:"column full-width"},br={style:{"font-family":"monospace"}},kr={class:"row full-height"};function wr(d,s,n,e,m,f){return p(),W("div",hr,[e.isBusyState.has(n.apiKey.key)?(p(),K(ke,{key:0,indeterminate:"",size:"1px"})):B("",!0),a(j,{class:be(["full-width key-item",{column:e.$q.screen.lt.md,"text-dim":e.isInvalidKey}]),tag:"label"},{default:t(()=>[a(P,{side:""},{default:t(()=>[a(fa,{disable:e.isInvalidKey,modelValue:e.primaryKey,"onUpdate:modelValue":s[0]||(s[0]=r=>e.primaryKey=r),val:n.apiKey.key},null,8,["disable","modelValue","val"]),a(ee,null,{default:t(()=>[h(_(e.primaryKey===n.apiKey.key?e.t("key_manager.primary_key_set_caption"):e.t("key_manager.primary_key")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(Z,{name:"o_key",class:be({"golden-foil":e.isPremiumPaidKey,"silver-foil":!e.isPremiumPaidKey&&e.isPaidKey})},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.isInvalidKey?e.t("key_manager.invalid_key"):e.isFreeKey?e.t("key_manager.free_key"):e.isPaidKey?e.t("paywall.standard_key"):e.t("key_manager.subscribed_key")),1)]),_:1})]),_:1},8,["class"])]),_:1}),a(P,{class:"col"},{default:t(()=>{var r,o,c;return[(r=n.apiKey.metadata)!=null&&r.sharedFrom?(p(),K(V,{key:0,caption:""},{default:t(()=>[h(_(e.t("key_manager.shared_from",{_user:n.apiKey.metadata.sharedFrom})),1)]),_:1})):B("",!0),a(V,{class:"row items-center q-gutter-x-sm"},{default:t(()=>{var v;return[Y("span",br,_(e.formatKey(n.apiKey.key)),1),e.notifyEmail&&((v=e.notifyThresholds)!=null&&v.length)?(p(),K(Z,{key:0,name:"alarm_smart_wake"},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.auto_reminder_info",{_email:e.notifyEmail,_threshold:e.notifyThresholds.map(b=>e.formatNumberShort(b)).join(", ")})),1)]),_:1})]),_:1})):B("",!0),a(X,{flat:"",square:"",size:"sm",icon:e.isApiKeyCopyDone===n.apiKey.key?"check":"content_copy",color:e.isApiKeyCopyDone===n.apiKey.key?"primary":"",onClick:s[1]||(s[1]=ye(b=>e.onCopy(n.apiKey.key),["stop"]))},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.copy")),1)]),_:1})]),_:1},8,["icon","color"])]}),_:1}),e.isInvalidKey?B("",!0):(p(),K(V,{key:1,caption:"",class:be(((c=(o=e.keysInfoCache[n.apiKey.key])==null?void 0:o.wallet)==null?void 0:c.total_balance)<0?"text-negative":"")},{default:t(()=>{var v,b,g;return[h(_(e.formatNumber((g=(b=(v=e.keysInfoCache[n.apiKey.key])==null?void 0:v.wallet)==null?void 0:b.total_balance)!=null?g:0)+" "+e.t("embedding.tokens")),1)]}),_:1},8,["class"])),e.isInvalidKey&&!e.isBusyState.has(n.apiKey.key)?(p(),K(V,{key:2,caption:"",class:"text-negative"},{default:t(()=>[a(Z,{name:"warning"}),h(" "+_(e.t("key_manager.invalid_key")),1)]),_:1})):B("",!0)]}),_:1}),a(P,null,{default:t(()=>{var r;return[(r=e.keysInfoCache[n.apiKey.key])!=null&&r.last_used_at?(p(),K(V,{key:0,caption:""},{default:t(()=>{var o;return[h(_(e.t("key_manager.last_used")+": "+e.date.formatDate((o=e.keysInfoCache[n.apiKey.key])==null?void 0:o.last_used_at,"YYYY-MM-DD HH:mm")),1)]}),_:1})):B("",!0)]}),_:1}),a(P,{style:{height:"80px",width:"400px"},side:""},{default:t(()=>{var r,o;return[(r=e.keysInfoCache[n.apiKey.key])!=null&&r.usage&&!e.isInvalidKey?(p(),W(ae,{key:0},[a(e.UsageChart,{"api-key":n.apiKey,usage:(o=e.keysInfoCache[n.apiKey.key])==null?void 0:o.usage},null,8,["api-key","usage"]),a(ee,null,{default:t(()=>[h(_(e.t("key_manager.usage_summary",{_usage:e.totalUsage})),1)]),_:1})],64)):B("",!0)]}),_:1}),a(P,{side:"",class:be(["actions-section",{"always-show":e.primaryKey===n.apiKey.key}])},{default:t(()=>[Y("div",kr,[a(X,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"add_shopping_cart",onClick:ye(e.onBuy,["stop"]),label:e.t("key_manager.top_up")},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.purchase")),1)]),_:1})]),_:1},8,["disable","label"]),a(X,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"share",loading:e.isShareBusy,onClick:ye(e.onShare,["stop"])},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.share")),1)]),_:1})]),_:1},8,["disable","loading"]),a(X,{flat:"",square:"",disable:e.isInvalidKey,padding:"md",icon:"history",onClick:s[2]||(s[2]=ye(r=>e.openUsageHistoryDialog(n.apiKey.key),["stop"]))},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.usage_history")),1)]),_:1})]),_:1},8,["disable"]),a(X,{flat:"",square:"",padding:"md",icon:"more_horiz",onClick:s[3]||(s[3]=ye(r=>e.openSettingsDialog(n.apiKey.key),["stop"]))},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("key_manager.advance_settings")),1)]),_:1})]),_:1})])]),_:1},8,["class"])]),_:1},8,["class"]),a(te)])}const Er=se(pr,[["render",wr],["__scopeId","data-v-18b339d4"],["__file","KeyItem.vue"]]),Tr=oe({__name:"KeysTable",setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global"}),e=fe(),m=Ee(),f=Re(),r=ge(),{keys:o,isLoading:c,primaryKey:v}=ne(m),{user:b}=ne(f),{products:g}=ne(r),R=T(null),y={[ce.GENERATE]:async H=>{c.value=!0;try{const z=await r.generate0TokenApiKey(H);z&&(await m.addKey(z),e.notify({message:n("key_manager.generate_success",{_key:le(z)}),icon:"done"}))}finally{c.value=!1}},[ce.REVOKE]:async H=>{var z;c.value=!0;try{let G;if(L.value?G=await r.transferToken({source:w.value,target:L.value,withRevoke:!0},H):G=await r.revokeApiKey(w.value,H),G){e.notify({message:n("key_manager.revoke_success",{_key:le(w.value)}),icon:"done"}),L.value&&m.getKeyInfo(L.value,!0);const ue=v.value===w.value;await m.removeKey(w.value),ue&&await m.setPrimaryKey((z=o.value[0])==null?void 0:z.key)}}finally{w.value="",L.value="",c.value=!1}},[ce.TRANSFER]:async H=>{c.value=!0;try{await r.transferToken({source:u.value,target:l.value},H)&&(e.notify({message:n("key_manager.transfer_success",{_source:le(u.value),_target:le(l.value)}),icon:"done"}),m.getKeyInfo(u.value,!0),m.getKeyInfo(l.value,!0))}finally{c.value=!1,u.value="",l.value=""}}},E=async H=>{var z;console.log("handle key in callback"),R.value&&await((z=y[R.value])==null?void 0:z.call(y,H))},{turnstileToken:I,turnstileRef:x,turnstileVisible:k,proceeding:O,onUpdateToken:D,checkReady:U,resetVariables:F}=Ha(E),q=T(""),w=T(""),L=T(""),l=T(""),u=T(""),S=N(()=>o.value.some(H=>!m.isFreeKey(H.key))),M=N(()=>o.value.filter(H=>H.key.toLowerCase().includes(q.value.toLowerCase()))),A=()=>{e.dialog({component:tr}).onOk(H=>{H===ce.GENERATE&&(R.value=ce.GENERATE,U()&&(E(I.value),F(),gtag==null||gtag("event","add_new_key",{location:document.location.href})))})},C=(H,z)=>{H===ce.REVOKE?(w.value=z.key,L.value=z.transferTo):H===ce.TRANSFER&&(l.value=z.target,u.value=z.source),R.value=H,U()&&(E(I.value),F())};we(async()=>{await m.fetchKeys(),m.checkPrimaryKey(),g.value.length===0&&await r.getProducts()});const J={t:n,$q:e,apiKeyStore:m,userStore:f,embeddingStore:r,keys:o,isLoading:c,primaryKey:v,user:b,products:g,currentAction:R,actionCallback:y,handleTurnstileCb:E,turnstileToken:I,turnstileRef:x,turnstileVisible:k,proceeding:O,onUpdateToken:D,checkReady:U,resetVariables:F,filterQuery:q,revokeKey:w,revokeWithTransferKey:L,transferTarget:l,transferSource:u,hasPaidKey:S,visibleKeys:M,openApiKeyDialog:A,onExecute:C,KeyItem:Er,TurnstileComponent:za};return Object.defineProperty(J,"__isScriptSetup",{enumerable:!1,value:!0}),J}});function Pr(d,s,n,e,m,f){return p(),K(re,{class:"fit"},{default:t(()=>[a(_t,{ref:"decisionTable",grid:"",rows:e.visibleKeys,flat:"","row-key":"_id",filter:e.filterQuery,"hide-header":"",loading:e.isLoading||e.proceeding,pagination:{rowsPerPage:10},"card-container-class":"tour-optimizer-result-table"},{top:t(()=>[a(re,{class:"full-width",flat:"",square:""},{default:t(()=>[a($,{class:"row q-pa-none"},{default:t(()=>[a(X,{disable:!e.user.uid||e.isLoading,flat:"",square:"","no-caps":"",padding:"md",icon:"add",label:e.t("key_manager.add"),onClick:e.openApiKeyDialog},null,8,["disable","label"]),a(X,{disable:!e.hasPaidKey,flat:"",square:"",padding:"md",icon:"receipt_long",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["disable","label"]),a(X,{flat:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/api-dashboard/contact-sales",padding:"md","no-caps":""},null,8,["label"]),a(ve,{filled:"",square:"",class:"full-width",debounce:"300",modelValue:e.filterQuery,"onUpdate:modelValue":s[0]||(s[0]=r=>e.filterQuery=r),placeholder:e.t("key_manager.filter_by")},{prepend:t(()=>[a(Z,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(te)]),_:1})]),item:t(r=>[(p(),K(e.KeyItem,{key:r.row.key,"api-key":r.row,onExecute:e.onExecute},null,8,["api-key"]))]),_:1},8,["rows","filter","loading"]),e.turnstileVisible?(p(),K(e.TurnstileComponent,{key:0,ref:"turnstileRef",modelValue:e.turnstileToken,"onUpdate:modelValue":[s[1]||(s[1]=r=>e.turnstileToken=r),e.onUpdateToken]},null,8,["modelValue","onUpdate:modelValue"])):B("",!0)]),_:1})}const Sr=se(Tr,[["render",Pr],["__file","KeysTable.vue"]]),da="https://api.jina.ai/v1/classify",Le=6,Rr=oe({__name:"AvatarTab",setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global"}),e=fe(),m=T(!1),f=T([]),r=T(null),o=T(!1),c=T(""),v=T(""),b=ge(),g=T(null),R=w=>{g.value=w},y={accessories:{Eyepatch:"person wearing a mysterious black eye patch",Glasses:"person wearing modern round glasses with clear lenses","Glasses 2":"person wearing thin-framed contemporary glasses","Glasses 3":"person wearing classic rectangular glasses","Glasses 4":"person wearing vintage round glasses","Glasses 5":"person wearing designer wire-frame glasses",None:"person without any eyewear or accessories",Sunglasses:"person wearing fashionable dark sunglasses","Sunglasses 2":"person wearing sporty aviator sunglasses"},body:{"Blazer Black Tee":"person wearing a black t-shirt under a professional blazer","Button Shirt 1":"person in a crisp button-up dress shirt","Button Shirt 2":"person in a light colored button-up shirt",Coffee:"person holding a coffee cup in casual attire",Device:"person using a mobile device in casual wear",Dress:"person wearing an elegant flowing dress",Explaining:"person gesturing while explaining in business attire","Fur Jacket":"person wearing a luxurious fur jacket",Gaming:"person in gaming attire with controller","Gym Shirt":"person wearing athletic workout clothes",Hoodie:"person in a comfortable casual hoodie",Killer:"person in dark mysterious attire",Macbook:"person working on laptop in casual clothes",Paper:"person holding papers in professional attire","Pointing Up":"person gesturing upward in business wear","Polka Dot Jacket":"person in playful polka dot jacket","Polo and Sweater":"person wearing polo shirt under sweater","Shirt and Coat":"person in formal shirt and coat combination","Sporty Tee":"person in athletic sports t-shirt","Striped Pocket Tee":"person in casual striped t-shirt with pocket","Striped Tee":"person wearing horizontal striped t-shirt",Sweater:"person in cozy knit sweater","Sweater Dots":"person wearing sweater with polka dot pattern","Tee 1":"person in basic solid t-shirt","Tee 2":"person in casual graphic t-shirt","Tee Arms Crossed":"person with crossed arms in t-shirt","Tee Selena":"person in fitted casual t-shirt","Thunder T-Shirt":"person wearing t-shirt with thunder design",Turtleneck:"person in sophisticated black turtleneck",Whatever:"person in casual wear with relaxed pose"},face:{"Angry with Fang":"person with an intense angry expression showing fangs",Awe:"person with an expression of wonder and amazement",Blank:"person with a neutral blank expression",Calm:"person with serene peaceful expression",Cheeky:"person with a playful mischievous expression",Concerned:"person with a worried concerned expression","Concerned Fear":"person with a worried fearful expression",Contempt:"person with a disdainful contemptuous expression",Cute:"person with adorable cheerful expression",Cyclops:"person has only one one-eye",Driven:"person with determined focused expression","Eating Happy":"person with a joyful expression while eating",Explaining:"person with an animated expression while explaining","Eyes Closed":"person with a peaceful expression and closed eyes",Fear:"person with a frightened fearful expression",Hectic:"person with a frantic overwhelmed expression","Loving Grin 1":"person with gentle loving smile","Loving Grin 2":"person with bright heartfelt smile",Monster:"person with a playful monster-like expression",Old:"person with an aged wise expression",Rage:"person with an intense angry expression",Serious:"person with professional serious expression",Smile:"person with friendly welcoming smile","Smile Big":"person with broad enthusiastic smile","Smile LOL":"person with joyful laughing expression","Smile Teeth Gap":"person with charming gap-toothed smile",Solemn:"person with a deeply serious thoughtful expression",Suspicious:"person with a skeptical suspicious expression",Tired:"person with an exhausted weary expression","Very Angry":"person with an extremely angry expression"},head:{Afro:"person with natural afro hairstyle",Bangs:"person with straight front bangs","Bangs 2":"person with side-swept bangs","Bantu Knots":"person with traditional bantu knots hairstyle",Bear:"person with bear-themed hairstyle",Bun:"person with hair styled in neat bun","Bun 2":"person with messy top bun",Buns:"person with double hair buns",Cornrows:"person with cornrow braided hairstyle","Cornrows 2":"person with intricate cornrow design","Flat Top":"person with classic flat top haircut","Flat Top Long":"person with long flat top haircut","Gray Bun":"person with gray hair in bun","Gray Medium":"person with medium-length gray hair","Gray Short":"person with short gray hair",Long:"person with long flowing hair","Long Afro":"person with long voluminous afro","Long Bangs":"person with long layered bangs","Long Curly":"person with long curly hair","Medium 1":"person with shoulder-length hair","Medium 2":"person with wavy medium hair","Medium 3":"person with textured medium hair","Medium Bangs":"person with medium hair and bangs","Medium Bangs 2":"person with feathered medium bangs","Medium Bangs 3":"person with side-parted medium bangs","Medium Straight":"person with straight medium-length hair",Mohawk:"person with classic mohawk style","Mohawk 2":"person with longer mohawk variation","No Hair 1":"person with smooth bald head","No Hair 2":"person with polished bald style","No Hair 3":"person with completely shaved head",Pomp:"person with pompadour hairstyle","Shaved 1":"person with partially shaved head style","Shaved 2":"person with modern shaved haircut","Shaved 3":"person with artistic shaved design","Short 1":"person with short textured cut","Short 2":"person with short faded haircut","Short 3":"person with short spiky style","Short 4":"person with short layered cut","Short 5":"person with short tapered haircut",Twists:"person with twisted loc hairstyle","Twists 2":"person with longer twisted locs","hat-beanie":"person wearing a casual beanie hat","hat-hip":"person wearing a trendy hip-hop style hat"}};async function E(w){var L;try{const l=w.includes("base64,")?w.split("base64,")[1]:w,u=await fetch(da,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.apiKey}`},body:JSON.stringify({model:(L=g==null?void 0:g.value)==null?void 0:L.name,input:[{image:l}],labels:{accessories:Object.values(y.accessories),body:Object.values(y.body),face:Object.values(y.face),head:Object.values(y.head)}})});if(!u.ok)throw new Error(`Classification failed: ${u.status}`);return await u.json()}catch(l){throw console.error("Classification error:",l),l}}async function I(w,L){try{return(await Dt(Object.assign({"../../assets/avatar/accessories/Eyepatch.svg":()=>i(()=>import("./Eyepatch-CPtCE8NI.js"),[]),"../../assets/avatar/accessories/Glasses 2.svg":()=>i(()=>import("./Glasses 2-CisVqvW9.js"),[]),"../../assets/avatar/accessories/Glasses 3.svg":()=>i(()=>import("./Glasses 3--AGI-_U5.js"),[]),"../../assets/avatar/accessories/Glasses 4.svg":()=>i(()=>import("./Glasses 4-CkCSLu0z.js"),[]),"../../assets/avatar/accessories/Glasses 5.svg":()=>i(()=>import("./Glasses 5-BnBdJIiD.js"),[]),"../../assets/avatar/accessories/Glasses.svg":()=>i(()=>import("./Glasses-bHTDfG2F.js"),[]),"../../assets/avatar/accessories/None.svg":()=>i(()=>import("./None-CBIsyCCu.js"),[]),"../../assets/avatar/accessories/Sunglasses 2.svg":()=>i(()=>import("./Sunglasses 2-Bm0kyZv8.js"),[]),"../../assets/avatar/accessories/Sunglasses.svg":()=>i(()=>import("./Sunglasses-CCXW1Ow2.js"),[]),"../../assets/avatar/body/Blazer Black Tee.svg":()=>i(()=>import("./Blazer Black Tee-CCvV2dgG.js"),[]),"../../assets/avatar/body/Button Shirt 1.svg":()=>i(()=>import("./Button Shirt 1-CmLXOUNx.js"),[]),"../../assets/avatar/body/Button Shirt 2.svg":()=>i(()=>import("./Button Shirt 2-s_x7_Ujv.js"),[]),"../../assets/avatar/body/Coffee.svg":()=>i(()=>import("./Coffee-BWgpJV-A.js"),[]),"../../assets/avatar/body/Device.svg":()=>i(()=>import("./Device-DEcjonbR.js"),[]),"../../assets/avatar/body/Dress.svg":()=>i(()=>import("./Dress-_6EnLKsY.js"),[]),"../../assets/avatar/body/Explaining.svg":()=>i(()=>import("./Explaining-DadwYvu0.js"),[]),"../../assets/avatar/body/Fur Jacket.svg":()=>i(()=>import("./Fur Jacket-CdWbrdPB.js"),[]),"../../assets/avatar/body/Gaming.svg":()=>i(()=>import("./Gaming-BDiAmtUY.js"),[]),"../../assets/avatar/body/Gym Shirt.svg":()=>i(()=>import("./Gym Shirt-DQCaFZ3f.js"),[]),"../../assets/avatar/body/Hoodie.svg":()=>i(()=>import("./Hoodie-B07UN-Nl.js"),[]),"../../assets/avatar/body/Killer.svg":()=>i(()=>import("./Killer-DTtnEXXI.js"),[]),"../../assets/avatar/body/Macbook.svg":()=>i(()=>import("./Macbook-CZ7Tiuu8.js"),[]),"../../assets/avatar/body/Paper.svg":()=>i(()=>import("./Paper-DK__jVLJ.js"),[]),"../../assets/avatar/body/Pointing Up.svg":()=>i(()=>import("./Pointing Up-DMSWjUIR.js"),[]),"../../assets/avatar/body/Polka Dot Jacket.svg":()=>i(()=>import("./Polka Dot Jacket-Ccaxzz07.js"),[]),"../../assets/avatar/body/Polo and Sweater.svg":()=>i(()=>import("./Polo and Sweater-DtFh9BfC.js"),[]),"../../assets/avatar/body/Shirt and Coat.svg":()=>i(()=>import("./Shirt and Coat-CUM3_bbN.js"),[]),"../../assets/avatar/body/Sporty Tee.svg":()=>i(()=>import("./Sporty Tee-DC-mJGrt.js"),[]),"../../assets/avatar/body/Striped Pocket Tee.svg":()=>i(()=>import("./Striped Pocket Tee-CIvIqxDn.js"),[]),"../../assets/avatar/body/Striped Tee.svg":()=>i(()=>import("./Striped Tee-DNfZDSQM.js"),[]),"../../assets/avatar/body/Sweater Dots.svg":()=>i(()=>import("./Sweater Dots-BlH7xuFs.js"),[]),"../../assets/avatar/body/Sweater.svg":()=>i(()=>import("./Sweater-CuOBOSOz.js"),[]),"../../assets/avatar/body/Tee 1.svg":()=>i(()=>import("./Tee 1-BAomRkw9.js"),[]),"../../assets/avatar/body/Tee 2.svg":()=>i(()=>import("./Tee 2-C4UUC6VK.js"),[]),"../../assets/avatar/body/Tee Arms Crossed.svg":()=>i(()=>import("./Tee Arms Crossed-Cd7ErYZG.js"),[]),"../../assets/avatar/body/Tee Selena.svg":()=>i(()=>import("./Tee Selena-BuBczbrL.js"),[]),"../../assets/avatar/body/Thunder T-Shirt.svg":()=>i(()=>import("./Thunder T-Shirt-R3FQYUZD.js"),[]),"../../assets/avatar/body/Turtleneck.svg":()=>i(()=>import("./Turtleneck-CBu5E31v.js"),[]),"../../assets/avatar/body/Whatever.svg":()=>i(()=>import("./Whatever-C_L7o4PD.js"),[]),"../../assets/avatar/face/Angry with Fang.svg":()=>i(()=>import("./Angry with Fang-Cz56tpGA.js"),[]),"../../assets/avatar/face/Awe.svg":()=>i(()=>import("./Awe-BZkmV47x.js"),[]),"../../assets/avatar/face/Blank.svg":()=>i(()=>import("./Blank-NsmhZSM1.js"),[]),"../../assets/avatar/face/Calm.svg":()=>i(()=>import("./Calm-CPd4QvYU.js"),[]),"../../assets/avatar/face/Cheeky.svg":()=>i(()=>import("./Cheeky-CiEXIAta.js"),[]),"../../assets/avatar/face/Concerned Fear.svg":()=>i(()=>import("./Concerned Fear-DW5JY4CD.js"),[]),"../../assets/avatar/face/Concerned.svg":()=>i(()=>import("./Concerned-BgtD4Mod.js"),[]),"../../assets/avatar/face/Contempt.svg":()=>i(()=>import("./Contempt-CvrrLjDN.js"),[]),"../../assets/avatar/face/Cute.svg":()=>i(()=>import("./Cute-BwsaONwn.js"),[]),"../../assets/avatar/face/Cyclops.svg":()=>i(()=>import("./Cyclops-DTp1IdXY.js"),[]),"../../assets/avatar/face/Driven.svg":()=>i(()=>import("./Driven-De_O7WVZ.js"),[]),"../../assets/avatar/face/Eating Happy.svg":()=>i(()=>import("./Eating Happy-BgMnwg9g.js"),[]),"../../assets/avatar/face/Explaining.svg":()=>i(()=>import("./Explaining-THnIdgyB.js"),[]),"../../assets/avatar/face/Eyes Closed.svg":()=>i(()=>import("./Eyes Closed-CdI1KQdq.js"),[]),"../../assets/avatar/face/Fear.svg":()=>i(()=>import("./Fear-BexFCH5R.js"),[]),"../../assets/avatar/face/Hectic.svg":()=>i(()=>import("./Hectic-AExjuXjY.js"),[]),"../../assets/avatar/face/Loving Grin 1.svg":()=>i(()=>import("./Loving Grin 1-B_w88qcc.js"),[]),"../../assets/avatar/face/Loving Grin 2.svg":()=>i(()=>import("./Loving Grin 2-zoGieaDF.js"),[]),"../../assets/avatar/face/Monster.svg":()=>i(()=>import("./Monster-C1lwNnn2.js"),[]),"../../assets/avatar/face/Old.svg":()=>i(()=>import("./Old-D4BSyuLE.js"),[]),"../../assets/avatar/face/Rage.svg":()=>i(()=>import("./Rage-B2uNaaGQ.js"),[]),"../../assets/avatar/face/Serious.svg":()=>i(()=>import("./Serious-DI3hxq-4.js"),[]),"../../assets/avatar/face/Smile Big.svg":()=>i(()=>import("./Smile Big-aT5CkwfB.js"),[]),"../../assets/avatar/face/Smile LOL.svg":()=>i(()=>import("./Smile LOL-DC93Zyi_.js"),[]),"../../assets/avatar/face/Smile Teeth Gap.svg":()=>i(()=>import("./Smile Teeth Gap-DBZFawB0.js"),[]),"../../assets/avatar/face/Smile.svg":()=>i(()=>import("./Smile-0Wibgfy8.js"),[]),"../../assets/avatar/face/Solemn.svg":()=>i(()=>import("./Solemn-CxgWcI-i.js"),[]),"../../assets/avatar/face/Suspicious.svg":()=>i(()=>import("./Suspicious-D7j672A1.js"),[]),"../../assets/avatar/face/Tired.svg":()=>i(()=>import("./Tired-D_AtxcGW.js"),[]),"../../assets/avatar/face/Very Angry.svg":()=>i(()=>import("./Very Angry-D5F4ua3s.js"),[]),"../../assets/avatar/facialHair/Chin.svg":()=>i(()=>import("./Chin-DUNkMTkI.js"),[]),"../../assets/avatar/facialHair/Full 2.svg":()=>i(()=>import("./Full 2-gHgrzbn6.js"),[]),"../../assets/avatar/facialHair/Full 3.svg":()=>i(()=>import("./Full 3-Ds9Mi2Pn.js"),[]),"../../assets/avatar/facialHair/Full 4.svg":()=>i(()=>import("./Full 4-CpyHDOKi.js"),[]),"../../assets/avatar/facialHair/Full.svg":()=>i(()=>import("./Full--tLCytme.js"),[]),"../../assets/avatar/facialHair/Goatee 1.svg":()=>i(()=>import("./Goatee 1-CjxWNkM4.js"),[]),"../../assets/avatar/facialHair/Goatee 2.svg":()=>i(()=>import("./Goatee 2-DX91ea6G.js"),[]),"../../assets/avatar/facialHair/Moustache 1.svg":()=>i(()=>import("./Moustache 1-DCfFyVoz.js"),[]),"../../assets/avatar/facialHair/Moustache 2.svg":()=>i(()=>import("./Moustache 2-DvTVVVR4.js"),[]),"../../assets/avatar/facialHair/Moustache 3.svg":()=>i(()=>import("./Moustache 3-7DebNHil.js"),[]),"../../assets/avatar/facialHair/Moustache 4.svg":()=>i(()=>import("./Moustache 4-SJn7FG3B.js"),[]),"../../assets/avatar/facialHair/Moustache 5.svg":()=>i(()=>import("./Moustache 5-44Xj2EZF.js"),[]),"../../assets/avatar/facialHair/Moustache 6.svg":()=>i(()=>import("./Moustache 6-CEr5yFL1.js"),[]),"../../assets/avatar/facialHair/Moustache 7.svg":()=>i(()=>import("./Moustache 7-Bq0VvETl.js"),[]),"../../assets/avatar/facialHair/Moustache 8.svg":()=>i(()=>import("./Moustache 8-mUxMyGGc.js"),[]),"../../assets/avatar/facialHair/Moustache 9.svg":()=>i(()=>import("./Moustache 9-DOisYSjS.js"),[]),"../../assets/avatar/facialHair/None.svg":()=>i(()=>import("./None-DgNcDPcG.js"),[]),"../../assets/avatar/head/Afro.svg":()=>i(()=>import("./Afro-BcTe8cjZ.js"),[]),"../../assets/avatar/head/Bangs 2.svg":()=>i(()=>import("./Bangs 2-8gDxCaJT.js"),[]),"../../assets/avatar/head/Bangs.svg":()=>i(()=>import("./Bangs-VMnv_1Bg.js"),[]),"../../assets/avatar/head/Bantu Knots.svg":()=>i(()=>import("./Bantu Knots-FkG8IqlL.js"),[]),"../../assets/avatar/head/Bear.svg":()=>i(()=>import("./Bear-B_wppsaW.js"),[]),"../../assets/avatar/head/Bun 2.svg":()=>i(()=>import("./Bun 2-EtBMU_d9.js"),[]),"../../assets/avatar/head/Bun.svg":()=>i(()=>import("./Bun-B7Kj-Cx2.js"),[]),"../../assets/avatar/head/Buns.svg":()=>i(()=>import("./Buns-0MUj_y-O.js"),[]),"../../assets/avatar/head/Cornrows 2.svg":()=>i(()=>import("./Cornrows 2-m36CFRMN.js"),[]),"../../assets/avatar/head/Cornrows.svg":()=>i(()=>import("./Cornrows-D_tFOLo2.js"),[]),"../../assets/avatar/head/Flat Top Long.svg":()=>i(()=>import("./Flat Top Long-BYSVHErS.js"),[]),"../../assets/avatar/head/Flat Top.svg":()=>i(()=>import("./Flat Top-3MNwLsIB.js"),[]),"../../assets/avatar/head/Gray Bun.svg":()=>i(()=>import("./Gray Bun-6Dorz2Bf.js"),[]),"../../assets/avatar/head/Gray Medium.svg":()=>i(()=>import("./Gray Medium-lrleAuub.js"),[]),"../../assets/avatar/head/Gray Short.svg":()=>i(()=>import("./Gray Short-DEP2bB8l.js"),[]),"../../assets/avatar/head/Long Afro.svg":()=>i(()=>import("./Long Afro-CZArt9o6.js"),[]),"../../assets/avatar/head/Long Bangs.svg":()=>i(()=>import("./Long Bangs-CEgFEE8r.js"),[]),"../../assets/avatar/head/Long Curly.svg":()=>i(()=>import("./Long Curly-CzVOPxU6.js"),[]),"../../assets/avatar/head/Long.svg":()=>i(()=>import("./Long-mD9BOv0I.js"),[]),"../../assets/avatar/head/Medium 1.svg":()=>i(()=>import("./Medium 1-BIbsz7Fr.js"),[]),"../../assets/avatar/head/Medium 2.svg":()=>i(()=>import("./Medium 2-CnPtrhj9.js"),[]),"../../assets/avatar/head/Medium 3.svg":()=>i(()=>import("./Medium 3-B-FK1tKj.js"),[]),"../../assets/avatar/head/Medium Bangs 2.svg":()=>i(()=>import("./Medium Bangs 2-Cr7FTMco.js"),[]),"../../assets/avatar/head/Medium Bangs 3.svg":()=>i(()=>import("./Medium Bangs 3-CN81QHc8.js"),[]),"../../assets/avatar/head/Medium Bangs.svg":()=>i(()=>import("./Medium Bangs-DvU1aw27.js"),[]),"../../assets/avatar/head/Medium Straight.svg":()=>i(()=>import("./Medium Straight-C1jK9Qgd.js"),[]),"../../assets/avatar/head/Mohawk 2.svg":()=>i(()=>import("./Mohawk 2-BPHaakiH.js"),[]),"../../assets/avatar/head/Mohawk.svg":()=>i(()=>import("./Mohawk-BtkBrxTU.js"),[]),"../../assets/avatar/head/No Hair 1.svg":()=>i(()=>import("./No Hair 1-BM-4_kmR.js"),[]),"../../assets/avatar/head/No Hair 2.svg":()=>i(()=>import("./No Hair 2-DjnYbtaT.js"),[]),"../../assets/avatar/head/No Hair 3.svg":()=>i(()=>import("./No Hair 3-CDiHEwX9.js"),[]),"../../assets/avatar/head/Pomp.svg":()=>i(()=>import("./Pomp-Di6BypHV.js"),[]),"../../assets/avatar/head/Shaved 1.svg":()=>i(()=>import("./Shaved 1-DUFavbik.js"),[]),"../../assets/avatar/head/Shaved 2.svg":()=>i(()=>import("./Shaved 2-BIYv1-1_.js"),[]),"../../assets/avatar/head/Shaved 3.svg":()=>i(()=>import("./Shaved 3-DX966IJI.js"),[]),"../../assets/avatar/head/Short 1.svg":()=>i(()=>import("./Short 1-B-el4prz.js"),[]),"../../assets/avatar/head/Short 2.svg":()=>i(()=>import("./Short 2-YawmDo8u.js"),[]),"../../assets/avatar/head/Short 3.svg":()=>i(()=>import("./Short 3-Bq0t9n5E.js"),[]),"../../assets/avatar/head/Short 4.svg":()=>i(()=>import("./Short 4-B1nPxZXu.js"),[]),"../../assets/avatar/head/Short 5.svg":()=>i(()=>import("./Short 5-xc1sa6I2.js"),[]),"../../assets/avatar/head/Twists 2.svg":()=>i(()=>import("./Twists 2-1XiLWkyn.js"),[]),"../../assets/avatar/head/Twists.svg":()=>i(()=>import("./Twists-DxjfQDSj.js"),[]),"../../assets/avatar/head/hat-beanie.svg":()=>i(()=>import("./hat-beanie-3it8Xmnp.js"),[]),"../../assets/avatar/head/hat-hip.svg":()=>i(()=>import("./hat-hip-CbkFXWiS.js"),[])}),`../../assets/avatar/${w}/${L}.svg`,6)).default}catch(l){throw console.error("Error loading SVG:",l),e.notify({type:"negative",message:n("avatar.error_loading")}),l}}function x(w,L){return Object.entries(w).map(([l,u])=>({category:l,items:u.sort((S,M)=>M.score-S.score).slice(0,L).map(S=>{var M;return{label:S.label,score:S.score,feature:((M=Object.entries(y[l]).find(([A,C])=>C===S.label))==null?void 0:M[0])||Object.keys(y[l])[0]}})}))}function k(w,L){const l={};return w.forEach(({category:u,items:S})=>{const M=S[L%S.length];l[u]=M.feature}),l}async function O(){if(!v.value){e.notify({type:"warning",message:n("avatar.noImageSelected")});return}m.value=!0,f.value=[];try{const w=await E(v.value),L=x(w.data[0].predictions,Le);for(let l=0;l<Le;l++){const u=k(L,l),S=await Promise.all([I("body",u.body),I("head",u.head),I("face",u.face),I("accessories",u.accessories)]),M=["translate(0, 550)","translate(200, 50)","translate(320, 250)","translate(210, 310)"],C=`
        <svg
          width="380"
          height="380"
          viewBox="0 0 900 900"
          fill="none"
          stroke="black"
          stroke-width="0.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g>
            ${S.map((J,H)=>{const z=J.slice(J.indexOf(">",J.indexOf("<svg"))+1).replace("</svg>","");return`<g transform="${M[H]}">${z}</g>`}).join("")}
          </g>
        </svg>
      `;f.value.push(C)}}catch(w){console.error("Error generating avatars:",w),f.value=[],e.notify({type:"negative",message:n("avatar.classificationError")})}finally{m.value=!1}}async function D(w){return new Promise((L,l)=>{const u=new Image,S=document.createElement("canvas"),M=S.getContext("2d");S.width=256,S.height=256,u.onload=()=>{const C=Math.max(S.width/u.width,S.height/u.height),J=(S.width-u.width*C)/2,H=(S.height-u.height*C)/2;M.fillStyle="white",M.fillRect(0,0,S.width,S.height),M.drawImage(u,J,H,u.width*C,u.height*C);const z=S.toDataURL(w.type),G=z.split(",")[1];c.value=z,v.value=G,L(G)},u.onerror=()=>{l(new Error(n("avatar.error_processing")))};const A=new FileReader;A.onload=C=>{u.src=C.target.result},A.onerror=()=>{l(new Error(n("avatar.error_processing")))},A.readAsDataURL(w)})}async function U(){if(r.value){o.value=!0;try{await D(r.value)}catch(w){console.error("Error processing image:",w),e.notify({type:"negative",message:n("avatar.error_processing")})}finally{o.value=!1}}else c.value=""}function F(w,L){const l=new Blob([w],{type:"image/svg+xml"}),u=window.URL.createObjectURL(l),S=document.createElement("a");S.href=u,S.download=`avatar-${L+1}.svg`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(u),e.notify({message:n("avatar.download_success",{index:L+1})})}const q={API_URL:da,t:n,$q:e,isLoading:m,svgContents:f,TOP_N:Le,selectedFile:r,isProcessing:o,processedImage:c,imageBase64:v,embeddingStore:b,currentModel:g,onModelItemClick:R,featureMapping:y,classifyImage:E,importSVG:I,getTopNPredictions:x,generateFeatureCombination:k,generateAvatar:O,processImage:D,handleFileSelect:U,downloadSVG:F,ModelDropDown:Ya};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),Dr={class:"row full-width"},Ar={class:"row q-col-gutter-md"},Vr=["innerHTML"];function xr(d,s,n,e,m,f){return p(),K(re,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[Y("div",Dr,[a(ct,{class:"col",square:"",filled:"","input-class":"text-no-wrap ellipsis",modelValue:e.selectedFile,"onUpdate:modelValue":[s[0]||(s[0]=r=>e.selectedFile=r),e.handleFileSelect],label:e.t("avatar.select_file"),accept:".jpg,.jpeg,.png,.gif,.webp",loading:e.isProcessing},{prepend:t(()=>[e.processedImage?(p(),K(pt,{key:1,src:e.processedImage,width:"24px",height:"24px"},null,8,["src"])):(p(),K(Z,{key:0,name:"attach_file"}))]),_:1},8,["modelValue","label","loading"]),a(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,category:"clip",onChooseModel:e.onModelItemClick},null,8,["currentModel"]),a(X,{square:"",flat:"","no-caps":"",padding:"md",label:e.t("avatar.generate"),onClick:e.generateAvatar,icon:"play_arrow",loading:e.isLoading,disable:!e.currentModel||!e.selectedFile},null,8,["label","loading","disable"]),a(X,{square:"",flat:"",padding:"md","no-caps":"",label:e.t("avatar.how_does_it_work"),to:"/news/scaling-test-time-compute-for-embedding-models",icon:"help"},null,8,["label"])]),e.isProcessing||e.isLoading?(p(),K(ke,{key:0,indeterminate:"",size:"1px"})):B("",!0),a(te),a($,null,{default:t(()=>[Y("div",Ar,[(p(!0),W(ae,null,de(e.svgContents,(r,o)=>(p(),W("div",{key:o,class:"col-auto"},[a(re,{flat:"",bordered:"",class:"cursor-pointer q-hoverable",onClick:c=>e.downloadSVG(r,o)},{default:t(()=>[s[1]||(s[1]=Y("span",{class:"q-focus-helper"},null,-1)),a($,null,{default:t(()=>[Y("div",{class:"text-center",innerHTML:r},null,8,Vr)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})}const Kr=se(Rr,[["render",xr],["__file","AvatarTab.vue"]]),Lr={...Ra,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:d=>d>=0&&d<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Ce=50,ga=2*Ce,va=ga*Math.PI,Ir=Math.round(va*1e3)/1e3,Or=Da({name:"QCircularProgress",props:{...Lr,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(d,{slots:s}){const{proxy:{$q:n}}=xa(),e=Aa(d),m=N(()=>{const y=(n.lang.rtl===!0?-1:1)*d.angle;return{transform:d.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-y}deg)`:`rotate3d(0, 0, 1, ${y-90}deg)`}}),f=N(()=>d.instantFeedback!==!0&&d.indeterminate!==!0?{transition:`stroke-dashoffset ${d.animationSpeed}ms ease 0s, stroke ${d.animationSpeed}ms ease`}:""),r=N(()=>ga/(1-d.thickness/2)),o=N(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),c=N(()=>vt(d.value,d.min,d.max)),v=N(()=>d.max-d.min),b=N(()=>d.thickness/2*r.value),g=N(()=>{const y=(d.max-c.value)/v.value,E=d.rounded===!0&&c.value<d.max&&y<.25?b.value/2*(1-y/.25):0;return va*y+E});function R({thickness:y,offset:E,color:I,cls:x,rounded:k}){return he("circle",{class:"q-circular-progress__"+x+(I!==void 0?` text-${I}`:""),style:f.value,fill:"transparent",stroke:"currentColor","stroke-width":y,"stroke-dasharray":Ir,"stroke-dashoffset":E,"stroke-linecap":k,cx:r.value,cy:r.value,r:Ce})}return()=>{const y=[];d.centerColor!==void 0&&d.centerColor!=="transparent"&&y.push(he("circle",{class:`q-circular-progress__center text-${d.centerColor}`,fill:"currentColor",r:Ce-b.value/2,cx:r.value,cy:r.value})),d.trackColor!==void 0&&d.trackColor!=="transparent"&&y.push(R({cls:"track",thickness:b.value,offset:0,color:d.trackColor})),y.push(R({cls:"circle",thickness:b.value,offset:g.value,color:d.color,rounded:d.rounded===!0?"round":void 0}));const E=[he("svg",{class:"q-circular-progress__svg",style:m.value,viewBox:o.value,"aria-hidden":"true"},y)];return d.showValue===!0&&E.push(he("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:d.fontSize}},s.default!==void 0?s.default():[he("div",c.value)])),he("div",{class:`q-circular-progress q-circular-progress--${d.indeterminate===!0?"in":""}determinate`,style:e.value,role:"progressbar","aria-valuemin":d.min,"aria-valuemax":d.max,"aria-valuenow":d.indeterminate===!0?void 0:c.value},Va(s.internal,E))}}}),Cr=oe({__name:"GroundingDemoComponent",props:{useLazyLoading:{type:Boolean,default:!0}},setup(d,{expose:s}){s();const n=d,e=ge(),{apiKey:m}=ne(e),{t:f}=ie({useScope:"global"}),r=T("In 2012, President Barack Hussein Obama repealed the Smith-Mundt act, which had been in place in 1948. The law prevented the government from putting its propaganda on TV and Radio."),o=T(!1),c=T(!0),v=T(0),b=T(null),g=T(null),R=T(null);let y=null;const E=N(()=>{var w;return(w=b.value)==null?void 0:w.data}),I=N(()=>{var w;return(w=E.value)!=null&&w.factuality?E.value.factuality*100:0}),x=N(()=>{var w;return((w=E.value)==null?void 0:w.references.filter(L=>L.isSupportive))||[]}),k=N(()=>{const w=Math.floor(v.value/1e3),L=Math.floor(v.value%1e3/100);return`${w}.${L} s`}),O=N(()=>{var w,L;return g.value!==null?((w=E.value)==null?void 0:w.references.filter(l=>l.isSupportive===g.value))||[]:((L=E.value)==null?void 0:L.references)||[]}),D=w=>{g.value===w?g.value=null:g.value=w},U=async()=>{if(!r.value)return;c.value=!0,b.value=null;const w=Date.now(),L=`https://g.jina.ai/${encodeURIComponent(r.value)}${o.value?"?deepdive=true":""}`;try{const l=await fetch(L,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${m.value}`}});v.value=Date.now()-w,b.value=await l.json()}catch(l){b.value={message:l instanceof Error?l.message:String(l)}}finally{c.value=!1}},F=()=>{var L;const w=((L=R.value)==null?void 0:L.$el)||R.value;w instanceof HTMLElement?(y=new IntersectionObserver(l=>{l[0].isIntersecting&&(U(),y==null||y.disconnect())},{root:null,threshold:.1}),y.observe(w)):console.error("Element is not an HTMLElement:",w)};we(()=>{n.useLazyLoading?Ka(()=>{setTimeout(()=>{F()},100)}):U()}),La(()=>{y&&y.disconnect()});const q={props:n,embeddingStore:e,apiKey:m,t:f,query:r,isDeepDive:o,isBusy:c,responseTime:v,response:b,filters:g,componentRef:R,get observer(){return y},set observer(w){y=w},responseData:E,factuality:I,supportiveNum:x,responseTimeString:k,references:O,onFilter:D,sendQuery:U,initIntersectionObserver:F,ref:T,get formatNumber(){return je}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),qr={class:"text-negative"};function Mr(d,s,n,e,m,f){return p(),K(re,{ref:"componentRef",flat:"",square:"",bordered:"",class:"col-12 col-md-10"},{default:t(()=>{var r;return[a($,{class:"q-pa-none"},{default:t(()=>[a(At,{onSubmit:e.sendQuery,ref:"formRef"},{default:t(()=>{var o,c;return[a(ve,{square:"",filled:"","bottom-slots":!!e.response,modelValue:e.query,"onUpdate:modelValue":s[1]||(s[1]=v=>e.query=v),disable:e.isBusy,clearable:"",label:e.t("reader.demo.your_statement")},Me({prepend:t(()=>[a(_e,{modelValue:e.isDeepDive,"onUpdate:modelValue":s[0]||(s[0]=v=>e.isDeepDive=v),disable:e.isBusy,"checked-icon":"biotech","icon-color":"black","unchecked-icon":"bolt"},{default:t(()=>[a(ee,null,{default:t(()=>[h(_(e.t("reader.demo.headers.deepdive")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),append:t(()=>[a(X,{square:"",flat:"",icon:"send",padding:"md",loading:e.isBusy,onClick:e.sendQuery,type:"submit"},null,8,["loading"])]),_:2},[(o=e.response)!=null&&o.name||(c=e.response)!=null&&c.message?{name:"hint",fn:t(()=>[Y("span",qr,[h(_(e.response.name||e.response.message)+" ",1),e.response.readableMessage?(p(),K(ee,{key:0},{default:t(()=>[h(_(e.response.readableMessage),1)]),_:1})):B("",!0)])]),key:"0"}:e.response?{name:"hint",fn:t(()=>{var v;return[a(me,{icon:"timer",label:`${e.responseTimeString}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"]),a(me,{icon:"straighten",label:`${e.formatNumber(((v=e.responseData)==null?void 0:v.usage.tokens)||0)} ${e.t("embedding.tokens")}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])]}),key:"1"}:void 0]),1032,["bottom-slots","modelValue","disable","label"])]}),_:1},512)]),_:1}),e.isBusy?(p(),K(ke,{key:0,indeterminate:"",size:"1px"})):B("",!0),e.responseData?(p(),K($,{key:1,class:"q-mt-lg"},{default:t(()=>[a(j,null,{default:t(()=>[a(P,{side:""},{default:t(()=>[a(Or,{"show-value":"",value:e.factuality,size:"60px",thickness:.1,color:e.factuality>50?"positive":"negative","track-color":"surface-mixed-200"},{default:t(()=>{var o,c;return[a(Z,{name:(o=e.responseData)!=null&&o.result?"check":"close",color:(c=e.responseData)!=null&&c.result?"accent":"negative",size:"30px"},null,8,["name","color"])]}),_:1},8,["value","color"])]),_:1}),a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.responseData.result?e.t("reader.demo.grounding_result_true"):e.t("reader.demo.grounding_result_false")),1)]),_:1}),a(V,{caption:""},{default:t(()=>{var o;return[h(_((o=e.responseData)==null?void 0:o.reason),1)]}),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(ht,{outline:"",square:""},{default:t(()=>{var o,c,v;return[a(X,{label:(o=e.supportiveNum)==null?void 0:o.length,icon:"thumb_up",square:"",onClick:s[2]||(s[2]=b=>e.onFilter(!0)),outline:""},null,8,["label"]),a(te),a(X,{label:(((c=e.responseData)==null?void 0:c.references.length)||0)-((v=e.supportiveNum)==null?void 0:v.length),icon:"thumb_down",square:"",onClick:s[3]||(s[3]=b=>e.onFilter(!1)),outline:""},null,8,["label"])]}),_:1})]),_:1})]),_:1})]),_:1})):B("",!0),(r=e.responseData)!=null&&r.references.length?(p(),K($,{key:2},{default:t(()=>[a(Se,null,{default:t(()=>[a(Ue,{name:"list2"},{default:t(()=>[(p(!0),W(ae,null,de(e.references,o=>(p(),K(j,{clickable:"",key:o.url,href:o.url,target:"_blank",class:"card-details"},{default:t(()=>[a(P,{avatar:""},{default:t(()=>[a(Z,{name:o.isSupportive?"thumb_up":"thumb_down",color:o.isSupportive?"positive":"negative"},null,8,["name","color"])]),_:2},1024),a(P,null,{default:t(()=>[a(V,{lines:"1",class:"text-italic"},{default:t(()=>[h("... "+_(o.keyQuote)+" ...",1)]),_:2},1024),a(V,{caption:""},{default:t(()=>[a(me,{square:"",size:"sm",icon:`img:https://www.google.com/s2/favicons?sz=32&domain_url=${o.url}`,label:o.url,class:"text-caption q-mx-none bg-mixed-200",style:{"max-width":"60%"}},null,8,["icon","label"])]),_:2},1024)]),_:2},1024),a(P,{side:""},{default:t(()=>[a(Z,{name:"open_in_new",size:"xs",class:"read-more-btn"})]),_:1})]),_:2},1032,["href"]))),128))]),_:1})]),_:1})]),_:1})):B("",!0)]}),_:1},512)}const Br=se(Cr,[["render",Mr],["__file","GroundingDemoComponent.vue"]]),Ur=oe({__name:"GroundingTab",setup(d,{expose:s}){s();const n={GroundingDemoComponent:Br};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function Nr(d,s,n,e,m,f){return p(),K(re,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.GroundingDemoComponent,{"use-lazy-loading":!1})]),_:1})}const jr=se(Ur,[["render",Nr],["__scopeId","data-v-0622c9bb"],["__file","GroundingTab.vue"]]),Ie="https://llm-serp.jina.ai",Gr=oe({__name:"UsageComponent",setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global"}),e=fe(),m=ge(),{apiKey:f}=ne(m),r=T(!1),o=T({}),c=T({q:"jina ai",location:""}),v=N(()=>{const x={};for(const[k,O]of Object.entries(c.value))O&&(x[k]=O);return x}),b=T({}),g=T([{header:"Authorization",value:`Bearer ${f.value}`,label:"auth_token",type:"toggle",url:"/api-dashboard/rate-limit",get disabled(){return!f.value},get indicator(){return!!b.value[this.header]},set(x){x?b.value[this.header]=this.value:delete b.value[this.header]}},{label:"country",type:"select",value:c.value.gl,options:[{value:"Default"},...Wa],indicator:!0,set(x){if(this.value=x,x==="Default"){delete c.value.gl;return}c.value.gl=x},init(){this.value="Default"}},{label:"location",type:"text",value:c.value.location,indicator:!0,set(x){this.value=x,c.value.location=x}},{label:"language",type:"select",value:c.value.hl,indicator:!0,options:[{value:"Default"},...Xa],set(x){if(this.value=x,x==="Default"){delete c.value.hl;return}c.value.hl=x},init(){this.value="Default"}},{label:"number",type:"select",options:[{value:10},{value:20},{value:30}],value:c.value.num,set(x){this.value=x||null;const k=Number(this.value);if(k===10){delete c.value.num;return}c.value.num=k},init(){this.set(10)}},{label:"page",type:"number",min:1,indicator:!0,value:c.value.page,set(x){this.value=x||null;const k=Number(this.value);if(k===1){delete c.value.page;return}c.value.page=k},init(){this.set(1)}}]),R=N(()=>{for(const D of g.value)D.disabled&&D.set(!1);const x=["Content-Type: application/json"];for(const[D,U]of Object.entries(b.value))if(U){if(typeof U=="string")x.push(`${D}: ${U}`);else if(Array.isArray(U))for(const F of U)x.push(`${D}: ${F}`)}const k=x.map(D=>`  -H "${D}"`).join(`\\
`);return`
\`\`\`bash
${[`curl ${Ie}`,`${k}`,`  -d @- <<EOFEOF
  {
    ${JSON.stringify(v.value,null,4).slice(1,-1).trim()}
  }
EOFEOF`].join(` \\
`)}
\`\`\`
  `}),y=T(!1),E=async()=>{if(!f.value||!v.value.q)return;o.value={};const x={"Content-Type":"application/json"};for(const k of g.value)k.indicator&&k.header&&(x[k.header]=k.value);r.value=!0,fetch(Ie,{method:"POST",headers:x,body:JSON.stringify(v.value)}).then(async k=>{var O;if((O=k.headers.get("content-type"))!=null&&O.includes("text/event-stream")){if(k.body){o.value={status:k.status,statusText:k.statusText,eventStream:!0,data:[]};const D=k.body.getReader(),U=new TextDecoder;for(;;){const{done:F,value:q}=await D.read();if(F){y.value=!1,r.value=!1;break}q&&(y.value=!0,U.decode(q).split(`

`).forEach(l=>{const S=l.split(`
`).find(A=>A.startsWith("data: "));if(!S)return;const M=S.replace(/data: /g,"");try{M&&o.value.data.push(M)}catch(A){console.error("Error:",A)}}))}}}else{o.value={status:k.status,statusText:k.statusText};const D=await k.json();o.value.data={status:k.status,type:"json",content:D}}}).catch(k=>{console.error("Error:",k),o.value={status:500,data:k.message}}).finally(()=>{r.value=!1,y.value=!1})};we(()=>{g.value.forEach(x=>{x.init&&x.init()})});const I={t:n,$q:e,embeddingStore:m,apiKey:f,isBusy:r,response:o,payload:c,BASE_URL:Ie,adaptablePayload:v,headers:b,availableParameters:g,adaptableCode:R,isStreaming:y,onExecute:E,UsageHeader:Ja,APIPanel:Za};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}});function Fr(d,s,n,e,m,f){return p(),K(re,{flat:"",square:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.UsageHeader,{"home-link":"/llm-serp-demo","issue-link":"https://github.com/jina-ai/node-serp/issues","is-support-c-s-p":!1,"api-link":""}),a(te),a($,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none",style:{"flex-grow":"1"}},{default:t(()=>[a($,{class:"col-md-6 col-lg-5 col-xl-4 q-pa-none"},{default:t(()=>[a(Se,{class:"full-width"},{default:t(()=>[a(Ue,{name:"list2"},{default:t(()=>[a(j,{key:"query",class:"q-pa-none"},{default:t(()=>[a(P,null,{default:t(()=>[a(ve,{type:"textarea",rows:"1",modelValue:e.payload.q,"onUpdate:modelValue":s[0]||(s[0]=r=>e.payload.q=r),class:"full-width text-caption",filled:"",square:"","hide-bottom-space":"",label:e.t("llm_serp.query_label"),rules:[r=>!!r]},{prepend:t(()=>[a(Z,{name:"search"})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1}),(p(!0),W(ae,null,de(e.availableParameters,r=>(p(),W(ae,{key:r.label},[r.disabled?B("",!0):(p(),K(j,{tag:"label",key:r.label},{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t(`llm_serp.parameters.${r.label}`)),1)]),_:2},1024),a(V,{caption:"",innerHTML:e.t(`llm_serp.parameters.${r.label}_explain`)},null,8,["innerHTML"]),r.url?(p(),K(V,{key:0,caption:"",class:"q-pt-sm"},{default:t(()=>[a(X,{href:r.url,label:e.t("deepsearch.learn_more"),size:"xs",outline:"",square:"",icon:"open_in_new",target:"_blank"},null,8,["href","label"])]),_:2},1024)):B("",!0)]),_:2},1024),r.type==="toggle"?(p(),K(P,{key:0,side:""},{default:t(()=>[a(_e,{disable:r.disabled,"model-value":r.indicator,"onUpdate:modelValue":o=>r.set(o)},null,8,["disable","model-value","onUpdate:modelValue"])]),_:2},1024)):r.type==="text"||r.type==="number"?(p(),K(P,{key:1,side:""},{default:t(()=>[a(ve,{"model-value":r.value,"onUpdate:modelValue":o=>r.set(o),filled:"",square:"",type:r.type,min:r.min,style:{"max-width":"100px"},disable:!r.indicator},null,8,["model-value","onUpdate:modelValue","type","min","disable"])]),_:2},1024)):r.type==="select"?(p(),K(P,{key:2,side:""},{default:t(()=>[a(pe,{modelValue:r.value,"onUpdate:modelValue":[o=>r.value=o,o=>r.set(o)],options:r.options,style:{"min-width":"100px"},filled:"",square:"","hide-bottom-space":"","emit-value":"","map-options":""},{option:t(({opt:o,itemProps:c})=>[a(j,Ae({ref_for:!0},c),{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[Y("code",null,_(o.value),1)]),_:2},1024),a(V,{caption:""},{default:t(()=>[h(_(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),selected:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[Y("code",null,_(r.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):B("",!0)]),_:2},1024))],64))),128))]),_:1})]),_:1})]),_:1}),a(te,{vertical:e.$q.screen.gt.sm},null,8,["vertical"]),a(e.APIPanel,{code:e.adaptableCode,onExecute:e.onExecute,loading:e.isBusy,"is-streaming":e.isStreaming,response:e.response,disabled:!e.apiKey},null,8,["code","loading","is-streaming","response","disabled"])]),_:1},8,["horizontal"])]),_:1})}const Qr=se(Gr,[["render",Fr],["__file","UsageComponent.vue"]]),Hr=oe({__name:"CostEstimator",setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global",inheritLocale:!0}),e=Re(),m=T("quarterly"),f=T(!1),r=T("business"),o=T(5);Be(r,u=>{o.value=u==="business"?5:1e4});const c=T("standard"),v=T(3),b=T(!1),g=T("steady"),R=T({"jina-embeddings":!0,"jina-clip":!1,"jina-colbert":!1,"jina-reranker":!1,ReaderLM:!1}),y=T("standard"),E=T(!1),I=T(!1),x=T(!1),k={usageTiers:{business:[{limit:5,price:0},{limit:10,price:2e3},{limit:25,price:5e3},{limit:50,price:1e4},{limit:100,price:2e4}],consumer:[{limit:1e4,price:0},{limit:5e4,price:2e3},{limit:1e5,price:5e3},{limit:5e5,price:1e4},{limit:1e6,price:2e4}]},modelPrices:{"jina-embeddings":0,"jina-clip":5e3,"jina-colbert":3e3,"jina-reranker":4e3,ReaderLM:2e3},supportTiers:{standard:0,premium:5e3,enterprise:15e3},features:{priorityResponse:2e3,dedicatedCSM:8e3,customModelTraining:1e4},basePrice:5e3},O=N(()=>{let u=k.basePrice;const S=k.usageTiers[r.value],M=S.find((A,C)=>o.value<=A.limit||C===S.length-1);if(u+=(M==null?void 0:M.price)||0,Object.entries(R.value).forEach(([A,C])=>{C&&k.modelPrices[A]>0&&(u+=k.modelPrices[A])}),u+=k.supportTiers[y.value],E.value&&(u+=k.features.priorityResponse),I.value&&(u+=k.features.dedicatedCSM),x.value&&(u+=k.features.customModelTraining),c.value==="poc")u=u*.4;else if(c.value==="department"){let A=.15;const C={limited:1,steady:.95,high:.9};b.value&&(u=u*1.1,A=.25),u=u*(1-A)*C[g.value]}return{monthly:u/3,quarterly:u,annual:u*4*.9,final:f.value?u*4*.9:u}}),D=[{label:n("estimator.labels.upTo",{count:5}),value:5},{label:n("estimator.labels.upTo",{count:10}),value:10},{label:n("estimator.labels.upTo",{count:25}),value:25},{label:n("estimator.labels.upTo",{count:50}),value:50},{label:n("estimator.labels.upTo",{count:100}),value:100}],U=[{label:n("estimator.labels.upTo",{count:1e4}),value:1e4},{label:n("estimator.labels.upTo",{count:5e4}),value:5e4},{label:n("estimator.labels.upTo",{count:1e5}),value:1e5},{label:n("estimator.labels.upTo",{count:5e5}),value:5e5},{label:n("estimator.labels.upTo",{count:1e6}),value:1e6}],F=N(()=>r.value==="business"&&o.value>100||r.value==="consumer"&&o.value>1e6),q=N({get(){return Object.entries(R.value).filter(([,u])=>u).map(([u])=>u)},set(u){for(let S of Object.keys(R.value))R.value[S]=!1;u.forEach(S=>{R.value[S]=!0})}}),w=["jina-embeddings","jina-clip","jina-colbert","jina-reranker","ReaderLM"],L=N(()=>[c.value==="standard"&&{title:n("estimator.messaging.standardFeatures"),icon:null,items:[{label:n("estimator.messaging.baseModelIncluded"),hasCheckmark:!0},{label:n("estimator.messaging.supportTierIncluded",{tier:n(`estimator.support.${y.value}`),hours:n("estimator.support.hoursQuarter",{hours:y.value==="standard"?10:y.value==="premium"?25:40})}),hasCheckmark:!0},{label:n(r.value==="business"?"estimator.messaging.usageTierBusiness":"estimator.messaging.usageTierConsumer",{count:o.value.toLocaleString()}),hasCheckmark:!0}]},q.value.length>1&&{title:n("estimator.messaging.selectedModels"),icon:"info",items:q.value.map(u=>({label:u}))},(E.value||I.value||x.value)&&{title:n("estimator.messaging.additionalFeatures"),icon:"info",items:[E.value&&{label:n("estimator.features.priority")},I.value&&{label:n("estimator.features.csm")},x.value&&{label:n("estimator.features.training")}].filter(Boolean)},c.value==="poc"&&{title:n("estimator.messaging.pocIncludes"),icon:"info",items:[{label:n("estimator.messaging.pocMetrics")},{label:n("estimator.messaging.pocCheckins")},{label:n("estimator.messaging.pocMigration")}]},c.value==="department"&&{title:n("estimator.messaging.deptIncludes"),icon:"info",items:[{label:n("estimator.messaging.deptReviews")},{label:n("estimator.messaging.deptRoadmap")},b.value&&{label:n("estimator.messaging.deptSponsor")},g.value==="high"&&{label:n("estimator.messaging.deptWorkshops")}].filter(Boolean)},F.value&&{title:n("estimator.messaging.enterpriseAlert"),icon:"warning",isAlert:!0,items:[]}].filter(Boolean));Ia(()=>{e.setLicenseConfig({contractType:c.value,pocDuration:v.value,hasBusinessSponsor:c.value==="department"?b.value:void 0,expectedGrowth:c.value==="department"?g.value:void 0,selectedModels:q.value,supportTier:y.value,priorityResponse:E.value,dedicatedCSM:I.value,customModelTraining:x.value,usageType:r.value,usageCount:o.value,paymentFrequency:f.value?"annual":"quarterly",price:O.value.final})});const l={t:n,userStore:e,paymentFrequency:m,isAnnual:f,usageType:r,usageCount:o,contractType:c,pocDuration:v,hasBusinessSponsor:b,expectedGrowth:g,selectedModels:R,supportTier:y,priorityResponse:E,dedicatedCSM:I,customModelTraining:x,prices:k,calculateTotalPrice:O,businessUsageOptions:D,consumerUsageOptions:U,showEnterpriseAlert:F,selectedModelsArray:q,allModelOptions:w,featuresSections:L};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function zr(d,s,n,e,m,f){return p(),K(re,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a($,{horizontal:d.$q.screen.gt.sm,class:"full-height"},{default:t(()=>[a(Se,{class:"col"},{default:t(()=>[a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.models.title")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.models.description")),1)]),_:1})]),_:1}),a(P,null,{default:t(()=>[a(pe,{square:"",modelValue:e.selectedModelsArray,"onUpdate:modelValue":s[0]||(s[0]=r=>e.selectedModelsArray=r),multiple:"",options:e.allModelOptions,"use-chips":"","emit-value":"",filled:"",label:e.t("estimator.labels.selectAll")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.contractType.title")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t(`estimator.descriptions.contractType.${e.contractType}`)),1)]),_:1})]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(xe,{modelValue:e.contractType,"onUpdate:modelValue":s[1]||(s[1]=r=>e.contractType=r),options:[{label:e.t("estimator.contractType.standard"),value:"standard"},{label:e.t("estimator.contractType.department"),value:"department"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),e.contractType==="poc"?(p(),K(j,{key:0},{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("estimator.poc.duration")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.poc.description")),1)]),_:1})]),_:1}),a(P,null,{default:t(()=>[a($a,{modelValue:e.pocDuration,"onUpdate:modelValue":s[2]||(s[2]=r=>e.pocDuration=r),min:3,max:6,step:1,label:"","label-always":""},null,8,["modelValue"])]),_:1})]),_:1})):B("",!0),e.contractType==="department"?(p(),W(ae,{key:1},[a(j,{tag:"label"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.department.executionModel")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.department.sponsorDescription")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.hasBusinessSponsor,"onUpdate:modelValue":s[3]||(s[3]=r=>e.hasBusinessSponsor=r),label:e.t("estimator.department.businessSponsor")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.department.growthTitle")),1)]),_:1})]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(xe,{modelValue:e.expectedGrowth,"onUpdate:modelValue":s[5]||(s[5]=r=>e.expectedGrowth=r),options:[{label:e.t("estimator.department.growth.limited"),value:"limited",caption:e.t("estimator.department.growth.limitedDesc")},{label:e.t("estimator.department.growth.steady"),value:"steady",caption:e.t("estimator.department.growth.steadyDesc")},{label:e.t("estimator.department.growth.high"),value:"high",caption:e.t("estimator.department.growth.highDesc")}],type:"radio"},{item:t(({opt:r,index:o})=>[De((p(),K(j,{tag:"label"},{default:t(()=>[a(P,{avatar:""},{default:t(()=>[a(fa,{modelValue:e.expectedGrowth,"onUpdate:modelValue":s[4]||(s[4]=c=>e.expectedGrowth=c),val:r.value},null,8,["modelValue","val"])]),_:2},1024),a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(r.label),1)]),_:2},1024),a(V,{caption:""},{default:t(()=>[h(_(r.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Oa]])]),_:1},8,["modelValue","options"])]),_:1})],64)):B("",!0),a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.usage.title")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t(`estimator.descriptions.usage.${e.usageType}`)),1)]),_:1})]),_:1}),a(P,null,{default:t(()=>[a(pe,{class:"full-width",square:"",modelValue:e.usageCount,"onUpdate:modelValue":s[6]||(s[6]=r=>e.usageCount=r),options:e.usageType==="business"?e.businessUsageOptions:e.consumerUsageOptions,label:e.usageType==="business"?e.t("estimator.usage.businessCount"):e.t("estimator.usage.consumerCount"),filled:"","emit-value":"","map-options":"","option-label":"label","option-value":"value"},null,8,["modelValue","options","label"])]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(xe,{modelValue:e.usageType,"onUpdate:modelValue":s[7]||(s[7]=r=>e.usageType=r),options:[{label:e.t("estimator.usage.business"),value:"business"},{label:e.t("estimator.usage.consumer"),value:"consumer"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.support.title")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t(`estimator.descriptions.support.${e.supportTier}`)),1)]),_:1})]),_:1}),a(P,null,{default:t(()=>[a(pe,{modelValue:e.supportTier,"onUpdate:modelValue":s[8]||(s[8]=r=>e.supportTier=r),options:[{label:e.t("estimator.support.hoursQuarter",{hours:10}),value:"standard"},{label:e.t("estimator.support.hoursQuarter",{hours:25}),value:"premium"},{label:e.t("estimator.support.hoursQuarter",{hours:40}),value:"enterprise"}],filled:"",square:"","emit-value":"","map-options":"","option-label":"label","option-value":"value",label:e.t("estimator.labels.selectSupport")},null,8,["modelValue","options","label"])]),_:1})]),_:1}),e.contractType!=="poc"?(p(),W(ae,{key:2},[a(j,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.features.title")),1)]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("estimator.features.priority")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.descriptions.features.priority")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.priorityResponse,"onUpdate:modelValue":s[9]||(s[9]=r=>e.priorityResponse=r)},null,8,["modelValue"])]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("estimator.features.csm")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.descriptions.features.csm")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.dedicatedCSM,"onUpdate:modelValue":s[10]||(s[10]=r=>e.dedicatedCSM=r)},null,8,["modelValue"])]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(e.t("estimator.features.training")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t("estimator.descriptions.features.training")),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.customModelTraining,"onUpdate:modelValue":s[11]||(s[11]=r=>e.customModelTraining=r)},null,8,["modelValue"])]),_:1})]),_:1})],64)):B("",!0)]),_:1}),a(te,{vertical:d.$q.screen.gt.sm},null,8,["vertical"]),a(re,{class:"col-4 bg-mixed-200",flat:"",square:""},{default:t(()=>[a($,{class:"q-pa-none"},{default:t(()=>[a(Se,{dense:""},{default:t(()=>[a(j,{class:"q-my-lg"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,{overline:""},{default:t(()=>[h(_(e.t("estimator.pricing.title")),1)]),_:1}),a(Ue,{name:"list2"},{default:t(()=>[(p(),K(V,{key:e.calculateTotalPrice.final,class:"text-h5 q-py-md"},{default:t(()=>[h(_(e.contractType==="poc"?e.t("estimator.pricing.oneTime",{price:Math.round(e.calculateTotalPrice.monthly*e.pocDuration).toLocaleString()}):e.t("estimator.pricing.frequency",{price:e.calculateTotalPrice[e.isAnnual?"final":"quarterly"].toLocaleString(),frequency:e.t(`estimator.pricing.${e.isAnnual?"annual":"quarterly"}`)})),1)]),_:1}))]),_:1}),a(V,{caption:"",class:"text-dim"},{default:t(()=>[h(_(e.t("estimator.pricing.disclaimer")),1)]),_:1})]),_:1})]),_:1}),a(j,{tag:"label"},{default:t(()=>[a(P,null,{default:t(()=>[a(V,{class:"text-bold"},{default:t(()=>[h(_(e.t("estimator.payment.title")),1)]),_:1}),a(V,{caption:""},{default:t(()=>[h(_(e.t(`estimator.descriptions.payment.${e.isAnnual?"annual":"quarterly"}`)),1)]),_:1})]),_:1}),a(P,{side:""},{default:t(()=>[a(_e,{modelValue:e.isAnnual,"onUpdate:modelValue":s[12]||(s[12]=r=>e.isAnnual=r),label:e.t("estimator.payment.annual"),"checked-icon":"percent"},null,8,["modelValue","label"])]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(X,{square:"",outline:"",icon:"handshake",label:e.t("estimator.pricing.cta"),padding:"lg",class:"full-width q-my-lg",to:"/contact-sales?license-config=true"},null,8,["label"])]),_:1}),a(te),(p(!0),W(ae,null,de(e.featuresSections,r=>(p(),W(ae,{key:r.title},[a(V,{header:""},{default:t(()=>[h(_(r.title),1)]),_:2},1024),(p(!0),W(ae,null,de(r.items,(o,c)=>(p(),K(j,{key:c},{default:t(()=>[a(P,{side:""},{default:t(()=>[a(Z,{name:"task_alt",size:"xs"})]),_:1}),a(P,null,{default:t(()=>[a(V,null,{default:t(()=>[h(_(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["horizontal"])]),_:1})}const Yr=se(Hr,[["render",zr],["__file","CostEstimator.vue"]]),Wr=oe({__name:"ReaderDecideComponent",props:{originalURL:{type:String,default:""},disableQA:{type:Boolean,default:!1},disableOriginalURL:{type:Boolean,default:!1}},setup(d,{expose:s}){s();const{t:n}=ie({useScope:"global"}),e=ge(),m=fe(),f=T(!0),r=T(!0),o=T(!1),c=d,v=T(c.originalURL||"https://jina.ai/news/a-practical-guide-to-implementing-deepsearch-deepresearch"),b=T(["engine_default","engine_default_timeout","engine_default_markdown","engine_default_html","browser","direct","cf_browser"]),g=T(b.value.reduce((l,u)=>(l[u]={content:"",timing:null,contentLength:null,isLoading:!1},l),{})),R=T(!1),y=l=>{const u=`https://r.jina.ai/${v.value}`,S=f.value?`"Authorization: Bearer ${e.apiKey}"`:"",M=r.value?'"X-No-Cache: true"':"";let A=`\`\`\`bash
curl ${u}`,C=!1;return l==="engine_default_markdown"?(A+=` \\
  -H "X-Return-Format: markdown"`,C=!0):l==="engine_default_html"?(A+=` \\
  -H "X-Return-Format: html"`,C=!0):l==="engine_default_timeout"?(A+=` \\
  -H "X-Timeout: 5"`,C=!0):l==="browser"?(A+=` \\
  -H "X-Engine: browser"`,C=!0):l==="cf_browser"?(A+=` \\
  -H "X-Engine: cf-browser-rendering"`,C=!0):l==="direct"&&(A+=` \\
  -H "X-Engine: direct"`,C=!0),r.value&&(A+=`${C?"":" \\"}
  -H ${M}`,C=!0),f.value&&(A+=`${C?"":" \\"}
  -H ${S}`),A+="\n```",A},E=l=>{const u={};return f.value&&(u.Authorization=`Bearer ${e.apiKey}`),r.value&&(u["X-No-Cache"]="true"),l==="engine_default_timeout"?u["X-Timeout"]="5":l==="engine_default_html"?u["X-Return-Format"]="html":l==="engine_default_markdown"?u["X-Return-Format"]="markdown":l==="browser"?u["X-Engine"]="browser":l==="cf_browser"?u["X-Engine"]="cf-browser-rendering":l==="direct"&&(u["X-Engine"]="direct"),u},I=async l=>{const u=`https://r.jina.ai/${v.value}`;g.value[l].isLoading=!0;const S=performance.now();try{const M=await fetch(u,{headers:E(l)}),A=performance.now();if(g.value[l].timing=Math.round(A-S),!M.ok){g.value[l].content=await M.json();return}const C=await M.text();g.value[l].contentLength=C.length,g.value[l].content=C}catch(M){g.value[l].content=M instanceof Error?M.message:String(M),g.value[l].contentLength=0,g.value[l].timing=0}finally{g.value[l].isLoading=!1}},x=async()=>{o.value=!0,R.value=!0,b.value.forEach(l=>{g.value[l]={content:"",timing:null,contentLength:null,isLoading:!0}});try{await Promise.all(b.value.map(l=>I(l)))}finally{R.value=!1}},k=N(()=>Object.values(g.value).some(l=>l.timing!==null)),O=N(()=>{let l=0;for(const u of b.value)g.value[u].timing!==null&&g.value[u].timing>l&&(l=g.value[u].timing);return l>0?l:1}),D=N(()=>{let l=0;for(const u of b.value)g.value[u].contentLength!==null&&g.value[u].contentLength>l&&(l=g.value[u].contentLength);return l>0?l:1}),L={t:n,embeddingStore:e,$q:m,useAuth:f,useNoCache:r,fetchWasClicked:o,props:c,originalURL:v,paramsGroup:b,results:g,isLoading:R,getReaderCode:y,getHeaders:E,fetchForParam:I,fetchAllURLs:x,hasResults:k,maxTiming:O,maxContentLength:D,getTimingPercentage:l=>g.value[l].timing===null?0:g.value[l].timing/O.value,getLengthPercentage:l=>g.value[l].contentLength===null?0:g.value[l].contentLength/D.value,getBarColor:l=>({engine_default:"primary",engine_default_timeout:"info",engine_default_markdown:"warning",engine_default_html:"negative",browser:"secondary",direct:"accent",cf_browser:"positive"})[l]||"primary",formatBytes:l=>{if(l===0)return"0 Bytes";const u=1024,S=["Bytes","KB","MB","GB"],M=Math.floor(Math.log(l)/Math.log(u));return parseFloat((l/Math.pow(u,M)).toFixed(2))+" "+S[M]},get QInput(){return ve}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Xr={class:"row q-mt-sm"},Jr={class:"text-h6 q-mb-md"},Zr={class:"q-mb-lg"},$r={class:"text-subtitle2 q-mb-sm"},eo={class:"col-3 text-right q-pr-md"},ao={class:"col-8"},to={class:"absolute-full flex flex-center"},ro={class:"text-subtitle2 q-mb-sm"},oo={class:"col-3 text-right q-pr-md"},so={class:"col-8"},no={class:"absolute-full flex flex-center"},lo={class:"row items-center"},io={class:"overflow-auto q-px-xs"};function uo(d,s,n,e,m,f){const r=Ca("q-markdown");return p(),K(re,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[a($,{class:"q-pa-none"},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.originalURL,"onUpdate:modelValue":s[0]||(s[0]=o=>e.originalURL=o),label:e.t("reader.demo.your_url"),type:"url",loading:e.isLoading},null,8,["modelValue","label","loading"]),Y("div",Xr,[a(_e,{modelValue:e.useAuth,"onUpdate:modelValue":s[1]||(s[1]=o=>e.useAuth=o),label:e.t("reader.demo.headers.auth_token"),size:"sm",icon:"o_key",class:"q-mr-md"},null,8,["modelValue","label"]),a(_e,{modelValue:e.useNoCache,"onUpdate:modelValue":s[2]||(s[2]=o=>e.useNoCache=o),label:e.t("reader.demo.headers.no_cache"),size:"sm",icon:"o_cached"},null,8,["modelValue","label"])])]),_:1}),a(te),a($,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none"},{default:t(()=>[(p(!0),W(ae,null,de(e.paramsGroup,(o,c)=>(p(),W(ae,{key:o},[a(re,{class:"col q-pa-none",flat:"",square:""},{default:t(()=>[a(j,null,{default:t(()=>[a(P,null,{default:t(()=>[a(V,{lines:"1"},{default:t(()=>[h(_(e.t(`reader.demo.headers.${o}`)),1)]),_:2},1024),a(V,{caption:"",class:"text-dim",lines:"2"},{default:t(()=>[h(_(e.t(`reader.demo.headers.${o}_explain`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(r,{src:e.getReaderCode(o),"no-line-numbers":"","show-copy":"","copy-icon":"content_copy",class:"overflow-auto"},null,8,["src"])]),_:2},1024),c<e.paramsGroup.length-1?(p(),K(te,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):B("",!0)],64))),128))]),_:1},8,["horizontal"]),a(te),a(X,{square:"",label:e.t("reader.demo.fetch"),class:"full-width",icon:"download",onClick:e.fetchAllURLs,flat:"",padding:"md",loading:e.isLoading},null,8,["label","loading"]),e.fetchWasClicked?(p(),W(ae,{key:0},[a(te),e.hasResults?(p(),K($,{key:0},{default:t(()=>[Y("div",Jr,_(e.t("reader.demo.performance_compare")),1),Y("div",Zr,[Y("div",$r,_(e.t("reader.demo.response_time")),1),(p(!0),W(ae,null,de(e.paramsGroup,o=>(p(),W("div",{class:"row items-center",key:o+"-time"},[Y("div",eo,_(e.t(`reader.demo.headers.${o}`)),1),Y("div",ao,[a(ke,{value:e.getTimingPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[Y("div",to,[e.results[o].timing!==null?(p(),K(ia,{key:0,color:"white","text-color":"black"},{default:t(()=>[h(_(e.results[o].timing)+"ms ",1)]),_:2},1024)):B("",!0)])]),_:2},1032,["value","color"])])]))),128))]),Y("div",null,[Y("div",ro,_(e.t("reader.demo.content_length")),1),(p(!0),W(ae,null,de(e.paramsGroup,o=>(p(),W("div",{class:"row items-center",key:o+"-length"},[Y("div",oo,_(e.t(`reader.demo.headers.${o}`)),1),Y("div",so,[a(ke,{value:e.getLengthPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[Y("div",no,[e.results[o].contentLength!==null?(p(),K(ia,{key:0,color:"white","text-color":"black"},{default:t(()=>[h(_(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):B("",!0)])]),_:2},1032,["value","color"])])]))),128))])]),_:1})):B("",!0),e.hasResults?(p(),K(te,{key:1})):B("",!0),a($,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none overflow-auto"},{default:t(()=>[(p(!0),W(ae,null,de(e.paramsGroup,(o,c)=>(p(),W(ae,{key:o},[a($,{class:"col column overflow-auto no-wrap q-pa-none"},{default:t(()=>[Y("div",lo,[a(me,{label:e.t(`reader.demo.headers.${o}`),size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim"},null,8,["label"]),e.results[o].timing!==null?(p(),K(me,{key:0,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"timer"},{default:t(()=>[h(_(e.results[o].timing)+"ms ",1)]),_:2},1024)):B("",!0),e.results[o].contentLength!==null?(p(),K(me,{key:1,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"straighten"},{default:t(()=>[h(_(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):B("",!0)]),e.isLoading&&!e.results[o].content?(p(),W(ae,{key:0},de([100,300,200,200],v=>a(Lt,{type:"text",width:`${v}px`,key:v},null,8,["width"])),64)):B("",!0),Y("pre",io,""+_(e.results[o].content)+`
          `,1)]),_:2},1024),c<e.paramsGroup.length-1?(p(),K(te,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):B("",!0)],64))),128))]),_:1},8,["horizontal"]),a(te)],64)):B("",!0)]),_:1})}const co=se(Wr,[["render",uo],["__file","ReaderDecideComponent.vue"]]),_o=oe({__name:"SeFoPage",setup(d,{expose:s}){s();const n={[Q.PRICING]:$t,[Q.CODE]:et,[Q.RERANK_CODE]:at,[Q.READER_CODE]:tt,[Q.CLASSIFY]:rt,[Q.TOKENIZER]:ot,[Q.INTEGRATIONS]:st,[Q.TEST]:nt,[Q.SEARCH]:oa,[Q.VISUALIZE]:oa,[Q.BULK]:lt,[Q.ONPREM]:null,[Q.KEY_MANAGER]:Sr,[Q.AVATAR]:Kr,[Q.GROUNDING]:jr,[Q.DEEPSEARCH]:it,[Q.LICENSE_CONFIG]:Yr,[Q.CHAT]:Vt,[Q.RATE_LIMIT]:gt,[Q.CONTACT_SALES]:Kt,[Q.LLM_SERP]:Qr,[Q.ENGINE_SPEED_TEST]:co},e=fe(),m=qa(),f=Ma(),{t:r}=ie({useScope:"global"}),o=ge(),{apiKey:c,classifiers:v,turnstileState:b}=ne(o),g=Re(),{user:R}=ne(g),{models:y}=xt();m.params.tab===Q.CHAT?la({page:"deepsearch.chat_ui",banner:"banner-deepsearch.png",url:"api-dashboard/deepsearch-chat"}):la({page:"key_manager",banner:"banner-api.png",url:"api-dashboard"});const E=T(ra(m.params.tab instanceof Array?m.params.tab[0]:m.params.tab));Be(()=>m.params.tab,O=>{const D=O instanceof Array?O[0]:O;!R.value.uid&&D===Q.KEY_MANAGER&&f.push({params:{tab:Q.READER_CODE},query:m.query}),E.value=D}),we(()=>{navigator.userAgent.toLowerCase().includes("headless")||I()});async function I(){console.log("checkURLForParam");const O=new URLSearchParams(window.location.search);if(O.has("login")&&!R.value.uid){const D=new URL(window.location.href);D.searchParams.delete("login"),window.history.pushState({},"",D),e.dialog({component:kt,persistent:!0})}if(O.has("sui")){const D=ra(O.get("sui")||"embedding");if(E.value!==D)f.replace({params:{tab:D},query:{...m.query,sui:void 0}});else{const U=new URL(window.location.href);U.searchParams.delete("sui"),window.history.pushState({},"",U)}}if(O.has("task")){o.task=O.get("task")||"";const D=new URL(window.location.href);D.searchParams.delete("task"),window.history.pushState({},"",D)}if(O.has("model")){const D=O.get("model"),U=D&&y.value.find(F=>F.name===D);if(U&&E.value!==Q.CLASSIFY){const F=U.metadata.endpoints||[];[Q.CODE,Q.RERANK_CODE].includes(E.value)||(F.some(q=>["embedding","multi-vector"].includes(q))?E.value=Q.CODE:F.includes("rank")&&(E.value=Q.RERANK_CODE))}else v.value.length===0&&await o.getClassifiers(c.value),v.value.find(q=>q.classifier_id===D)&&(E.value=Q.CLASSIFY)}}const k={COMPONENTS:n,$q:e,route:m,router:f,t:r,embeddingStore:o,apiKey:c,classifiers:v,turnstileState:b,userStore:g,user:R,allModels:y,currentTab:E,checkURLForParam:I,openBrowserInfoDialog:()=>{e.dialog({component:ut,componentProps:{state:b.value}})},get EMBEDDING_TABS(){return Q},get TurnstileState(){return Fa}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),mo={key:0},fo={key:1},go={class:"column no-wrap full-width",style:{"flex-grow":"1"}};function vo(d,s,n,e,m,f){return p(),K(Na,{class:"row"},{default:t(()=>[e.turnstileState===e.TurnstileState.ERROR||e.turnstileState===e.TurnstileState.UNSUPPORTED?(p(),K(Ua,{key:0,"inline-actions":"",class:"text-white bg-negative full-width"},{action:t(()=>[a(X,{square:"",outline:"",class:"q-mr-sm",label:e.t("landing_page.view_browser_info"),onClick:e.openBrowserInfoDialog},null,8,["label"]),a(X,{square:"",outline:"",to:"/contact-sales",label:e.t("landing_page.contact_sales")},null,8,["label"])]),default:t(()=>[a(Z,{name:"report_problem",size:"sm",class:"q-mr-sm"}),e.turnstileState===e.TurnstileState.ERROR?(p(),W("span",mo,_(e.t("embedding.turnstile_error")),1)):e.turnstileState===e.TurnstileState.UNSUPPORTED?(p(),W("span",fo,_(e.t("embedding.turnstile_unsupported")),1)):B("",!0),h(" "+_(e.t("embedding.mistake_contact"))+" ",1)]),_:1})):B("",!0),Y("div",go,[(p(),K(Ba(e.COMPONENTS[e.currentTab]),{asVisualizer:e.currentTab===e.EMBEDDING_TABS.VISUALIZE,maximizedWindow:!0},null,8,["asVisualizer"]))])]),_:1})}const is=se(_o,[["render",vo],["__file","SeFoPage.vue"]]);export{is as default};
