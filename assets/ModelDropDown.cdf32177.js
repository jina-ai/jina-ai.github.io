import{a as _,b as v,Q as ie}from"./QChip.b8e61fd4.js";import{P as L,W as se,c6 as re,e as de,aj as ue,aE as W,aD as ce,f as O,w as me,K as ge,J as pe,ai as be,h as fe,ak as p,al as t,au as l,aA as _e,am as m,ax as A,aq as o,as as u,at as s,az as k,ar as I,a9 as S,ap as K,an as he,ao as ve,bW as we,bf as ye,av as ke,bE as Me,bD as ze,aZ as H}from"./index.7bc0412d.js";import{Q as w}from"./QTooltip.7fadcd4a.js";import{u as qe,Q as Fe,C as Z}from"./ClosePopup.29d6878c.js";function Ae(b){const g=Object.assign({noopener:!0},b),n=[];for(const r in g){const f=g[r];f===!0?n.push(r):(re(f)||typeof f=="string"&&f!=="")&&n.push(r+"="+f)}return n.join(",")}function G(b,g,n){let r=window.open;if(L.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)r=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(b,{openExternal:!0})}const f=r(b,"_blank",Ae(n));if(f)return L.is.desktop&&f.focus(),f;g&&g()}var Be=(b,g,n)=>{if(L.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(r=>{r?window.SafariViewController.show({url:b},se,g):G(b,g,n)});return}return G(b,g,n)};const Te={class:"full-width ellipsis q-pl-md"},Re=de({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1},allowBAAI:{type:Boolean,default:!1},demoOnly:{type:Boolean,default:!1},spaceSaving:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded","switchToRerankerTab","switchToEmbeddingTab"],setup(b,{emit:g}){const{t:n}=ue({useScope:"global"}),r=qe(),{apiKey:f,models:B,baseDeModel:J,baseEnModel:T,baseZhModel:X,jinaRerankerMultilingual:Y}=W(r),ee=ce(),{language:q}=W(ee),C=O(null);let y=null;const F=O(!1),h=b,c=g,R=()=>{var e;c("chooseModel",(e=X.value)!=null?e:T.value)},x=()=>{var e;c("chooseModel",(e=J.value)!=null?e:T.value)};me(q,e=>{h.category==="embedding"&&(e&&["zh-CN","zh-TW"].includes(e)?R():e==="de"&&x())});const ae=()=>{var i;const e=((i=C.value)==null?void 0:i.$el)||C.value;e instanceof HTMLElement?(y=new IntersectionObserver(async a=>{a[0].isIntersecting&&(await te(),y==null||y.disconnect())},{root:null,threshold:.1}),y.observe(e)):console.error("Element is not an HTMLElement:",e)};ge(()=>{pe(()=>{setTimeout(()=>{ae()},100)})}),be(()=>{y&&y.disconnect()});const D=[{name:"bge-small-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-small-en",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-m3",meta_data:{token_length:1024,output_dim:2048,size:"1.3B",language:"multilingual"},request_path:["embedding"]}],E=fe(()=>{if(h.allowBAAI)return D;const e=i=>i.slug==="jina-reranker-v2-base-multilingual"||i.slug==="jina-clip-v1"?1e4:0;return B.value.filter(i=>{const a=h.category==="multi-embeddings",d=i.request_path,M=a?["multi-embeddings","embedding"]:[h.category];return Array.isArray(d)?d.some(z=>M.includes(z)):M.includes(d)}).sort((i,a)=>a.replicas+e(a)-(i.replicas+e(i)))}),te=async()=>{F.value=!0,await r.getModels(),F.value=!1,h.category==="embedding"||h.category==="multi-embeddings"?B.value.length>0&&(q.value&&["zh-CN","zh-TW"].includes(q.value)?R():q.value==="de"?x():h.allowBAAI?c("chooseModel",D[0]):c("chooseModel",T.value)):h.category==="rank"&&c("chooseModel",Y.value);const e=new URLSearchParams(window.location.search).get("model");if(e){const a=B.value.find(d=>d.name===e);if(a){const d=a==null?void 0:a.request_path;d&&(d==="embedding"&&c("switchToEmbeddingTab"),d==="rank"&&c("switchToRerankerTab"),d&&d.includes("multi-vector")&&c("switchToEmbeddingTab")),c("chooseModel",a)}}for(const a of r.models)a.replicas=await r.getReplicas(r.apiKey,a.name);const i=new URL(window.location.href);i.searchParams.has("model")&&(i.searchParams.delete("model"),window.history.pushState({},"",i)),c("modelsLoaded")},ne=e=>{le("event","embedding_view_model_detail",{location:oe.location.href,model:e}),Be(`https://huggingface.co/jinaai/${e}`)},le=window.gtag,oe=window.document,Q=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,i)=>(m(),p(Fe,{"no-caps":"",flat:"",square:"",stretch:"",icon:e.spaceSaving?void 0:"img:"+(e.category==="rank"?l(Me):l(ze)),loading:F.value,"disable-dropdown":F.value,class:_e(e.$q.screen.lt.sm?"full-width q-py-md":""),ref_key:"componentRef",ref:C},{label:t(()=>[A("div",Te,[o(I,null,{default:t(()=>[e.spaceSaving?k("",!0):(m(),p(_,{key:0,caption:"",class:"text-dim text-left"},{default:t(()=>[u(s(e.category==="rank"?l(n)("embedding.select_rerank_model"):l(n)("embedding.select_embedding_model")),1)]),_:1})),e.currentModel?(m(),p(_,{key:1,class:"row justify-start text-white"},{default:t(()=>{var a;return[A("code",null,s((a=e.currentModel)==null?void 0:a.name),1)]}),_:1})):e.demoOnly&&E.value.length>0?(m(),p(_,{key:2,class:"row justify-start"},{default:t(()=>[A("code",null,s(E.value[0].name),1)]),_:1})):(m(),p(_,{key:3,class:"row justify-start"},{default:t(()=>[u(s(l(n)("embedding.none")),1)]),_:1}))]),_:1})])]),default:t(()=>[o(ie,null,{default:t(()=>[e.allowNone?S((m(),p(K,{key:0,clickable:"",active:!e.currentModel,onClick:i[0]||(i[0]=a=>c("chooseModel",null)),class:"q-pa-md"},{default:t(()=>[o(I,null,{default:t(()=>[o(_,{overline:"",caption:""},{default:t(()=>[u(s(l(n)("embedding.none")),1)]),_:1}),o(_,{class:"text-weight-bold"},{default:t(()=>[u(s(l(n)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[H],[Z]]):k("",!0),(m(!0),he(ke,null,ve(E.value,(a,d)=>{var M;return S((m(),p(K,{key:d,clickable:"",active:a.name===((M=e.currentModel)==null?void 0:M.name),onClick:z=>c("chooseModel",a),class:"q-pa-md"},{default:t(()=>[o(I,null,{default:t(()=>[o(_,{class:"text-weight-bold"},{default:t(()=>[A("code",null,s(a.name),1)]),_:2},1024),o(_,{overline:"",caption:""},{default:t(()=>[u(s(l(n)(`embedding.${a.name.replace(".","_")}_description`)),1)]),_:2},1024),o(_,{caption:"",class:"row"},{default:t(()=>{var z,j,N,$,P,U,V;return[e.allowBAAI?k("",!0):(m(),p(v,{key:0,label:a.replicas>0?l(n)("embedding.running"):l(n)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:t(()=>[o(w,{"max-width":"300px"},{default:t(()=>[u(s(l(n)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"])),a.tags&&a.tags.includes("multimodal")?(m(),p(v,{key:1,square:"",size:"xs",outline:"",color:a.name!==((z=e.currentModel)==null?void 0:z.name)?"grey-5":"",style:{"border-radius":"0"},label:l(n)("embedding.multimodal"),icon:"mms"},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.multimodal_explain")),1)]),_:1})]),_:2},1032,["color","label"])):k("",!0),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(m(),p(v,{key:2,color:a.name!==((j=e.currentModel)==null?void 0:j.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:l(n)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):k("",!0),o(v,{label:a.meta_data.token_length,square:"",color:a.name!==((N=e.currentModel)==null?void 0:N.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(m(),p(v,{key:3,label:a.meta_data.output_dim,square:"",color:a.name!==(($=e.currentModel)==null?void 0:$.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):k("",!0),o(v,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((P=e.currentModel)==null?void 0:P.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),o(v,{label:Q(a.meta_data.language),square:"",color:a.name!==((U=e.currentModel)==null?void 0:U.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.language_explain",{_language:Q(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),S(o(v,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==((V=e.currentModel)==null?void 0:V.name)?"grey-5":"",style:{"border-radius":"0"},onClick:we(Ce=>ne(a.name),["stop"]),clickable:"",label:l(n)("embedding.opensource")},{default:t(()=>[o(w,null,{default:t(()=>[u(s(l(n)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"]),[[ye,a.name!=="jina-reranker-v1-base-en"]])]}),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[H],[Z]])}),128))]),_:1})]),_:1},8,["icon","loading","disable-dropdown","class"]))}});export{Re as _};
