import{aH as De,e as G,dp as j,j as de,ag as ue,k as K,a1 as ce,a2 as c,a3 as f,a4 as t,a5 as n,af as se,aj as L,ak as b,ab as S,al as y,ad as d,aJ as we,q as V,as as me,ac as T,aX as Ue,aY as te,b2 as Qe,a$ as Ee,b0 as je,b1 as ie,m as F,aq as Le,b6 as Oe,a7 as N,ae as A,ao as Ve,cv as Fe,W as Pe,bu as He,n as ze,dq as Ne,dr as Ye,aa as U,aQ as Ge,a8 as ne,a9 as le,ai as Je,a6 as oe,aR as We,aP as Xe,an as Ze,s as $e,bK as ea,bL as aa,p as ta,K as ia,J as na,av as la,L as he,V as oa,bT as sa,aU as ra,ds as da}from"./index-DuaKnFp4.js";import{a as C,b as Ke,Q as be}from"./QItemLabel-BGKC4ZL9.js";import{Q as O}from"./QTooltip-Cu8chvFe.js";import{a as Ie,Q as ua}from"./QBtnGroup-DNdwxS5e.js";import{d as ca,a as re,Q as ve}from"./finetune-AluJIoNU.js";import{a as ma}from"./QExpansionItem-GZ4Jk0GJ.js";import{Q as qe}from"./QLinearProgress-CHxc0YSI.js";import{c as fa}from"./copy-to-clipboard-D0GO7Xwf.js";import{u as H,a as ya}from"./embedding-C6f_VsBD.js";import{a as xe,Q,b as ke}from"./QTable-eF42A3IR.js";import{C as _a}from"./ClosePopup-B-uxLYaT.js";import{u as pa}from"./use-dialog-plugin-component-C8U0QgZr.js";import{Q as ga}from"./QSpace-DZg7vdfV.js";const Se=De("apiKey",{state:()=>({keys:[],isLoading:!1,keysInfoCache:{},isBusyState:new Set,isChecking:!1}),getters:{primaryKey:o=>{var l;return(l=o.keys.find(i=>i.isPrimary))==null?void 0:l.key},primaryKeyInfo:o=>{var l;return o.keysInfoCache[((l=o.keys.find(i=>i.isPrimary))==null?void 0:l.key)||""]}},actions:{async addKey(o){var l;if(!(!((l=G.currentUser)!=null&&l.uid)||!o))try{const{data:i}=await j.request("apiKey","addKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await j.getIdToken()}`},body:JSON.stringify({key:o})});return i&&(this.keys.unshift(i),this.getKeyInfo(o)),i}catch(i){console.error(i)}},async setPrimaryKey(o){var l;if((l=G.currentUser)!=null&&l.uid){this.isBusyState.add(o);try{const{data:i}=await j.request("apiKey","setPrimaryKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await j.getIdToken()}`},body:JSON.stringify({key:o,isPrimary:!0})});return i&&(this.keys.forEach(e=>(e.key===o?e.isPrimary=!0:e.isPrimary=!1,e)),H().apiKey=o),i}catch(i){console.error(i)}finally{this.isBusyState.delete(o)}}},async checkPrimaryKey(){var o;if((o=G.currentUser)!=null&&o.uid&&!this.isChecking)try{this.isChecking=!0;const l=H();this.primaryKey&&this.primaryKey!==l.apiKey?l.isPaidUser?(this.keys.find(e=>e.key===l.apiKey)||await this.addKey(l.apiKey),await this.setPrimaryKey(l.apiKey)):l.apiKey=this.primaryKey:await this.getKeyInfo(l.apiKey)}finally{this.isChecking=!1}},async removeKey(o){var l;if((l=G.currentUser)!=null&&l.uid){this.isBusyState.add(o);try{const{data:i}=await j.request("apiKey","removeKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await j.getIdToken()}`},body:JSON.stringify({key:o})});i&&(this.keys.splice(this.keys.findIndex(e=>e.key===o),1),delete this.keysInfoCache[o])}catch(i){console.error(i)}finally{this.isBusyState.delete(o)}}},async fetchKeys(o=!0){var l;if(!(!((l=G.currentUser)!=null&&l.uid)||this.isLoading)){this.isLoading=!0;try{const{data:i}=await j.request("apiKey","keyList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await j.getIdToken()}`}});if(this.keys=i,o)for(const e of this.keys)this.getKeyInfo(e.key)}catch(i){console.error(i)}finally{this.isLoading=!1}}},async getKeyInfo(o){var l;if(o&&!this.isBusyState.has(o))try{this.isBusyState.add(o);const i=await H().getKeyInfo(o);o===H().apiKey&&(H().apiKeyInfo=i);const e=await H().getUsage(o);this.keysInfoCache[o]={...i,usage:e,last_used_at:(l=e==null?void 0:e[0])==null?void 0:l.updated_at}}finally{this.isBusyState.delete(o)}}}}),ha=de({__name:"UsageHistoryDialog",props:{apiKey:{}},setup(o,{expose:l}){l();const i=o,{t:e}=ue({useScope:"global"}),m=Se(),{dialogRef:_}=pa(),a=()=>{var r;(r=B.value)==null||r.requestServerInteraction()},w=()=>{I.value=[]},g=r=>{var x,D;switch((x=r.request_path)==null?void 0:x.toLowerCase()){case"/encode":case"/checkfact":return R((D=r.metadata)==null?void 0:D.model_name);case"/embeddings":case"/rerank":case"/classify":case"/train":return`api.jina.ai/v1${r.request_path}`;case"/multi-embeddings":return"api.jina.ai/v1/multi-vector";case"/segment":return"segment.jina.ai";default:return r.request_path}},R=r=>{if(!r)return"";switch(r.toLowerCase()){case"reader-crawl":return"r.jina.ai";case"reader-search":return"s.jina.ai";case"grounding-checkfact":return"g.jina.ai";default:return r}},B=K(null),I=K([]),v=K([{name:"icon",label:"",field:"amount",sortable:!1,align:"right"},{name:"createdAt",label:e("embedding.usage_time"),field:"createdAt",sortable:!1,align:"left",format:r=>ca.formatDate(r,"YYYY-MM-DD")},{name:"amount",label:e("embedding.tokens"),field:"amount",sortable:!1,align:"right",format:r=>r>0?`+${r}`:`${r}`},{name:"reason",label:e("embedding.usage_reason"),field:"reason",sortable:!1,align:"left"},{name:"requestPath",label:e("embedding.request_path"),field:"request_path",sortable:!1,align:"left"},{name:"requestNumber",label:e("embedding.request_number"),field:"request_number",sortable:!1,align:"right",format:r=>r?re(r):""}]),q={props:i,t:e,apiKeyStore:m,dialogRef:_,onUsageHistoryDialogShow:a,onUsageHistoryDialogHide:w,getEndpoint:g,formatModelName:R,usageTableRef:B,usageRows:I,usageColumns:v,getUsageHistory:async()=>{var x,D;await m.getKeyInfo(i.apiKey);const r=(D=(x=m.keysInfoCache)==null?void 0:x[i.apiKey])==null?void 0:D.usage;!r||r.length===0||(I.value=r.map(h=>{const p=new Date(h.updated_at);let P=h.quantity,k=e(`embedding.usage_reason_${h.type}`);return h.type===ya.CONSUME?(P=-P,h.metadata.model_name&&(k=k+": "+R(h.metadata.model_name))):(h.metadata.product_name&&(k=k+": "+h.metadata.product_name),h.metadata.order_quantity&&h.metadata.order_quantity>1&&(k=k+` (x ${h.metadata.order_quantity})`)),{createdAt:p,amount:P,reason:k,request_path:g(h),request_number:h.request_number}}))},get QTable(){return xe},get formatNumber(){return re}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}});function ba(o,l,i,e,m,_){return c(),f(Ue,{ref:"dialogRef",onShow:e.onUsageHistoryDialogShow,onHide:e.onUsageHistoryDialogHide},{default:t(()=>[n(se,{style:{width:"1000px","max-width":"80vw"}},{default:t(()=>[n(L,{class:"q-pa-md"},{default:t(()=>[n(b,{avatar:""},{default:t(()=>[n(S,{name:"history"})]),_:1}),n(b,null,{default:t(()=>[n(C,null,{default:t(()=>[y(d(e.t("embedding.usage_history")),1)]),_:1}),n(C,{caption:""},{default:t(()=>[y(d(e.t("embedding.usage_history_explain")),1)]),_:1})]),_:1}),n(b,{side:""},{default:t(()=>[we(n(V,{icon:"close",flat:"",round:"",dense:""},null,512),[[_a]])]),_:1})]),_:1}),n(me),n(e.QTable,{ref:"usageTableRef",flat:"",class:"bg-transparent","row-key":"createdAt",rows:e.usageRows,columns:e.usageColumns,loading:e.apiKeyStore.isBusyState.has(e.props.apiKey),onRequest:e.getUsageHistory,pagination:{rowsPerPage:10}},{"body-cell-icon":t(a=>[n(Q,{key:"icon",props:a},{default:t(()=>[a.row.amount>0?(c(),f(S,{key:0,name:"o_add_circle_outline",color:"primary"})):(c(),f(S,{key:1,name:"o_remove_circle_outline",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-amount":t(a=>[n(Q,{key:"amount",props:a},{default:t(()=>[y(d((a.row.amount>0?"+":"")+e.formatNumber(a.row.amount)),1)]),_:2},1032,["props"])]),"body-cell-requestPath":t(a=>[n(Q,{key:"request_path",props:a},{default:t(()=>[T("code",null,d(a.row.request_path),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1},512)}const va=ce(ha,[["render",ba],["__file","UsageHistoryDialog.vue"]]),ka=de({__name:"RateLimitComponent",props:{showActionButtons:Boolean},setup(o,{expose:l}){l();const{t:i}=ue({useScope:"global"}),e=Le(),m=K([{icon:te,endpoint:"https://r.jina.ai",name:i("reader.title"),description:i("rate_limit.rjinaai"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1000 RPM",tokenCounting:i("rate_limit.output_token_counting"),latency:"4.6s",weight:e.name==="reader"?100:18},{icon:te,endpoint:"https://s.jina.ai",name:i("reader.title"),description:i("rate_limit.sjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"40 RPM",wPremium:"100 RPM",tokenCounting:i("rate_limit.output_token_counting"),latency:"8.7s",weight:e.name==="reader"?99:17},{icon:te,endpoint:"https://g.jina.ai",name:i("reader.title"),description:i("rate_limit.gjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"10 RPM",wPremium:"30 RPM",tokenCounting:i("rate_limit.total_token_counting"),latency:"22.7s",weight:e.name==="reader"?99:17},{icon:Qe,endpoint:"https://segment.jina.ai",name:i("tokenizer.title"),description:i("rate_limit.tokenizer"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1,000 RPM",tokenCounting:i("rate_limit.no_token_counting"),latency:"0.3s",weight:e.name==="segmenter"?100:1},{icon:Ee,endpoint:"https://api.jina.ai/v1/embeddings",name:i("embedding.title"),description:i("rate_limit.embeddings"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",tokenCounting:i("rate_limit.input_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),latencyExplain:i("rate_limit.batch_explain"),weight:e.name==="embeddings"?100:20},{icon:je,endpoint:"https://api.jina.ai/v1/rerank",name:i("reranker.title"),description:i("rate_limit.tokenizer"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",tokenCounting:i("rate_limit.input_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),latencyExplain:i("rate_limit.batch_explain"),weight:e.name==="reranker"?100:19},{icon:ie,endpoint:"https://api.jina.ai/v1/classify",name:`${i("classifier.title")} (${i("classifier.compare_table.zero_shot")})`,description:i("rate_limit.classifier_zero_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"200 RPM & 500,000 TPM",wPremium:"1,000 RPM & 3,000,000 TPM",tokenCounting:i("rate_limit.classifier_zero_shot_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?100:15},{icon:ie,endpoint:"https://api.jina.ai/v1/classify",name:`${i("classifier.title")} (${i("classifier.compare_table.few_shot")})`,description:i("rate_limit.classifier_few_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:i("rate_limit.classifier_few_shot_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?98:15},{icon:ie,endpoint:"https://api.jina.ai/v1/train",name:i("classifier.title"),description:i("rate_limit.classifier"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:i("rate_limit.classifier_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?99:15}]),_=K([{name:"icon",field:"icon",label:"",align:"left"},{name:"name",field:"name",label:i("rate_limit.product"),align:"left"},{name:"endpoint",field:"endpoint",label:i("rate_limit.endpoint"),align:"left"},{name:"description",field:"description",label:i("rate_limit.description"),align:"left",sortable:!0},{name:"woAPIkey",field:"woAPIkey",label:i("rate_limit.woAPIkey"),align:"right"},{name:"wAPIkey",field:"wAPIkey",label:i("rate_limit.wAPIkey"),align:"right"},{name:"wPremium",field:"wPremium",label:i("rate_limit.wPremium"),align:"right"},{name:"latency",field:"latency",label:i("rate_limit.latency"),align:"right"},{name:"tokenCounting",field:"tokenCounting",label:i("rate_limit.tokenCounting"),align:"left"},{name:"requestType",field:"requestType",label:i("rate_limit.requestType"),align:"left"}]),a=K(_.value.map(B=>B.name)),w=F(()=>m.value.sort((B,I)=>I.weight-B.weight)),g=K({rowsPerPage:10}),R={t:i,route:e,rows:m,columns:_,visibleColumns:a,sortedRows:w,initialPagination:g};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),wa=["innerHTML"],Pa={class:"text-bold silver-foil"},Ka={class:"text-bold golden-foil"},Ia={class:"row q-pa-md justify-center full-width"},qa={key:1},xa={class:"silver-foil text-bold"},Sa={class:"golden-foil text-bold"},Ta={key:1};function Aa(o,l,i,e,m,_){return c(),f(xe,{class:"my-sticky-column-table",flat:"",square:"","title-class":"q-pa-md",title:e.t("rate_limit.title"),rows:e.sortedRows,columns:e.columns,"row-key":"endpoint",pagination:e.initialPagination,"hide-pagination":"","visible-columns":e.visibleColumns},Oe({top:t(()=>[n(L,{class:"full-width q-pa-lg"},{default:t(()=>[n(b,null,{default:t(()=>[n(C,{class:"text-weight-bold"},{default:t(()=>[y(d(e.t("rate_limit.title")),1)]),_:1}),n(C,{caption:""},{default:t(()=>[T("span",{innerHTML:e.t("rate_limit.explain")},null,8,wa)]),_:1})]),_:1}),n(ga),n(b,{side:""},{default:t(()=>[n(qe,{modelValue:e.visibleColumns,"onUpdate:modelValue":l[0]||(l[0]=a=>e.visibleColumns=a),multiple:"",outlined:"",square:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),_:1})]),_:1})]),"header-cell-wAPIkey":t(a=>[n(ke,{props:a},{default:t(()=>[T("span",Pa,d(a.col.label),1)]),_:2},1032,["props"])]),"header-cell-wPremium":t(a=>[n(ke,{props:a},{default:t(()=>[T("span",Ka,d(a.col.label),1)]),_:2},1032,["props"])]),"body-cell-icon":t(a=>[n(Q,{props:a},{default:t(()=>[n(ua,{src:a.value,width:"36px"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-endpoint":t(a=>[n(Q,{props:a},{default:t(()=>[T("code",null,d(a.value),1)]),_:2},1032,["props"])]),"body-cell-woAPIkey":t(a=>[n(Q,{props:a},{default:t(()=>[a.value?(c(),N("span",qa,d(a.value),1)):(c(),f(S,{key:0,name:"block",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-wAPIkey":t(a=>[n(Q,{props:a},{default:t(()=>[T("span",xa,d(a.value),1),String(a.value).includes("X")?(c(),f(S,{key:0,name:"keyboard_double_arrow_up",color:"primary",class:"cursor-pointer"},{default:t(()=>[n(O,{"max-width":"300px"},{default:t(()=>[y(d(e.t("rate_limit.batch_explain")),1)]),_:1})]),_:1})):A("",!0)]),_:2},1032,["props"])]),"body-cell-wPremium":t(a=>[n(Q,{props:a},{default:t(()=>[T("span",Sa,d(a.value),1)]),_:2},1032,["props"])]),"body-cell-latency":t(a=>[n(Q,{props:a},{default:t(()=>[a.value?(c(),N("span",Ta,d(a.value),1)):(c(),f(Ke,{key:0,icon:"bolt",label:a.row.latencyDepends,size:"sm"},{default:t(()=>[y(d(a.value)+" ",1),a.row.latencyExplain?(c(),f(S,{key:0,name:"help",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(O,{"max-width":"300px"},{default:t(()=>[y(d(a.row.latencyExplain),1)]),_:2},1024)]),_:2},1024)):A("",!0)]),_:2},1032,["label"]))]),_:2},1032,["props"])]),_:2},[i.showActionButtons?{name:"bottom",fn:t(()=>[T("div",Ia,[n(Ie,{outline:"",square:""},{default:t(()=>[n(V,{outline:"",label:e.t("get_new_key"),square:"",icon:"key",href:"/?sui=apikey",padding:"md",target:"_blank"},null,8,["label"]),n(me),n(V,{outline:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/contact-sales",padding:"md"},null,8,["label"])]),_:1})])]),key:"0"}:void 0]),1032,["title","rows","columns","pagination","visible-columns"])}const Ca=ce(ka,[["render",Aa],["__file","RateLimitComponent.vue"]]),Ra=de({__name:"PurchaseComponent",props:{purchaseKey:{default:""},hideUsage:{type:Boolean,default:!1},hideKey:{type:Boolean,default:!1},hideStripeInfo:{type:Boolean,default:!1},hideFreePlan:{type:Boolean,default:!1}},setup(o,{expose:l}){l();const i=o,{t:e}=ue({useScope:"global"}),m=ze(),_=Se(),a=H(),{apiKey:w,products:g,isApiKeyInfoLoading:R,isPremiumPaidUser:B,apiKeyInfo:I}=Ve(a),v=K(i.purchaseKey||w.value),s=K(I==null?void 0:I.value);Fe(async()=>{s.value=await a.getKeyInfo(v.value),x.value=!E.value||Y.value});const q=K(0),r=[{label:"10K",value:1e4},{label:"1M",value:1e6},{label:"1B",value:1e9}],x=K(!0),D=K(1e6),h=K(""),p=K(!0),P={"1M tokens":["paywall.no_commercial"],"1B tokens":["paywall.full_commercial","paywall.key_manager"],"11B tokens":["paywall.full_commercial","paywall.higher_limit","paywall.key_manager","paywall.priority_support","paywall.free_hour_consult"]},k=F(()=>g.value.map(u=>({...u,isActive:()=>h.value===u.price_id,tag:()=>e(`embedding.${u.product_name}_targetUser`),title:()=>e(`embedding.${u.product_name.replace(".","_")}`),description:()=>e(`embedding.${u.product_name.replace(".","_")}_intuition1`),isFree:u.price===0,priceLabel:()=>u.price>0?`$${u.price}`:e("embedding.free"),priceDescription:()=>u.price>0?`${(u.price/u.token_quantity*1e6).toFixed(3)} ${e("embedding.per_m")}`:e("embedding.1M_free_description"),handler:()=>u.price>0?fe(u.price_id):void 0}))),J=F(()=>{var u,M;return(M=(u=s.value)==null?void 0:u.wallet.total_balance)!=null?M:0}),E=F(()=>{var u;return!!((u=s.value)!=null&&u.email)}),Y=F(()=>{var u;return E.value&&!!((u=s.value)!=null&&u.metadata.auto_recharge)}),Z=F(()=>!!v.value&&(s==null?void 0:s.value)!==void 0),$=F(()=>!Z.value||R.value),fe=async u=>{var ge;if($.value||h.value)return;const M=g.value.find(ae=>ae.price_id===u),z=new URL(window.location.href),Re=Date.now().toString();z.searchParams.set("price_id",u),z.searchParams.set("session_id",Re),z.searchParams.set("purchase_status","cancel");const Me=z.toString();z.searchParams.set("purchase_status","success");const Be=z.toString();h.value=u;const X={price_id:u,success_url:Be,cancel_url:Me},_e=localStorage.getItem(Ne);_e&&(X.meta_data={sales_key:_e}),x.value&&(X.meta_data={...X.meta_data,auto_recharge:!0,threshold:D.value}),M&&gtag("event","begin_checkout",{currency:M.currency,value:M.price,items:[{id:M.product_id,name:M.product_name}]});const pe=await a.checkoutWithStripe(v.value,X);if(h.value="",!pe)return;a.apiKey=v.value,((ge=_.keys)==null?void 0:ge.some(ae=>ae.key===v.value))||await _.addKey(v.value),await _.setPrimaryKey(a.apiKey),a.getCurrentKeyInfo(),window.location.href=pe.url},ee=async()=>{s.value=await a.getKeyInfo(v.value),x.value=!E.value||Y.value,w.value===v.value&&a.setApiKeyInfo(s.value)},Te=async u=>{E.value&&(!Y.value&&u?m.dialog({title:e("embedding.auto_recharge_enable_title"),message:e("embedding.auto_recharge_enable_message")}):Y.value&&!u&&m.dialog({title:e("embedding.auto_recharge_confirm_title"),message:e("embedding.auto_recharge_confirm_message"),cancel:!0}).onOk(async()=>{try{await a.cancelAutoRecharge(i.purchaseKey||w.value)}catch(M){m.notify({message:M instanceof Error?M.message:String(M),color:"negative"}),x.value=!0}ee()}).onCancel(()=>{x.value=!0}))},Ae=async()=>{Z.value&&v.value!==w.value&&m.dialog({title:e("embedding.api_key_update_title"),message:e("embedding.api_key_update_message"),cancel:!0}).onOk(async()=>{w.value=v.value,ee(),await _.addKey(v.value),_.setPrimaryKey(v.value)})},Ce=()=>{$.value||m.dialog({component:va,componentProps:{apiKey:v.value}})};Pe(async()=>{await a.getProducts(),setInterval(()=>{q.value=(q.value+1)%He.length},3e3)});const W=K(!1),ye={props:i,t:e,$q:m,apiKeyStore:_,embeddingStore:a,apiKey:w,products:g,isApiKeyInfoLoading:R,isPremiumPaidUser:B,apiKeyInfo:I,inputApiKey:v,inputApiKeyInfo:s,currentIndex:q,rechargeThresholdOptions:r,autoRecharge:x,rechargeThreshold:D,currentPriceID:h,isPwd:p,tierFeatures:P,productCards:k,apiKeyTokens:J,isPaidUser:E,isAutoCharge:Y,isInputApiKeyValid:Z,isInputApiKeyDisabled:$,checkoutProduct:fe,getKeyInfo:ee,updateAutoRecharge:Te,updateApiKey:Ae,openUsageHistoryDialog:Ce,isApiKeyCopyDone:W,copyApiKey:()=>{!w.value||W.value||(fa(w.value).then(()=>{m.notify({message:e("copy_to_clipboard_success"),icon:"done"}),W.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{W.value=!1},1800))},get flatEnterprises(){return Ye},get formatNumber(){return re},RateLimitComponent:Ca};return Object.defineProperty(ye,"__isScriptSetup",{enumerable:!1,value:!0}),ye}}),Ma=["innerHTML"],Ba=["innerHTML","data-text"],Da={class:"row justify-center text-caption text-dim q-pt-md q-pb-sm"},Ua={class:"row justify-center q-gutter-x-sm"};function Qa(o,l,i,e,m,_){return c(),f(be,{class:"q-pa-md q-gutter-y-sm"},{default:t(()=>[!i.hideUsage&&e.isInputApiKeyValid?(c(),f(L,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(b,{key:0,avatar:""},{default:t(()=>[n(S,{name:"data_usage"})]),_:1})):A("",!0),n(b,null,{default:t(()=>[n(C,{class:"text-bold"},{default:t(()=>[y(d(e.t("embedding.remaining")),1)]),_:1}),n(C,{class:U({"text-negative":e.apiKeyTokens<0})},{default:t(()=>[T("span",{innerHTML:e.t("embedding.remaining_left",{_leftTokens:e.formatNumber(e.apiKeyTokens)})},null,8,Ma)]),_:1},8,["class"])]),_:1}),n(b,{side:""},{default:t(()=>[n(Ie,{square:"",outline:""},{default:t(()=>[n(V,{outline:"",square:"",icon:"refresh",disable:e.isInputApiKeyDisabled,onClick:e.getKeyInfo,loading:e.isApiKeyInfoLoading},{default:t(()=>[n(O,null,{default:t(()=>[y(d(e.t("embedding.refresh_token_count1")),1)]),_:1})]),_:1},8,["disable","loading"]),n(me),n(V,{square:"",outline:"","no-caps":"",label:e.t("embedding.last_7_days"),disable:e.isInputApiKeyDisabled,onClick:e.openUsageHistoryDialog},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})):A("",!0),i.hideKey?A("",!0):(c(),f(L,{key:1},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(b,{key:0,avatar:""},{default:t(()=>[n(S,{name:"key",class:U({"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser})},null,8,["class"])]),_:1})):A("",!0),n(b,null,{default:t(()=>[n(Ge,{"input-style":"font-family: monospace",modelValue:e.inputApiKey,"onUpdate:modelValue":l[1]||(l[1]=a=>e.inputApiKey=a),"hide-bottom-space":"",type:e.isPwd?"password":"text",hint:e.t("embedding.key_to_top_up"),filled:"",square:"",label:e.inputApiKey?`${e.t("embedding.key_warn_v2")}`:e.t("embedding.key_enter_placeholder_to_topup"),error:!e.isInputApiKeyValid,"error-message":e.inputApiKey?e.t("embedding.input_api_key_error1"):"","input-class":"ellipsis"},{append:t(()=>[n(S,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[0]||(l[0]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),prepend:t(()=>[n(V,{flat:"",square:"",icon:e.isApiKeyCopyDone?"done":"content_copy",color:e.isApiKeyCopyDone?"primary":"",onClick:e.copyApiKey,stretch:""},{default:t(()=>[n(O,null,{default:t(()=>[y(d(e.t("copy")),1)]),_:1})]),_:1},8,["icon","color"])]),after:t(()=>[e.isInputApiKeyValid&&e.inputApiKey!==e.apiKey?(c(),f(V,{key:0,icon:"save",onClick:e.updateApiKey,stretch:"",square:"",flat:""})):A("",!0)]),_:1},8,["modelValue","type","hint","label","error","error-message"])]),_:1})]),_:1})),i.hideStripeInfo?A("",!0):(c(),f(L,{key:2},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(b,{key:0,avatar:"",side:"",class:"relative-position"},{default:t(()=>[n(S,{name:"fab fa-stripe"}),n(S,{name:"o_verified_user",size:"xs",class:"absolute-bottom-right q-mr-sm q-mb-xs text-positive"})]),_:1})):A("",!0),n(b,null,{default:t(()=>[n(C,{class:"text-bold"},{default:t(()=>[y(d(e.t("embedding.buy_more_quota")),1)]),_:1}),n(C,{caption:"",lines:"2"},{default:t(()=>[y(d(e.t("embedding.tax_may_apply")),1)]),_:1})]),_:1}),e.isPaidUser?(c(),f(b,{key:1,side:"",class:"q-pa-none"},{default:t(()=>[n(V,{outline:"","icon-right":"open_in_new",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[n(O,null,{default:t(()=>[y(d(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["label"])]),_:1})):A("",!0)]),_:1})),n(se,{class:"row q-pa-md q-py-none bg-transparent",flat:""},{default:t(()=>[(c(!0),N(ne,null,le(e.productCards.filter(a=>!i.hideFreePlan||!a.isFree),(a,w)=>(c(),N("div",{key:w,class:U(["col-12 col-sm-6 q-pa-sm cursor-pointer",{"col-lg-4":!i.hideFreePlan}])},[we((c(),f(se,{bordered:"",flat:"",class:U(["full-width full-height column justify-between",!e.isInputApiKeyDisabled&&!e.currentPriceID&&!a.isFree?"q-hoverable bg-mixed-200":"cursor-not-allowed"]),square:"",style:Je(a.isActive()?"cursor: wait !important;":""),onClick:a.handler},{default:t(()=>[l[6]||(l[6]=T("span",{class:"q-focus-helper"},null,-1)),n(oe,{class:"column items-center non-selectable text-h2 q-pt-xl"},{default:t(()=>[n(Ke,{label:a.tag(),outline:"",square:"",style:{"border-radius":"0"},size:"sm",class:U(["q-my-xl",{"silver-border":a.product_name==="1B tokens","gold-border":a.product_name==="11B tokens"}])},null,8,["label","class"]),T("span",{innerHTML:a.title(),"data-text":a.title(),class:U(["text-weight-bold",{"text-dim":a.product_name==="1M tokens","silver-foil":a.product_name==="1B tokens","golden-foil":a.product_name==="11B tokens"}])},null,10,Ba),T("div",Da,[y(d(e.t("embedding.includes"))+" ",1),n(O,{"max-width":"300px"},{default:t(()=>[y(d(a.description()),1)]),_:2},1024)]),T("div",Ua,[(c(!0),N(ne,null,le(e.flatEnterprises,g=>(c(),f(S,{key:g.label,name:`img:${g.icon}`,size:"sm"},{default:t(()=>[n(O,null,{default:t(()=>[T("b",null,d(e.t(g.label)),1),l[5]||(l[5]=T("br",null,null,-1)),y(" "+d(e.t(g.caption)),1)]),_:2},1024)]),_:2},1032,["name"]))),128))])]),_:2},1024),n(oe,{class:"column items-center non-selectable"},{default:t(()=>[n(be,{dense:""},{default:t(()=>[(c(!0),N(ne,null,le(e.tierFeatures[a.product_name],g=>(c(),f(L,{key:g},{default:t(()=>[n(b,null,{default:t(()=>[n(C,{caption:""},{default:t(()=>[a.product_name!=="1M tokens"?(c(),f(S,{key:0,name:"task_alt",class:U({"golden-foil":a.product_name==="11B tokens","silver-foil":a.product_name==="1B tokens"})},null,8,["class"])):A("",!0),y(" "+d(e.t(g)),1)]),_:2},1024),n(O,{"max-width":"300px"},{default:t(()=>[y(d(e.t(`${g}_description`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),n(oe,{class:U({"bg-mixed-300":!a.isFree})},{default:t(()=>[n(L,null,{default:t(()=>[n(b,null,{default:t(()=>[n(C,{class:U({"text-bold":!a.isFree})},{default:t(()=>[y(d(a.priceLabel()),1)]),_:2},1032,["class"]),n(C,{caption:""},{default:t(()=>[y(d(a.priceDescription()),1)]),_:2},1024)]),_:2},1024),a.isFree?A("",!0):(c(),f(b,{key:0,side:""},{default:t(()=>[n(S,{name:"add_shopping_cart"})]),_:1}))]),_:2},1024)]),_:2},1032,["class"]),n(ve,{showing:e.currentPriceID===a.price_id,label:e.t("embedding.wait_stripe"),"label-style":"font-size: 0.8em",size:"sm",class:"non-selectable lock-blur"},null,8,["showing","label"])]),_:2},1032,["class","style","onClick"])),[[We,!a.isFree&&!e.isInputApiKeyDisabled&&!e.currentPriceID]])],2))),128)),n(ve,{showing:!e.isInputApiKeyValid,class:"lock-blur",label:e.t("embedding.right_api_key_to_charge"),size:"0"},null,8,["showing","label"])]),_:1}),n(ma,{label:e.t("rate_limit.understanding"),icon:e.$q.screen.gt.sm?"speed":void 0,"header-class":"text-bold",caption:e.t("rate_limit.understanding_description")},{default:t(()=>[n(e.RateLimitComponent,{"show-action-buttons":!1})]),_:1},8,["label","icon","caption"]),n(L,null,{default:t(()=>[e.$q.screen.gt.sm?(c(),f(b,{key:0,avatar:""},{default:t(()=>[n(S,{name:"currency_exchange"})]),_:1})):A("",!0),n(b,null,{default:t(()=>[n(C,{class:"text-bold"},{default:t(()=>[y(d(e.t("embedding.auto_recharge")),1)]),_:1}),n(C,{caption:"",lines:"2"},{default:t(()=>[y(d(e.isAutoCharge?e.t("embedding.auto_recharge_enable"):e.t("embedding.auto_recharge_description")),1)]),_:1})]),_:1}),n(b,{side:""},{default:t(()=>[n(Xe,{modelValue:e.autoRecharge,"onUpdate:modelValue":[l[2]||(l[2]=a=>e.autoRecharge=a),e.updateAutoRecharge],color:"primary",disable:e.isInputApiKeyDisabled,"checked-icon":"check","unchecked-icon":"close"},null,8,["modelValue","disable"])]),_:1}),n(b,{side:""},{default:t(()=>[n(qe,{disable:!e.autoRecharge,modelValue:e.rechargeThreshold,"onUpdate:modelValue":l[3]||(l[3]=a=>e.rechargeThreshold=a),options:e.rechargeThresholdOptions,label:e.t("embedding.recharge_threshold"),style:{"min-width":"160px"},"option-label":a=>`≤ ${a.label} ${e.t("embedding.tokens")}`,onClick:l[4]||(l[4]=Ze(()=>{},["prevent"])),"emit-value":"","map-options":""},null,8,["disable","modelValue","label","option-label"])]),_:1})]),_:1})]),_:1})}const $a=ce(Ra,[["render",Qa],["__scopeId","data-v-2cf23567"],["__file","PurchaseComponent.vue"]]),et=$e({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:l,emit:i}){const e=na(),m=K(null);let _=0;const a=[];function w(s){const q=typeof s=="boolean"?s:o.noErrorFocus!==!0,r=++_,x=(p,P)=>{i(`validation${p===!0?"Success":"Error"}`,P)},D=p=>{const P=p.validate();return typeof P.then=="function"?P.then(k=>({valid:k,comp:p}),k=>({valid:!1,comp:p,err:k})):Promise.resolve({valid:P,comp:p})};return(o.greedy===!0?Promise.all(a.map(D)).then(p=>p.filter(P=>P.valid!==!0)):a.reduce((p,P)=>p.then(()=>D(P).then(k=>{if(k.valid===!1)return Promise.reject(k)})),Promise.resolve()).catch(p=>[p])).then(p=>{if(p===void 0||p.length===0)return r===_&&x(!0),!0;if(r===_){const{comp:P,err:k}=p[0];if(k!==void 0&&console.error(k),x(!1,P),q===!0){const J=p.find(({comp:E})=>typeof E.focus=="function"&&la(E.$)===!1);J!==void 0&&J.comp.focus()}}return!1})}function g(){_++,a.forEach(s=>{typeof s.resetValidation=="function"&&s.resetValidation()})}function R(s){s!==void 0&&he(s);const q=_+1;w().then(r=>{q===_&&r===!0&&(o.onSubmit!==void 0?i("submit",s):s!==void 0&&s.target!==void 0&&typeof s.target.submit=="function"&&s.target.submit())})}function B(s){s!==void 0&&he(s),i("reset"),oa(()=>{g(),o.autofocus===!0&&o.noResetFocus!==!0&&I()})}function I(){sa(()=>{if(m.value===null)return;const s=m.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||m.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||m.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(m.value.querySelectorAll("[tabindex]"),q=>q.tabIndex!==-1);s!=null&&s.focus({preventScroll:!0})})}ra(da,{bindComponent(s){a.push(s)},unbindComponent(s){const q=a.indexOf(s);q!==-1&&a.splice(q,1)}});let v=!1;return ea(()=>{v=!0}),aa(()=>{v===!0&&o.autofocus===!0&&I()}),Pe(()=>{o.autofocus===!0&&I()}),Object.assign(e.proxy,{validate:w,resetValidation:g,submit:R,reset:B,focus:I,getValidationComponents:()=>a}),()=>ta("form",{class:"q-form",ref:m,onSubmit:R,onReset:B},ia(l.default))}});export{$a as P,et as Q,Ca as R,va as U,Se as u};
