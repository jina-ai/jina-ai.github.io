import{e as Se,f as fe,ag as ve,ah as H,aB as Lt,cb as us,u as Qo,ai as q,am as k,aj as me,ak as rt,ar as De,aA as pt,au as Be,an as T,av as Ve,as as re,aq as ye,at as be,ae as Jn,al as Oe,bt as Ae,ao as Pe,ap as Ce,c5 as On,h as ie,i as Ee,cc as zi,w as xe,U as Xt,cd as Me,aa as Ft,aG as Bi,K as We,ce as cs,ad as Hi,cf as Ct,J as Ze,cg as we,o as Ri,ch as Vi,ci as ds,C as mn,r as fs,x as Li,cj as hs,bc as Jo,ck as gs,cl as ps,cm as vs,b7 as ms,cn as Fi,co as Dn,cp as Bt,cq as ys,ay as To,ba as wr,a4 as jt,b4 as _s,b3 as ws,bx as bs,cr as xs,bE as Es,b5 as Ss,aZ as Ns,b8 as Zt,af as $s,aF as Cs,cs as Ms,j as Ot,aw as br}from"./index.0d4ce67f.js";import{Q as St,a as Is}from"./QImg.38310f06.js";import{Q as Ts,a as ks,h as Gi,i as Ps,l as xr,U as As,j as Os}from"./EmbeddingDialog.22acd1f7.js";import{Q as Ds}from"./QPage.61689603.js";import{_ as zs}from"./ResearchersComponent.9b412bdd.js";import{u as Bs}from"./blogs.e583e728.js";import{L as Hs}from"./LabeledPanel.e8696737.js";import{T as Rs}from"./TitleBlock.9e815d28.js";import{a as Vs,b as Ls,Q as Fs}from"./QTabs.a8918386.js";import{_ as Gs,Q as Le,a as _t}from"./plugin-vue_export-helper.4bfad710.js";import{Q as Yi}from"./QList.b9655db9.js";import{_ as qi}from"./NewsBadge.60bff583.js";import{H as Kt}from"./H2TitleBlock.2796dccc.js";import{_ as Ys}from"./LogoWall.e02c22ec.js";import{Q as Ue}from"./QTooltip.07be2676.js";import{c as qs,Q as Xs}from"./QLinearProgress.143e7ce5.js";import{u as Us}from"./embedding.7ae623ee.js";import{u as js,R as Er,_ as Zs,a as Ks}from"./SearchResultByModel.e76df310.js";import{S as Ln,i as sn,r as yt,a as Fn,b as Ws,e as er,c as ln,d as eo,f as Xi,g as Qs,h as tr,j as nr}from"./isArrayLike.11b82f17.js";import"./QSpace.75c35e57.js";import"./use-panel.980b87a3.js";import"./position-engine.4bc72dd8.js";import"./copy-to-clipboard.ab055ab8.js";import"./QTable.479b72a9.js";import"./use-fullscreen.6c3cc644.js";import"./QForm.4b88100d.js";import"./QExpansionItem.f03860ef.js";import"./finetune.31be7171.js";import"./PublicationCardComponent.62e4b279.js";import"./QBadge.c472badd.js";var Js="/assets/portal-0.8babd99e.webp",el="/assets/portal-0.19674401.mp4",tl="/assets/style-9.28d84e5f.svg",nl="/assets/style-3.57129ee4.svg",ol="/assets/style-12.56cacc76.svg";const rl={class:"description sub-title"},il=Se({__name:"PPFeatureComponent",props:{items:{},horizontal:{type:Boolean,default:!1},showCaption:{type:Boolean,default:!1},color:{},imageRatio:{default:37/25}},setup(e){us(o=>({"6c8525f8":o.color}));const t=fe(0),n=Qo();return(o,r)=>(q(),ve(Lt,{square:"",flat:"",class:"bg-transparent"},{default:H(()=>[k(pt,null,{default:H(()=>[k(Vs,{shrink:"",modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value=i),align:"center","active-class":"text-primary","no-caps":""},{default:H(()=>[(q(!0),me(De,null,rt(o.items,(i,a)=>(q(),ve(Ls,{name:a,label:i.name,key:a},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),k(pt,null,{default:H(()=>[k(Ts,{animated:"",modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value=i),class:"bg-transparent lock-blur"},{default:H(()=>[(q(!0),me(De,null,rt(o.items,(i,a)=>(q(),ve(ks,{key:a,name:a},{default:H(()=>[k(pt,{class:Be(["feature-content no-wrap row",{"col-8":o.horizontal,"full-width q-mt-lg q-mt-md-xl":!o.horizontal,column:T(n).screen.lt.md}])},{default:H(()=>[o.showCaption?(q(),ve(pt,{class:Be(["q-pa-none q-pt-md-xl",{"col-4":!T(n).screen.lt.md}]),key:"text"},{default:H(()=>[k(Ve,{name:i.icon,class:"dynamic-text",size:"96px"},null,8,["name"]),re("h4",null,ye(i.title),1),re("p",rl,ye(i.description),1)]),_:2},1032,["class"])):be("",!0),k(St,{class:Be(["col full-height",{"q-ml-lg":o.horizontal||o.showCaption&&!T(n).screen.lt.md,"feature-item-image":o.showCaption}]),"img-class":"rounded-borders",key:"image",ratio:o.imageRatio,fit:"cover",src:i.image},null,8,["class","ratio","src"])]),_:2},1032,["class"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});var al=Gs(il,[["__scopeId","data-v-14c7b532"]]);const sl=re("span",{class:"q-focus-helper"},null,-1),ll={key:0,class:"col"},ul={key:1,class:"col-4 overflow-hidden"},cl=Se({__name:"NewsVerticalCardLandingPage",props:{item:{}},setup(e){const{t}=Jn({useScope:"global"});return(n,o)=>(q(),ve(Oe,{to:`/news/${n.item.slug}`,class:"q-pa-none"},{default:H(()=>[k(Lt,{flat:"",square:"",class:"cursor-pointer q-hoverable non-selectable full-width card-details"},{default:H(()=>[sl,k(pt,{horizontal:n.$q.screen.gt.xs,class:"justify-between full-height q-pa-none overflow-hidden"},{default:H(()=>[n.$q.screen.lt.sm?(q(),me("div",ll,[k(St,{src:n.item.featureImage,class:"hoverOnImage",loading:"lazy",alt:n.item.featureImageAlt},null,8,["src","alt"])])):be("",!0),k(pt,{class:"col column justify-between q-pa-none no-wrap full-height",style:Ae({"background-image":`url(${n.item.featureImage})`})},{default:H(()=>[k(Yi,{class:"bg-dark-transparent lock-blur q-pa-sm-sm q-pa-xs-sm q-pa-md-md q-pa-lg",style:{"flex-grow":"1"}},{default:H(()=>[k(Oe,null,{default:H(()=>[k(qi,{news:n.item},null,8,["news"])]),_:1}),k(Oe,{class:"q-pt-xl"},{default:H(()=>[k(Pe,null,{default:H(()=>[k(Le,{class:"text-h6 text-weight-light q-mb-xl",lines:"2"},{default:H(()=>[Ce(ye(n.item.title),1)]),_:1})]),_:1})]),_:1}),k(Oe,null,{default:H(()=>[k(Pe,null,{default:H(()=>[k(Le,{caption:""},{default:H(()=>[Ce(ye(T(On)(n.item.publishedAt).format("MMMM DD, YYYY"))+" \u2022 "+ye(n.item.readingTime)+" "+ye(T(t)("newsroom_page.minutes_read")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]),n.$q.screen.gt.xs?(q(),me("div",ul,[k(St,{src:n.item.featureImage,class:"full-height hoverOnImage",loading:"lazy",alt:n.item.featureImageAlt},null,8,["src","alt"])])):be("",!0)]),_:1},8,["horizontal"])]),_:1})]),_:1},8,["to"]))}}),dl={class:"col-12 col-md-6 cursor-pointer self-stretch"},fl={class:"q-pa-sm full-height no-wrap column"},hl={class:"col overflow-hidden",style:{"min-height":"200px"}},gl={class:"col-12 col-md-6 column self-stretch no-wrap"},pl=Se({__name:"NewsFeatureJumbo",props:{featured:{type:Object,required:!0},latest:{type:Array,required:!0}},setup(e){const{t,te:n}=Jn({useScope:"global"}),o=e,r=ie(()=>o.latest.filter(a=>a.slug!==o.featured.slug).slice(0,2)),i=ie(()=>On(o.latest[0].publishedAt).isAfter(On(o.featured.publishedAt)));return(a,s)=>(q(),me("div",{class:Be(["row justify-between items-center q-mb-xl",{reverse:i.value}])},[re("div",dl,[re("div",fl,[k(Oe,{to:`/news/${e.featured.slug}`,class:"q-pa-none",style:{"flex-grow":"1"}},{default:H(()=>[k(Lt,{flat:"",square:"",class:"full-height full-width non-selectable column card-details"},{default:H(()=>[re("div",hl,[k(St,{src:e.featured.featureImage,loading:"lazy",alt:e.featured.featureImageAlt,class:"hoverOnImage full-height"},null,8,["src","alt"])]),k(pt,{style:Ae({"background-image":`url(${e.featured.featureImage})`}),class:"q-pa-none no-wrap col-auto"},{default:H(()=>[k(Yi,{class:"bg-dark-transparent lock-blur q-pa-sm-sm q-pa-xs-sm q-pa-md-md q-pa-lg"},{default:H(()=>[k(Oe,null,{default:H(()=>[k(qi,{news:e.featured},null,8,["news"])]),_:1}),k(Oe,{class:"q-pt-xl"},{default:H(()=>[k(Pe,null,{default:H(()=>[k(Le,{class:"text-h5 text-weight-light q-mb-lg",lines:"3"},{default:H(()=>[Ce(ye(e.featured.title),1)]),_:1})]),_:1})]),_:1}),k(Oe,null,{default:H(()=>[k(Pe,null,{default:H(()=>[k(Le,{caption:""},{default:H(()=>[Ce(ye(T(On)(e.featured.publishedAt).format("MMMM DD, YYYY"))+" \u2022 "+ye(e.featured.readingTime)+" "+ye(T(t)("newsroom_page.minutes_read")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1},8,["to"])])]),re("div",gl,[(q(!0),me(De,null,rt(r.value,(l,u)=>(q(),me("div",{class:"col-6 q-pa-sm",key:u},[k(cl,{item:l,class:"full-height"},null,8,["item"])]))),128))])],2))}});function to(e){return Fi()?(Dn(e),!0):!1}function nt(e){return typeof e=="function"?e():T(e)}const vl=typeof window!="undefined"&&typeof document!="undefined",ml=e=>typeof e!="undefined",yl=Object.prototype.toString,_l=e=>yl.call(e)==="[object Object]",wl=()=>{};function bl(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const Ui=e=>e();function xl(e=Ui){const t=fe(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:ys(t),pause:n,resume:o,eventFilter:r}}function Sr(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function El(e,t,n={}){const{eventFilter:o=Ui,...r}=n;return xe(e,bl(o,t),r)}function Dt(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:s,isActive:l}=xl(o);return{stop:El(e,t,{...r,eventFilter:i}),pause:a,resume:s,isActive:l}}function Sl(e,t={}){if(!Jo(e))return gs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=ps(()=>({get(){return e.value[o]},set(r){var i;if((i=nt(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=r,e.value=s}else{const s={...e.value,[o]:r};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=r}}));return n}function ko(e,t=!1){function n(h,{flush:g="sync",deep:v=!1,timeout:x,throwOnTimeout:m}={}){let b=null;const p=[new Promise(I=>{b=xe(e,N=>{h(N)!==t&&(b==null||b(),I(N))},{flush:g,deep:v,immediate:!0})})];return x!=null&&p.push(Sr(x,m).then(()=>nt(e)).finally(()=>b==null?void 0:b())),Promise.race(p)}function o(h,g){if(!Jo(h))return n(N=>N===h,g);const{flush:v="sync",deep:x=!1,timeout:m,throwOnTimeout:b}=g!=null?g:{};let E=null;const I=[new Promise(N=>{E=xe([e,h],([R,Y])=>{t!==(R===Y)&&(E==null||E(),N(R))},{flush:v,deep:x,immediate:!0})})];return m!=null&&I.push(Sr(m,b).then(()=>nt(e)).finally(()=>(E==null||E(),nt(e)))),Promise.race(I)}function r(h){return n(g=>Boolean(g),h)}function i(h){return o(null,h)}function a(h){return o(void 0,h)}function s(h){return n(Number.isNaN,h)}function l(h,g){return n(v=>{const x=Array.from(v);return x.includes(h)||x.includes(nt(h))},g)}function u(h){return d(1,h)}function d(h=1,g){let v=-1;return n(()=>(v+=1,v>=h),g)}return Array.isArray(nt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:d,get not(){return ko(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:s,toBeUndefined:a,changed:u,changedTimes:d,get not(){return ko(e,!t)}}}function Po(e){return ko(e)}function Nl(e){var t;const n=nt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const ji=vl?window:void 0;function Zi(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=ji):[t,n,o,r]=e,!t)return wl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(d=>d()),i.length=0},s=(d,h,g,v)=>(d.addEventListener(h,g,v),()=>d.removeEventListener(h,g,v)),l=xe(()=>[Nl(t),nt(r)],([d,h])=>{if(a(),!d)return;const g=_l(h)?{...h}:h;i.push(...n.flatMap(v=>o.map(x=>s(d,v,x,g))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return to(u),u}function $l(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Nr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=ji,eventName:i="keydown",passive:a=!1,dedupe:s=!1}=o,l=$l(t);return Zi(r,i,d=>{d.repeat&&nt(s)||l(d)&&n(d)},a)}function Cl(e){return JSON.parse(JSON.stringify(e))}function mo(e,t,n,o={}){var r,i,a;const{clone:s=!1,passive:l=!1,eventName:u,deep:d=!1,defaultValue:h,shouldEmit:g}=o,v=mn(),x=n||(v==null?void 0:v.emit)||((r=v==null?void 0:v.$emit)==null?void 0:r.bind(v))||((a=(i=v==null?void 0:v.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(v==null?void 0:v.proxy));let m=u;t||(t="modelValue"),m=m||`update:${t.toString()}`;const b=I=>s?typeof s=="function"?s(I):Cl(I):I,E=()=>ml(e[t])?b(e[t]):h,p=I=>{g?g(I)&&x(m,I):x(m,I)};if(l){const I=E(),N=fe(I);let R=!1;return xe(()=>e[t],Y=>{R||(R=!0,N.value=b(Y),Ze(()=>R=!1))}),xe(N,Y=>{!R&&(Y!==e[t]||d)&&p(Y)},{deep:d}),N}else return ie({get(){return E()},set(I){p(I)}})}var Ml={value:()=>{}};function no(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new zn(n)}function zn(e){this._=e}function Il(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}zn.prototype=no.prototype={constructor:zn,on:function(e,t){var n=this._,o=Il(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Tl(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=$r(n[r],e.name,t);else if(t==null)for(r in n)n[r]=$r(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Tl(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function $r(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Ml,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ao="http://www.w3.org/1999/xhtml";const Cr={svg:"http://www.w3.org/2000/svg",xhtml:Ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Cr.hasOwnProperty(t)?{space:Cr[t],local:e}:e}function kl(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ao&&t.documentElement.namespaceURI===Ao?t.createElement(e):t.createElementNS(n,e)}}function Pl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ki(e){var t=oo(e);return(t.local?Pl:kl)(t)}function Al(){}function or(e){return e==null?Al:function(){return this.querySelector(e)}}function Ol(e){typeof e!="function"&&(e=or(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,u,d=0;d<a;++d)(l=i[d])&&(u=e.call(l,l.__data__,d,i))&&("__data__"in l&&(u.__data__=l.__data__),s[d]=u);return new He(o,this._parents)}function Dl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zl(){return[]}function Wi(e){return e==null?zl:function(){return this.querySelectorAll(e)}}function Bl(e){return function(){return Dl(e.apply(this,arguments))}}function Hl(e){typeof e=="function"?e=Bl(e):e=Wi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),r.push(l));return new He(o,r)}function Qi(e){return function(){return this.matches(e)}}function Ji(e){return function(t){return t.matches(e)}}var Rl=Array.prototype.find;function Vl(e){return function(){return Rl.call(this.children,e)}}function Ll(){return this.firstElementChild}function Fl(e){return this.select(e==null?Ll:Vl(typeof e=="function"?e:Ji(e)))}var Gl=Array.prototype.filter;function Yl(){return Array.from(this.children)}function ql(e){return function(){return Gl.call(this.children,e)}}function Xl(e){return this.selectAll(e==null?Yl:ql(typeof e=="function"?e:Ji(e)))}function Ul(e){typeof e!="function"&&(e=Qi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new He(o,this._parents)}function ea(e){return new Array(e.length)}function jl(){return new He(this._enter||this._groups.map(ea),this._parents)}function Gn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Gn.prototype={constructor:Gn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zl(e){return function(){return e}}function Kl(e,t,n,o,r,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new Gn(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Wl(e,t,n,o,r,i,a){var s,l,u=new Map,d=t.length,h=i.length,g=new Array(d),v;for(s=0;s<d;++s)(l=t[s])&&(g[s]=v=a.call(l,l.__data__,s,t)+"",u.has(v)?r[s]=l:u.set(v,l));for(s=0;s<h;++s)v=a.call(e,i[s],s,i)+"",(l=u.get(v))?(o[s]=l,l.__data__=i[s],u.delete(v)):n[s]=new Gn(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(g[s])===l&&(r[s]=l)}function Ql(e){return e.__data__}function Jl(e,t){if(!arguments.length)return Array.from(this,Ql);var n=t?Wl:Kl,o=this._parents,r=this._groups;typeof e!="function"&&(e=Zl(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var d=o[u],h=r[u],g=h.length,v=eu(e.call(d,d&&d.__data__,u,o)),x=v.length,m=s[u]=new Array(x),b=a[u]=new Array(x),E=l[u]=new Array(g);n(d,h,m,b,E,v,t);for(var p=0,I=0,N,R;p<x;++p)if(N=m[p]){for(p>=I&&(I=p+1);!(R=b[I])&&++I<x;);N._next=R||null}}return a=new He(a,o),a._enter=s,a._exit=l,a}function eu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tu(){return new He(this._exit||this._groups.map(ea),this._parents)}function nu(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ou(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var u=n[l],d=o[l],h=u.length,g=s[l]=new Array(h),v,x=0;x<h;++x)(v=u[x]||d[x])&&(g[x]=v);for(;l<r;++l)s[l]=n[l];return new He(s,this._parents)}function ru(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function iu(e){e||(e=au);function t(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),u,d=0;d<s;++d)(u=a[d])&&(l[d]=u);l.sort(t)}return new He(r,this._parents).order()}function au(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function su(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lu(){return Array.from(this)}function uu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function cu(){let e=0;for(const t of this)++e;return e}function du(){return!this.node()}function fu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function hu(e){return function(){this.removeAttribute(e)}}function gu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pu(e,t){return function(){this.setAttribute(e,t)}}function vu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _u(e,t){var n=oo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?gu:hu:typeof t=="function"?n.local?yu:mu:n.local?vu:pu)(n,t))}function ta(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wu(e){return function(){this.style.removeProperty(e)}}function bu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Eu(e,t,n){return arguments.length>1?this.each((t==null?wu:typeof t=="function"?xu:bu)(e,t,n==null?"":n)):Gt(this.node(),e)}function Gt(e,t){return e.style.getPropertyValue(t)||ta(e).getComputedStyle(e,null).getPropertyValue(t)}function Su(e){return function(){delete this[e]}}function Nu(e,t){return function(){this[e]=t}}function $u(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Cu(e,t){return arguments.length>1?this.each((t==null?Su:typeof t=="function"?$u:Nu)(e,t)):this.node()[e]}function na(e){return e.trim().split(/^|\s+/)}function rr(e){return e.classList||new oa(e)}function oa(e){this._node=e,this._names=na(e.getAttribute("class")||"")}oa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ra(e,t){for(var n=rr(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ia(e,t){for(var n=rr(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Mu(e){return function(){ra(this,e)}}function Iu(e){return function(){ia(this,e)}}function Tu(e,t){return function(){(t.apply(this,arguments)?ra:ia)(this,e)}}function ku(e,t){var n=na(e+"");if(arguments.length<2){for(var o=rr(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Tu:t?Mu:Iu)(n,t))}function Pu(){this.textContent=""}function Au(e){return function(){this.textContent=e}}function Ou(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Du(e){return arguments.length?this.each(e==null?Pu:(typeof e=="function"?Ou:Au)(e)):this.node().textContent}function zu(){this.innerHTML=""}function Bu(e){return function(){this.innerHTML=e}}function Hu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ru(e){return arguments.length?this.each(e==null?zu:(typeof e=="function"?Hu:Bu)(e)):this.node().innerHTML}function Vu(){this.nextSibling&&this.parentNode.appendChild(this)}function Lu(){return this.each(Vu)}function Fu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gu(){return this.each(Fu)}function Yu(e){var t=typeof e=="function"?e:Ki(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qu(){return null}function Xu(e,t){var n=typeof e=="function"?e:Ki(e),o=t==null?qu:typeof t=="function"?t:or(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Uu(){var e=this.parentNode;e&&e.removeChild(this)}function ju(){return this.each(Uu)}function Zu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ku(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wu(e){return this.select(e?Ku:Zu)}function Qu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ju(e){return function(t){e.call(this,t,this.__data__)}}function ec(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function tc(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function nc(e,t,n){return function(){var o=this.__on,r,i=Ju(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function oc(e,t,n){var o=ec(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,d;l<u;++l)for(r=0,d=s[l];r<i;++r)if((a=o[r]).type===d.type&&a.name===d.name)return d.value}return}for(s=t?nc:tc,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function aa(e,t,n){var o=ta(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function rc(e,t){return function(){return aa(this,e,t)}}function ic(e,t){return function(){return aa(this,e,t.apply(this,arguments))}}function ac(e,t){return this.each((typeof t=="function"?ic:rc)(e,t))}function*sc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var sa=[null];function He(e,t){this._groups=e,this._parents=t}function yn(){return new He([[document.documentElement]],sa)}function lc(){return this}He.prototype=yn.prototype={constructor:He,select:Ol,selectAll:Hl,selectChild:Fl,selectChildren:Xl,filter:Ul,data:Jl,enter:jl,exit:tu,join:nu,merge:ou,selection:lc,order:ru,sort:iu,call:su,nodes:lu,node:uu,size:cu,empty:du,each:fu,attr:_u,style:Eu,property:Cu,classed:ku,text:Du,html:Ru,raise:Lu,lower:Gu,append:Yu,insert:Xu,remove:ju,clone:Wu,datum:Qu,on:oc,dispatch:ac,[Symbol.iterator]:sc};function Ye(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],sa)}function uc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=uc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const cc={passive:!1},un={capture:!0,passive:!1};function yo(e){e.stopImmediatePropagation()}function Ht(e){e.preventDefault(),e.stopImmediatePropagation()}function la(e){var t=e.document.documentElement,n=Ye(e).on("dragstart.drag",Ht,un);"onselectstart"in t?n.on("selectstart.drag",Ht,un):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ua(e,t){var n=e.document.documentElement,o=Ye(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ht,un),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sn=e=>()=>e;function Oo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Oo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function dc(e){return!e.ctrlKey&&!e.button}function fc(){return this.parentNode}function hc(e,t){return t==null?{x:e.x,y:e.y}:t}function gc(){return navigator.maxTouchPoints||"ontouchstart"in this}function pc(){var e=dc,t=fc,n=hc,o=gc,r={},i=no("start","drag","end"),a=0,s,l,u,d,h=0;function g(N){N.on("mousedown.drag",v).filter(o).on("touchstart.drag",b).on("touchmove.drag",E,cc).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(N,R){if(!(d||!e.call(this,N,R))){var Y=I(this,t.call(this,N,R),N,R,"mouse");!Y||(Ye(N.view).on("mousemove.drag",x,un).on("mouseup.drag",m,un),la(N.view),yo(N),u=!1,s=N.clientX,l=N.clientY,Y("start",N))}}function x(N){if(Ht(N),!u){var R=N.clientX-s,Y=N.clientY-l;u=R*R+Y*Y>h}r.mouse("drag",N)}function m(N){Ye(N.view).on("mousemove.drag mouseup.drag",null),ua(N.view,u),Ht(N),r.mouse("end",N)}function b(N,R){if(!!e.call(this,N,R)){var Y=N.changedTouches,V=t.call(this,N,R),K=Y.length,j,A;for(j=0;j<K;++j)(A=I(this,V,N,R,Y[j].identifier,Y[j]))&&(yo(N),A("start",N,Y[j]))}}function E(N){var R=N.changedTouches,Y=R.length,V,K;for(V=0;V<Y;++V)(K=r[R[V].identifier])&&(Ht(N),K("drag",N,R[V]))}function p(N){var R=N.changedTouches,Y=R.length,V,K;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),V=0;V<Y;++V)(K=r[R[V].identifier])&&(yo(N),K("end",N,R[V]))}function I(N,R,Y,V,K,j){var A=i.copy(),w=je(j||Y,R),oe,se,_;if((_=n.call(N,new Oo("beforestart",{sourceEvent:Y,target:g,identifier:K,active:a,x:w[0],y:w[1],dx:0,dy:0,dispatch:A}),V))!=null)return oe=_.x-w[0]||0,se=_.y-w[1]||0,function P(S,D,z){var B=w,F;switch(S){case"start":r[K]=P,F=a++;break;case"end":delete r[K],--a;case"drag":w=je(z||D,R),F=a;break}A.call(S,N,new Oo(S,{sourceEvent:D,subject:_,target:g,identifier:K,active:F,x:w[0]+oe,y:w[1]+se,dx:w[0]-B[0],dy:w[1]-B[1],dispatch:A}),V)}}return g.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Sn(!!N),g):e},g.container=function(N){return arguments.length?(t=typeof N=="function"?N:Sn(N),g):t},g.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Sn(N),g):n},g.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:Sn(!!N),g):o},g.on=function(){var N=i.on.apply(i,arguments);return N===i?g:N},g.clickDistance=function(N){return arguments.length?(h=(N=+N)*N,g):Math.sqrt(h)},g}function ir(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ca(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function _n(){}var cn=.7,Yn=1/cn,Rt="\\s*([+-]?\\d+)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vc=/^#([0-9a-f]{3,8})$/,mc=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),yc=new RegExp(`^rgb\\(${Ke},${Ke},${Ke}\\)$`),_c=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${dn}\\)$`),wc=new RegExp(`^rgba\\(${Ke},${Ke},${Ke},${dn}\\)$`),bc=new RegExp(`^hsl\\(${dn},${Ke},${Ke}\\)$`),xc=new RegExp(`^hsla\\(${dn},${Ke},${Ke},${dn}\\)$`),Mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ir(_n,fn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ir,formatHex:Ir,formatHex8:Ec,formatHsl:Sc,formatRgb:Tr,toString:Tr});function Ir(){return this.rgb().formatHex()}function Ec(){return this.rgb().formatHex8()}function Sc(){return da(this).formatHsl()}function Tr(){return this.rgb().formatRgb()}function fn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?kr(t):n===3?new ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mc.exec(e))?new ze(t[1],t[2],t[3],1):(t=yc.exec(e))?new ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_c.exec(e))?Nn(t[1],t[2],t[3],t[4]):(t=wc.exec(e))?Nn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bc.exec(e))?Or(t[1],t[2]/100,t[3]/100,1):(t=xc.exec(e))?Or(t[1],t[2]/100,t[3]/100,t[4]):Mr.hasOwnProperty(e)?kr(Mr[e]):e==="transparent"?new ze(NaN,NaN,NaN,0):null}function kr(e){return new ze(e>>16&255,e>>8&255,e&255,1)}function Nn(e,t,n,o){return o<=0&&(e=t=n=NaN),new ze(e,t,n,o)}function Nc(e){return e instanceof _n||(e=fn(e)),e?(e=e.rgb(),new ze(e.r,e.g,e.b,e.opacity)):new ze}function Do(e,t,n,o){return arguments.length===1?Nc(e):new ze(e,t,n,o==null?1:o)}function ze(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ir(ze,Do,ca(_n,{brighter(e){return e=e==null?Yn:Math.pow(Yn,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ze(Nt(this.r),Nt(this.g),Nt(this.b),qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pr,formatHex:Pr,formatHex8:$c,formatRgb:Ar,toString:Ar}));function Pr(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}`}function $c(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}${Et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ar(){const e=qn(this.opacity);return`${e===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${e===1?")":`, ${e})`}`}function qn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Et(e){return e=Nt(e),(e<16?"0":"")+e.toString(16)}function Or(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,o)}function da(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof _n||(e=fn(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new qe(a,s,l,e.opacity)}function Cc(e,t,n,o){return arguments.length===1?da(e):new qe(e,t,n,o==null?1:o)}function qe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ir(qe,Cc,ca(_n,{brighter(e){return e=e==null?Yn:Math.pow(Yn,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ze(_o(e>=240?e-240:e+120,r,o),_o(e,r,o),_o(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new qe(Dr(this.h),$n(this.s),$n(this.l),qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qn(this.opacity);return`${e===1?"hsl(":"hsla("}${Dr(this.h)}, ${$n(this.s)*100}%, ${$n(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dr(e){return e=(e||0)%360,e<0?e+360:e}function $n(e){return Math.max(0,Math.min(1,e||0))}function _o(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fa=e=>()=>e;function Mc(e,t){return function(n){return e+n*t}}function Ic(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Tc(e){return(e=+e)==1?ha:function(t,n){return n-t?Ic(t,n,e):fa(isNaN(t)?n:t)}}function ha(e,t){var n=t-e;return n?Mc(e,n):fa(isNaN(e)?t:e)}const zr=function e(t){var n=Tc(t);function o(r,i){var a=n((r=Do(r)).r,(i=Do(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),u=ha(r.opacity,i.opacity);return function(d){return r.r=a(d),r.g=s(d),r.b=l(d),r.opacity=u(d),r+""}}return o.gamma=e,o}(1);function ht(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wo=new RegExp(zo.source,"g");function kc(e){return function(){return e}}function Pc(e){return function(t){return e(t)+""}}function Ac(e,t){var n=zo.lastIndex=wo.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=zo.exec(e))&&(r=wo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ht(o,r)})),n=wo.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?Pc(l[0].x):kc(t):(t=l.length,function(u){for(var d=0,h;d<t;++d)s[(h=l[d]).i]=h.x(u);return s.join("")})}var Br=180/Math.PI,Bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ga(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Br,skewX:Math.atan(l)*Br,scaleX:a,scaleY:s}}var Cn;function Oc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bo:ga(t.a,t.b,t.c,t.d,t.e,t.f)}function Dc(e){return e==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",e),!(e=Cn.transform.baseVal.consolidate()))?Bo:(e=e.matrix,ga(e.a,e.b,e.c,e.d,e.e,e.f))}function pa(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,d,h,g,v,x){if(u!==h||d!==g){var m=v.push("translate(",null,t,null,n);x.push({i:m-4,x:ht(u,h)},{i:m-2,x:ht(d,g)})}else(h||g)&&v.push("translate("+h+t+g+n)}function a(u,d,h,g){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),g.push({i:h.push(r(h)+"rotate(",null,o)-2,x:ht(u,d)})):d&&h.push(r(h)+"rotate("+d+o)}function s(u,d,h,g){u!==d?g.push({i:h.push(r(h)+"skewX(",null,o)-2,x:ht(u,d)}):d&&h.push(r(h)+"skewX("+d+o)}function l(u,d,h,g,v,x){if(u!==h||d!==g){var m=v.push(r(v)+"scale(",null,",",null,")");x.push({i:m-4,x:ht(u,h)},{i:m-2,x:ht(d,g)})}else(h!==1||g!==1)&&v.push(r(v)+"scale("+h+","+g+")")}return function(u,d){var h=[],g=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,h,g),a(u.rotate,d.rotate,h,g),s(u.skewX,d.skewX,h,g),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,g),u=d=null,function(v){for(var x=-1,m=g.length,b;++x<m;)h[(b=g[x]).i]=b.x(v);return h.join("")}}}var zc=pa(Oc,"px, ","px)","deg)"),Bc=pa(Dc,", ",")",")"),Hc=1e-12;function Hr(e){return((e=Math.exp(e))+1/e)/2}function Rc(e){return((e=Math.exp(e))-1/e)/2}function Vc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Lc=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],u=i[2],d=a[0],h=a[1],g=a[2],v=d-s,x=h-l,m=v*v+x*x,b,E;if(m<Hc)E=Math.log(g/u)/t,b=function(V){return[s+V*v,l+V*x,u*Math.exp(t*V*E)]};else{var p=Math.sqrt(m),I=(g*g-u*u+o*m)/(2*u*n*p),N=(g*g-u*u-o*m)/(2*g*n*p),R=Math.log(Math.sqrt(I*I+1)-I),Y=Math.log(Math.sqrt(N*N+1)-N);E=(Y-R)/t,b=function(V){var K=V*E,j=Hr(R),A=u/(n*p)*(j*Vc(t*K+R)-Rc(R));return[s+A*v,l+A*x,u*j/Hr(t*K+R)]}}return b.duration=E*1e3*t/Math.SQRT2,b}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var Yt=0,en=0,Wt=0,va=1e3,Xn,tn,Un=0,Mt=0,ro=0,hn=typeof performance=="object"&&performance.now?performance:Date,ma=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ar(){return Mt||(ma(Fc),Mt=hn.now()+ro)}function Fc(){Mt=0}function jn(){this._call=this._time=this._next=null}jn.prototype=ya.prototype={constructor:jn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ar():+n)+(t==null?0:+t),!this._next&&tn!==this&&(tn?tn._next=this:Xn=this,tn=this),this._call=e,this._time=n,Ho()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ho())}};function ya(e,t,n){var o=new jn;return o.restart(e,t,n),o}function Gc(){ar(),++Yt;for(var e=Xn,t;e;)(t=Mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Yt}function Rr(){Mt=(Un=hn.now())+ro,Yt=en=0;try{Gc()}finally{Yt=0,qc(),Mt=0}}function Yc(){var e=hn.now(),t=e-Un;t>va&&(ro-=t,Un=e)}function qc(){for(var e,t=Xn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xn=n);tn=e,Ho(o)}function Ho(e){if(!Yt){en&&(en=clearTimeout(en));var t=e-Mt;t>24?(e<1/0&&(en=setTimeout(Rr,e-hn.now()-ro)),Wt&&(Wt=clearInterval(Wt))):(Wt||(Un=hn.now(),Wt=setInterval(Yc,va)),Yt=1,ma(Rr))}}function Vr(e,t,n){var o=new jn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Xc=no("start","end","cancel","interrupt"),Uc=[],_a=0,Lr=1,Ro=2,Bn=3,Fr=4,Vo=5,Hn=6;function io(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;jc(e,n,{name:t,index:o,group:r,on:Xc,tween:Uc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:_a})}function sr(e,t){var n=Xe(e,t);if(n.state>_a)throw new Error("too late; already scheduled");return n}function Qe(e,t){var n=Xe(e,t);if(n.state>Bn)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=ya(i,0,n.time);function i(u){n.state=Lr,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var d,h,g,v;if(n.state!==Lr)return l();for(d in o)if(v=o[d],v.name===n.name){if(v.state===Bn)return Vr(a);v.state===Fr?(v.state=Hn,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete o[d]):+d<t&&(v.state=Hn,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete o[d])}if(Vr(function(){n.state===Bn&&(n.state=Fr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ro,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ro){for(n.state=Bn,r=new Array(g=n.tween.length),d=0,h=-1;d<g;++d)(v=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=v);r.length=h+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Vo,1),h=-1,g=r.length;++h<g;)r[h].call(e,d);n.state===Vo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Hn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Rn(e,t){var n=e.__transition,o,r,i=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>Ro&&o.state<Vo,o.state=Hn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Zc(e){return this.each(function(){Rn(this,e)})}function Kc(e,t){var n,o;return function(){var r=Qe(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Wc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Qe(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}i.tween=r}}function Qc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Xe(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Kc:Wc)(n,e,t))}function lr(e,t,n){var o=e._id;return e.each(function(){var r=Qe(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Xe(r,o).value[t]}}function wa(e,t){var n;return(typeof t=="number"?ht:t instanceof fn?zr:(n=fn(t))?(t=n,zr):Ac)(e,t)}function Jc(e){return function(){this.removeAttribute(e)}}function ed(e){return function(){this.removeAttributeNS(e.space,e.local)}}function td(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function nd(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function od(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function rd(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function id(e,t){var n=oo(e),o=n==="transform"?Bc:wa;return this.attrTween(e,typeof t=="function"?(n.local?rd:od)(n,o,lr(this,"attr."+e,t)):t==null?(n.local?ed:Jc)(n):(n.local?nd:td)(n,o,t))}function ad(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ld(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&sd(e,i)),n}return r._value=t,r}function ud(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ad(e,i)),n}return r._value=t,r}function cd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=oo(e);return this.tween(n,(o.local?ld:ud)(o,t))}function dd(e,t){return function(){sr(this,e).delay=+t.apply(this,arguments)}}function fd(e,t){return t=+t,function(){sr(this,e).delay=t}}function hd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dd:fd)(t,e)):Xe(this.node(),t).delay}function gd(e,t){return function(){Qe(this,e).duration=+t.apply(this,arguments)}}function pd(e,t){return t=+t,function(){Qe(this,e).duration=t}}function vd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gd:pd)(t,e)):Xe(this.node(),t).duration}function md(e,t){if(typeof t!="function")throw new Error;return function(){Qe(this,e).ease=t}}function yd(e){var t=this._id;return arguments.length?this.each(md(t,e)):Xe(this.node(),t).ease}function _d(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qe(this,e).ease=n}}function wd(e){if(typeof e!="function")throw new Error;return this.each(_d(this._id,e))}function bd(e){typeof e!="function"&&(e=Qi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new at(o,this._parents,this._name,this._id)}function xd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],u=n[s],d=l.length,h=a[s]=new Array(d),g,v=0;v<d;++v)(g=l[v]||u[v])&&(h[v]=g);for(;s<o;++s)a[s]=t[s];return new at(a,this._parents,this._name,this._id)}function Ed(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sd(e,t,n){var o,r,i=Ed(t)?sr:Qe;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Nd(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(Sd(n,e,t))}function $d(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Cd(){return this.on("end.remove",$d(this._id))}function Md(e){var t=this._name,n=this._id;typeof e!="function"&&(e=or(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,u=i[a]=new Array(l),d,h,g=0;g<l;++g)(d=s[g])&&(h=e.call(d,d.__data__,g,s))&&("__data__"in d&&(h.__data__=d.__data__),u[g]=h,io(u[g],t,n,g,u,Xe(d,n)));return new at(i,this._parents,t,n)}function Id(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wi(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var g=e.call(d,d.__data__,h,l),v,x=Xe(d,n),m=0,b=g.length;m<b;++m)(v=g[m])&&io(v,t,n,m,g,x);i.push(g),a.push(d)}return new at(i,a,t,n)}var Td=yn.prototype.constructor;function kd(){return new Td(this._groups,this._parents)}function Pd(e,t){var n,o,r;return function(){var i=Gt(this,e),a=(this.style.removeProperty(e),Gt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function ba(e){return function(){this.style.removeProperty(e)}}function Ad(e,t,n){var o,r=n+"",i;return function(){var a=Gt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Od(e,t,n){var o,r,i;return function(){var a=Gt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Gt(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function Dd(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=Qe(this,e),u=l.on,d=l.value[i]==null?s||(s=ba(t)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(a,r=d),l.on=o}}function zd(e,t,n){var o=(e+="")=="transform"?zc:wa;return t==null?this.styleTween(e,Pd(e,o)).on("end.style."+e,ba(e)):typeof t=="function"?this.styleTween(e,Od(e,o,lr(this,"style."+e,t))).each(Dd(this._id,e)):this.styleTween(e,Ad(e,o,t),n).on("end.style."+e,null)}function Bd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Hd(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Bd(e,a,n)),o}return i._value=t,i}function Rd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Hd(e,t,n==null?"":n))}function Vd(e){return function(){this.textContent=e}}function Ld(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Fd(e){return this.tween("text",typeof e=="function"?Ld(lr(this,"text",e)):Vd(e==null?"":e+""))}function Gd(e){return function(t){this.textContent=e.call(this,t)}}function Yd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Gd(r)),t}return o._value=e,o}function qd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Yd(e))}function Xd(){for(var e=this._name,t=this._id,n=xa(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var d=Xe(l,t);io(l,e,n,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new at(o,this._parents,e,n)}function Ud(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var u=Qe(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&i()})}var jd=0;function at(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function xa(){return++jd}var tt=yn.prototype;at.prototype={constructor:at,select:Md,selectAll:Id,selectChild:tt.selectChild,selectChildren:tt.selectChildren,filter:bd,merge:xd,selection:kd,transition:Xd,call:tt.call,nodes:tt.nodes,node:tt.node,size:tt.size,empty:tt.empty,each:tt.each,on:Nd,attr:id,attrTween:cd,style:zd,styleTween:Rd,text:Fd,textTween:qd,remove:Cd,tween:Qc,delay:hd,duration:vd,ease:yd,easeVarying:wd,end:Ud,[Symbol.iterator]:tt[Symbol.iterator]};function Zd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kd={time:null,delay:0,duration:250,ease:Zd};function Wd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qd(e){var t,n;e instanceof at?(t=e._id,e=e._name):(t=xa(),(n=Kd).time=ar(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&io(l,e,t,u,a,n||Wd(l,t));return new at(o,this._parents,e,t)}yn.prototype.interrupt=Zc;yn.prototype.transition=Qd;const Mn=e=>()=>e;function Jd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ot(e,t,n){this.k=e,this.x=t,this.y=n}ot.prototype={constructor:ot,scale:function(e){return e===1?this:new ot(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ot(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qt=new ot(1,0,0);ot.prototype;function bo(e){e.stopImmediatePropagation()}function Qt(e){e.preventDefault(),e.stopImmediatePropagation()}function ef(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gr(){return this.__zoom||qt}function nf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function of(){return navigator.maxTouchPoints||"ontouchstart"in this}function rf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function af(){var e=ef,t=tf,n=rf,o=nf,r=of,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Lc,u=no("start","zoom","end"),d,h,g,v=500,x=150,m=0,b=10;function E(_){_.property("__zoom",Gr).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",w).on("touchmove.zoom",oe).on("touchend.zoom touchcancel.zoom",se).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(_,P,S,D){var z=_.selection?_.selection():_;z.property("__zoom",Gr),_!==z?R(_,P,S,D):z.interrupt().each(function(){Y(this,arguments).event(D).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},E.scaleBy=function(_,P,S,D){E.scaleTo(_,function(){var z=this.__zoom.k,B=typeof P=="function"?P.apply(this,arguments):P;return z*B},S,D)},E.scaleTo=function(_,P,S,D){E.transform(_,function(){var z=t.apply(this,arguments),B=this.__zoom,F=S==null?N(z):typeof S=="function"?S.apply(this,arguments):S,G=B.invert(F),ae=typeof P=="function"?P.apply(this,arguments):P;return n(I(p(B,ae),F,G),z,a)},S,D)},E.translateBy=function(_,P,S,D){E.transform(_,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,D)},E.translateTo=function(_,P,S,D,z){E.transform(_,function(){var B=t.apply(this,arguments),F=this.__zoom,G=D==null?N(B):typeof D=="function"?D.apply(this,arguments):D;return n(qt.translate(G[0],G[1]).scale(F.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof S=="function"?-S.apply(this,arguments):-S),B,a)},D,z)};function p(_,P){return P=Math.max(i[0],Math.min(i[1],P)),P===_.k?_:new ot(P,_.x,_.y)}function I(_,P,S){var D=P[0]-S[0]*_.k,z=P[1]-S[1]*_.k;return D===_.x&&z===_.y?_:new ot(_.k,D,z)}function N(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function R(_,P,S,D){_.on("start.zoom",function(){Y(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(D).end()}).tween("zoom",function(){var z=this,B=arguments,F=Y(z,B).event(D),G=t.apply(z,B),ae=S==null?N(G):typeof S=="function"?S.apply(z,B):S,X=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),L=z.__zoom,Q=typeof P=="function"?P.apply(z,B):P,pe=l(L.invert(ae).concat(X/L.k),Q.invert(ae).concat(X/Q.k));return function(he){if(he===1)he=Q;else{var _e=pe(he),le=X/_e[2];he=new ot(le,ae[0]-_e[0]*le,ae[1]-_e[1]*le)}F.zoom(null,he)}})}function Y(_,P,S){return!S&&_.__zooming||new V(_,P)}function V(_,P){this.that=_,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,P),this.taps=0}V.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,P){return this.mouse&&_!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var P=Ye(this.that).datum();u.call(_,this.that,new Jd(_,{sourceEvent:this.sourceEvent,target:E,type:_,transform:this.that.__zoom,dispatch:u}),P)}};function K(_,...P){if(!e.apply(this,arguments))return;var S=Y(this,P).event(_),D=this.__zoom,z=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,o.apply(this,arguments)))),B=je(_);if(S.wheel)(S.mouse[0][0]!==B[0]||S.mouse[0][1]!==B[1])&&(S.mouse[1]=D.invert(S.mouse[0]=B)),clearTimeout(S.wheel);else{if(D.k===z)return;S.mouse=[B,D.invert(B)],Rn(this),S.start()}Qt(_),S.wheel=setTimeout(F,x),S.zoom("mouse",n(I(p(D,z),S.mouse[0],S.mouse[1]),S.extent,a));function F(){S.wheel=null,S.end()}}function j(_,...P){if(g||!e.apply(this,arguments))return;var S=_.currentTarget,D=Y(this,P,!0).event(_),z=Ye(_.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",X,!0),B=je(_,S),F=_.clientX,G=_.clientY;la(_.view),bo(_),D.mouse=[B,this.__zoom.invert(B)],Rn(this),D.start();function ae(L){if(Qt(L),!D.moved){var Q=L.clientX-F,pe=L.clientY-G;D.moved=Q*Q+pe*pe>m}D.event(L).zoom("mouse",n(I(D.that.__zoom,D.mouse[0]=je(L,S),D.mouse[1]),D.extent,a))}function X(L){z.on("mousemove.zoom mouseup.zoom",null),ua(L.view,D.moved),Qt(L),D.event(L).end()}}function A(_,...P){if(!!e.apply(this,arguments)){var S=this.__zoom,D=je(_.changedTouches?_.changedTouches[0]:_,this),z=S.invert(D),B=S.k*(_.shiftKey?.5:2),F=n(I(p(S,B),D,z),t.apply(this,P),a);Qt(_),s>0?Ye(this).transition().duration(s).call(R,F,D,_):Ye(this).call(E.transform,F,D,_)}}function w(_,...P){if(!!e.apply(this,arguments)){var S=_.touches,D=S.length,z=Y(this,P,_.changedTouches.length===D).event(_),B,F,G,ae;for(bo(_),F=0;F<D;++F)G=S[F],ae=je(G,this),ae=[ae,this.__zoom.invert(ae),G.identifier],z.touch0?!z.touch1&&z.touch0[2]!==ae[2]&&(z.touch1=ae,z.taps=0):(z.touch0=ae,B=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),B&&(z.taps<2&&(h=ae[0],d=setTimeout(function(){d=null},v)),Rn(this),z.start())}}function oe(_,...P){if(!!this.__zooming){var S=Y(this,P).event(_),D=_.changedTouches,z=D.length,B,F,G,ae;for(Qt(_),B=0;B<z;++B)F=D[B],G=je(F,this),S.touch0&&S.touch0[2]===F.identifier?S.touch0[0]=G:S.touch1&&S.touch1[2]===F.identifier&&(S.touch1[0]=G);if(F=S.that.__zoom,S.touch1){var X=S.touch0[0],L=S.touch0[1],Q=S.touch1[0],pe=S.touch1[1],he=(he=Q[0]-X[0])*he+(he=Q[1]-X[1])*he,_e=(_e=pe[0]-L[0])*_e+(_e=pe[1]-L[1])*_e;F=p(F,Math.sqrt(he/_e)),G=[(X[0]+Q[0])/2,(X[1]+Q[1])/2],ae=[(L[0]+pe[0])/2,(L[1]+pe[1])/2]}else if(S.touch0)G=S.touch0[0],ae=S.touch0[1];else return;S.zoom("touch",n(I(F,G,ae),S.extent,a))}}function se(_,...P){if(!!this.__zooming){var S=Y(this,P).event(_),D=_.changedTouches,z=D.length,B,F;for(bo(_),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),B=0;B<z;++B)F=D[B],S.touch0&&S.touch0[2]===F.identifier?delete S.touch0:S.touch1&&S.touch1[2]===F.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(F=je(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<b)){var G=Ye(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return E.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:Mn(+_),E):o},E.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Mn(!!_),E):e},E.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Mn(!!_),E):r},E.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Mn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),E):t},E.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],E):[i[0],i[1]]},E.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],E):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},E.constrain=function(_){return arguments.length?(n=_,E):n},E.duration=function(_){return arguments.length?(s=+_,E):s},E.interpolate=function(_){return arguments.length?(l=_,E):l},E.on=function(){var _=u.on.apply(u,arguments);return _===u?E:_},E.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,E):Math.sqrt(m)},E.tapDistance=function(_){return arguments.length?(b=+_,E):b},E}var Z=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Z||{}),ur=(e=>(e.Partial="partial",e.Full="full",e))(ur||{}),bt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(bt||{}),It=(e=>(e.Strict="strict",e.Loose="loose",e))(It||{}),Lo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Lo||{}),on=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(on||{});function Fo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,i=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||r||!!i}function sf(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Yr(e,t,n,o){const r=t.split("+").map(i=>i.trim().toLowerCase());return r.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every((i,a)=>n.has(i)&&Array.from(n.values())[a]===r[a]))}function lf(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=uf(n.code,e);return Array.isArray(e)?e.some(r=>Yr(n[o],r,t,n.type==="keyup")):Yr(n[o],e,t,n.type==="keyup")}}function uf(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function rn(e,t){const n=Me(()=>{var d;return(d=we(t==null?void 0:t.actInsideInputWithModifier))!=null?d:!1}),o=Me(()=>{var d;return(d=we(t==null?void 0:t.target))!=null?d:window}),r=fe(we(e)===!0);let i=!1;const a=new Set;let s=u(we(e));xe(()=>we(e),(d,h)=>{typeof h=="boolean"&&typeof d!="boolean"&&l(),s=u(d)},{immediate:!0}),We(()=>{Zi(window,["blur","contextmenu"],l)}),Nr((...d)=>s(...d),d=>{i=sf(d),!((!i||i&&!n.value)&&Fo(d))&&(d.preventDefault(),r.value=!0)},{eventName:"keydown",target:o}),Nr((...d)=>s(...d),d=>{if(r.value){if((!i||i&&!n.value)&&Fo(d))return;l()}},{eventName:"keyup",target:o});function l(){i=!1,a.clear(),r.value=!1}function u(d){return d===null?(l(),()=>!1):typeof d=="boolean"?(l(),r.value=d,()=>!1):Array.isArray(d)||typeof d=="string"?lf(d,a):d}return r}const Ea="vue-flow__node-desc",Sa="vue-flow__edge-desc",cf="vue-flow__aria-live",Na=["Enter"," ","Escape"],Vt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Go(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Yo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function ao(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Tt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function $a(e,t){return{x:Tt(e.x,t[0][0],t[1][0]),y:Tt(e.y,t[0][1],t[1][1])}}function qr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function mt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function $t(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!mt(e)}function nn(e){return $t(e)&&"computedPosition"in e}function In(e){return!Number.isNaN(e)&&Number.isFinite(e)}function df(e){return In(e.width)&&In(e.height)&&In(e.x)&&In(e.y)}function ff(e,t,n){var r;const o={id:e.id.toString(),type:(r=e.type)!=null?r:"default",dimensions:Bt({width:0,height:0}),computedPosition:Bt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ie(e.data)?e.data:{},events:Bt(Ie(e.events)?e.events:{})};return Object.assign(t!=null?t:o,e,{id:e.id.toString(),parentNode:n})}function Ca(e,t,n){var a,s,l,u,d,h,g;var o,r;const i={id:e.id.toString(),type:(s=(a=e.type)!=null?a:t==null?void 0:t.type)!=null?s:"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:(l=e.updatable)!=null?l:n==null?void 0:n.updatable,selectable:(u=e.selectable)!=null?u:n==null?void 0:n.selectable,focusable:(d=e.focusable)!=null?d:n==null?void 0:n.focusable,data:Ie(e.data)?e.data:{},events:Bt(Ie(e.events)?e.events:{}),label:(h=e.label)!=null?h:"",interactionWidth:(g=e.interactionWidth)!=null?g:n==null?void 0:n.interactionWidth,...n!=null?n:{}};return Object.assign(t!=null?t:i,e,{id:e.id.toString()})}function Ma(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const s of n)s[a]===r&&i.add(s[o]);return t.filter(s=>i.has(s.id))}function hf(...e){if(e.length===3){const[i,a,s]=e;return Ma(i,a,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>mt(i)&&i.source===o).map(i=>n.find(a=>$t(a)&&a.id===i.target))}function gf(...e){if(e.length===3){const[i,a,s]=e;return Ma(i,a,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>mt(i)&&i.target===o).map(i=>n.find(a=>$t(a)&&a.id===i.source))}function Ia({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`}function pf(e,t){return t.some(n=>mt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Ta({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function Zn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,s]=[1,1]){const l={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(l.x/a),y:s*Math.round(l.y/s)}:l}function vf(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function ka({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function mf({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Pa(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=vf(t,ka({...o.computedPosition,...o.dimensions}))}return mf(t)}function Aa(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){var s,l,u,d;const i={...Zn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const h of e){const{dimensions:g,selectable:v=!0,hidden:x=!1}=h,m=(l=(s=g.width)!=null?s:h.width)!=null?l:null,b=(d=(u=g.height)!=null?u:h.height)!=null?d:null;if(r&&!v||x)continue;const E=Yo(i,Go(h)),p=m===null||b===null,I=o&&E>0,N=(m!=null?m:0)*(b!=null?b:0);(p||I||E>=N||h.dragging)&&a.push(h)}return a}function Oa(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Xr(e,t,n,o,r,i=.1,a={x:0,y:0}){var m,b;const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),d=Tt(u,o,r),h=e.x+e.width/2,g=e.y+e.height/2,v=t/2-h*d+((m=a.x)!=null?m:0),x=n/2-g*d+((b=a.y)!=null?b:0);return{x:v,y:x,zoom:d}}function yf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Da(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Da(n,t):!1}function gn(e,t){return typeof e=="undefined"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Ur(e,t,n){return e<t?Tt(Math.abs(e-t),1,t)/t:e>n?-Tt(Math.abs(e-n),1,t)/t:0}function za(e,t,n=15,o=40){const r=Ur(e.x,o,t.width-o)*n,i=Ur(e.y,o,t.height-o)*n;return[r,i]}function xo(e,t){var n,o;if(t){const r=e.position.x+e.dimensions.width-t.dimensions.width,i=e.position.y+e.dimensions.height-t.dimensions.height;if(r>0||i>0||e.position.x<0||e.position.y<0){let a={};if(typeof t.style=="function"?a={...t.style(t)}:t.style&&(a={...t.style}),a.width=(n=a.width)!=null?n:`${t.dimensions.width}px`,a.height=(o=a.height)!=null?o:`${t.dimensions.height}px`,r>0)if(typeof a.width=="string"){const s=Number(a.width.replace("px",""));a.width=`${s+r}px`}else a.width+=r;if(i>0)if(typeof a.height=="string"){const s=Number(a.height.replace("px",""));a.height=`${s+i}px`}else a.height+=i;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof a.width=="string"){const l=Number(a.width.replace("px",""));a.width=`${l+s}px`}else a.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof a.height=="string"){const l=Number(a.height.replace("px",""));a.height=`${l+s}px`}else a.height+=s;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),typeof t.style=="function"?t.style=s=>{const l=t.style;return{...l(s),...a}}:t.style={...t.style,...a}}}}function jr(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(l=>l.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(l=>l.id===a.id);s!==-1&&t.splice(s,1)}const i=t.map(a=>a.id);for(const a of t)for(const s of e)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(nn(a)&&(typeof s.position!="undefined"&&(a.position=s.position),typeof s.dragging!="undefined"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&nn(l)&&xo(a,l)}break;case"dimensions":if(nn(a)&&(typeof s.dimensions!="undefined"&&(a.dimensions=s.dimensions),typeof s.updateStyle!="undefined"&&s.updateStyle&&(a.style={...a.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing!="undefined"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&nn(l)&&(!!l.dimensions.width&&!!l.dimensions.height?xo(a,l):Ze(()=>{xo(a,l)}))}break}return t}function ft(e,t){return{id:e,type:"select",selected:t}}function Zr(e){return{item:e,type:"add"}}function Kr(e){return{id:e,type:"remove"}}function Wr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function gt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(ft(i.id,a)))}return o}function U(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const r=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>{r(s),e&&n&&t.add(e)};return to(l),{off:l}},off:r,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:o,fns:t}}function Qr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function _f(e,t,n,o,r){var i,a;const s=[];for(const l of e)(l.selected||l.id===r)&&(!l.parentNode||!Da(l,o))&&(l.draggable||t&&typeof l.draggable=="undefined")&&s.push(Bt({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((i=l.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=l.computedPosition)==null?void 0:a.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function Eo({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function Ba(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function wf(e,t,n){const[o,r,i,a]=typeof e!="string"?Ba(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x!="undefined"&&typeof n.computedPosition.y!="undefined"&&typeof n.dimensions.width!="undefined"&&typeof n.dimensions.height!="undefined"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function bf(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=wf(r,e,o);i&&(r=i)}else t(new ke(Te.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&(r==null?void 0:r.range)&&Array.isArray(r.range)){const[i,a,s,l]=Ba(r.padding),u=(o==null?void 0:o.computedPosition.x)||0,d=(o==null?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+u+l,r.range[0][1]+d+i],[r.range[1][0]+u-a,r.range[1][1]+d-s]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function xf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function cr(e,t,n,o,r){const i=xf(e.dimensions,bf(e,n,o,r)),a=$a(t,i);return{position:{x:a.x-((r==null?void 0:r.computedPosition.x)||0),y:a.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:a}}function Kn(e,t,n=Z.Left){var l,u,d;const o=((l=t==null?void 0:t.x)!=null?l:0)+e.computedPosition.x,r=((u=t==null?void 0:t.y)!=null?u:0)+e.computedPosition.y,{width:i,height:a}=t!=null?t:Nf(e);switch((d=t==null?void 0:t.position)!=null?d:n){case Z.Top:return{x:o+i/2,y:r};case Z.Right:return{x:o+i,y:r+a/2};case Z.Bottom:return{x:o+i/2,y:r+a};case Z.Left:return{x:o,y:r+a/2}}}function Jr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function Ef({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=ka({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),g=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*g)>0}function Sf(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var Te=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Te||{});const ei={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ke extends Error{constructor(t,...n){var o;super((o=ei[t])==null?void 0:o.call(ei,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function dr(e){return"clientX"in e}function vt(e,t){var s,l;var n,o;const r=dr(e),i=r?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((s=t==null?void 0:t.left)!=null?s:0),y:a-((l=t==null?void 0:t.top)!=null?l:0)}}const Wn=()=>{var e;return typeof navigator!="undefined"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Nf(e){var o,r,i,a;var t,n;return{width:(r=(o=(t=e.dimensions)==null?void 0:t.width)!=null?o:e.width)!=null?r:0,height:(a=(i=(n=e.dimensions)==null?void 0:n.height)!=null?i:e.height)!=null?a:0}}function Ha(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function So(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ti(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:a,y:s}=Kn(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:a,y:s})}return r}function $f(e,t,n,o,r,i){const{x:a,y:s}=vt(e),u=t.elementsFromPoint(a,s).find(x=>x.classList.contains("vue-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const m=fr(void 0,u),b=u.getAttribute("data-handleid"),E=i({nodeId:x,id:b,type:m});if(E){const p=r.find(I=>I.nodeId===x&&I.type===m&&I.id===b);return{handle:{id:b,type:m,nodeId:x,x:(p==null?void 0:p.x)||n.x,y:(p==null?void 0:p.y)||n.y},validHandleResult:E}}}}let d=[],h=Number.POSITIVE_INFINITY;for(const x of r){const m=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(m<=o){const b=i(x);m<=h&&(m<h?d=[{handle:x,validHandleResult:b}]:m===h&&d.push({handle:x,validHandleResult:b}),h=m)}}if(!d.length)return{handle:null,validHandleResult:Ha()};if(d.length===1)return d[0];const g=d.some(({validHandleResult:x})=>x.isValid),v=d.some(({handle:x})=>x.type==="target");return d.find(({handle:x,validHandleResult:m})=>v?x.type==="target":g?m.isValid:!0)||d[0]}function ni(e,t,n,o,r,i,a,s,l,u,d){const h=i==="target",g=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:v,y:x}=vt(e),m=s.elementFromPoint(v,x),b=m!=null&&m.classList.contains("vue-flow__handle")?m:g,E=Ha();if(b){E.handleDomNode=b;const p=fr(void 0,b),I=b.getAttribute("data-nodeid"),N=b.getAttribute("data-handleid"),R=b.classList.contains("connectable"),Y=b.classList.contains("connectableend"),V={source:h?I:o,sourceHandle:h?N:r,target:h?o:I,targetHandle:h?r:N};E.connection=V,R&&Y&&(n===It.Strict?h&&p==="source"||!h&&p==="target":I!==o||N!==r)&&(E.isValid=a(V,{edges:l,nodes:u,sourceNode:d(V.source),targetNode:d(V.target)}),E.endHandle={nodeId:I,handleId:N,type:p,position:E.isValid?b.getAttribute("data-handlepos"):null})}return E}function Cf({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:s}=a;let l=[],u=[];s&&(l=ti(a,s,"source",`${t}-${n}-${o}`),u=ti(a,s,"target",`${t}-${n}-${o}`)),r.push(...l,...u)}return r}function fr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Mf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const If=["production","prod"];function so(e,...t){Ra()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ra(){return!If.includes("production")}function oi(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...ao(a)}})}function qo(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),Ze(()=>{a.blur()})):n([e])}function Ie(e){return typeof T(e)!="undefined"}function Tf(e,t,n,o){var i;if(!e||!e.source||!e.target)return n(new ke(Te.EDGE_INVALID,(i=e==null?void 0:e.id)!=null?i:"[ID UNKNOWN]")),!1;let r;return mt(e)?r=e:r={...e,id:Ia(e)},r=Ca(r,void 0,o),pf(r,t)?!1:r}function kf(e,t,n,o,r,i){if(!t.source||!t.target)return i(new ke(Te.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new ke(Te.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...l}=e,u={...l,id:r?Ia(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function ri(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!$t(a)){n(new ke(Te.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const s=ff(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=s}for(const i of r){const a=t(i.parentNode)||r.find(s=>s.id===i.parentNode);i.parentNode&&!a&&n(new ke(Te.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function ii(e,t){e.clear();for(const n of t){const{id:o,source:r,target:i,sourceHandle:a=null,targetHandle:s=null}=n,l=`${r}-source-${a}`,u=`${i}-target-${s}`,d=e.get(l)||new Map,h=e.get(u)||new Map,g=Bt({edgeId:o,source:r,target:i,sourceHandle:a,targetHandle:s});e.set(l,d.set(`${i}-${s}`,g)),e.set(u,h.set(`${r}-${a}`,g))}}function ai(e,t,n,o,r,i,a,s){const l=[];for(const u of e){const d=mt(u)?u:Tf(u,s,r,i);if(!d)continue;const h=n(d.source),g=n(d.target);if(!h||!g){r(new ke(Te.EDGE_SOURCE_TARGET_MISSING,d.id,d.source,d.target));continue}if(!h){r(new ke(Te.EDGE_SOURCE_MISSING,d.id,d.source));continue}if(!g){r(new ke(Te.EDGE_TARGET_MISSING,d.id,d.target));continue}if(t&&!t(d,{edges:s,nodes:a,sourceNode:h,targetNode:g})){r(new ke(Te.EDGE_INVALID,d.id));continue}const v=o(d.id);l.push({...Ca(d,v,i),sourceNode:h,targetNode:g})}return l}const si=Symbol("vueFlow"),Va=Symbol("nodeId"),La=Symbol("nodeRef"),Pf=Symbol("edgeId"),Af=Symbol("edgeRef"),lo=Symbol("slots");function Fa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:d,nodesDraggable:h,panBy:g,findNode:v,multiSelectionActive:x,nodesSelectionActive:m,selectNodesOnDrag:b,removeSelectedElements:E,addSelectedNodes:p,updateNodePositions:I,emits:N}=$e(),{onStart:R,onDrag:Y,onStop:V,onClick:K,el:j,disabled:A,id:w,selectable:oe,dragHandle:se}=e,_=fe(!1);let P=[],S,D=null,z={x:void 0,y:void 0},B={x:0,y:0},F=null,G=!1,ae=0,X=!1;const L=zf(),Q=({x:J,y:ne})=>{z={x:J,y:ne};let $=!1;if(P=P.map(c=>{const f={x:J-c.distance.x,y:ne-c.distance.y};n.value&&(f.x=o.value[0]*Math.round(f.x/o.value[0]),f.y=o.value[1]*Math.round(f.y/o.value[1]));const{computedPosition:y}=cr(c,f,N.error,a.value,c.parentNode?v(c.parentNode):void 0);return $=$||c.position.x!==y.x||c.position.y!==y.y,c.position=y,c}),!!$&&(I(P,!0,!0),_.value=!0,F)){const[c,f]=Eo({id:w,dragItems:P,findNode:v});Y({event:F,node:c,nodes:f})}},pe=()=>{var $,c;if(!D)return;const[J,ne]=za(B,D,d.value);if(J!==0||ne!==0){const f={x:(($=z.x)!=null?$:0)-J/l.value.zoom,y:((c=z.y)!=null?c:0)-ne/l.value.zoom};g({x:J,y:ne})&&Q(f)}ae=requestAnimationFrame(pe)},he=(J,ne)=>{G=!0;const $=v(w);!b.value&&!x.value&&$&&($.selected||E()),$&&we(oe)&&b.value&&qo($,x.value,p,E,m,!1,ne);const c=L(J);if(z=c,P=_f(i.value,h.value,c,v,w),P.length){const[f,y]=Eo({id:w,dragItems:P,findNode:v});R({event:J.sourceEvent,node:f,nodes:y})}},_e=(J,ne)=>{var $;J.sourceEvent.type==="touchmove"&&J.sourceEvent.touches.length>1||(s.value===0&&he(J,ne),z=L(J),D=(($=t.value)==null?void 0:$.getBoundingClientRect())||null,B=vt(J.sourceEvent,D))},le=(J,ne)=>{var c,f;const $=L(J);if(!X&&G&&u.value&&(X=!0,pe()),!G){const y=$.xSnapped-((c=z.x)!=null?c:0),C=$.ySnapped-((f=z.y)!=null?f:0);Math.sqrt(y*y+C*C)>s.value&&he(J,ne)}(z.x!==$.xSnapped||z.y!==$.ySnapped)&&P.length&&G&&(F=J.sourceEvent,B=vt(J.sourceEvent,D),Q($))},ce=J=>{if(!_.value&&!x.value&&(K==null||K(J.sourceEvent)),_.value=!1,X=!1,G=!1,z={x:void 0,y:void 0},cancelAnimationFrame(ae),P.length){I(P,!1,!1);const[ne,$]=Eo({id:w,dragItems:P,findNode:v});V({event:J.sourceEvent,node:ne,nodes:$})}};return xe([()=>we(A),j],([J,ne],$,c)=>{if(ne){const f=Ye(ne);J||(S=pc().on("start",y=>_e(y,ne)).on("drag",y=>le(y,ne)).on("end",y=>ce(y)).filter(y=>{const C=y.target,O=we(se);return!y.button&&(!r.value||!Qr(C,`.${r.value}`,ne)&&(!O||Qr(C,O,ne)))}),f.call(S)),c(()=>{f.on(".drag",null),S&&(S.on("start",null),S.on("drag",null),S.on("end",null))})}}),_}function Of(){return{doubleClick:U(),click:U(),mouseEnter:U(),mouseMove:U(),mouseLeave:U(),contextMenu:U(),updateStart:U(),update:U(),updateEnd:U()}}function Df(e,t){const n=Of();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function zf(){const{viewport:e,snapGrid:t,snapToGrid:n}=$e();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function Tn(){return!0}function Ga({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{vueFlowRef:s,connectionMode:l,connectionRadius:u,connectOnClick:d,connectionClickStartHandle:h,nodesConnectable:g,autoPanOnConnect:v,autoPanSpeed:x,findNode:m,panBy:b,startConnection:E,updateConnection:p,endConnection:I,emits:N,viewport:R,edges:Y,nodes:V,isValidConnection:K}=$e();let j=null,A=!1,w=null,oe=null;function se(P){var S;const D=we(n)==="target",z=dr(P),B=qr(P.target);if(z&&P.button===0||!z){let F=function(y){ne=vt(y,ce);const{handle:C,validHandleResult:O}=$f(y,B,Zn(ne,R.value,!1,[1,1]),u.value,c,W=>ni(y,W,l.value,we(t),we(e),D?"target":"source",X,B,Y.value,V.value,m));if(L=C,$||(f(),$=!0),j=O.connection,A=O.isValid,w=O.handleDomNode,!(A&&L&&(oe==null?void 0:oe.endHandle)&&O.endHandle&&oe.endHandle.type===O.endHandle.type&&oe.endHandle.nodeId===O.endHandle.nodeId&&oe.endHandle.handleId===O.endHandle.handleId)){if(p(L&&A?Ta({x:L.x,y:L.y},R.value):ne,O.endHandle,Mf(!!L,A)),oe=O,!L&&!A&&!w)return So(J);j&&j.source!==j.target&&w&&(So(J),J=w,w.classList.add("connecting","vue-flow__handle-connecting"),w.classList.toggle("valid",A),w.classList.toggle("vue-flow__handle-valid",A))}},G=function(y){(L||w)&&j&&A&&(i?i(y,j):N.connect(j)),N.connectEnd(y),r&&(a==null||a(y)),So(J),cancelAnimationFrame(Q),I(y),$=!1,A=!1,j=null,w=null,B.removeEventListener("mousemove",F),B.removeEventListener("mouseup",G),B.removeEventListener("touchmove",F),B.removeEventListener("touchend",G)};const ae=m(we(t));let X=we(o)||K.value||Tn;!X&&ae&&(X=(D?ae.isValidSourcePos:ae.isValidTargetPos)||Tn);let L,Q=0;const{x:pe,y:he}=vt(P),_e=B==null?void 0:B.elementFromPoint(pe,he),le=fr(we(r),_e),ce=(S=s.value)==null?void 0:S.getBoundingClientRect();if(!ce||!le)return;let J,ne=vt(P,ce),$=!1;const c=Cf({nodes:V.value,nodeId:we(t),handleId:we(e),handleType:le}),f=()=>{if(!v.value)return;const[y,C]=za(ne,ce,x.value);b({x:y,y:C}),Q=requestAnimationFrame(f)};E({nodeId:we(t),handleId:we(e),type:le,position:(_e==null?void 0:_e.getAttribute("data-handlepos"))||Z.Top},{x:pe-ce.left,y:he-ce.top}),N.connectStart({event:P,nodeId:we(t),handleId:we(e),handleType:le}),B.addEventListener("mousemove",F),B.addEventListener("mouseup",G),B.addEventListener("touchmove",F),B.addEventListener("touchend",G)}}function _(P){if(!d.value)return;const S=we(n)==="target";if(!h.value)N.clickConnectStart({event:P,nodeId:we(t),handleId:we(e)}),E({nodeId:we(t),type:we(n),handleId:we(e)},void 0,!0);else{let D=we(o)||K.value||Tn;const z=m(we(t));if(!D&&z&&(D=(S?z.isValidSourcePos:z.isValidTargetPos)||Tn),z&&(typeof z.connectable=="undefined"?g.value:z.connectable)===!1)return;const B=qr(P.target),{connection:F,isValid:G}=ni(P,{nodeId:we(t),id:we(e),type:we(n)},l.value,h.value.nodeId,h.value.handleId||null,h.value.type,D,B,Y.value,V.value,m),ae=F.source===F.target;G&&!ae&&N.connect(F),N.clickConnectEnd(P),I(P,!0)}}return{handlePointerDown:se,handleClick:_}}function Bf(){return Xt(Va,"")}function Ya(e){var s;const t=(s=e!=null?e:Bf())!=null?s:"",n=Xt(La,fe(null)),{findNode:o,edges:r,emits:i}=$e(),a=o(t);return a||i.error(new ke(Te.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ie(()=>o(a.parentNode)),connectedEdges:ie(()=>Oa([a],r.value))}}function Hf(){return{doubleClick:U(),click:U(),mouseEnter:U(),mouseMove:U(),mouseLeave:U(),contextMenu:U(),dragStart:U(),drag:U(),dragStop:U()}}function Rf(e,t){const n=Hf();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function qa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:s}=$e();return(l,u=!1)=>{const d=i.value?r.value[0]:5,h=i.value?r.value[1]:5,g=u?4:1,v=l.x*d*g,x=l.y*h*g,m=[];for(const b of e.value)if(b.draggable||a&&typeof b.draggable=="undefined"){const E={x:b.computedPosition.x+v,y:b.computedPosition.y+x},{computedPosition:p}=cr(b,E,s.error,t.value,b.parentNode?o(b.parentNode):void 0);m.push({id:b.id,position:p,from:b.position,distance:{x:l.x,y:l.y},dimensions:b.dimensions})}n(m,!0,!1)}}const No=.1;function ut(){return so("Viewport not initialized yet."),Promise.resolve(!1)}const Vf={zoomIn:ut,zoomOut:ut,zoomTo:ut,fitView:ut,setCenter:ut,fitBounds:ut,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ut,setTransform:ut,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Lf(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy($o(e.d3Selection,r,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(s=>{const{x:l,y:u}=$a({x:-o,y:-r},e.translateExtent),d=qt.translate(-l,-u).scale(i);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform($o(e.d3Selection,a,()=>{s(!0)}),d):s(!1)})}return ie(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r==null?void 0:r.duration),zoomOut:r=>t(1/1.2,r==null?void 0:r.duration),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo($o(e.d3Selection,i==null?void 0:i.duration,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i==null?void 0:i.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:No,includeHiddenNodes:!1,duration:0})=>{var g,v,x;var i,a;const s=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!m.hidden)&&(!((i=r.nodes)!=null&&i.length)||((a=r.nodes)==null?void 0:a.length)&&r.nodes.includes(m.id))&&s.push(m);if(!s.length)return Promise.resolve(!1);const l=Pa(s),{x:u,y:d,zoom:h}=Xr(l,e.dimensions.width,e.dimensions.height,(g=r.minZoom)!=null?g:e.minZoom,(v=r.maxZoom)!=null?v:e.maxZoom,(x=r.padding)!=null?x:No,r.offset);return n(u,d,h,r==null?void 0:r.duration)},setCenter:(r,i,a)=>{const s=typeof(a==null?void 0:a.zoom)!="undefined"?a.zoom:e.maxZoom,l=e.dimensions.width/2-r*s,u=e.dimensions.height/2-i*s;return n(l,u,s,a==null?void 0:a.duration)},fitBounds:(r,i={padding:No})=>{const{x:a,y:s,zoom:l}=Xr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,s,l,i==null?void 0:i.duration)},project:r=>Zn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:r.x-i,y:r.y-a};return Zn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:r.x+i,y:r.y+a};return Ta(s,e.viewport)}return{x:0,y:0}}}:Vf)}function $o(e,t=0,n){return e.transition().duration(t).on("end",n)}function Ff(e,t,n){const o=zi(!0);return o.run(()=>{const r=()=>{o.run(()=>{let m,b,E=!!(n.nodes.value.length||n.edges.value.length);m=Dt([e.modelValue,()=>{var p,I;return(I=(p=e.modelValue)==null?void 0:p.value)==null?void 0:I.length}],([p])=>{p&&Array.isArray(p)&&(b==null||b.pause(),n.setElements(p),!b&&!E&&p.length?E=!0:b==null||b.resume())}),b=Dt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([p,I])=>{var N;((N=e.modelValue)==null?void 0:N.value)&&Array.isArray(e.modelValue.value)&&(m==null||m.pause(),e.modelValue.value=[...p,...I],Ze(()=>{m==null||m.resume()}))},{immediate:E}),Dn(()=>{m==null||m.stop(),b==null||b.stop()})})},i=()=>{o.run(()=>{let m,b,E=!!n.nodes.value.length;m=Dt([e.nodes,()=>{var p,I;return(I=(p=e.nodes)==null?void 0:p.value)==null?void 0:I.length}],([p])=>{p&&Array.isArray(p)&&(b==null||b.pause(),n.setNodes(p),!b&&!E&&p.length?E=!0:b==null||b.resume())}),b=Dt([n.nodes,()=>n.nodes.value.length],([p])=>{var I;((I=e.nodes)==null?void 0:I.value)&&Array.isArray(e.nodes.value)&&(m==null||m.pause(),e.nodes.value=[...p],Ze(()=>{m==null||m.resume()}))},{immediate:E}),Dn(()=>{m==null||m.stop(),b==null||b.stop()})})},a=()=>{o.run(()=>{let m,b,E=!!n.edges.value.length;m=Dt([e.edges,()=>{var p,I;return(I=(p=e.edges)==null?void 0:p.value)==null?void 0:I.length}],([p])=>{p&&Array.isArray(p)&&(b==null||b.pause(),n.setEdges(p),!b&&!E&&p.length?E=!0:b==null||b.resume())}),b=Dt([n.edges,()=>n.edges.value.length],([p])=>{var I;((I=e.edges)==null?void 0:I.value)&&Array.isArray(e.edges.value)&&(m==null||m.pause(),e.edges.value=[...p],Ze(()=>{m==null||m.resume()}))},{immediate:E}),Dn(()=>{m==null||m.stop(),b==null||b.stop()})})},s=()=>{o.run(()=>{xe(()=>t.maxZoom,()=>{t.maxZoom&&Ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{xe(()=>t.minZoom,()=>{t.minZoom&&Ie(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{xe(()=>t.translateExtent,()=>{t.translateExtent&&Ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},d=()=>{o.run(()=>{xe(()=>t.nodeExtent,()=>{t.nodeExtent&&Ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},h=()=>{o.run(()=>{xe(()=>t.applyDefault,()=>{Ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},g=()=>{o.run(()=>{const m=async b=>{let E=b;typeof t.autoConnect=="function"&&(E=await t.autoConnect(b)),E!==!1&&n.addEdges([E])};xe(()=>t.autoConnect,()=>{Ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),xe(n.autoConnect,(b,E,p)=>{b?n.onConnect(m):n.hooks.value.connect.off(m),p(()=>{n.hooks.value.connect.off(m)})},{immediate:!0})})},v=()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const b of Object.keys(t)){const E=b;if(!m.includes(E)){const p=Me(()=>t[E]),I=n[E];Jo(I)&&o.run(()=>{xe(p,N=>{Ie(N)&&(I.value=N)},{immediate:!0})})}}};(()=>{r(),i(),a(),l(),s(),u(),d(),h(),g(),v()})()}),()=>o.stop()}function Gf(){return{edgesChange:U(),nodesChange:U(),nodeDoubleClick:U(),nodeClick:U(),nodeMouseEnter:U(),nodeMouseMove:U(),nodeMouseLeave:U(),nodeContextMenu:U(),nodeDragStart:U(),nodeDrag:U(),nodeDragStop:U(),nodesInitialized:U(),miniMapNodeClick:U(),miniMapNodeDoubleClick:U(),miniMapNodeMouseEnter:U(),miniMapNodeMouseMove:U(),miniMapNodeMouseLeave:U(),connect:U(),connectStart:U(),connectEnd:U(),clickConnectStart:U(),clickConnectEnd:U(),paneReady:U(),init:U(),move:U(),moveStart:U(),moveEnd:U(),selectionDragStart:U(),selectionDrag:U(),selectionDragStop:U(),selectionContextMenu:U(),selectionStart:U(),selectionEnd:U(),viewportChangeStart:U(),viewportChange:U(),viewportChangeEnd:U(),paneScroll:U(),paneClick:U(),paneContextMenu:U(),paneMouseEnter:U(),paneMouseMove:U(),paneMouseLeave:U(),edgeContextMenu:U(),edgeMouseEnter:U(),edgeMouseMove:U(),edgeMouseLeave:U(),edgeDoubleClick:U(),edgeClick:U(),edgeUpdateStart:U(),edgeUpdate:U(),edgeUpdateEnd:U(),updateNodeInternals:U(),error:U(e=>so(e.message))}}function Yf(e,t){Ri(()=>{for(const[n,o]of Object.entries(t.value)){const r=i=>{e(n,i)};o.fns.add(r),to(()=>{o.off(r)})}})}function Xa(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:ur.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:on.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:bt.Bezier,style:{}},connectionMode:It.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Wn()?"Meta":"Control",zoomActivationKeyCode:Wn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Gf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const qf=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Xf(e,t,n){const o=Lf(e),r=c=>{const f=c!=null?c:[];e.hooks.updateNodeInternals.trigger(f)},i=c=>gf(c,e.nodes,e.edges),a=c=>hf(c,e.nodes,e.edges),s=c=>Oa(c,e.edges),l=({id:c,type:f,nodeId:y})=>{var O;var C;return Array.from((O=(C=e.connectionLookup.get(`${y}-${f}-${c!=null?c:null}`))==null?void 0:C.values())!=null?O:[])},u=c=>{if(!!c)return t.value.get(c)},d=c=>{if(!!c)return n.value.get(c)},h=(c,f,y)=>{var M,ee;var C,O;const W=[];for(const te of c){const ge={id:te.id,type:"position",dragging:y,from:te.from};if(f&&(ge.position=te.position,te.parentNode)){const ue=u(te.parentNode);ge.position={x:ge.position.x-((M=(C=ue==null?void 0:ue.computedPosition)==null?void 0:C.x)!=null?M:0),y:ge.position.y-((ee=(O=ue==null?void 0:ue.computedPosition)==null?void 0:O.y)!=null?ee:0)}}W.push(ge)}W!=null&&W.length&&e.hooks.nodesChange.trigger(W)},g=c=>{if(!e.vueFlowRef)return;const f=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!f)return;const y=window.getComputedStyle(f),{m22:C}=new window.DOMMatrixReadOnly(y.transform),O=[];for(let W=0;W<c.length;++W){const M=c[W],ee=u(M.id);if(ee){const te=ao(M.nodeElement);if(!!(te.width&&te.height&&(ee.dimensions.width!==te.width||ee.dimensions.height!==te.height||M.forceUpdate))){const ue=M.nodeElement.getBoundingClientRect();ee.dimensions=te,ee.handleBounds.source=oi(".source",M.nodeElement,ue,C),ee.handleBounds.target=oi(".target",M.nodeElement,ue,C),O.push({id:ee.id,type:"dimensions",dimensions:te})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),O.length&&e.hooks.nodesChange.trigger(O)},v=(c,f)=>{const y=new Set,C=new Set;for(const M of c)$t(M)?y.add(M.id):mt(M)&&C.add(M.id);const O=gt(t.value,y,!0),W=gt(n.value,C);if(e.multiSelectionActive){for(const M of y)O.push(ft(M,f));for(const M of C)W.push(ft(M,f))}O.length&&e.hooks.nodesChange.trigger(O),W.length&&e.hooks.edgesChange.trigger(W)},x=c=>{if(e.multiSelectionActive){const f=c.map(y=>ft(y.id,!0));e.hooks.nodesChange.trigger(f);return}e.hooks.nodesChange.trigger(gt(t.value,new Set(c.map(f=>f.id)),!0)),e.hooks.edgesChange.trigger(gt(n.value))},m=c=>{if(e.multiSelectionActive){const f=c.map(y=>ft(y.id,!0));e.hooks.edgesChange.trigger(f);return}e.hooks.edgesChange.trigger(gt(n.value,new Set(c.map(f=>f.id)))),e.hooks.nodesChange.trigger(gt(t.value,new Set,!0))},b=c=>{v(c,!0)},E=c=>{const y=(c||e.nodes).map(C=>(C.selected=!1,ft(C.id,!1)));e.hooks.nodesChange.trigger(y)},p=c=>{const y=(c||e.edges).map(C=>(C.selected=!1,ft(C.id,!1)));e.hooks.edgesChange.trigger(y)},I=c=>{if(!c||!c.length)return v([],!1);const f=c.reduce((y,C)=>{const O=ft(C.id,!1);return $t(C)?y.nodes.push(O):y.edges.push(O),y},{nodes:[],edges:[]});f.nodes.length&&e.hooks.nodesChange.trigger(f.nodes),f.edges.length&&e.hooks.edgesChange.trigger(f.edges)},N=c=>{var f;(f=e.d3Zoom)==null||f.scaleExtent([c,e.maxZoom]),e.minZoom=c},R=c=>{var f;(f=e.d3Zoom)==null||f.scaleExtent([e.minZoom,c]),e.maxZoom=c},Y=c=>{var f;(f=e.d3Zoom)==null||f.translateExtent(c),e.translateExtent=c},V=c=>{e.nodeExtent=c,r()},K=c=>{var f;(f=e.d3Zoom)==null||f.clickDistance(c)},j=c=>{e.nodesDraggable=c,e.nodesConnectable=c,e.elementsSelectable=c},A=c=>{const f=c instanceof Function?c(e.nodes):c;!e.initialized&&!f.length||(e.nodes=ri(f,u,e.hooks.error.trigger))},w=c=>{const f=c instanceof Function?c(e.edges):c;if(!e.initialized&&!f.length)return;const y=ai(f,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);ii(e.connectionLookup,y),e.edges=y},oe=c=>{const f=c instanceof Function?c([...e.nodes,...e.edges]):c;!e.initialized&&!f.length||(A(f.filter($t)),w(f.filter(mt)))},se=c=>{let f=c instanceof Function?c(e.nodes):c;f=Array.isArray(f)?f:[f];const y=ri(f,u,e.hooks.error.trigger),C=[];for(const O of y)C.push(Zr(O));C.length&&e.hooks.nodesChange.trigger(C)},_=c=>{let f=c instanceof Function?c(e.edges):c;f=Array.isArray(f)?f:[f];const y=ai(f,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),C=[];for(const O of y)C.push(Zr(O));C.length&&e.hooks.edgesChange.trigger(C)},P=(c,f=!0,y=!1)=>{const C=c instanceof Function?c(e.nodes):c,O=Array.isArray(C)?C:[C],W=[],M=[];function ee(ge){const ue=s(ge);for(const de of ue)(!Ie(de.deletable)||de.deletable)&&M.push(Wr(de.id,de.source,de.target,de.sourceHandle,de.targetHandle))}function te(ge){const ue=[];for(const de of e.nodes)de.parentNode===ge&&ue.push(de);if(ue.length){for(const de of ue)W.push(Kr(de.id));f&&ee(ue);for(const de of ue)te(de.id)}}for(const ge of O){const ue=typeof ge=="string"?u(ge):ge;!ue||Ie(ue.deletable)&&!ue.deletable||(W.push(Kr(ue.id)),f&&ee([ue]),y&&te(ue.id))}M.length&&e.hooks.edgesChange.trigger(M),W.length&&e.hooks.nodesChange.trigger(W)},S=c=>{const f=c instanceof Function?c(e.edges):c,y=Array.isArray(f)?f:[f],C=[];for(const O of y){const W=typeof O=="string"?d(O):O;!W||Ie(W.deletable)&&!W.deletable||C.push(Wr(typeof O=="string"?O:O.id,W.source,W.target,W.sourceHandle,W.targetHandle))}e.hooks.edgesChange.trigger(C)},D=(c,f,y=!0)=>kf(c,f,e.edges,d,y,e.hooks.error.trigger),z=(c,f,y={replace:!1})=>{const C=d(c);if(!C)return;const O=typeof f=="function"?f(C):f;C.data=y.replace?O:{...C.data,...O}},B=c=>jr(c,e.nodes),F=c=>{const f=jr(c,e.edges);return ii(e.connectionLookup,f),f},G=(c,f,y={replace:!1})=>{const C=u(c);if(!C)return;const O=typeof f=="function"?f(C):f;y.replace?e.nodes.splice(e.nodes.indexOf(C),1,O):Object.assign(C,O)},ae=(c,f,y={replace:!1})=>{const C=u(c);if(!C)return;const O=typeof f=="function"?f(C):f;C.data=y.replace?O:{...C.data,...O}},X=(c,f,y=!1)=>{y?e.connectionClickStartHandle=c:e.connectionStartHandle=c,e.connectionEndHandle=null,e.connectionStatus=null,f&&(e.connectionPosition=f)},L=(c,f=null,y=null)=>{e.connectionStartHandle&&(e.connectionPosition=c,e.connectionEndHandle=f,e.connectionStatus=y)},Q=(c,f)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,f?e.connectionClickStartHandle=null:e.connectionStartHandle=null},pe=c=>{const f=df(c),y=f?null:nn(c)?c:u(c.id);return!f&&!y?[null,null,f]:[f?c:Go(y),y,f]},he=(c,f=!0,y=e.nodes)=>{const[C,O,W]=pe(c);if(!C)return[];const M=[];for(const ee of y||e.nodes){if(!W&&(ee.id===O.id||!ee.computedPosition))continue;const te=Go(ee),ge=Yo(te,C);(f&&ge>0||ge>=Number(C.width)*Number(C.height))&&M.push(ee)}return M},_e=(c,f,y=!0)=>{const[C]=pe(c);if(!C)return!1;const O=Yo(C,f);return y&&O>0||O>=Number(C.width)*Number(C.height)},le=c=>{const{viewport:f,dimensions:y,d3Zoom:C,d3Selection:O,translateExtent:W}=e;if(!C||!O||!c.x&&!c.y)return!1;const M=qt.translate(f.x+c.x,f.y+c.y).scale(f.zoom),ee=[[0,0],[y.width,y.height]],te=C.constrain()(M,ee,W),ge=e.viewport.x!==te.x||e.viewport.y!==te.y||e.viewport.zoom!==te.k;return C.transform(O,te),ge},ce=c=>{const f=c instanceof Function?c(e):c,y=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ie(f.defaultEdgeOptions)&&(e.defaultEdgeOptions=f.defaultEdgeOptions);const C=f.modelValue||f.nodes||f.edges?[]:void 0;C&&(f.modelValue&&C.push(...f.modelValue),f.nodes&&C.push(...f.nodes),f.edges&&C.push(...f.edges),oe(C));const O=()=>{Ie(f.maxZoom)&&R(f.maxZoom),Ie(f.minZoom)&&N(f.minZoom),Ie(f.translateExtent)&&Y(f.translateExtent)};for(const W of Object.keys(f)){const M=W,ee=f[M];![...qf,...y].includes(M)&&Ie(ee)&&(e[M]=ee)}Po(()=>e.d3Zoom).not.toBeNull().then(O),e.initialized||(e.initialized=!0)};return{updateNodePositions:h,updateNodeDimensions:g,setElements:oe,setNodes:A,setEdges:w,addNodes:se,addEdges:_,removeNodes:P,removeEdges:S,findNode:u,findEdge:d,updateEdge:D,updateEdgeData:z,updateNode:G,updateNodeData:ae,applyEdgeChanges:F,applyNodeChanges:B,addSelectedElements:b,addSelectedNodes:x,addSelectedEdges:m,setMinZoom:N,setMaxZoom:R,setTranslateExtent:Y,setNodeExtent:V,setPaneClickDistance:K,removeSelectedElements:I,removeSelectedNodes:E,removeSelectedEdges:p,startConnection:X,updateConnection:L,endConnection:Q,setInteractive:j,setState:ce,getIntersectingNodes:he,getIncomers:i,getOutgoers:a,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:_e,panBy:le,fitView:c=>o.value.fitView(c),zoomIn:c=>o.value.zoomIn(c),zoomOut:c=>o.value.zoomOut(c),zoomTo:(c,f)=>o.value.zoomTo(c,f),setViewport:(c,f)=>o.value.setViewport(c,f),setTransform:(c,f)=>o.value.setTransform(c,f),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(c,f,y)=>o.value.setCenter(c,f,y),fitBounds:(c,f)=>o.value.fitBounds(c,f),project:c=>o.value.project(c),screenToFlowCoordinate:c=>o.value.screenToFlowCoordinate(c),flowToScreenCoordinate:c=>o.value.flowToScreenCoordinate(c),toObject:()=>{const c=[],f=[];for(const y of e.nodes){const{computedPosition:C,handleBounds:O,selected:W,dimensions:M,isParent:ee,resizing:te,dragging:ge,events:ue,...de}=y;c.push(de)}for(const y of e.edges){const{selected:C,sourceNode:O,targetNode:W,events:M,...ee}=y;f.push(ee)}return JSON.parse(JSON.stringify({nodes:c,edges:f,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:c=>new Promise(f=>{const{nodes:y,edges:C,position:O,zoom:W,viewport:M}=c;if(y&&A(y),C&&w(C),(M==null?void 0:M.x)&&(M==null?void 0:M.y)||O){const ee=(M==null?void 0:M.x)||O[0],te=(M==null?void 0:M.y)||O[1],ge=(M==null?void 0:M.zoom)||W||e.viewport.zoom;return Po(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:ee,y:te,zoom:ge}).then(()=>{f(!0)})})}else f(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{var f,y,C;const c=Xa();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const O=qt.translate((f=c.defaultViewport.x)!=null?f:0,(y=c.defaultViewport.y)!=null?y:0).scale(Tt((C=c.defaultViewport.zoom)!=null?C:1,c.minZoom,c.maxZoom)),W=e.viewportRef.getBoundingClientRect(),M=[[0,0],[W.width,W.height]],ee=e.d3Zoom.constrain()(O,M,c.translateExtent);e.d3Zoom.transform(e.d3Selection,ee)}ce(c)},$destroy:()=>{}}}const Uf=["data-id","data-handleid","data-nodeid","data-handlepos"],jf={name:"Handle",compatConfig:{MODE:3}},Fe=Se({...jf,props:{id:{default:null},type:{},position:{default:()=>Z.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Vi(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Me(()=>{var A;return(A=n.type)!=null?A:"source"}),r=Me(()=>{var A;return(A=n.isValidConnection)!=null?A:null}),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:s,vueFlowRef:l,nodesConnectable:u,noDragClassName:d,noPanClassName:h}=$e(),{id:g,node:v,nodeEl:x,connectedEdges:m}=Ya(),b=fe(),E=Me(()=>typeof e.connectableStart!="undefined"?e.connectableStart:!0),p=Me(()=>typeof e.connectableEnd!="undefined"?e.connectableEnd:!0),I=Me(()=>{var A,w,oe,se,_,P;return((A=i.value)==null?void 0:A.nodeId)===g&&((w=i.value)==null?void 0:w.handleId)===e.id&&((oe=i.value)==null?void 0:oe.type)===o.value||((se=s.value)==null?void 0:se.nodeId)===g&&((_=s.value)==null?void 0:_.handleId)===e.id&&((P=s.value)==null?void 0:P.type)===o.value}),N=Me(()=>{var A,w,oe;return((A=a.value)==null?void 0:A.nodeId)===g&&((w=a.value)==null?void 0:w.handleId)===e.id&&((oe=a.value)==null?void 0:oe.type)===o.value}),{handlePointerDown:R,handleClick:Y}=Ga({nodeId:g,handleId:e.id,isValidConnection:r,type:o}),V=ie(()=>typeof e.connectable=="string"&&e.connectable==="single"?!m.value.some(A=>{const w=A[`${o.value}Handle`];return A[o.value]!==g?!1:w?w===e.id:!0}):typeof e.connectable=="number"?m.value.filter(A=>{const w=A[`${o.value}Handle`];return A[o.value]!==g?!1:w?w===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(v,m.value):Ie(e.connectable)?e.connectable:u.value);We(()=>{var z;var A;if(!v.dimensions.width||!v.dimensions.height)return;const w=(A=v.handleBounds[o.value])==null?void 0:A.find(B=>B.id===e.id);if(!l.value||w)return;const oe=l.value.querySelector(".vue-flow__transformationpane");if(!x.value||!b.value||!oe||!e.id)return;const se=x.value.getBoundingClientRect(),_=b.value.getBoundingClientRect(),P=window.getComputedStyle(oe),{m22:S}=new window.DOMMatrixReadOnly(P.transform),D={id:e.id,position:e.position,x:(_.left-se.left)/S,y:(_.top-se.top)/S,...ao(b.value)};v.handleBounds[o.value]=[...(z=v.handleBounds[o.value])!=null?z:[],D]}),Hi(()=>{const A=v.handleBounds[o.value];A&&(v.handleBounds[o.value]=A.filter(w=>w.id!==e.id))});function K(A){const w=dr(A);V.value&&E.value&&(w&&A.button===0||!w)&&R(A)}function j(A){!g||!a.value&&!E.value||V.value&&Y(A)}return t({handleClick:Y,handlePointerDown:R,onClick:j,onPointerDown:K}),(A,w)=>(q(),me("div",{ref_key:"handle",ref:b,"data-id":`${T(g)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":T(g),"data-handlepos":A.position,class:Be(["vue-flow__handle",[`vue-flow__handle-${A.position}`,`vue-flow__handle-${e.id}`,T(d),T(h),o.value,{connectable:V.value,connecting:N.value,connectablestart:E.value,connectableend:p.value,connectionindicator:V.value&&(E.value&&!I.value||p.value&&I.value)}]]),onMousedown:K,onTouchstartPassive:K,onClick:j},[Ct(A.$slots,"default",{id:A.id})],42,Uf))}}),uo=function({sourcePosition:e=Z.Bottom,targetPosition:t=Z.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const s=a.label||n;return[Ee(Fe,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof s!="string"&&s?Ee(s):Ee("div",{innerHTML:s}),Ee(Fe,{type:"source",position:e,connectable:o,isValidConnection:i})]};uo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];uo.inheritAttrs=!1;uo.compatConfig={MODE:3};const Zf=uo,co=function({targetPosition:e=Z.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[Ee(Fe,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?Ee(i):Ee("div",{innerHTML:i})]};co.props=["targetPosition","label","isValidTargetPos","connectable","data"];co.inheritAttrs=!1;co.compatConfig={MODE:3};const Kf=co,fo=function({sourcePosition:e=Z.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return[typeof i!="string"&&i?Ee(i):Ee("div",{innerHTML:i}),Ee(Fe,{type:"source",position:e,connectable:n,isValidConnection:o})]};fo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];fo.inheritAttrs=!1;fo.compatConfig={MODE:3};const Wf=fo,Qf=["transform"],Jf=["width","height","x","y","rx","ry"],eh=["y"],th={name:"EdgeText",compatConfig:{MODE:3}},nh=Se({...th,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=fe({x:0,y:0,width:0,height:0}),n=fe(null),o=ie(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);We(r),xe([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(q(),me("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(q(),me("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Ae(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Jf)):be("",!0),re("text",ms(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Ct(i.$slots,"default",{},()=>[typeof i.label!="string"?(q(),ve(vs(i.label),{key:0})):(q(),me(De,{key:1},[Ce(ye(i.label),1)],64))])],16,eh)],8,Qf))}}),oh=["id","d","marker-end","marker-start"],rh=["d","stroke-width"],ih={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ho=Se({...ih,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Vi(e,["interactionWidth","labelShowBg"]),o=fe(null),r=fe(null),i=fe(null),a=ds();return t({pathEl:o,interactionEl:r,labelEl:i}),(s,l)=>(q(),me(De,null,[re("path",{id:s.id,ref_key:"pathEl",ref:o,d:s.path,style:Ae(n.style),class:Be(["vue-flow__edge-path",T(a).class]),"marker-end":s.markerEnd,"marker-start":s.markerStart},null,14,oh),s.interactionWidth?(q(),me("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,rh)):be("",!0),s.label&&s.labelX&&s.labelY?(q(),ve(nh,{key:1,ref_key:"labelEl",ref:i,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):be("",!0)],64))}});function Ua({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[i,s,r,a]}function ja({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+s*.375+o*.125,d=Math.abs(l-e),h=Math.abs(u-t);return[l,u,d,h]}function kn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function li({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,s;switch(e){case Z.Left:a=t-kn(t-o,i),s=n;break;case Z.Right:a=t+kn(o-t,i),s=n;break;case Z.Top:a=t,s=n-kn(n-r,i);break;case Z.Bottom:a=t,s=n+kn(r-n,i);break}return[a,s]}function Za(e){const{sourceX:t,sourceY:n,sourcePosition:o=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,curvature:s=.25}=e,[l,u]=li({pos:o,x1:t,y1:n,x2:r,y2:i,c:s}),[d,h]=li({pos:a,x1:r,y1:i,x2:t,y2:n,c:s}),[g,v,x,m]=ja({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${t},${n} C${l},${u} ${d},${h} ${r},${i}`,g,v,x,m]}function ui({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case Z.Left:case Z.Right:i=.5*(t+o),a=n;break;case Z.Top:case Z.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function Ka(e){const{sourceX:t,sourceY:n,sourcePosition:o=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top}=e,[s,l]=ui({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,d]=ui({pos:a,x1:r,y1:i,x2:t,y2:n}),[h,g,v,x]=ja({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${n} C${s},${l} ${u},${d} ${r},${i}`,h,g,v,x]}const ci={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}};function ah({source:e,sourcePosition:t=Z.Bottom,target:n}){return t===Z.Left||t===Z.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function di(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function sh({source:e,sourcePosition:t=Z.Bottom,target:n,targetPosition:o=Z.Top,center:r,offset:i}){var V,K;const a=ci[t],s=ci[o],l={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},d=ah({source:l,sourcePosition:t,target:u}),h=d.x!==0?"x":"y",g=d[h];let v,x,m;const b={x:0,y:0},E={x:0,y:0},[p,I,N,R]=Ua({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[h]*s[h]===-1){x=(V=r.x)!=null?V:p,m=(K=r.y)!=null?K:I;const j=[{x,y:l.y},{x,y:u.y}],A=[{x:l.x,y:m},{x:u.x,y:m}];a[h]===g?v=h==="x"?j:A:v=h==="x"?A:j}else{const j=[{x:l.x,y:u.y}],A=[{x:u.x,y:l.y}];if(h==="x"?v=a.x===g?A:j:v=a.y===g?j:A,t===o){const P=Math.abs(e[h]-n[h]);if(P<=i){const S=Math.min(i-1,i-P);a[h]===g?b[h]=(l[h]>e[h]?-1:1)*S:E[h]=(u[h]>n[h]?-1:1)*S}}if(t!==o){const P=h==="x"?"y":"x",S=a[h]===s[P],D=l[P]>u[P],z=l[P]<u[P];(a[h]===1&&(!S&&D||S&&z)||a[h]!==1&&(!S&&z||S&&D))&&(v=h==="x"?j:A)}const w={x:l.x+b.x,y:l.y+b.y},oe={x:u.x+E.x,y:u.y+E.y},se=Math.max(Math.abs(w.x-v[0].x),Math.abs(oe.x-v[0].x)),_=Math.max(Math.abs(w.y-v[0].y),Math.abs(oe.y-v[0].y));se>=_?(x=(w.x+oe.x)/2,m=v[0].y):(x=v[0].x,m=(w.y+oe.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...v,{x:u.x+E.x,y:u.y+E.y},n],x,m,N,R]}function lh(e,t,n,o){const r=Math.min(di(e,t)/2,di(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*d}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+r*l}Q ${i},${a} ${i+r*s},${a}`}function Xo(e){const{sourceX:t,sourceY:n,sourcePosition:o=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,borderRadius:s=5,centerX:l,centerY:u,offset:d=20}=e,[h,g,v,x,m]=sh({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:l,y:u},offset:d});return[h.reduce((E,p,I)=>{let N;return I>0&&I<h.length-1?N=lh(h[I-1],p,h[I+1],s):N=`${I===0?"M":"L"}${p.x} ${p.y}`,E+=N,E},""),g,v,x,m]}function uh(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,s,l]=Ua({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,s,l]}const ch=Se({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=uh(e);return Ee(ho,{path:n,labelX:o,labelY:r,...t,...e})}}}),dh=ch,fh=Se({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var i,a;const[n,o,r]=Xo({...e,sourcePosition:(i=e.sourcePosition)!=null?i:Z.Bottom,targetPosition:(a=e.targetPosition)!=null?a:Z.Top});return Ee(ho,{path:n,labelX:o,labelY:r,...t,...e})}}}),Wa=fh,hh=Se({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ee(Wa,{...e,...t,borderRadius:0})}}),gh=hh,ph=Se({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var i,a;const[n,o,r]=Za({...e,sourcePosition:(i=e.sourcePosition)!=null?i:Z.Bottom,targetPosition:(a=e.targetPosition)!=null?a:Z.Top});return Ee(ho,{path:n,labelX:o,labelY:r,...t,...e})}}}),vh=ph,mh=Se({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{var i,a;const[n,o,r]=Ka({...e,sourcePosition:(i=e.sourcePosition)!=null?i:Z.Bottom,targetPosition:(a=e.targetPosition)!=null?a:Z.Top});return Ee(ho,{path:n,labelX:o,labelY:r,...t,...e})}}}),yh=mh,_h={input:Wf,default:Zf,output:Kf},wh={default:vh,straight:dh,step:gh,smoothstep:Wa,simplebezier:yh};function bh(e,t,n){const o=ie(()=>m=>t.value.get(m)),r=ie(()=>m=>n.value.get(m)),i=ie(()=>{const m={...wh,...e.edgeTypes},b=Object.keys(m);for(const E of e.edges)E.type&&!b.includes(E.type)&&(m[E.type]=E.type);return m}),a=ie(()=>{const m={..._h,...e.nodeTypes},b=Object.keys(m);for(const E of e.nodes)E.type&&!b.includes(E.type)&&(m[E.type]=E.type);return m}),s=ie(()=>e.onlyRenderVisibleElements?Aa(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=ie(()=>{if(e.onlyRenderVisibleElements){const m=[];for(const b of e.edges){const E=t.value.get(b.source),p=t.value.get(b.target);Ef({sourcePos:E.computedPosition||{x:0,y:0},targetPos:p.computedPosition||{x:0,y:0},sourceWidth:E.dimensions.width,sourceHeight:E.dimensions.height,targetWidth:p.dimensions.width,targetHeight:p.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&m.push(b)}return m}return e.edges}),u=ie(()=>[...s.value,...l.value]),d=ie(()=>{const m=[];for(const b of e.nodes)b.selected&&m.push(b);return m}),h=ie(()=>{const m=[];for(const b of e.edges)b.selected&&m.push(b);return m}),g=ie(()=>[...d.value,...h.value]),v=ie(()=>{const m=[];for(const b of e.nodes)!!b.dimensions.width&&!!b.dimensions.height&&b.handleBounds!==void 0&&m.push(b);return m}),x=ie(()=>s.value.length>0&&v.value.length===s.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:l,getNodes:s,getSelectedElements:g,getSelectedNodes:d,getSelectedEdges:h,getNodesInitialized:v,areNodesInitialized:x}}class xt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var r;var t;const n=(t=mn())==null?void 0:t.appContext.app,o=(r=n==null?void 0:n.config.globalProperties.$vueFlowStorage)!=null?r:xt.instance;return xt.instance=o!=null?o:new xt,n&&(n.config.globalProperties.$vueFlowStorage=xt.instance),xt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Xa(),r=fs(o),i={};for(const[g,v]of Object.entries(r.hooks)){const x=`on${g.charAt(0).toUpperCase()+g.slice(1)}`;i[x]=v.on}const a={};for(const[g,v]of Object.entries(r.hooks))a[g]=v.trigger;const s=ie(()=>{const g=new Map;for(const v of r.nodes)g.set(v.id,v);return g}),l=ie(()=>{const g=new Map;for(const v of r.edges)g.set(v.id,v);return g}),u=bh(r,s,l),d=Xf(r,s,l);d.setState({...r,...n});const h={...i,...u,...d,...Sl(r),nodeLookup:s,edgeLookup:l,emits:a,id:t,vueFlowVersion:"1.41.1",$destroy:()=>{this.remove(t)}};return this.set(t,h),h}getId(){return`vue-flow-${this.currentId++}`}}function $e(e){const t=xt.getInstance(),n=Fi(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i!=null?i:n==null?void 0:n.vueFlowId;let s;if(n){const l=Xt(si,null);typeof l!="undefined"&&l!==null&&(!a||l.id===a)&&(s=l)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const l=i!=null?i:t.getId(),u=t.create(l,r);s=u,(n!=null?n:zi(!0)).run(()=>{xe(u.applyDefault,(h,g,v)=>{const x=b=>{u.applyNodeChanges(b)},m=b=>{u.applyEdgeChanges(b)};h?(u.onNodesChange(x),u.onEdgesChange(m)):(u.hooks.value.nodesChange.off(x),u.hooks.value.edgesChange.off(m)),v(()=>{u.hooks.value.nodesChange.off(x),u.hooks.value.edgesChange.off(m)})},{immediate:!0}),to(()=>{if(s){const h=t.get(s.id);h?h.$destroy():so(`No store instance found for id ${s.id} in storage.`)}})})}else o&&s.setState(r);if(n&&(Ft(si,s),n.vueFlowId=s.id),o){const l=mn();(l==null?void 0:l.type.name)!=="VueFlow"&&s.emits.error(new ke(Te.USEVUEFLOW_OPTIONS))}return s}function xh(e){const{emits:t,dimensions:n}=$e();let o;We(()=>{const r=e.value,i=()=>{if(!r)return;const a=ao(r);(a.width===0||a.height===0)&&t.error(new ke(Te.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver(()=>i()),o.observe(r)),Li(()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)})})}const Eh={name:"UserSelection",compatConfig:{MODE:3}},Sh=Se({...Eh,props:{userSelectionRect:{}},setup(e){return(t,n)=>(q(),me("div",{class:"vue-flow__selection vue-flow__container",style:Ae({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Nh=["tabIndex"],$h={name:"NodesSelection",compatConfig:{MODE:3}},Ch=Se({...$h,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=$e(),s=qa(),l=fe(null),u=Fa({el:l,onStart(x){t.selectionDragStart(x)},onDrag(x){t.selectionDrag(x)},onStop(x){t.selectionDragStop(x)}});We(()=>{var x;i.value||(x=l.value)==null||x.focus({preventScroll:!0})});const d=ie(()=>Pa(o.value)),h=ie(()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`}));function g(x){t.selectionContextMenu({event:x,nodes:o.value})}function v(x){i||Vt[x.key]&&s({x:Vt[x.key].x,y:Vt[x.key].y},x.shiftKey)}return(x,m)=>!T(a)&&d.value.width&&d.value.height?(q(),me("div",{key:0,class:Be(["vue-flow__nodesselection vue-flow__container",T(r)]),style:Ae({transform:`translate(${T(n).x}px,${T(n).y}px) scale(${T(n).zoom})`})},[re("div",{ref_key:"el",ref:l,class:Be([{dragging:T(u)},"vue-flow__nodesselection-rect"]),style:Ae(h.value),tabIndex:T(i)?void 0:-1,onContextmenu:g,onKeydown:v},null,46,Nh)],6)):be("",!0)}});function Mh(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Ih={name:"Pane",compatConfig:{MODE:3}},Th=Se({...Ih,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:s,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:d,getSelectedEdges:h,getSelectedNodes:g,removeNodes:v,removeEdges:x,selectionMode:m,deleteKeyCode:b,multiSelectionKeyCode:E,multiSelectionActive:p,edgeLookup:I,nodeLookup:N}=$e(),R=fe(null),Y=fe(0),V=fe(0),K=fe(),j=fe(new Map),A=Me(()=>u.value&&(e.isSelecting||i.value));let w=!1,oe=!1;const se=rn(b,{actInsideInputWithModifier:!1}),_=rn(E);xe(se,X=>{!X||(v(g.value),x(h.value),d.value=!1)}),xe(_,X=>{p.value=X});function P(X,L){return Q=>{Q.target===L&&(X==null||X(Q))}}function S(){i.value=!1,l.value=null,Y.value=0,V.value=0}function D(X){if(w){w=!1;return}r.paneClick(X),a(),d.value=!1}function z(X){var L;if(Array.isArray(s.value)&&((L=s.value)==null?void 0:L.includes(2))){X.preventDefault();return}r.paneContextMenu(X)}function B(X){r.paneScroll(X)}function F(X){var L,Q,pe,he,_e;if(K.value=(L=t.value)==null?void 0:L.getBoundingClientRect(),!u.value||!e.isSelecting||X.button!==0||X.target!==R.value||!K.value)return;(pe=(Q=X.target)==null?void 0:Q.setPointerCapture)==null||pe.call(Q,X.pointerId);const{x:le,y:ce}=Mh(X,K.value);oe=!0,w=!1,j.value=new Map;for(const[J,ne]of I.value)j.value.set(ne.source,((he=j.value.get(ne.source))==null?void 0:he.add(J))||new Set([J])),j.value.set(ne.target,((_e=j.value.get(ne.target))==null?void 0:_e.add(J))||new Set([J]));a(),l.value={width:0,height:0,startX:le,startY:ce,x:le,y:ce},r.selectionStart(X)}function G(X){if(!K.value||!l.value)return;w=!0;const{x:L,y:Q}=vt(X,K.value),{startX:pe=0,startY:he=0}=l.value,_e={startX:pe,startY:he,x:L<pe?L:pe,y:Q<he?Q:he,width:Math.abs(L-pe),height:Math.abs(Q-he)},le=Aa(n.value,_e,o.value,m.value===ur.Partial,!0),ce=new Set,J=new Set;for(const ne of le){J.add(ne.id);const $=j.value.get(ne.id);if($)for(const c of $)ce.add(c)}if(Y.value!==J.size){Y.value=J.size;const ne=gt(N.value,J,!0);r.nodesChange(ne)}if(V.value!==ce.size){V.value=ce.size;const ne=gt(I.value,ce);r.edgesChange(ne)}l.value=_e,i.value=!0,d.value=!1}function ae(X){var L;X.button!==0||!oe||((L=X.target)==null||L.releasePointerCapture(X.pointerId),!i.value&&l.value&&X.target===R.value&&D(X),Y.value>0&&(d.value=!0),S(),r.selectionEnd(X),e.selectionKeyPressed&&(w=!1),oe=!1)}return(X,L)=>(q(),me("div",{ref_key:"container",ref:R,class:Be(["vue-flow__pane vue-flow__container",{selection:X.isSelecting}]),onClick:L[0]||(L[0]=Q=>A.value?void 0:P(D,R.value)(Q)),onContextmenu:L[1]||(L[1]=Q=>P(z,R.value)(Q)),onWheelPassive:L[2]||(L[2]=Q=>P(B,R.value)(Q)),onPointerenter:L[3]||(L[3]=Q=>A.value?void 0:T(r).paneMouseEnter(Q)),onPointerdown:L[4]||(L[4]=Q=>A.value?F(Q):T(r).paneMouseMove(Q)),onPointermove:L[5]||(L[5]=Q=>A.value?G(Q):T(r).paneMouseMove(Q)),onPointerup:L[6]||(L[6]=Q=>A.value?ae(Q):void 0),onPointerleave:L[7]||(L[7]=Q=>T(r).paneMouseLeave(Q))},[Ct(X.$slots,"default"),T(i)&&T(l)?(q(),ve(Sh,{key:0,"user-selection-rect":T(l)},null,8,["user-selection-rect"])):be("",!0),T(d)&&T(g).length?(q(),ve(Ch,{key:1})):be("",!0)],34))}}),kh={name:"Transform",compatConfig:{MODE:3}},Ph=Se({...kh,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=$e(),r=ie(()=>n.value?!o.value:!1),i=ie(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(q(),me("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ae({transform:i.value,opacity:r.value?0:void 0})},[Ct(a.$slots,"default")],4))}}),Ah={name:"Viewport",compatConfig:{MODE:3}},Oh=Se({...Ah,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:d,panOnDrag:h,zoomOnDoubleClick:g,zoomOnPinch:v,zoomOnScroll:x,preventScrolling:m,noWheelClassName:b,noPanClassName:E,emits:p,connectionStartHandle:I,userSelectionActive:N,paneDragging:R,d3Zoom:Y,d3Selection:V,d3ZoomHandler:K,viewport:j,viewportRef:A,paneClickDistance:w}=$e();xh(A);const oe=fe(!1),se=fe(!1);let _=null,P=!1,S=0,D={x:0,y:0,zoom:0};const z=rn(s),B=rn(a),F=rn(i),G=Me(()=>!B.value&&(z.value||h.value)),ae=Me(()=>z.value||l.value),X=Me(()=>B.value||a.value===!0&&G.value!==!0);We(()=>{var C,O,W;if(!A.value){so("Viewport element is missing");return}const le=A.value,ce=le.getBoundingClientRect(),J=af().clickDistance(w.value).scaleExtent([t.value,n.value]).translateExtent(r.value),ne=Ye(le).call(J),$=ne.on("wheel.zoom"),c=qt.translate((C=o.value.x)!=null?C:0,(O=o.value.y)!=null?O:0).scale(Tt((W=o.value.zoom)!=null?W:1,t.value,n.value)),f=[[0,0],[ce.width,ce.height]],y=J.constrain()(c,f,r.value);J.transform(ne,y),J.wheelDelta(Q),Y.value=J,V.value=ne,K.value=$,j.value={x:y.x,y:y.y,zoom:y.k},J.on("start",M=>{var ee;if(!M.sourceEvent)return null;S=M.sourceEvent.button,oe.value=!0;const te=he(M.transform);((ee=M.sourceEvent)==null?void 0:ee.type)==="mousedown"&&(R.value=!0),D=te,p.viewportChangeStart(te),p.moveStart({event:M,flowTransform:te})}),J.on("end",M=>{if(!M.sourceEvent)return null;if(oe.value=!1,R.value=!1,L(G.value,S!=null?S:0)&&!P&&p.paneContextMenu(M.sourceEvent),P=!1,pe(D,M.transform)){const ee=he(M.transform);D=ee,p.viewportChangeEnd(ee),p.moveEnd({event:M,flowTransform:ee})}}),J.filter(M=>{var ee,te,ge;const ue=F.value||x.value,de=v.value&&M.ctrlKey,Re=M.button;if((G.value===!0||Array.isArray(G.value)&&G.value.includes(1))&&Re===1&&M.type==="mousedown"&&(((ee=M.target)==null?void 0:ee.closest(".vue-flow__node"))||((te=M.target)==null?void 0:te.closest(".vue-flow__edge"))))return!0;if(!G.value&&!ue&&!ae.value&&!g.value&&!v.value||N.value||!g.value&&M.type==="dblclick"||_e(M,b.value)&&M.type==="wheel"||_e(M,E.value)&&(M.type!=="wheel"||ae.value&&M.type==="wheel"&&!F.value)||!v.value&&M.ctrlKey&&M.type==="wheel"||!ue&&!ae.value&&!de&&M.type==="wheel")return!1;if(!v&&M.type==="touchstart"&&((ge=M.touches)==null?void 0:ge.length)>1)return M.preventDefault(),!1;if(!G.value&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(G.value)&&!G.value.includes(Re)&&(M.type==="mousedown"||M.type==="touchstart"))return!1;const Je=Array.isArray(G.value)&&G.value.includes(Re)||!Re||Re<=1;return(!M.ctrlKey||M.type==="wheel")&&Je}),xe([N,G],()=>{N.value&&!oe.value?J.on("zoom",null):N.value||J.on("zoom",M=>{j.value={x:M.transform.x,y:M.transform.y,zoom:M.transform.k};const ee=he(M.transform);P=L(G.value,S!=null?S:0),p.viewportChange(ee),p.move({event:M,flowTransform:ee})})},{immediate:!0}),xe([N,ae,u,F,v,m,b],()=>{ae.value&&!F.value&&!N.value?ne.on("wheel.zoom",M=>{if(_e(M,b.value))return!1;const ee=F.value||x.value,te=v.value&&M.ctrlKey;if(!(!m.value||ae.value||ee||te))return!1;M.preventDefault(),M.stopImmediatePropagation();const ue=ne.property("__zoom").k||1,de=Wn();if(M.ctrlKey&&v.value&&de){const bn=je(M),xn=Q(M),En=ue*2**xn;J.scaleTo(ne,En,bn,M);return}const Re=M.deltaMode===1?20:1;let Je=u.value===on.Vertical?0:M.deltaX*Re,Ut=u.value===on.Horizontal?0:M.deltaY*Re;!de&&M.shiftKey&&u.value!==on.Vertical&&!Je&&Ut&&(Je=Ut,Ut=0),J.translateBy(ne,-(Je/ue)*d.value,-(Ut/ue)*d.value);const et=he(ne.property("__zoom"));_&&clearTimeout(_),se.value?(p.move({event:M,flowTransform:et}),p.viewportChange(et),_=setTimeout(()=>{p.moveEnd({event:M,flowTransform:et}),p.viewportChangeEnd(et),se.value=!1},150)):(se.value=!0,p.moveStart({event:M,flowTransform:et}),p.viewportChangeStart(et))},{passive:!1}):typeof $!="undefined"&&ne.on("wheel.zoom",function(M,ee){const te=!m.value&&M.type==="wheel"&&!M.ctrlKey,ge=F.value||x.value,ue=v.value&&M.ctrlKey;if(!ge&&!l.value&&!ue&&M.type==="wheel"||te||_e(M,b.value))return null;M.preventDefault(),$.call(this,M,ee)},{passive:!1})},{immediate:!0})});function L(le,ce){return ce===2&&Array.isArray(le)&&le.includes(2)}function Q(le){const ce=le.ctrlKey&&Wn()?10:1;return-le.deltaY*(le.deltaMode===1?.05:le.deltaMode?1:.002)*ce}function pe(le,ce){return le.x!==ce.x&&!Number.isNaN(ce.x)||le.y!==ce.y&&!Number.isNaN(ce.y)||le.zoom!==ce.k&&!Number.isNaN(ce.k)}function he(le){return{x:le.x,y:le.y,zoom:le.k}}function _e(le,ce){return le.target.closest(`.${ce}`)}return(le,ce)=>(q(),me("div",{ref_key:"viewportRef",ref:A,class:"vue-flow__viewport vue-flow__container"},[k(Th,{"is-selecting":X.value,"selection-key-pressed":T(B),class:Be({connecting:!!T(I),dragging:T(R),draggable:T(h)===!0||Array.isArray(T(h))&&T(h).includes(0)})},{default:H(()=>[k(Ph,null,{default:H(()=>[Ct(le.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Dh=["id"],zh=["id"],Bh=["id"],Hh={name:"A11yDescriptions",compatConfig:{MODE:3}},Rh=Se({...Hh,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=$e();return(r,i)=>(q(),me(De,null,[re("div",{id:`${T(Ea)}-${T(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+ye(T(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Dh),re("div",{id:`${T(Sa)}-${T(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,zh),T(n)?be("",!0):(q(),me("div",{key:0,id:`${T(cf)}-${T(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},ye(T(o)),9,Bh))],64))}});function Vh(){const e=$e();xe(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Lh(e,t,n){return n===Z.Left?e-t:n===Z.Right?e+t:e}function Fh(e,t,n){return n===Z.Top?e-t:n===Z.Bottom?e+t:e}const hr=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Z.Top,type:r}){return Ee("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Lh(t,e,o),cy:Fh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};hr.props=["radius","centerX","centerY","position","type"];hr.compatConfig={MODE:3};const fi=hr,Gh=Se({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:d,findNode:h,isValidConnection:g,multiSelectionActive:v,disableKeyboardA11y:x,elementsSelectable:m,edgesUpdatable:b,edgesFocusable:E}=$e(),p=ie(()=>d(e.id)),I=Df(p.value,i),N=Xt(lo),R=mn(),Y=fe(!1),V=fe(!1),K=fe(""),j=fe(null),A=fe("source"),w=fe(null),oe=Me(()=>typeof p.value.selectable=="undefined"?m.value:p.value.selectable),se=Me(()=>typeof p.value.updatable=="undefined"?b.value:p.value.updatable),_=Me(()=>typeof p.value.focusable=="undefined"?E.value:p.value.focusable);Ft(Pf,e.id),Ft(Af,w);const P=ie(()=>p.value.class instanceof Function?p.value.class(p.value):p.value.class),S=ie(()=>p.value.style instanceof Function?p.value.style(p.value):p.value.style),D=ie(()=>{var y;const $=p.value.type||"default",c=N==null?void 0:N[`edge-${$}`];if(c)return c;let f=(y=p.value.template)!=null?y:l.value[$];if(typeof f=="string"&&R){const C=Object.keys(R.appContext.components);C&&C.includes($)&&(f=Bi($,!1))}return f&&typeof f!="string"?f:(i.error(new ke(Te.EDGE_TYPE_MISSING,f)),!1)}),{handlePointerDown:z}=Ga({nodeId:K,handleId:j,type:A,isValidConnection:g,edgeUpdaterType:A,onEdgeUpdate:G,onEdgeUpdateEnd:ae});return()=>{const $=h(p.value.source),c=h(p.value.target),f="pathOptions"in p.value?p.value.pathOptions:{};if(!$&&!c)return i.error(new ke(Te.EDGE_SOURCE_TARGET_MISSING,p.value.id,p.value.source,p.value.target)),null;if(!$)return i.error(new ke(Te.EDGE_SOURCE_MISSING,p.value.id,p.value.source)),null;if(!c)return i.error(new ke(Te.EDGE_TARGET_MISSING,p.value.id,p.value.target)),null;if(!p.value||p.value.hidden||$.hidden||c.hidden)return null;let y;o.value===It.Strict?y=$.handleBounds.source:y=[...$.handleBounds.source||[],...$.handleBounds.target||[]];const C=Jr(y,p.value.sourceHandle);let O;o.value===It.Strict?O=c.handleBounds.target:O=[...c.handleBounds.target||[],...c.handleBounds.source||[]];const W=Jr(O,p.value.targetHandle),M=(C==null?void 0:C.position)||Z.Bottom,ee=(W==null?void 0:W.position)||Z.Top,{x:te,y:ge}=Kn($,C,M),{x:ue,y:de}=Kn(c,W,ee);return p.value.sourceX=te,p.value.sourceY=ge,p.value.targetX=ue,p.value.targetY=de,Ee("g",{ref:w,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${D.value===!1?"default":p.value.type||"default"}`,s.value,P.value,{updating:Y.value,selected:p.value.selected,animated:p.value.animated,inactive:!oe.value}],onClick:L,onContextmenu:Q,onDblclick:pe,onMouseenter:he,onMousemove:_e,onMouseleave:le,onKeyDown:_.value?ne:void 0,tabIndex:_.value?0:void 0,"aria-label":p.value.ariaLabel===null?void 0:p.value.ariaLabel||`Edge from ${p.value.source} to ${p.value.target}`,"aria-describedby":_.value?`${Sa}-${t}`:void 0,role:_.value?"button":"img"},[V.value?null:Ee(D.value===!1?l.value.default:D.value,{id:e.id,sourceNode:$,targetNode:c,source:p.value.source,target:p.value.target,type:p.value.type,updatable:se.value,selected:p.value.selected,animated:p.value.animated,label:p.value.label,labelStyle:p.value.labelStyle,labelShowBg:p.value.labelShowBg,labelBgStyle:p.value.labelBgStyle,labelBgPadding:p.value.labelBgPadding,labelBgBorderRadius:p.value.labelBgBorderRadius,data:p.value.data,events:{...p.value.events,...I.on},style:S.value,markerStart:`url('#${gn(p.value.markerStart,t)}')`,markerEnd:`url('#${gn(p.value.markerEnd,t)}')`,sourcePosition:M,targetPosition:ee,sourceX:te,sourceY:ge,targetX:ue,targetY:de,sourceHandleId:p.value.sourceHandle,targetHandleId:p.value.targetHandle,interactionWidth:p.value.interactionWidth,...f}),[se.value==="source"||se.value===!0?[Ee("g",{onMousedown:ce,onMouseenter:B,onMouseout:F},Ee(fi,{position:M,centerX:te,centerY:ge,radius:r.value,type:"source","data-type":"source"}))]:null,se.value==="target"||se.value===!0?[Ee("g",{onMousedown:J,onMouseenter:B,onMouseout:F},Ee(fi,{position:ee,centerX:ue,centerY:de,radius:r.value,type:"target","data-type":"target"}))]:null]])};function B(){Y.value=!0}function F(){Y.value=!1}function G($,c){I.emit.update({event:$,edge:p.value,connection:c})}function ae($){I.emit.updateEnd({event:$,edge:p.value}),V.value=!1}function X($,c){var f;$.button===0&&(V.value=!0,K.value=c?p.value.target:p.value.source,j.value=(f=c?p.value.targetHandle:p.value.sourceHandle)!=null?f:"",A.value=c?"target":"source",I.emit.updateStart({event:$,edge:p.value}),z($))}function L($){var c;const f={event:$,edge:p.value};oe.value&&(a.value=!1,p.value.selected&&v.value?(u([p.value]),(c=w.value)==null||c.blur()):n([p.value])),I.emit.click(f)}function Q($){I.emit.contextMenu({event:$,edge:p.value})}function pe($){I.emit.doubleClick({event:$,edge:p.value})}function he($){I.emit.mouseEnter({event:$,edge:p.value})}function _e($){I.emit.mouseMove({event:$,edge:p.value})}function le($){I.emit.mouseLeave({event:$,edge:p.value})}function ce($){X($,!0)}function J($){X($,!1)}function ne($){var c;!x.value&&Na.includes($.key)&&oe.value&&($.key==="Escape"?((c=w.value)==null||c.blur(),u([d(e.id)])):n([d(e.id)]))}}}),Yh=Gh,qh={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top},Xh=Se({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:d,findNode:h}=$e(),g=(e=Xt(lo))==null?void 0:e["connection-line"],v=ie(()=>{var p;return h((p=o.value)==null?void 0:p.nodeId)}),x=ie(()=>{var I;var p;return(I=h((p=r.value)==null?void 0:p.nodeId))!=null?I:null}),m=ie(()=>({x:(i.value.x-d.value.x)/d.value.zoom,y:(i.value.y-d.value.y)/d.value.zoom})),b=ie(()=>l.value.markerStart?`url(#${gn(l.value.markerStart,t)})`:""),E=ie(()=>l.value.markerEnd?`url(#${gn(l.value.markerEnd,t)})`:"");return()=>{var B,F,G,ae;var p,I,N,R;if(!v.value||!o.value)return null;const Y=o.value.handleId,V=o.value.type,K=v.value.handleBounds;let j=K==null?void 0:K[V];if(n.value===It.Loose&&(j=j||(K==null?void 0:K[V==="source"?"target":"source"])),!j)return null;const A=(B=Y?j.find(X=>X.id===Y):j[0])!=null?B:null,w=(A==null?void 0:A.position)||Z.Top,{x:oe,y:se}=Kn(v.value,A,w);let _=null;x.value&&((p=r.value)==null?void 0:p.handleId)&&(n.value===It.Strict?_=((I=x.value.handleBounds[V==="source"?"target":"source"])==null?void 0:I.find(X=>{var L;return X.id===((L=r.value)==null?void 0:L.handleId)}))||null:_=((N=[...x.value.handleBounds.source||[],...x.value.handleBounds.target||[]])==null?void 0:N.find(X=>{var L;return X.id===((L=r.value)==null?void 0:L.handleId)}))||null);const P=(F=(R=r.value)==null?void 0:R.position)!=null?F:w?qh[w]:null;if(!w||!P)return null;const S=(ae=(G=a.value)!=null?G:l.value.type)!=null?ae:bt.Bezier;let D="";const z={sourceX:oe,sourceY:se,sourcePosition:w,targetX:m.value.x,targetY:m.value.y,targetPosition:P};return S===bt.Bezier?[D]=Za(z):S===bt.Step?[D]=Xo({...z,borderRadius:0}):S===bt.SmoothStep?[D]=Xo(z):S===bt.SimpleBezier?[D]=Ka(z):D=`M${oe},${se} ${m.value.x},${m.value.y}`,Ee("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ee("g",{class:"vue-flow__connection"},g?Ee(g,{sourceX:oe,sourceY:se,sourcePosition:w,targetX:m.value.x,targetY:m.value.y,targetPosition:P,sourceNode:v.value,sourceHandle:A,targetNode:x.value,targetHandle:_,markerEnd:E.value,markerStart:b.value,connectionStatus:u.value}):Ee("path",{d:D,class:[l.value.class,u,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":E.value,"marker-start":b.value})))}}}),Uh=Xh,jh=["id","markerWidth","markerHeight","markerUnits","orient"],Zh={name:"MarkerType",compatConfig:{MODE:3}},Kh=Se({...Zh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(q(),me("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===T(Lo).ArrowClosed?(q(),me("polyline",{key:0,style:Ae({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):be("",!0),t.type===T(Lo).Arrow?(q(),me("polyline",{key:1,style:Ae({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):be("",!0)],8,jh))}}),Wh={class:"vue-flow__marker vue-flow__container"},Qh={name:"MarkerDefinitions",compatConfig:{MODE:3}},Jh=Se({...Qh,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=$e(),i=ie(()=>{const a=new Set,s=[],l=u=>{if(u){const d=gn(u,t);a.has(d)||(typeof u=="object"?s.push({...u,id:d,color:u.color||r.value}):s.push({id:d,color:r.value,type:u}),a.add(d))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const d of[u.markerStart,u.markerEnd])l(d);return s.sort((u,d)=>u.id.localeCompare(d.id))});return(a,s)=>(q(),me("svg",Wh,[re("defs",null,[(q(!0),me(De,null,rt(i.value,l=>(q(),ve(Kh,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),eg={name:"Edges",compatConfig:{MODE:3}},tg=Se({...eg,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=$e();return(r,i)=>(q(),me(De,null,[k(Jh),(q(!0),me(De,null,rt(T(n),a=>(q(),me("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ae({zIndex:T(Sf)(a,T(t),T(o))})},[k(T(Yh),{id:a.id},null,8,["id"])],4))),128)),k(T(Uh))],64))}}),ng=Se({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:d,getNodeTypes:h,nodeExtent:g,elevateNodesOnSelect:v,disableKeyboardA11y:x,ariaLiveMessage:m,snapToGrid:b,snapGrid:E,nodeDragThreshold:p,nodesDraggable:I,elementsSelectable:N,nodesConnectable:R,nodesFocusable:Y}=$e(),V=fe(null);Ft(La,V),Ft(Va,e.id);const K=Xt(lo),j=mn(),A=qa(),{node:w,parentNode:oe}=Ya(e.id),se=Me(()=>typeof w.draggable=="undefined"?I.value:w.draggable),_=Me(()=>typeof w.selectable=="undefined"?N.value:w.selectable),P=Me(()=>typeof w.connectable=="undefined"?R.value:w.connectable),S=Me(()=>typeof w.focusable=="undefined"?Y.value:w.focusable),D=Me(()=>!!w.dimensions.width&&!!w.dimensions.height),z=ie(()=>{const c=w.type||"default",f=K==null?void 0:K[`node-${c}`];if(f)return f;let y=w.template||h.value[c];if(typeof y=="string"&&j){const C=Object.keys(j.appContext.components);C&&C.includes(c)&&(y=Bi(c,!1))}return y&&typeof y!="string"?y:(a.error(new ke(Te.NODE_TYPE_MISSING,y)),!1)}),{emit:B,on:F}=Rf(w,a),G=Fa({id:e.id,el:V,disabled:()=>!se.value,selectable:_,dragHandle:()=>w.dragHandle,onStart(c){B.dragStart(c)},onDrag(c){B.drag(c)},onStop(c){B.dragStop(c)},onClick(c){ne(c)}}),ae=ie(()=>w.class instanceof Function?w.class(w):w.class),X=ie(()=>{const c=(w.style instanceof Function?w.style(w):w.style)||{},f=w.width instanceof Function?w.width(w):w.width,y=w.height instanceof Function?w.height(w):w.height;return!c.width&&f&&(c.width=typeof f=="string"?f:`${f}px`),!c.height&&y&&(c.height=typeof y=="string"?y:`${y}px`),c}),L=Me(()=>{var c,f;return Number((f=(c=w.zIndex)!=null?c:X.value.zIndex)!=null?f:0)});return d(c=>{(c.includes(e.id)||!c.length)&&pe()}),We(()=>{xe(()=>w.hidden,(c=!1,f,y)=>{!c&&V.value&&(e.resizeObserver.observe(V.value),y(()=>{V.value&&e.resizeObserver.unobserve(V.value)}))},{immediate:!0,flush:"post"})}),xe([()=>w.type,()=>w.sourcePosition,()=>w.targetPosition],()=>{Ze(()=>{u([{id:e.id,nodeElement:V.value,forceUpdate:!0}])})}),xe([()=>w.position.x,()=>w.position.y,()=>{var c;return(c=oe.value)==null?void 0:c.computedPosition.x},()=>{var c;return(c=oe.value)==null?void 0:c.computedPosition.y},()=>{var c;return(c=oe.value)==null?void 0:c.computedPosition.z},L,()=>w.selected,()=>w.dimensions.height,()=>w.dimensions.width,()=>{var c;return(c=oe.value)==null?void 0:c.dimensions.height},()=>{var c;return(c=oe.value)==null?void 0:c.dimensions.width}],([c,f,y,C,O,W])=>{const M={x:c,y:f,z:W+(v.value&&w.selected?1e3:0)};typeof y!="undefined"&&typeof C!="undefined"?w.computedPosition=yf({x:y,y:C,z:O},M):w.computedPosition=M},{flush:"post",immediate:!0}),xe([()=>w.extent,g],([c,f],[y,C])=>{(c!==y||f!==C)&&Q()}),w.extent==="parent"||typeof w.extent=="object"&&"range"in w.extent&&w.extent.range==="parent"?Po(()=>D).toBe(!0).then(Q):Q(),()=>{var c,f;return w.hidden?null:Ee("div",{ref:V,"data-id":w.id,class:["vue-flow__node",`vue-flow__node-${z.value===!1?"default":w.type||"default"}`,{[n.value]:se.value,dragging:G==null?void 0:G.value,draggable:se.value,selected:w.selected,selectable:_.value,parent:w.isParent},ae.value],style:{visibility:D.value?"visible":"hidden",zIndex:(c=w.computedPosition.z)!=null?c:L.value,transform:`translate(${w.computedPosition.x}px,${w.computedPosition.y}px)`,pointerEvents:_.value||se.value?"all":"none",...X.value},tabIndex:S.value?0:void 0,role:S.value?"button":void 0,"aria-describedby":x.value?void 0:`${Ea}-${t}`,"aria-label":w.ariaLabel,onMouseenter:he,onMousemove:_e,onMouseleave:le,onContextmenu:ce,onClick:ne,onDblclick:J,onKeydown:$},[Ee(z.value===!1?h.value.default:z.value,{id:w.id,type:w.type,data:w.data,events:{...w.events,...F},selected:w.selected,resizing:w.resizing,dragging:G.value,connectable:P.value,position:w.computedPosition,dimensions:w.dimensions,isValidTargetPos:w.isValidTargetPos,isValidSourcePos:w.isValidSourcePos,parent:w.parentNode,parentNodeId:w.parentNode,zIndex:(f=w.computedPosition.z)!=null?f:L.value,targetPosition:w.targetPosition,sourcePosition:w.sourcePosition,label:w.label,dragHandle:w.dragHandle,onUpdateNodeInternals:pe})])};function Q(){const c=w.computedPosition;b.value&&(c.x=E.value[0]*Math.round(c.x/E.value[0]),c.y=E.value[1]*Math.round(c.y/E.value[1]));const{computedPosition:f,position:y}=cr(w,c,a.error,g.value,oe.value);(w.computedPosition.x!==f.x||w.computedPosition.y!==f.y)&&(w.computedPosition={...w.computedPosition,...f}),(w.position.x!==y.x||w.position.y!==y.y)&&(w.position=y)}function pe(){V.value&&u([{id:e.id,nodeElement:V.value,forceUpdate:!0}])}function he(c){G!=null&&G.value||B.mouseEnter({event:c,node:w})}function _e(c){G!=null&&G.value||B.mouseMove({event:c,node:w})}function le(c){G!=null&&G.value||B.mouseLeave({event:c,node:w})}function ce(c){return B.contextMenu({event:c,node:w})}function J(c){return B.doubleClick({event:c,node:w})}function ne(c){_.value&&(!o.value||!se.value||p.value>0)&&qo(w,i.value,l,s,r,!1,V.value),B.click({event:c,node:w})}function $(c){if(!(Fo(c)||x.value))if(Na.includes(c.key)&&_.value){const f=c.key==="Escape";qo(w,i.value,l,s,r,f,V.value)}else se.value&&w.selected&&Vt[c.key]&&(m.value=`Moved selected node ${c.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~w.position.x}, y: ${~~w.position.y}`,A({x:Vt[c.key].x,y:Vt[c.key].y},c.shiftKey))}}}),og=ng;function rg(e={includeHiddenNodes:!1}){const{nodes:t}=$e();return ie(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const ig={class:"vue-flow__nodes vue-flow__container"},ag={name:"Nodes",compatConfig:{MODE:3}},sg=Se({...ag,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=$e(),r=rg(),i=fe();return xe(r,a=>{a&&Ze(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),We(()=>{i.value=new ResizeObserver(a=>{const s=a.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));Ze(()=>n(s))})}),Li(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,s)=>(q(),me("div",ig,[i.value?(q(!0),me(De,{key:0},rt(T(t),(l,u,d,h)=>{const g=[l.id];if(h&&h.key===l.id&&hs(h,g))return h;const v=(q(),ve(T(og),{id:l.id,key:l.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return v.memo=g,v},s,0),128)):be("",!0)]))}});function lg(){const{emits:e}=$e();We(()=>{if(Ra()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new ke(Te.MISSING_STYLES))}})}const ug=re("div",{class:"vue-flow__edge-labels"},null,-1),cg={name:"VueFlow",compatConfig:{MODE:3}},dg=Se({...cg,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=cs(),i=mo(o,"modelValue",n),a=mo(o,"nodes",n),s=mo(o,"edges",n),l=$e(o),u=Ff({modelValue:i,nodes:a,edges:s},o,l);return Yf(n,l.hooks),Vh(),lg(),Ft(lo,r),Hi(()=>{u()}),t(l),(d,h)=>(q(),me("div",{ref:T(l).vueFlowRef,class:"vue-flow"},[k(Oh,null,{default:H(()=>[k(tg),ug,k(sg),Ct(d.$slots,"zoom-pane")]),_:3}),Ct(d.$slots,"default"),k(Rh)],512))}});function Vn(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}var fg=Array.isArray,Ge=fg,hg=1/0,hi=Ln?Ln.prototype:void 0,gi=hi?hi.toString:void 0;function Qa(e){if(typeof e=="string")return e;if(Ge(e))return Vn(e,Qa)+"";if(sn(e))return gi?gi.call(e):"";var t=e+"";return t=="0"&&1/e==-hg?"-0":t}function Ja(e){return e}var gg=yt["__core-js_shared__"],Co=gg,pi=function(){var e=/[^.]+$/.exec(Co&&Co.keys&&Co.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function pg(e){return!!pi&&pi in e}var vg=Function.prototype,mg=vg.toString;function Pt(e){if(e!=null){try{return mg.call(e)}catch{}try{return e+""}catch{}}return""}var yg=/[\\^$.*+?()[\]{}|]/g,_g=/^\[object .+?Constructor\]$/,wg=Function.prototype,bg=Object.prototype,xg=wg.toString,Eg=bg.hasOwnProperty,Sg=RegExp("^"+xg.call(Eg).replace(yg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ng(e){if(!Fn(e)||pg(e))return!1;var t=Ws(e)?Sg:_g;return t.test(Pt(e))}function $g(e,t){return e==null?void 0:e[t]}function At(e,t){var n=$g(e,t);return Ng(n)?n:void 0}var Cg=At(yt,"WeakMap"),Uo=Cg,Mg=function(){try{var e=At(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vi=Mg;function Ig(e,t,n){t=="__proto__"&&vi?vi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Tg=Object.prototype,kg=Tg.hasOwnProperty;function Pg(e,t,n){var o=e[t];(!(kg.call(e,t)&&er(o,n))||n===void 0&&!(t in e))&&Ig(e,t,n)}var Ag=Object.prototype;function Og(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ag;return e===n}function Dg(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var zg="[object Arguments]";function mi(e){return ln(e)&&eo(e)==zg}var es=Object.prototype,Bg=es.hasOwnProperty,Hg=es.propertyIsEnumerable,Rg=mi(function(){return arguments}())?mi:function(e){return ln(e)&&Bg.call(e,"callee")&&!Hg.call(e,"callee")},ts=Rg;function Vg(){return!1}var ns=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yi=ns&&typeof module=="object"&&module&&!module.nodeType&&module,Lg=yi&&yi.exports===ns,_i=Lg?yt.Buffer:void 0,Fg=_i?_i.isBuffer:void 0,Gg=Fg||Vg,jo=Gg,Yg="[object Arguments]",qg="[object Array]",Xg="[object Boolean]",Ug="[object Date]",jg="[object Error]",Zg="[object Function]",Kg="[object Map]",Wg="[object Number]",Qg="[object Object]",Jg="[object RegExp]",ep="[object Set]",tp="[object String]",np="[object WeakMap]",op="[object ArrayBuffer]",rp="[object DataView]",ip="[object Float32Array]",ap="[object Float64Array]",sp="[object Int8Array]",lp="[object Int16Array]",up="[object Int32Array]",cp="[object Uint8Array]",dp="[object Uint8ClampedArray]",fp="[object Uint16Array]",hp="[object Uint32Array]",Ne={};Ne[ip]=Ne[ap]=Ne[sp]=Ne[lp]=Ne[up]=Ne[cp]=Ne[dp]=Ne[fp]=Ne[hp]=!0;Ne[Yg]=Ne[qg]=Ne[op]=Ne[Xg]=Ne[rp]=Ne[Ug]=Ne[jg]=Ne[Zg]=Ne[Kg]=Ne[Wg]=Ne[Qg]=Ne[Jg]=Ne[ep]=Ne[tp]=Ne[np]=!1;function gp(e){return ln(e)&&Xi(e.length)&&!!Ne[eo(e)]}function os(e){return function(t){return e(t)}}var rs=typeof exports=="object"&&exports&&!exports.nodeType&&exports,an=rs&&typeof module=="object"&&module&&!module.nodeType&&module,pp=an&&an.exports===rs,Mo=pp&&Qs.process,vp=function(){try{var e=an&&an.require&&an.require("util").types;return e||Mo&&Mo.binding&&Mo.binding("util")}catch{}}(),wi=vp,bi=wi&&wi.isTypedArray,mp=bi?os(bi):gp,is=mp,yp=Object.prototype,_p=yp.hasOwnProperty;function wp(e,t){var n=Ge(e),o=!n&&ts(e),r=!n&&!o&&jo(e),i=!n&&!o&&!r&&is(e),a=n||o||r||i,s=a?Dg(e.length,String):[],l=s.length;for(var u in e)(t||_p.call(e,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||tr(u,l)))&&s.push(u);return s}function bp(e,t){return function(n){return e(t(n))}}var xp=bp(Object.keys,Object),Ep=xp,Sp=Object.prototype,Np=Sp.hasOwnProperty;function $p(e){if(!Og(e))return Ep(e);var t=[];for(var n in Object(e))Np.call(e,n)&&n!="constructor"&&t.push(n);return t}function gr(e){return nr(e)?wp(e):$p(e)}var Cp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mp=/^\w*$/;function pr(e,t){if(Ge(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||sn(e)?!0:Mp.test(e)||!Cp.test(e)||t!=null&&e in Object(t)}var Ip=At(Object,"create"),pn=Ip;function Tp(){this.__data__=pn?pn(null):{},this.size=0}function kp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Pp="__lodash_hash_undefined__",Ap=Object.prototype,Op=Ap.hasOwnProperty;function Dp(e){var t=this.__data__;if(pn){var n=t[e];return n===Pp?void 0:n}return Op.call(t,e)?t[e]:void 0}var zp=Object.prototype,Bp=zp.hasOwnProperty;function Hp(e){var t=this.__data__;return pn?t[e]!==void 0:Bp.call(t,e)}var Rp="__lodash_hash_undefined__";function Vp(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pn&&t===void 0?Rp:t,this}function kt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}kt.prototype.clear=Tp;kt.prototype.delete=kp;kt.prototype.get=Dp;kt.prototype.has=Hp;kt.prototype.set=Vp;function Lp(){this.__data__=[],this.size=0}function go(e,t){for(var n=e.length;n--;)if(er(e[n][0],t))return n;return-1}var Fp=Array.prototype,Gp=Fp.splice;function Yp(e){var t=this.__data__,n=go(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Gp.call(t,n,1),--this.size,!0}function qp(e){var t=this.__data__,n=go(t,e);return n<0?void 0:t[n][1]}function Xp(e){return go(this.__data__,e)>-1}function Up(e,t){var n=this.__data__,o=go(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function st(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}st.prototype.clear=Lp;st.prototype.delete=Yp;st.prototype.get=qp;st.prototype.has=Xp;st.prototype.set=Up;var jp=At(yt,"Map"),vn=jp;function Zp(){this.size=0,this.__data__={hash:new kt,map:new(vn||st),string:new kt}}function Kp(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function po(e,t){var n=e.__data__;return Kp(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Wp(e){var t=po(this,e).delete(e);return this.size-=t?1:0,t}function Qp(e){return po(this,e).get(e)}function Jp(e){return po(this,e).has(e)}function ev(e,t){var n=po(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function lt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}lt.prototype.clear=Zp;lt.prototype.delete=Wp;lt.prototype.get=Qp;lt.prototype.has=Jp;lt.prototype.set=ev;var tv="Expected a function";function vr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(tv);var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=e.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(vr.Cache||lt),n}vr.Cache=lt;var nv=500;function ov(e){var t=vr(e,function(o){return n.size===nv&&n.clear(),o}),n=t.cache;return t}var rv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,iv=/\\(\\)?/g,av=ov(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(rv,function(n,o,r,i){t.push(r?i.replace(iv,"$1"):o||n)}),t}),sv=av;function lv(e){return e==null?"":Qa(e)}function mr(e,t){return Ge(e)?e:pr(e,t)?[e]:sv(lv(e))}var uv=1/0;function wn(e){if(typeof e=="string"||sn(e))return e;var t=e+"";return t=="0"&&1/e==-uv?"-0":t}function yr(e,t){t=mr(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[wn(t[n++])];return n&&n==o?e:void 0}function cv(e,t,n){var o=e==null?void 0:yr(e,t);return o===void 0?n:o}function dv(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}function fv(){this.__data__=new st,this.size=0}function hv(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function gv(e){return this.__data__.get(e)}function pv(e){return this.__data__.has(e)}var vv=200;function mv(e,t){var n=this.__data__;if(n instanceof st){var o=n.__data__;if(!vn||o.length<vv-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new lt(o)}return n.set(e,t),this.size=n.size,this}function it(e){var t=this.__data__=new st(e);this.size=t.size}it.prototype.clear=fv;it.prototype.delete=hv;it.prototype.get=gv;it.prototype.has=pv;it.prototype.set=mv;function yv(e,t){for(var n=-1,o=e==null?0:e.length,r=0,i=[];++n<o;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i}function _v(){return[]}var wv=Object.prototype,bv=wv.propertyIsEnumerable,xi=Object.getOwnPropertySymbols,xv=xi?function(e){return e==null?[]:(e=Object(e),yv(xi(e),function(t){return bv.call(e,t)}))}:_v,Ev=xv;function Sv(e,t,n){var o=t(e);return Ge(e)?o:dv(o,n(e))}function Ei(e){return Sv(e,gr,Ev)}var Nv=At(yt,"DataView"),Zo=Nv,$v=At(yt,"Promise"),Ko=$v,Cv=At(yt,"Set"),Wo=Cv,Si="[object Map]",Mv="[object Object]",Ni="[object Promise]",$i="[object Set]",Ci="[object WeakMap]",Mi="[object DataView]",Iv=Pt(Zo),Tv=Pt(vn),kv=Pt(Ko),Pv=Pt(Wo),Av=Pt(Uo),wt=eo;(Zo&&wt(new Zo(new ArrayBuffer(1)))!=Mi||vn&&wt(new vn)!=Si||Ko&&wt(Ko.resolve())!=Ni||Wo&&wt(new Wo)!=$i||Uo&&wt(new Uo)!=Ci)&&(wt=function(e){var t=eo(e),n=t==Mv?e.constructor:void 0,o=n?Pt(n):"";if(o)switch(o){case Iv:return Mi;case Tv:return Si;case kv:return Ni;case Pv:return $i;case Av:return Ci}return t});var Ii=wt,Ov=yt.Uint8Array,Ti=Ov,Dv="__lodash_hash_undefined__";function zv(e){return this.__data__.set(e,Dv),this}function Bv(e){return this.__data__.has(e)}function Qn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new lt;++t<n;)this.add(e[t])}Qn.prototype.add=Qn.prototype.push=zv;Qn.prototype.has=Bv;function Hv(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function Rv(e,t){return e.has(t)}var Vv=1,Lv=2;function as(e,t,n,o,r,i){var a=n&Vv,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,g=!0,v=n&Lv?new Qn:void 0;for(i.set(e,t),i.set(t,e);++h<s;){var x=e[h],m=t[h];if(o)var b=a?o(m,x,h,t,e,i):o(x,m,h,e,t,i);if(b!==void 0){if(b)continue;g=!1;break}if(v){if(!Hv(t,function(E,p){if(!Rv(v,p)&&(x===E||r(x,E,n,o,i)))return v.push(p)})){g=!1;break}}else if(!(x===m||r(x,m,n,o,i))){g=!1;break}}return i.delete(e),i.delete(t),g}function Fv(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n}function Gv(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var Yv=1,qv=2,Xv="[object Boolean]",Uv="[object Date]",jv="[object Error]",Zv="[object Map]",Kv="[object Number]",Wv="[object RegExp]",Qv="[object Set]",Jv="[object String]",em="[object Symbol]",tm="[object ArrayBuffer]",nm="[object DataView]",ki=Ln?Ln.prototype:void 0,Io=ki?ki.valueOf:void 0;function om(e,t,n,o,r,i,a){switch(n){case nm:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case tm:return!(e.byteLength!=t.byteLength||!i(new Ti(e),new Ti(t)));case Xv:case Uv:case Kv:return er(+e,+t);case jv:return e.name==t.name&&e.message==t.message;case Wv:case Jv:return e==t+"";case Zv:var s=Fv;case Qv:var l=o&Yv;if(s||(s=Gv),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;o|=qv,a.set(e,t);var d=as(s(e),s(t),o,r,i,a);return a.delete(e),d;case em:if(Io)return Io.call(e)==Io.call(t)}return!1}var rm=1,im=Object.prototype,am=im.hasOwnProperty;function sm(e,t,n,o,r,i){var a=n&rm,s=Ei(e),l=s.length,u=Ei(t),d=u.length;if(l!=d&&!a)return!1;for(var h=l;h--;){var g=s[h];if(!(a?g in t:am.call(t,g)))return!1}var v=i.get(e),x=i.get(t);if(v&&x)return v==t&&x==e;var m=!0;i.set(e,t),i.set(t,e);for(var b=a;++h<l;){g=s[h];var E=e[g],p=t[g];if(o)var I=a?o(p,E,g,t,e,i):o(E,p,g,e,t,i);if(!(I===void 0?E===p||r(E,p,n,o,i):I)){m=!1;break}b||(b=g=="constructor")}if(m&&!b){var N=e.constructor,R=t.constructor;N!=R&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof R=="function"&&R instanceof R)&&(m=!1)}return i.delete(e),i.delete(t),m}var lm=1,Pi="[object Arguments]",Ai="[object Array]",Pn="[object Object]",um=Object.prototype,Oi=um.hasOwnProperty;function cm(e,t,n,o,r,i){var a=Ge(e),s=Ge(t),l=a?Ai:Ii(e),u=s?Ai:Ii(t);l=l==Pi?Pn:l,u=u==Pi?Pn:u;var d=l==Pn,h=u==Pn,g=l==u;if(g&&jo(e)){if(!jo(t))return!1;a=!0,d=!1}if(g&&!d)return i||(i=new it),a||is(e)?as(e,t,n,o,r,i):om(e,t,l,n,o,r,i);if(!(n&lm)){var v=d&&Oi.call(e,"__wrapped__"),x=h&&Oi.call(t,"__wrapped__");if(v||x){var m=v?e.value():e,b=x?t.value():t;return i||(i=new it),r(m,b,n,o,i)}}return g?(i||(i=new it),sm(e,t,n,o,r,i)):!1}function _r(e,t,n,o,r){return e===t?!0:e==null||t==null||!ln(e)&&!ln(t)?e!==e&&t!==t:cm(e,t,n,o,_r,r)}var dm=1,fm=2;function hm(e,t,n,o){var r=n.length,i=r,a=!o;if(e==null)return!i;for(e=Object(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<i;){s=n[r];var l=s[0],u=e[l],d=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var h=new it;if(o)var g=o(u,d,l,e,t,h);if(!(g===void 0?_r(d,u,dm|fm,o,h):g))return!1}}return!0}function ss(e){return e===e&&!Fn(e)}function gm(e){for(var t=gr(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,ss(r)]}return t}function ls(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function pm(e){var t=gm(e);return t.length==1&&t[0][2]?ls(t[0][0],t[0][1]):function(n){return n===e||hm(n,e,t)}}function vm(e,t){return e!=null&&t in Object(e)}function mm(e,t,n){t=mr(t,e);for(var o=-1,r=t.length,i=!1;++o<r;){var a=wn(t[o]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++o!=r?i:(r=e==null?0:e.length,!!r&&Xi(r)&&tr(a,r)&&(Ge(e)||ts(e)))}function ym(e,t){return e!=null&&mm(e,t,vm)}var _m=1,wm=2;function bm(e,t){return pr(e)&&ss(t)?ls(wn(e),t):function(n){var o=cv(n,e);return o===void 0&&o===t?ym(n,e):_r(t,o,_m|wm)}}function xm(e){return function(t){return t==null?void 0:t[e]}}function Em(e){return function(t){return yr(t,e)}}function Sm(e){return pr(e)?xm(wn(e)):Em(e)}function Nm(e){return typeof e=="function"?e:e==null?Ja:typeof e=="object"?Ge(e)?bm(e[0],e[1]):pm(e):Sm(e)}function $m(e){return function(t,n,o){for(var r=-1,i=Object(t),a=o(t),s=a.length;s--;){var l=a[e?s:++r];if(n(i[l],l,i)===!1)break}return t}}var Cm=$m(),Mm=Cm;function Im(e,t){return e&&Mm(e,t,gr)}function Tm(e,t){return function(n,o){if(n==null)return n;if(!nr(n))return e(n,o);for(var r=n.length,i=t?r:-1,a=Object(n);(t?i--:++i<r)&&o(a[i],i,a)!==!1;);return n}}var km=Tm(Im),Pm=km;function Am(e,t){var n=-1,o=nr(e)?Array(e.length):[];return Pm(e,function(r,i,a){o[++n]=t(r,i,a)}),o}function Om(e,t,n,o){if(!Fn(e))return e;t=mr(t,e);for(var r=-1,i=t.length,a=i-1,s=e;s!=null&&++r<i;){var l=wn(t[r]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(r!=a){var d=s[l];u=o?o(d,l,s):void 0,u===void 0&&(u=Fn(d)?d:tr(t[r+1])?[]:{})}Pg(s,l,u),s=s[l]}return e}function Dm(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function zm(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e===e,i=sn(e),a=t!==void 0,s=t===null,l=t===t,u=sn(t);if(!s&&!u&&!i&&e>t||i&&a&&l&&!s&&!u||o&&a&&l||!n&&l||!r)return 1;if(!o&&!i&&!u&&e<t||u&&n&&r&&!o&&!i||s&&n&&r||!a&&r||!l)return-1}return 0}function Bm(e,t,n){for(var o=-1,r=e.criteria,i=t.criteria,a=r.length,s=n.length;++o<a;){var l=zm(r[o],i[o]);if(l){if(o>=s)return l;var u=n[o];return l*(u=="desc"?-1:1)}}return e.index-t.index}function Hm(e,t,n){t.length?t=Vn(t,function(i){return Ge(i)?function(a){return yr(a,i.length===1?i[0]:i)}:i}):t=[Ja];var o=-1;t=Vn(t,os(Nm));var r=Am(e,function(i,a,s){var l=Vn(t,function(u){return u(i)});return{criteria:l,index:++o,value:i}});return Dm(r,function(i,a){return Bm(i,a,n)})}function Rm(e,t,n,o){return e==null?[]:(Ge(t)||(t=t==null?[]:[t]),n=o?void 0:n,Ge(n)||(n=n==null?[]:[n]),Hm(e,t,n))}function Vm(e,t,n){return e==null?e:Om(e,t,n)}const zt=["jina-embeddings-v2-base-en","jina-colbert-v2","jina-clip-v1","jina-reranker-v2-base-multilingual","jina-embeddings-v3","reader-lm-1.5b"],Lm=["jina-embedding-b-en-v1","reader-lm-1.5b","reader-lm-0.5b"],Di=[{id:"E1-2",source:"jina-embedding-b-en-v1",target:"jina-embeddings-v2-base-en",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-3",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-zh",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-4",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-de",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-5",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-code",sourceHandle:"source-right",targetHandle:"target-left",markerEnd:"arrow",type:"smoothstep",style:"stroke: #323838"},{id:"E2-6",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-es",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-7",source:"jina-embeddings-v2-base-en",target:"jina-colbert-v1-en",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-9",source:"jina-embeddings-v2-base-en",target:"jina-clip-v1",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E7-8",source:"jina-colbert-v1-en",target:"jina-colbert-v2",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-11",source:"jina-reranker-v1-base-en",target:"jina-reranker-v1-tiny-en",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-12",source:"jina-reranker-v1-base-en",target:"jina-reranker-v1-turbo-en",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-13",source:"jina-reranker-v1-base-en",target:"jina-reranker-v2-base-multilingual",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-14",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v3",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E15-16",source:"reader-lm-1.5b",target:"reader-lm-0.5b",sourceHandle:"source-top",targetHandle:"target-bottom",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"}],Fm=[{id:"E1-2",source:"jina-embedding-b-en-v1",target:"jina-embeddings-v2-base-en",sourceHandle:"source-left",targetHandle:"target-bottom",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-3",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-zh",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-4",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-de",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-5",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-code",sourceHandle:"source-right",targetHandle:"target-left",markerEnd:"arrow",type:"smoothstep",style:"stroke: #323838"},{id:"E2-6",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v2-base-es",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-7",source:"jina-embeddings-v2-base-en",target:"jina-colbert-v1-en",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-9",source:"jina-embeddings-v2-base-en",target:"jina-clip-v1",sourceHandle:"source-top",targetHandle:"target-bottom",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E7-8",source:"jina-colbert-v1-en",target:"jina-colbert-v2",sourceHandle:"source-left",targetHandle:"target-right",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-11",source:"jina-reranker-v1-base-en",target:"jina-reranker-v1-tiny-en",sourceHandle:"source-right",targetHandle:"target-right",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-12",source:"jina-reranker-v1-base-en",target:"jina-reranker-v1-turbo-en",sourceHandle:"source-right",targetHandle:"target-right",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E10-13",source:"jina-reranker-v1-base-en",target:"jina-reranker-v2-base-multilingual",sourceHandle:"source-left",targetHandle:"target-right",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E2-14",source:"jina-embeddings-v2-base-en",target:"jina-embeddings-v3",sourceHandle:"source-top",targetHandle:"target-bottom",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"},{id:"E15-16",source:"reader-lm-1.5b",target:"reader-lm-0.5b",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",markerEnd:"arrow",style:"stroke: #323838"}];const Gm={class:"row justify-center full-width"},Ym={class:"models-graph-wrapper"},qm=["id"],Xm={class:"label bg-grey-8 text-black"},ct=100,Jt=340,dt=36,An=50,Um=Se({__name:"EmbeddingGraph",setup(e){const t=Qo(),n=Us(),{allModels:o}=To(n),r=fe(!1),{t:i}=Jn({useScope:"global"}),{onNodesInitialized:a,onNodeMouseEnter:s,onNodeMouseLeave:l,onEdgeMouseEnter:u,onEdgeMouseLeave:d,onNodeClick:h,getNodes:g,getEdges:v}=$e(),x=js(),{answerChunks:m,isBusy:b,isStreaming:E,isComposing:p}=To(x),I=fe(),N=fe([]),R=fe(Di),Y=fe(null),V=fe(""),K=fe(""),j=fe([]),A=ie(()=>t.screen.lt.md),w=ie(()=>Rm(o.value,["release_date"],["asc"])),oe=ie(()=>{const $=Object.keys(I.value||{});return A.value?$.reverse():$}),se=ie(()=>V.value?g.value.filter($=>$.id.toLowerCase().includes(V.value.toLowerCase())):[]),_=ie(()=>V.value||Y.value),P=ie(()=>!j.value.some($=>$.type===Er.NEWS)),S=$=>{var c;return!_.value||se.value.some(f=>f.id===$)||((c=Y.value)==null?void 0:c.name)===$},D=()=>{if(Y.value=null,!V.value){B();return}z(se.value,"node"),se.value.length&&Ze(()=>{var f,y;const $=le((y=(f=se.value[se.value.length-1])==null?void 0:f.data)==null?void 0:y.release_date),c=document.getElementById(`${$}`);c&&c.scrollIntoView({behavior:"smooth",block:"start"})})},z=($,c)=>{c==="node"?(g.value.forEach(f=>{$.some(y=>y.id===f.id||y.id===f.id)?f.style={opacity:1,border:"1px solid #787d7d"}:f.style={opacity:.3}}),v.value.forEach(f=>{var C;const y=(C=document.querySelector(`.vue-flow__edge[data-id="${f.id}"]`))==null?void 0:C.parentElement;$.some(O=>O.id===f.source||O.id===f.target)?(f.style={stroke:"#929595"},y==null||y.setAttribute("style","z-index: 100"),f.sourceNode.style={opacity:1,border:"1px solid #787d7d"},f.targetNode.style={opacity:1,border:"1px solid #787d7d"}):y==null||y.setAttribute("style","z-index: 0")})):c==="edge"&&(v.value.forEach(f=>{var C;const y=(C=document.querySelector(`.vue-flow__edge[data-id="${f.id}"]`))==null?void 0:C.parentElement;$.some(O=>O.id===f.id||O.id===f.id)?(f.style={stroke:"#929595"},y==null||y.setAttribute("style","z-index: 100")):y==null||y.setAttribute("style","z-index: 0")}),g.value.forEach(f=>{$.some(y=>y.source===f.id||y.target===f.id)?f.style={opacity:1}:f.style={opacity:.3}}))},B=()=>{g.value.forEach($=>{$.style={opacity:1}}),v.value.forEach($=>{var f;const c=(f=document.querySelector(`.vue-flow__edge[data-id="${$.id}"]`))==null?void 0:f.parentElement;$.style={opacity:1,stroke:"#323838"},c==null||c.setAttribute("style","z-index: 0")})},F=async()=>{if(!K.value){j.value=[];return}j.value=await x.composeResult(K.value)},G=async()=>{!K.value||(await x.search(K.value,Er.NEWS),j.value=await x.composeResult(K.value))},ae=$=>{K.value=X($.name),j.value=[],m.value=[],F()},X=$=>$.split("-").slice(0,3).join(" "),L=()=>{Y.value=null,_.value||B()},Q=fe({}),pe=ie(()=>{const $=Object.keys(I.value||{});let c=0;if(A.value)return $.forEach(y=>{var M,ee,te,ge;const C=(ee=(M=I.value)==null?void 0:M[y])==null?void 0:ee.filter(ue=>zt.includes(ue.name)),O=(ge=(te=I.value)==null?void 0:te[y])==null?void 0:ge.filter(ue=>!zt.includes(ue.name)),W=Math.max((C==null?void 0:C.length)||0,(O==null?void 0:O.length)||0);Vm(Q.value,y,`${W}fr`),W>1&&(c+=W-1)}),{height:`${$.length*(ct+dt*2)+c*(ct+dt)}px`,width:Jt*2+200+"px"};const f=Math.max(...$.map(y=>{var C,O;return((O=(C=I.value)==null?void 0:C[y])==null?void 0:O.length)||0}));return{width:`${$.length*(Jt+An)}px`,height:f*(ct+dt)+160+"px"}}),he=ie(()=>({"grid-template-columns":A.value?"1fr":`repeat(auto-fill, ${Jt+An}px)`,"grid-template-rows":A.value?Object.values(Q.value).reverse().join(" "):"unset"})),_e=ie(()=>({minHeight:A.value?`${ct+dt*2}px`:"unset"})),le=$=>{const c=new Date($).getFullYear(),f=new Date($).getMonth()+1;return`${c}Q${Math.ceil(f/3)}`},ce=($,c)=>{var ge,ue;const f=le($.release_date),y=A.value?Object.keys(I.value||{}).reverse():Object.keys(I.value||{}),C=y.indexOf(f),O=[],W=[];(ue=(ge=I.value)==null?void 0:ge[f])==null||ue.forEach(de=>{zt.includes(de.name)?O.unshift(de):W.unshift(de)});let M=0;A.value?c?M=O.findIndex(de=>de.name===$.name):M=W.findIndex(de=>de.name===$.name):M=O.concat(W).findIndex(de=>de.name===$.name),M===-1&&(M=0);const ee=y.slice(0,C);let te=0;return ee.forEach(de=>{var et,bn,xn,En;const Re=(bn=(et=I.value)==null?void 0:et[de])==null?void 0:bn.filter(vo=>zt.includes(vo.name)),Je=(En=(xn=I.value)==null?void 0:xn[de])==null?void 0:En.filter(vo=>!zt.includes(vo.name));te+=Math.max((Re==null?void 0:Re.length)||0,(Je==null?void 0:Je.length)||0)-1}),A.value?{x:c?100:100+Jt+An,y:(ct+dt)*(M+te)+(ct+dt*2)*C+dt}:{x:25+C*(Jt+An),y:parseInt(pe.value.height)-(100+ct)-M*(ct+dt)}},J=async()=>{var $;r.value=!0,($=o.value)!=null&&$.length||await n.getModels(),I.value={},w.value.forEach(c=>{var y;const f=le(c.release_date);(y=I.value)!=null&&y[f]?I.value[f].push(c):I.value={...I.value,[f]:[c]}}),N.value=w.value.map(c=>{const f=zt.includes(c.name);return{id:c.name,data:{...c,isFrontier:f},position:ce(c,f),type:"custom",class:`node ${f?"is-frontier":"is-variant"}`}}),r.value=!1},ne=async()=>{R.value=A.value?Fm:Di,await J()};return xe(A,()=>{ne()}),Ri(()=>{ne()}),a(()=>{const $=document.querySelector(".models-graph-wrapper");$&&!A.value&&($.scrollLeft=parseInt(pe.value.width))}),h($=>{V.value?se.value.some(c=>c.id===$.node.id)?Y.value=$.node.data:($.event.stopImmediatePropagation(),$.event.preventDefault()):(z([$.node],"node"),Y.value=$.node.data)}),s($=>{_.value||z([$.node],"node")}),l(()=>{_.value||B()}),u($=>{_.value||z([$.edge],"edge")}),d(()=>{_.value||B()}),($,c)=>(q(),me(De,null,[re("div",Gm,[k(wr,{modelValue:V.value,"onUpdate:modelValue":[c[0]||(c[0]=f=>V.value=f),D],outlined:"",square:"",debounce:"300",label:T(i)("model_graph.search_models"),class:"q-my-xl search-box",style:Ae({width:A.value?"80%":"40%"}),clearable:""},{prepend:H(()=>[k(Ve,{name:"search",class:"cursor-pointer"})]),_:1},8,["modelValue","label","style"])]),re("div",{class:Be(["models-graph",{"is-vertical":A.value}])},[re("div",Ym,[re("div",{class:"models-graph-inner",style:Ae(pe.value)},[re("div",{class:"timeline",style:Ae(he.value)},[(q(!0),me(De,null,rt(oe.value,f=>(q(),me("div",{key:f,class:"section",style:Ae(_e.value),id:f},[re("span",Xm,ye(f),1)],12,qm))),128))],4),r.value?be("",!0):(q(),ve(T(dg),{key:0,nodes:N.value,edges:R.value,"zoom-on-scroll":!1,"zoom-on-double-click":!1,"zoom-on-pinch":!1,"nodes-draggable":!1,"pan-on-drag":!1,"fit-view-on-init":!1},{"node-custom":H(({data:f})=>[jt((q(),ve(Oe,{class:"full-width full-height cursor-pointer",style:{"flex-direction":"column"}},{default:H(()=>[k(Le,{caption:"",class:"justify-between row full-width items-center q-mb-xs"},{default:H(()=>{var y,C,O;return[re("div",null,[(y=f.request_path)!=null&&y.includes("embedding")?(q(),ve(Ve,{key:0,name:"img:"+T(_s)},{default:H(()=>[k(Ue,null,{default:H(()=>[Ce(ye(T(i)("landing_page.embeddings")),1)]),_:1})]),_:1},8,["name"])):(C=f.request_path)!=null&&C.includes("rank")?(q(),ve(Ve,{key:1,name:"img:"+T(ws)},{default:H(()=>[k(Ue,null,{default:H(()=>[Ce(ye(T(i)("landing_page.reranker")),1)]),_:1})]),_:1},8,["name"])):(O=f.tags)!=null&&O.includes("reader")?(q(),ve(Ve,{key:2,name:"img:"+T(bs)},{default:H(()=>[k(Ue,null,{default:H(()=>[Ce(ye(T(i)("landing_page.reader")),1)]),_:1})]),_:1},8,["name"])):be("",!0),T(xs).includes(f.name)?(q(),ve(Ve,{key:3,name:"fab fa-creative-commons"},{default:H(()=>[k(Ue,null,{default:H(()=>[Ce(ye(T(i)("landing_page.ccbync")),1)]),_:1})]),_:1})):be("",!0)]),k(_t,{icon:"calendar_month",size:"xs",square:"",dense:"",class:"text-dim",color:"transparent",label:T(Ps).formatDate(f.release_date,"YYYY-MM-DD")},null,8,["label"])]}),_:2},1024),k(Pe,{class:"no-wrap"},{default:H(()=>[k(Le,{class:"text-weight-bold",style:{"font-size":"14px"}},{default:H(()=>[re("code",null,ye(f.name),1)]),_:2},1024),k(Le,{caption:"",class:"row q-py-sm no-wrap"},{default:H(()=>{var y,C,O,W,M,ee;return[f.tags&&f.tags.includes("multimodal")?(q(),ve(_t,{key:0,square:"",size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",label:T(i)("embedding.multimodal"),icon:"mms"},{default:H(()=>[S(f.name)?(q(),ve(Ue,{key:0},{default:H(()=>[Ce(ye(T(i)("embedding.multimodal_explain")),1)]),_:1})):be("",!0)]),_:2},1032,["label"])):be("",!0),(y=f.request_path)!=null&&y.includes("multi-embeddings")?(q(),ve(_t,{key:1,class:"text-dim",style:{"border-radius":"0"},icon:"grid_4x4",label:T(i)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:H(()=>[k(Ue,null,{default:H(()=>[Ce(ye(T(i)("embedding.multi_embedding_explain")),1)]),_:1})]),_:1},8,["label"])):be("",!0),k(_t,{label:(C=f.meta_data)==null?void 0:C.token_length,square:"",size:"xs",outline:"",icon:"notes",class:"text-dim",style:{"border-radius":"0"}},{default:H(()=>[S(f.name)?(q(),ve(Ue,{key:0},{default:H(()=>{var te;return[Ce(ye(T(i)("embedding.token_length_explain",{_tokenLength:(te=f.meta_data)==null?void 0:te.token_length})),1)]}),_:2},1024)):be("",!0)]),_:2},1032,["label"]),(O=f.request_path)!=null&&O.includes("embedding")?(q(),ve(_t,{key:2,label:(W=f.meta_data)==null?void 0:W.output_dim,square:"",class:"text-dim",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:H(()=>[S(f.name)?(q(),ve(Ue,{key:0},{default:H(()=>{var te;return[Ce(ye(T(i)("embedding.output_dim_explain",{_outputDim:(te=f.meta_data)==null?void 0:te.output_dim})),1)]}),_:2},1024)):be("",!0)]),_:2},1032,["label"])):be("",!0),k(_t,{label:(M=f.meta_data)==null?void 0:M.size,square:"",size:"xs",class:"text-dim",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:H(()=>[S(f.name)?(q(),ve(Ue,{key:0},{default:H(()=>{var te;return[Ce(ye(T(i)("embedding.size_explain",{_size:(te=f.meta_data)==null?void 0:te.size})),1)]}),_:2},1024)):be("",!0)]),_:2},1032,["label"]),k(_t,{label:T(xr)((ee=f.meta_data)==null?void 0:ee.language),square:"",class:"text-dim",size:"xs",outline:"",style:{"border-radius":"0"}},{default:H(()=>[S(f.name)?(q(),ve(Ue,{key:0},{default:H(()=>{var te;return[Ce(ye(T(i)("embedding.language_explain",{_language:T(xr)((te=f.meta_data)==null?void 0:te.language)})),1)]}),_:2},1024)):be("",!0)]),_:2},1032,["label"])]}),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Zt]]),k(Xs,{flat:"","auto-close":"",anchor:A.value?"bottom start":"top right",self:"top left",class:"lock-blur model-menu bg-transparent",style:{width:"400px"},onBeforeShow:y=>ae(f),onBeforeHide:L},{default:H(()=>[k(Fs),T(Lm).includes(f.name)?be("",!0):jt((q(),ve(Oe,{key:0,clickable:"",href:`/?sui&model=${f.name}`},{default:H(()=>[k(Pe,{avatar:""},{default:H(()=>[k(Ve,{name:"code"})]),_:1}),k(Pe,null,{default:H(()=>[k(Le,{caption:""},{default:H(()=>[Ce(ye(T(i)("model_graph.use_it_via")),1)]),_:1}),k(Le,null,{default:H(()=>[Ce(ye(T(i)("model_graph.api")),1)]),_:1})]),_:1})]),_:2},1032,["href"])),[[Zt]]),(q(!0),me(De,null,rt(T(Es),y=>jt((q(),ve(Oe,{clickable:"",key:y.label,href:y.link,target:"_blank"},{default:H(()=>[k(Pe,{avatar:""},{default:H(()=>[k(Ve,{name:y.icon},null,8,["name"])]),_:2},1024),k(Pe,null,{default:H(()=>[k(Le,{caption:""},{default:H(()=>[Ce(ye(T(i)("model_graph.deploy_it_on")),1)]),_:1}),k(Pe,null,{default:H(()=>[Ce(ye(y.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["href"])),[[Zt]])),128)),jt((q(),ve(Oe,{clickable:"",href:"/contact-sales"},{default:H(()=>[k(Pe,{avatar:""},{default:H(()=>[k(Ve,{name:"handshake"})]),_:1}),k(Pe,null,{default:H(()=>[k(Le,null,{default:H(()=>[Ce(ye(T(i)("model_graph.contact_sales_about_it")),1)]),_:1})]),_:1})]),_:1})),[[Zt]]),jt((q(),ve(Oe,{clickable:"",href:`https://huggingface.co/jinaai/${f.name}`,target:"_blank"},{default:H(()=>[k(Pe,{avatar:""},{default:H(()=>[k(Ve,{name:"img:/huggingface_logo.svg"})]),_:1}),k(Pe,null,{default:H(()=>[k(Le,null,{default:H(()=>[Ce(ye(T(i)("model_graph.find_on_hf")),1)]),_:1})]),_:1})]),_:2},1032,["href"])),[[Zt]]),T(p)?(q(),ve(qs,{key:1,indeterminate:"",size:"xs"})):be("",!0),!P.value||K.value!==X(f.name)?(q(),ve(Oe,{key:2,class:"q-pa-none"},{default:H(()=>[k(Pe,{onClick:c[2]||(c[2]=Ss(()=>{},["stop"]))},{default:H(()=>[k(wr,{filled:"",square:"",autofocus:"",readonly:T(b)||T(E)||T(p),modelValue:K.value,"onUpdate:modelValue":[c[1]||(c[1]=y=>K.value=y),F],class:"full-width"},{prepend:H(()=>[k(Ve,{name:"search"})]),append:H(()=>[T(b)||T(p)?(q(),ve(Ns,{key:0})):be("",!0)]),_:1},8,["readonly","modelValue"]),k(Lt,{class:"search-result bg-transparent"},{default:H(()=>[j.value.length&&!T(m).length?(q(!0),me(De,{key:0},rt(j.value,(y,C)=>(q(),ve(Zs,{key:C,data:y,"show-more-news":!1,"show-on-page-rag":K.value!==X(f.name),onAskQuestion:G},null,8,["data","show-on-page-rag"]))),128)):be("",!0),T(b)||T(m).length?(q(),ve(Ks,{key:1,class:"full-width"})):be("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):be("",!0)]),_:2},1032,["anchor","onBeforeShow"]),k(T(Fe),{id:"source-top",type:"source",position:T(Z).Top},null,8,["position"]),k(T(Fe),{id:"target-top",type:"target",position:T(Z).Top},null,8,["position"]),k(T(Fe),{id:"source-bottom",type:"source",position:T(Z).Bottom},null,8,["position"]),k(T(Fe),{id:"target-bottom",type:"target",position:T(Z).Bottom},null,8,["position"]),k(T(Fe),{id:"source-left",type:"source",position:T(Z).Left},null,8,["position"]),k(T(Fe),{id:"target-left",type:"target",position:T(Z).Left},null,8,["position"]),k(T(Fe),{id:"source-right",type:"source",position:T(Z).Right},null,8,["position"]),k(T(Fe),{id:"target-right",type:"target",position:T(Z).Right},null,8,["position"])]),_:1},8,["nodes","edges"])),k(Gi,{show:r.value},null,8,["show"])],4)])],2)],64))}}),jm={class:"row justify-center",style:{height:"100vh"}},Zm=re("video",{preload:"none",autoplay:"",muted:"",loop:"",playsinline:"",class:"non-selectable",poster:Js,width:"100%",height:"100%",style:{"object-fit":"cover"}},[re("source",{src:el,type:"video/mp4"})],-1),Km=re("div",{class:"overlay"},null,-1),Wm=re("div",{class:"overlay2"},null,-1),Qm={class:"row justify-center relative-position"},Jm={class:"col-11 col-md-10 q-py-xl"},ey={class:"row justify-center relative-position",id:"newsroom"},ty={class:"col-11 col-md-10 col-xl-9 q-py-xl q-my-xl"},ny={class:"column justify-center items-center q-gutter-y-lg"},oy={class:"q-py-xl row justify-center relative-position",id:"enterprises"},ry={class:"col-11 col-md-10 col-xl-9",style:{"z-index":"1"}},iy={class:"col-11 col-md-10 col-xl-9 q-my-xl q-pb-xl justify-center",id:"apiform"},ay={class:"row text-r-h4 q-my-sm"},sy={class:"row text-subtitle2 text-dim q-mb-xl items-center"},ly={class:"q-py-xl row justify-center relative-position",id:"research"},uy={class:"col-11 col-md-10 col-xl-9",style:{"z-index":"1"}},cy={class:"row q-mt-xl q-pt-xl"},dy={class:"col-12 col-md-5 col-lg-4"},fy={class:"row text-r-h3 text-white q-mb-lg"},hy={class:"text-dim"},gy={class:"row q-pt-xl"},py={class:"col-12 col-md-7 col-lg-8"},vy={class:"q-pa-xl row justify-center overflow-hidden"},my={class:"col-12 col-sm-11 col-md-10",style:{"z-index":"1"}},yy={class:"q-py-xl row justify-center relative-position",id:"power-users"},_y={class:"col-11 col-sm-10 col-md-9 col-lg-8"},wy={class:"row justify-center q-py-xl"},by={class:"q-py-xl row justify-center",id:"developers"},xy={class:"col-11 col-md-10 col-xl-9 relative-position",style:{"z-index":"1"}},Jy=Se({__name:"LandingPage",setup(e){const t=$s(),{t:n,te:o}=Jn({useScope:"global"}),r=Qo(),i=Bs(),a=fe(!1),{blogs:s}=To(i),l=fe({}),u=ie(()=>Ms.value.map(x=>({label:x.label,caption:n(x.caption),homepage:x.homepage,icon:x.icon,tags:x.tags,order:x.orderInGrid,star:l.value[x.star]})));We(()=>{Cs(t.hash);const x=fetch("https://jina.ai/assets/data.json").then(E=>E.json()).then(E=>{l.value=E.stars}),m=i.getNewsBy({limit:3}),b=i.getNewsBy({limit:3,tag:"featured"});Promise.all([x,m,b]).then(()=>{a.value=!0})});const d=[{label:"landing_page.get_api_now",icon:"code",anchor:"#apiform"},{label:"landing_page.models",icon:"mdi-molecule",anchor:"#models"},{label:"landing_page.contact_sales",icon:"handshake",anchor:"/contact-sales"}],h=ie(()=>v("features",["question_answer","app_registration","stadium","webhook","smart_toy"])),g=ie(()=>{switch(r.screen.name){case"xl":return"lg";case"lg":return"lg";case"md":return"md";case"sm":return"md";case"xs":return"md";default:return"sm"}}),v=(x,m)=>{const b=[];for(let E=0;E<5;E++){const p=`promptperfect.${x}[${E}]`;o(p)&&b.push({name:o(`${p}.name`)?n(`${p}.name`):"",title:o(`${p}.title`)?n(`${p}.title`):"",description:o(`${p}.description`)?n(`${p}.description`):"",icon:m==null?void 0:m[E],image:`/landing_${x}_${E+1}.svg`})}return b};return(x,m)=>(q(),ve(Ds,null,{default:H(()=>[re("div",jm,[k(Lt,{flat:"",class:"col-12 bg-transparent"},{default:H(()=>[Zm,Km,Wm,k(Lt,{flat:"",class:Be(["absolute-left bg-transparent non-selectable column justify-center",`q-ml-${T(r).screen.name} q-pl-${T(r).screen.name}`])},{default:H(()=>[k(pt,null,{default:H(()=>[k(Rs,{title:T(n)("landing_page.your_search_foundation1"),subtitle:T(n)("landing_page.supercharged1"),buttons:d},null,8,["title","subtitle"])]),_:1})]),_:1},8,["class"])]),_:1})]),re("div",Qm,[re("div",Jm,[k(Ys)])]),re("div",ey,[k(St,{src:tl,class:"absolute-bottom",style:{opacity:"0.1"},fit:"contain",loading:"lazy"}),re("div",ty,[k(Kt,{title:"landing_page.newsroom",anchor:"newsroom"}),re("div",ny,[a.value?(q(),ve(pl,{key:0,featured:T(s).featured[0],latest:T(s).all},null,8,["featured","latest"])):be("",!0),k(Is,{outline:"",square:"",class:"col-6 lock-blur"},{default:H(()=>[k(Ot,{square:"",outline:"","no-caps":"",icon:"auto_stories",size:g.value,padding:g.value,to:"/news",label:T(n)("landing_page.read_more")},null,8,["size","padding","label"]),k(br),k(Ot,{outline:"",square:"",icon:"rss_feed",label:"RSS",href:"https://jina.ai/feed.rss",target:"_blank",size:g.value,padding:g.value},null,8,["size","padding"]),k(br),k(Ot,{outline:"",square:"",icon:"fa-brands fa-x-twitter",href:"https://x.com/jinaAI_",target:"_blank",size:g.value,padding:g.value},null,8,["size","padding"])]),_:1})])]),k(Gi,{showing:!a.value},null,8,["showing"])]),re("div",oy,[re("div",ry,[k(Kt,{title:"landing_page.for_enterprise",anchor:"enterprises",subtitle:"landing_page.enterprise_desc_v3"}),k(As)]),re("div",iy,[re("div",ay,ye(T(n)("landing_page.try_it_for_free")),1),re("div",sy,[k(Ve,{name:"verified_user",class:"q-mr-sm"}),Ce(" "+ye(T(n)("footer.soc2"))+" ",1),k(Ot,{icon:"open_in_new",size:"sm",to:"/legal#security","no-caps":"",flat:"",square:"",class:"q-ml-sm"})]),k(Os,{"show-function":"all"})]),k(St,{src:nl,class:"absolute-bottom",style:{opacity:"0.1","z-index":"-1"},fit:"contain",loading:"lazy"})]),re("div",ly,[re("div",uy,[re("div",cy,[re("div",dy,[re("div",{class:Be(T(r).screen.lt.md?"q-mb-lg q-pb-md":"q-mr-xl")},[re("div",fy,ye(T(n)("landing_page.our_publications")),1),re("div",hy,ye(T(n)("landing_page.researcher_desc")),1),re("div",gy,[k(Ot,{square:"",outline:"",class:"lock-blur",label:T(n)("landing_page.read_more"),icon:"school",padding:"md","no-caps":"",to:"/news#academic_research"},null,8,["label"])])],2)]),re("div",py,[k(zs)])])])]),re("div",vy,[re("div",my,[k(Kt,{title:"model_graph.title",anchor:"models",subtitle:"model_graph.description"}),k(Um)])]),re("div",yy,[k(St,{src:ol,class:"absolute-bottom",style:{opacity:"0.1"},fit:"contain",loading:"lazy"}),re("div",_y,[k(Kt,{title:"landing_page.for_power_users",anchor:"power-users",subtitle:"landing_page.power_users_desc"}),k(al,{"show-caption":!0,color:"#fff",items:h.value},null,8,["items"]),re("div",wy,[k(Ot,{label:T(n)("promptperfect.get_started"),square:"",href:"https://promptperfect.jina.ai",target:"_blank",padding:"lg",outline:"",class:"lock-blur",icon:"img:/PromptPerfect-dark.svg"},null,8,["label"])])])]),re("div",by,[re("div",xy,[k(Kt,{title:"landing_page.for_developers",anchor:"developers",subtitle:"landing_page.mmstack_desc"}),k(Hs,{class:"q-my-xl q-py-xl",products:u.value,"is-card-dark":!0},null,8,["products"])])])]),_:1}))}});export{Jy as default};
