import{Q as Ve,a as Xe}from"./QLinearProgress-eIKK1Cj3.js";import{s as $e,au as ea,v as aa,aw as ta,C as na,m as j,p as pe,T as ia,J as sa,as as la,aB as oa,aC as De,e as ce,aD as W,aE as ae,j as ge,a0 as be,am as ye,k as q,aF as G,a2 as ve,a3 as m,a4 as v,a5 as t,a6 as n,a7 as de,ad as le,ae as S,aq as I,af as w,ag as u,a8 as h,aG as ze,q as X,aH as He,ap as ue,a9 as me,aI as Te,aa as N,ah as oe,ai as fe,aJ as ra,aK as da,aL as Ue,aM as ca,aN as ua,aO as ma,aP as qe,ao as fa,aQ as _a,ab as T,aR as Be,aS as Ee,n as Fe,u as Ye,aT as Oe,aU as ya,aV as ha,W as pa,aW as ga,aX as ba,aj as ee,ac as va,aA as wa}from"./index-BumM2D-P.js";import{Q as E}from"./QItemLabel-BUF9mLqU.js";import{Q}from"./QTooltip-CvaMO2se.js";import{a as Ze,Q as ka,b as Je}from"./QChip-FHURb6bB.js";import{Q as je}from"./QList-7GLAMZNt.js";import{Q as Pa}from"./QExpansionItem-DRcK0cSp.js";import{c as qa}from"./copy-to-clipboard-CFXzYjD7.js";import{d as xe,f as Ke,Q as We,a as te,b as Se,c as xa,e as Sa}from"./date-3eVlMdbl.js";import{C as Ka}from"./ClosePopup-Bxd6njqo.js";import{u as Ta,Q as Ia}from"./use-dialog-plugin-component-CRYKqATq.js";const Ne=$e({name:"QInnerLoading",props:{...ea,...aa,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(i,{slots:s}){const l=sa(),e=ta(i,l.proxy.$q),{transitionProps:f,transitionStyle:b}=na(i),a=j(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(e.value===!0?" q-inner-loading--dark":"")),d=j(()=>"q-inner-loading__label"+(i.labelClass!==void 0?` ${i.labelClass}`:""));function p(){const M=[pe(la,{size:i.size,color:i.color})];return i.label!==void 0&&M.push(pe("div",{class:d.value,style:i.labelStyle},[i.label])),M}function k(){return i.showing===!0?pe("div",{class:a.value,style:b.value},s.default!==void 0?s.default():p()):null}return()=>pe(ia,f.value,k)}}),Ie=oa("apiKey",{state:()=>({keys:[],isLoading:!1,keysInfoCache:{},isBusyState:new Set,isChecking:!1}),persist:{paths:["keysInfoCache"]},getters:{primaryKey:i=>{var s;return(s=i.keys.find(l=>l.isPrimary))==null?void 0:s.key},primaryKeyInfo:i=>{var s;return i.keysInfoCache[((s=i.keys.find(l=>l.isPrimary))==null?void 0:s.key)||""]}},actions:{handleException(i){console.error(i),i.response.status===401?De.create({message:this.t("key_manager.invalid_token"),icon:"warning"}):De.create({message:i instanceof Error?i.message:String(i),color:"negative",icon:"error"})},async addKey(i,s){var l;if(!(!((l=ce.currentUser)!=null&&l.uid)||!i))try{const{data:e}=await W.request("apiKey","addKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W.getIdToken()}`},body:JSON.stringify({key:i,metadata:s})});return e&&(this.keys.unshift(e),this.getKeyInfo(i)),e}catch(e){this.handleException(e)}},async updateKey(i,s){var l;if(!(!((l=ce.currentUser)!=null&&l.uid)||!i)){this.isBusyState.add(i);try{const{data:e}=await W.request("apiKey","updateKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W.getIdToken()}`},body:JSON.stringify({key:i,metadata:s})}),f=this.keys.find(b=>b.key===i);return f&&(f.metadata=s),e}catch(e){this.handleException(e)}finally{this.isBusyState.delete(i)}}},async setPrimaryKey(i){var s;if((s=ce.currentUser)!=null&&s.uid){this.isBusyState.add(i);try{const{data:l}=await W.request("apiKey","setPrimaryKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W.getIdToken()}`},body:JSON.stringify({key:i,isPrimary:!0})});return l&&(this.keys.forEach(e=>(e.key===i?e.isPrimary=!0:e.isPrimary=!1,e)),ae().apiKey=i),l}catch(l){this.handleException(l)}finally{this.isBusyState.delete(i)}}},async checkPrimaryKey(){var i;if((i=ce.currentUser)!=null&&i.uid&&!this.isChecking)try{this.isChecking=!0;const s=ae();this.primaryKey&&this.primaryKey!==s.apiKey?s.isPaidUser?(this.keys.find(e=>e.key===s.apiKey)||await this.addKey(s.apiKey),await this.setPrimaryKey(s.apiKey)):s.apiKey=this.primaryKey:await this.getKeyInfo(s.apiKey)}finally{this.isChecking=!1}},async removeKey(i){var s;if((s=ce.currentUser)!=null&&s.uid){this.isBusyState.add(i);try{const{data:l}=await W.request("apiKey","removeKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W.getIdToken()}`},body:JSON.stringify({key:i})});l&&(this.keys.splice(this.keys.findIndex(e=>e.key===i),1),delete this.keysInfoCache[i])}catch(l){this.handleException(l)}finally{this.isBusyState.delete(i)}}},async fetchKeys(i=!0){var s;if(!(!((s=ce.currentUser)!=null&&s.uid)||this.isLoading)){this.isLoading=!0;try{const{data:l}=await W.request("apiKey","keyList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W.getIdToken()}`}});if(this.keys=l,i)for(const e of this.keys)this.getKeyInfo(e.key)}catch(l){this.handleException(l)}finally{this.isLoading=!1}}},async getKeyInfo(i,{excludeUsage:s=!1,excludeUsageStats:l=!0}={}){var e,f,b,a;if(i&&!this.isBusyState.has(i))try{this.isBusyState.add(i);const d=await ae().getKeyInfo(i);if(!d)return;if(this.keysInfoCache[i]={...this.keysInfoCache[i],...d},i===ae().apiKey&&(ae().apiKeyInfo=d),(!l||(e=d.metadata)!=null&&e.pay_by_requests)&&await this.getKeyUsageStats(i),s){Object.assign(this.keysInfoCache[i],{usage:((f=this.keysInfoCache[i])==null?void 0:f.usage)||[],last_used_at:(b=this.keysInfoCache[i])==null?void 0:b.last_used_at});return}const p=await ae().getUsage(i);Object.assign(this.keysInfoCache[i],{usage:p,last_used_at:(a=p==null?void 0:p[0])==null?void 0:a.updated_at})}finally{this.isBusyState.delete(i)}},async getKeyUsageStats(i){var s,l;if(i)try{const e=this.keysInfoCache[i],f=ae(),b=[f.getTotalUsage(i)];e.metadata.pay_by_requests&&b.push(f.getTotalRequests(i));const[a,d]=await Promise.all(b);Object.assign(this.keysInfoCache[i],{usageStats:{consumedQuantity:(s=a==null?void 0:a.total_quantity)!=null?s:0,consumedRequests:(l=a==null?void 0:a.total_request)!=null?l:0,requestBalance:d?d-(a==null?void 0:a.total_request):0}})}catch{}},isFreeKey(i){var s,l;return i?!((l=(s=this.keysInfoCache[i])==null?void 0:s.metadata)!=null&&l.speed_level):!1},isPaidKey(i){var s,l;return i?((l=(s=this.keysInfoCache[i])==null?void 0:s.metadata)==null?void 0:l.speed_level)===1:!1},isPremiumPaidKey(i){var s,l;return i?((l=(s=this.keysInfoCache[i])==null?void 0:s.metadata)==null?void 0:l.speed_level)===2:!1}}});function Qe(i){setTimeout(()=>{window.URL.revokeObjectURL(i.href)},1e4),i.remove()}function Ca(i,s,l={}){const{mimeType:e,byteOrderMark:f,encoding:b}=typeof l=="string"?{mimeType:l}:l,a=b!==void 0?new TextEncoder(b).encode([s]):s,d=f!==void 0?[f,a]:[a],p=new Blob(d,{type:e||"application/octet-stream"}),k=document.createElement("a");k.href=window.URL.createObjectURL(p),k.setAttribute("download",i),typeof k.download=="undefined"&&k.setAttribute("target","_blank"),k.classList.add("hidden"),k.style.position="fixed",document.body.appendChild(k);try{return k.click(),Qe(k),!0}catch(M){return Qe(k),M}}const Aa=ge({__name:"UsageHistoryDialog",props:{apiKey:{}},setup(i,{expose:s}){s();const l=i,{t:e}=be({useScope:"global"}),f=Ie(),{keysInfoCache:b}=ye(f),{dialogRef:a}=Ta(),d=q(!1),p=q(""),k=q(!0),M=q({avg:0,p50:0,p90:0,p99:0,min:0,max:0,last7DaysTotal:0}),O=q({}),K=j(()=>{var c,g;const o=b.value[l.apiKey],r=o==null?void 0:o.usageStats;return{quantity:(c=r==null?void 0:r.consumedQuantity)!=null?c:0,request:(g=r==null?void 0:r.consumedRequests)!=null?g:0}}),P=()=>{var o;(o=Y.value)==null||o.requestServerInteraction(),R()},x=()=>{Z.value=[]},re=()=>{var o;(o=Y.value)==null||o.requestServerInteraction(),R()},V=o=>{var c,g,y;if(!((c=o.request_path)==null?void 0:c.toLowerCase()))return"";switch((g=o.request_path)==null?void 0:g.toLowerCase()){case"/encode":case"/checkfact":return z((y=o.metadata)==null?void 0:y.model_name);case"/embeddings":case"/rerank":case"/classify":case"/train":return`api.jina.ai/v1${o.request_path}`;case"/multi-embeddings":return"api.jina.ai/v1/multi-vector";case"/segment":return"api.jina.ai/v1/segment";default:return o.request_path}},H=[{query:"reader-crawl",formatted:"r.jina.ai"},{query:"reader-search",formatted:"s.jina.ai"},{query:"grounding-checkfact",formatted:"g.jina.ai"},{query:"reader-deepresearch",formatted:"deepsearch.jina.ai"}],z=o=>{if(!o)return"";const r=o.toLowerCase(),c=H.find(g=>r.startsWith(g.query));return c?c.formatted:o},Y=q(null),Z=q([]),ne=q([{name:"icon",label:"",field:"icon",sortable:!1,align:"right"},{name:"createdAt",label:e("embedding.usage_time"),field:"createdAt",sortable:!1,align:"left",format:o=>xe.formatDate(o,d.value?"YYYY MMM Do":"YYYY MMM Do HH:mm")},{name:"requestNumber",label:e("key_manager.requests"),field:"request_number",sortable:!1,align:"right",format:o=>o?Ke(o):""},{name:"amount",label:e("key_manager.tokens"),field:"amount",sortable:!1,align:"right",format:o=>o>0?`+${o}`:`${o}`},{name:"requestPath",label:e("embedding.request_path"),field:"request_path",sortable:!1,align:"left"},{name:"reason",label:e("embedding.usage_reason"),field:"reason",sortable:!1,align:"left"}]),A=async()=>{var c,g;await f.getKeyInfo(l.apiKey,{excludeUsageStats:!1});const o=(g=(c=f.keysInfoCache)==null?void 0:c[l.apiKey])==null?void 0:g.usage;if(!o||o.length===0)return;const r=d.value?F(o):$(o);Z.value=r,R(),ie()},$=o=>o.map(r=>{const c=new Date(r.updated_at);let g=r.quantity,y=e(`embedding.usage_reason_${r.type.replaceAll(" ","_")}`);return r.type===G.CONSUME||r.type===G.TRANSFER_OUT?(g=-g,r.metadata.model_name&&(y=y+": "+z(r.metadata.model_name))):(r.metadata.product_name&&(y=y+": "+r.metadata.product_name),r.metadata.order_quantity&&r.metadata.order_quantity>1&&(y=y+` (x ${r.metadata.order_quantity})`)),{createdAt:c,amount:g,reason:y,request_path:V(r),request_number:r.request_number,type:r.type}}),F=o=>{const r=new Map;return o.forEach(c=>{const y=new Date(c.updated_at).toISOString().split("T")[0];r.has(y)||r.set(y,{createdAt:new Date(y),amount:0,request_number:0,request_paths:new Set,reasons:new Set});const C=r.get(y);let _=c.quantity;(c.type===G.CONSUME||c.type===G.TRANSFER_OUT)&&(_=-_),C.amount+=_,c.request_number&&(C.request_number+=c.request_number);const D=V(c);D&&C.request_paths.add(D);let B=e(`embedding.usage_reason_${c.type.replaceAll(" ","_")}`);c.metadata.model_name?B+=": "+z(c.metadata.model_name):c.metadata.product_name&&(B+=": "+c.metadata.product_name),C.reasons.add(B)}),Array.from(r.values()).map(c=>({createdAt:c.createdAt,amount:c.amount,request_number:c.request_number,request_path:Array.from(c.request_paths).join(", "),reason:Array.from(c.reasons).join(", "),type:c.amount>0?G.TRANSFER_IN:G.CONSUME}))},R=()=>{const o=Z.value.filter(L=>L.type===G.CONSUME&&L.request_number>0&&L.createdAt);if(o.length===0){M.value={avg:0,p50:0,p90:0,p99:0,min:0,max:0,last7DaysTotal:0};return}const r=o.map(L=>{const U=d.value?1440:60;return L.request_number/U}),c=Math.min(...r),g=Math.max(...r),y=r.reduce((L,U)=>L+U,0)/r.length,C=[...r].sort((L,U)=>L-U),_=Math.floor(C.length*.5),D=Math.floor(C.length*.9),B=Math.floor(C.length*.99),_e=new Date;_e.setDate(_e.getDate()-7);const we=Z.value.filter(L=>L.type===G.CONSUME&&L.request_number>0&&new Date(L.createdAt)>=_e).reduce((L,U)=>L+U.request_number,0);M.value={avg:Math.round(y),p50:Math.round(C[_])||0,p90:Math.round(C[D])||0,p99:Math.round(C[B])||0,min:Math.round(c),max:Math.round(g),last7DaysTotal:we}},ie=()=>{const o={};Z.value.filter(r=>r.type===G.CONSUME&&r.request_path).forEach(r=>{const c=r.request_path.split(", ");if(c.length>1){const g=1/c.length;c.forEach(y=>{y&&(o[y]||(o[y]={tokens:0,requests:0}),o[y].tokens+=Math.abs(r.amount)*g,r.request_number&&(o[y].requests+=r.request_number*g))})}else{const g=r.request_path;if(!g)return;o[g]||(o[g]={tokens:0,requests:0}),o[g].tokens+=Math.abs(r.amount),r.request_number&&(o[g].requests+=r.request_number)}}),Object.keys(o).forEach(r=>{o[r].tokens=Math.round(o[r].tokens),o[r].requests=Math.round(o[r].requests)}),O.value=o};function J(o,r){let c=r!==void 0?r(o):o;return c=c==null?"":String(c),c=c.split('"').join('""'),`"${c}"`}const se={props:l,t:e,apiKeyStore:f,keysInfoCache:b,dialogRef:a,isDailyView:d,filter:p,showEndpointStats:k,rpmStats:M,endpointStats:O,totalStats:K,onUsageHistoryDialogShow:P,onUsageHistoryDialogHide:x,onViewChange:re,getEndpoint:V,formattedNames:H,formatModelName:z,usageTableRef:Y,usageRows:Z,usageColumns:ne,getUsageHistory:A,processHourlyData:$,aggregateDataByDay:F,calculateRpmStats:R,calculateEndpointStats:ie,wrapCsvValue:J,exportTable:()=>{const o=d.value?y=>xe.formatDate(y,"YYYY-MM-DD"):y=>xe.formatDate(y,"YYYY-MM-DD-HH:mm:ss"),r=[ne.value.map(y=>J(y.label))].concat(Z.value.map(y=>ne.value.map(C=>C.name==="createdAt"?J(o(y[C.field]),void 0):J(y[C.field],C.format)).join(","))).join(`\r
`),c=d.value?"usage-history-daily.csv":"usage-history-hourly.csv";Ca(c,r,"text/csv")!==!0&&console.error("Browser denied file download...")},get QTable(){return We},get TRANSACTION_TYPE(){return G},get formatNumber(){return Ke}};return Object.defineProperty(se,"__isScriptSetup",{enumerable:!1,value:!0}),se}}),Ma={class:"row q-gutter-x-sm"},La={key:0,class:"text-positive"},Ra={key:1,class:"text-negative"},Da={class:"row full-width"},Ua={class:"text-caption text-dim"},Ba={class:"text-bold"},Ea={class:"row full-width"},Oa={class:"text-caption text-dim"},ja={class:"text-bold"},Na={class:"row full-width"},Qa={class:"text-caption text-primary",style:{"font-family":"monospace"}},Va={class:"column q-mt-xs"},za={class:"col-6 text-right"},Ha={class:"text-caption text-dim"},Fa={class:"text-bold"},Ya={class:"col-6 text-right"},Za={class:"text-caption text-dim"},Ja={class:"text-bold"};function Wa(i,s,l,e,f,b){return m(),v(ra,{ref:"dialogRef",maximized:"",onShow:e.onUsageHistoryDialogShow,onHide:e.onUsageHistoryDialogHide},{default:t(()=>[n(de,null,{default:t(()=>[n(le,{class:"q-pa-md"},{default:t(()=>[n(S,{avatar:""},{default:t(()=>[n(I,{name:"history"})]),_:1}),n(S,null,{default:t(()=>[n(E,null,{default:t(()=>[w(u(e.t("embedding.usage_history")),1)]),_:1}),n(E,{caption:""},{default:t(()=>[w(u(e.t("embedding.usage_history_explain")),1)]),_:1})]),_:1}),n(S,{side:""},{default:t(()=>[h("div",Ma,[n(ze,{modelValue:e.isDailyView,"onUpdate:modelValue":[s[0]||(s[0]=a=>e.isDailyView=a),e.onViewChange],label:e.isDailyView?e.t("embedding.daily_view"):e.t("embedding.hourly_view")},null,8,["modelValue","label"]),n(X,{flat:"",square:"",stretch:"",icon:"download",label:e.t("embedding.export_csv"),onClick:e.exportTable},null,8,["label"]),He(n(X,{icon:"close",flat:"",round:""},null,512),[[Ka]])])]),_:1})]),_:1}),n(ue),n(me,{horizontal:""},{default:t(()=>[n(me,{class:"col"},{default:t(()=>[n(e.QTable,{ref:"usageTableRef",flat:"",class:"bg-transparent","row-key":"createdAt",rows:e.usageRows,columns:e.usageColumns,loading:e.apiKeyStore.isBusyState.has(e.props.apiKey),onRequest:e.getUsageHistory,pagination:{rowsPerPage:15},filter:e.filter},{top:t(()=>[n(Te,{debounce:"300",modelValue:e.filter,"onUpdate:modelValue":s[1]||(s[1]=a=>e.filter=a),placeholder:e.t("key_manager.filter"),filled:"",square:"",class:"q-mr-md full-width"},{prepend:t(()=>[n(I,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-icon":t(a=>[n(te,{key:"icon",props:a},{default:t(()=>[a.row.amount>0||a.row.type===e.TRANSACTION_TYPE.TRANSFER_IN&&a.row.amount==0?(m(),N("span",La,"▲")):(m(),N("span",Ra,"▼"))]),_:2},1032,["props"])]),"body-cell-amount":t(a=>[n(te,{key:"amount",props:a},{default:t(()=>[w(u(e.formatNumber(Math.abs(a.row.amount))),1)]),_:2},1032,["props"])]),"body-cell-requestPath":t(a=>[n(te,{key:"request_path",props:a},{default:t(()=>[h("code",null,u(a.row.request_path),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter"])]),_:1}),n(ue,{vertical:""}),n(me,{class:"col-4 q-pa-none"},{default:t(()=>[h("div",Da,[(m(!0),N(oe,null,fe(e.totalStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col text-right q-hoverable q-pa-md"},{default:t(()=>[s[2]||(s[2]=h("span",{class:"q-focus-helper"},null,-1)),h("div",Ua,u(e.t(`embedding.total_${d}`)),1),h("div",Ba,u(e.formatNumber(a)),1)]),_:2},1024))),128))]),n(ue),h("div",Ea,[(m(!0),N(oe,null,fe(e.rpmStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col-4 text-right q-hoverable q-pa-md"},{default:t(()=>[s[3]||(s[3]=h("span",{class:"q-focus-helper"},null,-1)),h("div",Oa,u(e.t(`embedding.rpm_${d}`)),1),h("div",ja,u(e.formatNumber(a)),1)]),_:2},1024))),128))]),n(ue),h("div",Na,[(m(!0),N(oe,null,fe(e.endpointStats,(a,d)=>(m(),v(de,{square:"",flat:"",key:d,class:"col-6 text-right q-hoverable q-pa-md"},{default:t(()=>[s[4]||(s[4]=h("span",{class:"q-focus-helper"},null,-1)),h("div",Qa,u(d),1),h("div",Va,[h("div",za,[h("div",Ha,u(e.t("key_manager.tokens")),1),h("div",Fa,u(e.formatNumber(a.tokens)),1)]),h("div",Ya,[h("div",Za,u(e.t("key_manager.requests")),1),h("div",Ja,u(e.formatNumber(a.requests)),1)])])]),_:2},1024))),128))])]),_:1})]),_:1})]),_:1})]),_:1},512)}const Ga=ve(Aa,[["render",Wa],["__file","UsageHistoryDialog.vue"]]),Xa=ge({__name:"RateLimitComponent",props:{showActionButtons:Boolean,maximizedWindow:{type:Boolean,default:!1}},setup(i,{expose:s}){s();const l=i,{t:e}=be({useScope:"global"}),f=fa(),b=q(""),a=q([{icon:da,endpoint:"https://deepsearch.jina.ai/v1/chat/completions",name:e("deepsearch.title"),description:e("rate_limit.deepsearch"),requestType:"POST",woAPIkey:null,wAPIkey:"50 RPM",wPremium:"500 RPM",tokenCounting:e("rate_limit.total_token_counting"),latency:"56.7s",weight:f.name==="deepsearch"?100:99},{icon:Ue,endpoint:"https://r.jina.ai",name:e("reader.title"),description:e("rate_limit.rjinaai"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"500 RPM",wPremium:"5000 RPM",boostPossible:!0,tokenCounting:e("rate_limit.output_token_counting"),latency:"7.9s",weight:(f.name==="reader",100)},{icon:Ue,endpoint:"https://s.jina.ai",name:e("reader.title"),description:e("rate_limit.sjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"100 RPM",wPremium:"1000 RPM",boostPossible:!0,tokenCounting:e("rate_limit.flat_rate_per_request",{_number:1e4}),latency:"2.5s",weight:f.name==="reader"?99:100},{icon:ca,endpoint:"https://api.jina.ai/v1/segment",name:e("tokenizer.title"),description:e("rate_limit.tokenizer"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1,000 RPM",tokenCounting:e("rate_limit.no_token_counting"),latency:"0.3s",weight:f.name==="segmenter"?100:-1},{icon:ua,endpoint:"https://api.jina.ai/v1/embeddings",name:e("embedding.title"),description:e("rate_limit.embeddings"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",boostPossible:!0,tokenCounting:e("rate_limit.input_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),latencyExplain:e("rate_limit.batch_explain"),weight:f.name==="embeddings"?100:1},{icon:ma,endpoint:"https://api.jina.ai/v1/rerank",name:e("reranker.title"),description:e("rate_limit.reranker"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",boostPossible:!0,tokenCounting:e("rate_limit.input_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),latencyExplain:e("rate_limit.batch_explain"),weight:f.name==="reranker"?100:1},{icon:qe,endpoint:"https://api.jina.ai/v1/classify",name:`${e("classifier.title")} (${e("classifier.compare_table.zero_shot")})`,description:e("rate_limit.classifier_zero_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"200 RPM & 500,000 TPM",wPremium:"1,000 RPM & 3,000,000 TPM",tokenCounting:e("rate_limit.classifier_zero_shot_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?100:0},{icon:qe,endpoint:"https://api.jina.ai/v1/classify",name:`${e("classifier.title")} (${e("classifier.compare_table.few_shot")})`,description:e("rate_limit.classifier_few_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:e("rate_limit.classifier_few_shot_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?98:0},{icon:qe,endpoint:"https://api.jina.ai/v1/train",name:e("classifier.title"),description:e("rate_limit.classifier"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:e("rate_limit.classifier_token_counting"),latency:null,latencyDepends:e("rate_limit.depends"),weight:f.name==="classifier"?99:0}]),d=q([{name:"icon",field:"icon",label:"",align:"left"},{name:"name",field:"name",label:e("rate_limit.product"),align:"left"},{name:"endpoint",field:"endpoint",label:e("rate_limit.endpoint"),align:"left"},{name:"description",field:"description",label:e("rate_limit.description"),align:"left",sortable:!0},{name:"woAPIkey",field:"woAPIkey",label:e("rate_limit.woAPIkey"),align:"right"},{name:"wAPIkey",field:"wAPIkey",label:e("rate_limit.wAPIkey"),align:"right"},{name:"wPremium",field:"wPremium",label:e("rate_limit.wPremium"),align:"right"},{name:"latency",field:"latency",label:e("rate_limit.latency"),align:"right"},{name:"tokenCounting",field:"tokenCounting",label:e("rate_limit.tokenCounting"),align:"left"},{name:"requestType",field:"requestType",label:e("rate_limit.requestType"),align:"left"}]),p=q(d.value.map(K=>K.name)),k=j(()=>a.value.sort((K,P)=>K.experimental&&!P.experimental?1:!K.experimental&&P.experimental?-1:K.weight===P.weight?K.name.localeCompare(P.name):P.weight-K.weight)),M=q({rowsPerPage:12}),O={props:l,t:e,route:f,filter:b,rows:a,columns:d,visibleColumns:p,sortedRows:k,initialPagination:M};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),$a=["innerHTML"],et={class:"text-bold silver-foil"},at={class:"text-bold golden-foil"},tt={class:"row q-pa-md justify-center full-width"},nt={key:1},it={class:"silver-foil text-bold"},st={class:"golden-foil text-bold"},lt={key:1};function ot(i,s,l,e,f,b){return m(),v(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[n(We,{class:"my-sticky-column-table",flat:"",square:"","title-class":"q-pa-md",title:e.t("rate_limit.title"),rows:e.sortedRows,columns:e.columns,"row-key":"endpoint",pagination:e.initialPagination,"hide-pagination":"",filter:e.filter,"visible-columns":e.visibleColumns},_a({top:t(a=>[n(le,{class:"full-width q-pa-lg"},{default:t(()=>[n(S,null,{default:t(()=>[n(E,{class:"text-weight-bold"},{default:t(()=>[w(u(e.t("rate_limit.title")),1)]),_:1}),n(E,{caption:""},{default:t(()=>[h("span",{innerHTML:e.t("rate_limit.explain")},null,8,$a)]),_:1})]),_:1}),n(Ia),n(S,{side:""},{default:t(()=>[n(Te,{modelValue:e.filter,"onUpdate:modelValue":s[0]||(s[0]=d=>e.filter=d),outlined:"",square:"",dense:"",placeholder:e.t("rate_limit.search")},null,8,["modelValue","placeholder"])]),_:1}),n(S,{side:""},{default:t(()=>[n(Ve,{modelValue:e.visibleColumns,"onUpdate:modelValue":s[1]||(s[1]=d=>e.visibleColumns=d),multiple:"",outlined:"",square:"",dense:"","options-dense":"","display-value":i.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns.map(d=>d.name==="icon"?{...d,label:e.t("rate_limit.icon")}:d),"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),_:1}),l.maximizedWindow?T("",!0):(m(),v(S,{key:0,side:""},{default:t(()=>[n(X,{flat:"",square:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen},null,8,["icon","onClick"])]),_:2},1024))]),_:2},1024)]),"header-cell-woAPIkey":t(a=>[n(Se,{props:a},{default:t(()=>[h("span",null,u(a.col.label),1),n(I,{name:"key_off",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(Q,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.no_key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"header-cell-wAPIkey":t(a=>[n(Se,{props:a},{default:t(()=>[h("span",et,u(a.col.label),1),n(I,{name:"o_key",class:"cursor-pointer silver-foil q-ml-sm"},{default:t(()=>[n(Q,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"header-cell-wPremium":t(a=>[n(Se,{props:a},{default:t(()=>[h("span",at,u(a.col.label),1),n(I,{name:"o_key",class:"cursor-pointer golden-foil q-ml-sm"},{default:t(()=>[n(Q,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.premium_key_explain")),1)]),_:1})]),_:1})]),_:2},1032,["props"])]),"body-cell-icon":t(a=>[n(te,{props:a},{default:t(()=>[n(ka,{src:a.value,width:"36px",class:"relative-position"},{default:t(()=>[a.row.experimental?(m(),v(I,{key:0,name:"o_warning",color:"warning",class:"absolute-bottom-right"})):T("",!0)]),_:2},1032,["src"])]),_:2},1032,["props"])]),"body-cell-endpoint":t(a=>[n(te,{props:a},{default:t(()=>[h("code",null,u(a.value),1)]),_:2},1032,["props"])]),"body-cell-woAPIkey":t(a=>[n(te,{props:a},{default:t(()=>[a.value?(m(),N("span",nt,u(a.value),1)):(m(),v(I,{key:0,name:"block",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-wAPIkey":t(a=>[n(te,{props:a},{default:t(()=>[h("span",it,u(a.value),1),String(a.value).includes("X")?(m(),v(I,{key:0,name:"keyboard_double_arrow_up",color:"primary",class:"cursor-pointer"},{default:t(()=>[n(Q,{"max-width":"300px"},{default:t(()=>[w(u(e.t("rate_limit.batch_explain")),1)]),_:1})]),_:1})):T("",!0)]),_:2},1032,["props"])]),"body-cell-wPremium":t(a=>[n(te,{props:a},{default:t(()=>[a.row.boostPossible?(m(),v(I,{key:0,name:"trending_up",class:"golden-foil q-mr-xs"},{default:t(()=>[n(Q,null,{default:t(()=>[w(u(e.t("rate_limit.further_boost")),1)]),_:1})]),_:1})):T("",!0),h("span",st,u(a.value),1)]),_:2},1032,["props"])]),"body-cell-latency":t(a=>[n(te,{props:a},{default:t(()=>[a.value?(m(),N("span",lt,u(a.value),1)):(m(),v(Je,{key:0,icon:"ssid_chart",label:a.row.latencyDepends,size:"sm"},{default:t(()=>[w(u(a.value)+" ",1),a.row.latencyExplain?(m(),v(I,{key:0,name:"help",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(Q,{"max-width":"300px"},{default:t(()=>[w(u(a.row.latencyExplain),1)]),_:2},1024)]),_:2},1024)):T("",!0)]),_:2},1032,["label"]))]),_:2},1032,["props"])]),_:2},[l.showActionButtons?{name:"bottom",fn:t(()=>[h("div",tt,[n(Ze,{outline:"",square:""},{default:t(()=>[n(X,{outline:"",label:e.t("get_new_key"),square:"",icon:"o_key",href:"/?sui=apikey",padding:"md",target:"_blank"},null,8,["label"]),n(ue),n(X,{outline:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/contact-sales",padding:"md"},null,8,["label"])]),_:1})])]),key:"0"}:void 0]),1032,["title","rows","columns","pagination","filter","visible-columns"])]),_:1})}const rt=ve(Xa,[["render",ot],["__file","RateLimitComponent.vue"]]),dt=ge({__name:"AutoRechargeItem",props:Be({apiKey:{},disable:{type:Boolean},isAutoCharge:{type:Boolean},isPaidKey:{type:Boolean},navigateToPurchase:{type:Boolean},mode:{}},{autoRecharge:{type:Boolean},autoRechargeModifiers:{},rechargeThreshold:{type:Number},rechargeThresholdModifiers:{}}),emits:Be(["update"],["update:autoRecharge","update:rechargeThreshold"]),setup(i,{expose:s,emit:l}){s();const e=i,f=l,b=Ee(i,"autoRecharge"),a=Ee(i,"rechargeThreshold"),{t:d}=be({useScope:"global"}),p=Fe(),k=Ye(),{user:M}=ye(k),O=ae(),{products:K}=ye(O),P=Ie(),{isBusyState:x}=ye(P),re=[{label:"10K",value:1e4},{label:"1M",value:1e6},{label:"1B",value:1e9}],V=q(!1),H=j(()=>K.value.filter(A=>A.price>0).map(A=>({label:`$${A.price} / `+d(`embedding.${A.product_name.replace(".","_")}`),value:A.price_id}))),z=j(()=>{var A;return e.mode==="dashboard"||e.mode==="home"&&!((A=M.value)!=null&&A.uid)||e.disable}),ne={props:e,emit:f,autoRecharge:b,rechargeThreshold:a,t:d,$q:p,userStore:k,user:M,embeddingStore:O,products:K,apiKeyStore:P,isBusyState:x,rechargeThresholdOptions:re,hideSelected:V,productOptions:H,invokeApi:z,updateAutoRecharge:async A=>{var $;z.value&&(!e.isAutoCharge&&A?p.dialog({title:d("embedding.auto_recharge_enable_title"),message:d("embedding.auto_recharge_enable_message2"),options:{type:"radio",model:H.value[0].value,items:H.value},cancel:($=e.navigateToPurchase)!=null?$:!1}).onOk(async F=>{var se,o,r,c;x.value.delete(e.apiKey);const R=new URL(window.location.href),ie=Date.now().toString();R.searchParams.set("price_id",F),R.searchParams.set("session_id",ie),R.searchParams.set("register_status","success"),R.searchParams.set("api_key",xa(e.apiKey));const J=R.toString();R.searchParams.set("register_status","cancel");const he=R.toString();if(a.value)try{x.value.add(e.apiKey);const g={successUrl:J,cancelUrl:he,priceId:F,threshold:a.value,email:(o=(se=M.value)==null?void 0:se.email)!=null?o:void 0,currency:(r=navigator.language)!=null&&r.includes("zh")||(c=k.language)!=null&&c.includes("zh")?"eur":void 0},y=await O.setAutoRecharge(e.apiKey,g);y&&(window.location.href=y)}finally{x.value.delete(e.apiKey)}}).onCancel(()=>{b.value=!1}):e.isAutoCharge&&!A&&p.dialog({title:d("embedding.auto_recharge_confirm_title"),message:d("embedding.auto_recharge_confirm_message"),cancel:!0}).onOk(async()=>{x.value.add(e.apiKey);try{await O.cancelAutoRecharge(e.apiKey)||(b.value=!0)}finally{x.value.delete(e.apiKey)}f("update")}).onCancel(()=>{b.value=!0}))},updateThreshold:async A=>{if(!z.value)return;const $=a.value;b.value&&e.isAutoCharge&&(V.value=!0,p.dialog({title:d("key_manager.recharge_threshold_confirm_title"),message:d("key_manager.recharge_threshold_confirm_message",{_threshold:Sa(A)}),cancel:!0}).onOk(async()=>{x.value.add(e.apiKey),V.value=!1;try{await O.updateAutoRecharge(e.apiKey,A)}finally{x.value.delete(e.apiKey)}}).onCancel(()=>{V.value=!1,a.value=$}))}};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}});function ct(i,s,l,e,f,b){return m(),v(le,{tag:"label",disable:l.disable,onClick:s[3]||(s[3]=Oe(()=>{},["stop"]))},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(S,{key:0,avatar:""},{default:t(()=>[n(I,{name:"currency_exchange"})]),_:1})):T("",!0),n(S,null,{default:t(()=>[n(E,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.auto_recharge")),1)]),_:1}),n(E,{caption:"",lines:"2"},{default:t(()=>[w(u(e.t("embedding.auto_recharge_description")),1)]),_:1}),n(E,{caption:"",lines:"3",class:"text-dim"},{default:t(()=>[n(I,{name:"info"}),w(" "+u(e.t("embedding.new_price_apply")),1)]),_:1}),l.isAutoCharge?(m(),v(Q,{key:0,"max-width":"40rem"},{default:t(()=>[w(u(e.t("embedding.auto_recharge_enable")),1)]),_:1})):T("",!0)]),_:1}),n(S,{side:""},{default:t(()=>[n(ze,{modelValue:e.autoRecharge,"onUpdate:modelValue":[s[0]||(s[0]=a=>e.autoRecharge=a),e.updateAutoRecharge],color:"primary",disable:l.disable||e.isBusyState.has(l.apiKey),"checked-icon":"check"},null,8,["modelValue","disable"])]),_:1}),n(S,{side:""},{default:t(()=>[n(Ve,{modelValue:e.rechargeThreshold,"onUpdate:modelValue":[s[1]||(s[1]=a=>e.rechargeThreshold=a),e.updateThreshold],options:e.rechargeThresholdOptions,"hide-selected":e.hideSelected,disable:l.disable||e.isBusyState.has(l.apiKey),label:e.t("embedding.recharge_threshold"),style:{"min-width":"160px"},"option-label":a=>`< ${a.label} ${e.t("embedding.tokens")}`,onClick:s[2]||(s[2]=Oe(()=>{},["prevent"])),"emit-value":"","map-options":""},null,8,["modelValue","hide-selected","disable","label","option-label"])]),_:1})]),_:1},8,["disable"])}const ut=ve(dt,[["render",ct],["__file","AutoRechargeItem.vue"]]),mt=ge({__name:"PurchaseComponent",props:{purchaseKey:{default:""},hideUsage:{type:Boolean,default:!1},hideKey:{type:Boolean,default:!1},hideStripeInfo:{type:Boolean,default:!1},hideFreePlan:{type:Boolean,default:!1},autoCharge:{type:Boolean},threshold:{},mode:{default:"home"}},setup(i,{expose:s}){s();const l=i,{t:e}=be({useScope:"global"}),f=Fe(),b=Ye(),a=Ie(),d=ae(),{apiKey:p,products:k,isApiKeyInfoLoading:M,isPremiumPaidUser:O,apiKeyInfo:K}=ye(d),P=q(l.purchaseKey||p.value),x=q(K==null?void 0:K.value),re=q(!1);ya(async()=>{var D;re.value=!0;let _;try{_=await d.getKeyInfo(P.value)}catch(B){console.log("Error getting key info",B)}x.value=_||((D=a.keysInfoCache)==null?void 0:D[P.value])||(K==null?void 0:K.value),H.value=l.autoCharge||!F.value||R.value,z.value=l.threshold||1e6,re.value=!1});const V=q(0),H=q(!0),z=q(1e6),Y=q(""),Z=q(!0),ne={"1M tokens":["paywall.no_commercial"],"1B tokens":["paywall.standard_key","paywall.key_manager","paywall.priority_support"],"11B tokens":["paywall.premium_key","paywall.premium_key_manager","paywall.premium_support","paywall.consulting_us"]},A=j(()=>k.value.map(_=>({..._,isActive:()=>Y.value===_.price_id,tag:()=>e(`embedding.${_.product_name}_targetUser`),title:()=>e(`embedding.${_.product_name.replace(".","_")}`),description:()=>e(`embedding.${_.product_name.replace(".","_")}_intuition1`),isFree:_.price===0,priceLabel:()=>_.price>0?`$${_.price}`:e("embedding.free"),priceDescription:()=>_.price>0?`${(_.price/_.token_quantity*1e6).toFixed(3)} ${e("embedding.per_m")}`:e("embedding.1M_free_description"),handler:()=>_.price>0?se(_.price_id):void 0}))),$=j(()=>{var _,D;return(D=(_=x.value)==null?void 0:_.wallet.total_balance)!=null?D:0}),F=j(()=>{var _;return!!((_=x.value)!=null&&_.email)}),R=j(()=>{var _;return F.value&&!!((_=x.value)!=null&&_.metadata.auto_recharge)}),ie=j(()=>!!P.value&&(x==null?void 0:x.value)!==void 0),J=j(()=>!ie.value||M.value),he=j(()=>{var _;return((_=x.value)==null?void 0:_.metadata.disable_self_purchase)||!1}),se=async _=>{var Me,Le,Re;if(J.value||Y.value)return;const D=k.value.find(Pe=>Pe.price_id===_),B=new URL(window.location.href),_e=Date.now().toString();B.searchParams.set("price_id",_),B.searchParams.set("session_id",_e),B.searchParams.set("purchase_status","cancel");const we=B.toString();B.searchParams.set("purchase_status","success");const L=B.toString();Y.value=_;const U={price_id:_,success_url:L,cancel_url:we};(Me=b.user)!=null&&Me.email&&(U.email=b.user.email);const Ce=localStorage.getItem(ha);Ce&&(U.metadata={sales_key:Ce}),H.value&&(U.metadata={...U.metadata,auto_recharge:!0,threshold:z.value});const ke=navigator.language,Ge=(Le=b.language)!=null?Le:"";(ke!=null&&ke.includes("zh")||Ge.includes("zh"))&&(U.metadata={...U.metadata,currency:"eur"}),D&&gtag("event","begin_checkout",{currency:D.currency,value:D.price,items:[{id:D.product_id,name:D.product_name}]});const Ae=await d.checkoutWithStripe(P.value,U);if(Y.value="",!Ae)return;d.apiKey=P.value,((Re=a.keys)==null?void 0:Re.some(Pe=>Pe.key===P.value))||await a.addKey(P.value),await a.setPrimaryKey(d.apiKey),d.getCurrentKeyInfo(),window.location.href=Ae.url},o=async()=>{x.value=await d.getKeyInfo(P.value),H.value=!F.value||R.value,p.value===P.value&&d.setApiKeyInfo(x.value)},r=async()=>{ie.value&&P.value!==p.value&&f.dialog({title:e("embedding.api_key_update_title"),message:e("embedding.api_key_update_message"),cancel:!0}).onOk(async()=>{p.value=P.value,o(),await a.addKey(P.value),a.setPrimaryKey(P.value)})},c=()=>{J.value||f.dialog({component:Ga,componentProps:{apiKey:P.value}})};pa(async()=>{await d.getProducts(),setInterval(()=>{V.value=(V.value+1)%ga.length},3e3)});const g=q(!1),C={props:l,t:e,$q:f,userStore:b,apiKeyStore:a,embeddingStore:d,apiKey:p,products:k,isApiKeyInfoLoading:M,isPremiumPaidUser:O,apiKeyInfo:K,inputApiKey:P,inputApiKeyInfo:x,isBusy:re,currentIndex:V,autoRecharge:H,rechargeThreshold:z,currentPriceID:Y,isPwd:Z,tierFeatures:ne,productCards:A,apiKeyTokens:$,isPaidUser:F,isAutoRecharge:R,isInputApiKeyValid:ie,isInputApiKeyDisabled:J,isSelfPurchaseDisabled:he,checkoutProduct:se,getKeyInfo:o,updateApiKey:r,openUsageHistoryDialog:c,isApiKeyCopyDone:g,copyApiKey:()=>{!p.value||g.value||(qa(p.value).then(()=>{f.notify({message:e("copy_to_clipboard_success"),icon:"done"}),g.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{g.value=!1},1800))},get flatEnterprises(){return ba},get formatNumber(){return Ke},RateLimitComponent:rt,AutoRechargeItem:ut};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),ft=["innerHTML"],_t=["innerHTML","data-text"],yt={class:"row justify-center text-caption text-dim q-pt-md q-pb-sm"},ht={class:"row justify-center q-gutter-x-sm"};function pt(i,s,l,e,f,b){return m(),N(oe,null,[e.isBusy?(m(),v(Xe,{key:0,indeterminate:"",size:"1px"})):T("",!0),n(je,{class:"q-pa-md q-gutter-y-sm"},{default:t(()=>[!l.hideUsage&&e.isInputApiKeyValid?(m(),v(le,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(S,{key:0,avatar:""},{default:t(()=>[n(I,{name:"data_usage"})]),_:1})):T("",!0),n(S,null,{default:t(()=>[n(E,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.remaining")),1)]),_:1}),n(E,{class:ee({"text-negative":e.apiKeyTokens<0})},{default:t(()=>[h("span",{innerHTML:e.t("embedding.remaining_left",{_leftTokens:e.formatNumber(e.apiKeyTokens)})},null,8,ft)]),_:1},8,["class"])]),_:1}),n(S,{side:""},{default:t(()=>[n(Ze,{square:"",outline:""},{default:t(()=>[n(X,{outline:"",square:"",icon:"refresh",disable:e.isInputApiKeyDisabled,onClick:e.getKeyInfo,loading:e.isApiKeyInfoLoading},{default:t(()=>[n(Q,null,{default:t(()=>[w(u(e.t("embedding.refresh_token_count1")),1)]),_:1})]),_:1},8,["disable","loading"]),n(ue),n(X,{square:"",outline:"","no-caps":"",label:e.t("embedding.last_7_days"),disable:e.isInputApiKeyDisabled,onClick:e.openUsageHistoryDialog},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})):T("",!0),l.hideKey?T("",!0):(m(),v(le,{key:1},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(S,{key:0,avatar:""},{default:t(()=>[n(I,{name:"o_key",class:ee({"golden-foil":e.isPremiumPaidUser,"silver-foil":!e.isPremiumPaidUser&&e.isPaidUser})},null,8,["class"])]),_:1})):T("",!0),n(S,null,{default:t(()=>[n(Te,{"input-style":"font-family: monospace",modelValue:e.inputApiKey,"onUpdate:modelValue":s[1]||(s[1]=a=>e.inputApiKey=a),"hide-bottom-space":"",type:e.isPwd?"password":"text",hint:e.t("embedding.key_to_top_up"),filled:"",square:"",label:e.inputApiKey?`${e.t("embedding.key_warn_v2")}`:e.t("embedding.key_enter_placeholder_to_topup"),error:!e.isInputApiKeyValid,"error-message":e.inputApiKey?e.t("embedding.input_api_key_error1"):"","input-class":"ellipsis"},{append:t(()=>[n(I,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[0]||(s[0]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),prepend:t(()=>[n(X,{flat:"",square:"",icon:e.isApiKeyCopyDone?"done":"content_copy",color:e.isApiKeyCopyDone?"primary":"",onClick:e.copyApiKey,stretch:""},{default:t(()=>[n(Q,null,{default:t(()=>[w(u(e.t("copy")),1)]),_:1})]),_:1},8,["icon","color"])]),after:t(()=>[e.isInputApiKeyValid&&e.inputApiKey!==e.apiKey?(m(),v(X,{key:0,icon:"save",onClick:e.updateApiKey,stretch:"",square:"",flat:""})):T("",!0)]),_:1},8,["modelValue","type","hint","label","error","error-message"])]),_:1})]),_:1})),e.isSelfPurchaseDisabled?T("",!0):(m(),N(oe,{key:2},[l.hideStripeInfo?T("",!0):(m(),v(le,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(m(),v(S,{key:0,avatar:"",side:"",class:"relative-position"},{default:t(()=>[n(I,{name:"fab fa-stripe"}),n(I,{name:"o_verified_user",size:"xs",class:"absolute-bottom-right q-mr-sm q-mb-xs text-positive"})]),_:1})):T("",!0),n(S,null,{default:t(()=>[n(E,{class:"text-bold"},{default:t(()=>[w(u(e.t("embedding.buy_more_quota")),1)]),_:1}),n(E,{caption:"",lines:"2"},{default:t(()=>[w(u(e.t("embedding.tax_may_apply")),1)]),_:1})]),_:1}),e.isPaidUser?(m(),v(S,{key:1,side:"",class:"q-pa-none"},{default:t(()=>[n(X,{outline:"","icon-right":"open_in_new",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[n(Q,null,{default:t(()=>[w(u(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["label"])]),_:1})):T("",!0)]),_:1})),n(de,{class:"row q-pa-md q-py-none bg-transparent",flat:""},{default:t(()=>[(m(!0),N(oe,null,fe(e.productCards.filter(a=>!l.hideFreePlan||!a.isFree),(a,d)=>(m(),N("div",{key:d,class:ee(["col-12 col-sm-6 q-pa-sm cursor-pointer",{"col-lg-4":!l.hideFreePlan}])},[He((m(),v(de,{bordered:"",flat:"",class:ee(["full-width full-height column justify-between",!e.isInputApiKeyDisabled&&!e.currentPriceID&&!a.isFree?"q-hoverable bg-mixed-200":"cursor-not-allowed"]),square:"",style:va(a.isActive()?"cursor: wait !important;":""),onClick:a.handler},{default:t(()=>[s[5]||(s[5]=h("span",{class:"q-focus-helper"},null,-1)),n(me,{class:"column items-center non-selectable text-h2 q-pt-xl"},{default:t(()=>[n(Je,{label:a.tag(),outline:"",square:"",style:{"border-radius":"0"},size:"sm",class:ee(["q-my-xl",{"silver-border":a.product_name==="1B tokens","gold-border":a.product_name==="11B tokens"}])},null,8,["label","class"]),h("span",{innerHTML:a.title(),"data-text":a.title(),class:ee(["text-weight-bold",{"text-dim":a.product_name==="1M tokens","silver-foil":a.product_name==="1B tokens","golden-foil":a.product_name==="11B tokens"}])},null,10,_t),h("div",yt,[w(u(e.t("embedding.includes"))+" ",1),n(Q,{"max-width":"300px"},{default:t(()=>[w(u(a.description()),1)]),_:2},1024)]),h("div",ht,[(m(!0),N(oe,null,fe(e.flatEnterprises,p=>(m(),v(I,{key:p.label,name:`img:${p.icon}`,size:"sm"},{default:t(()=>[n(Q,null,{default:t(()=>[h("b",null,u(e.t(p.label)),1),s[4]||(s[4]=h("br",null,null,-1)),w(" "+u(e.t(p.caption)),1)]),_:2},1024)]),_:2},1032,["name"]))),128))])]),_:2},1024),n(me,{class:"column items-center non-selectable"},{default:t(()=>[n(je,{dense:""},{default:t(()=>[(m(!0),N(oe,null,fe(e.tierFeatures[a.product_name],(p,k)=>(m(),v(le,{key:p},{default:t(()=>[n(S,null,{default:t(()=>[n(E,{caption:""},{default:t(()=>[a.product_name!=="1M tokens"?(m(),v(I,{key:0,name:k===0?"key":"task_alt",class:ee({"golden-foil":a.product_name==="11B tokens","silver-foil":a.product_name==="1B tokens"})},null,8,["name","class"])):T("",!0),w(" "+u(e.t(p)),1)]),_:2},1024),n(Q,{"max-width":"300px"},{default:t(()=>[w(u(e.t(`${p}_description`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),n(me,{class:ee({"bg-mixed-300":!a.isFree})},{default:t(()=>[n(le,null,{default:t(()=>[n(S,null,{default:t(()=>[n(E,{class:ee({"text-bold":!a.isFree})},{default:t(()=>[w(u(a.priceLabel()),1)]),_:2},1032,["class"]),n(E,{caption:""},{default:t(()=>[w(u(a.priceDescription()),1)]),_:2},1024)]),_:2},1024),a.isFree?T("",!0):(m(),v(S,{key:0,side:""},{default:t(()=>[n(I,{name:"add_shopping_cart"})]),_:1}))]),_:2},1024)]),_:2},1032,["class"]),n(Ne,{showing:e.currentPriceID===a.price_id,label:e.t("embedding.wait_stripe"),"label-style":"font-size: 0.8em",size:"sm",class:"non-selectable lock-blur"},null,8,["showing","label"])]),_:2},1032,["class","style","onClick"])),[[wa,!a.isFree&&!e.isInputApiKeyDisabled&&!e.currentPriceID]])],2))),128)),n(Ne,{showing:!e.isInputApiKeyValid,class:"lock-small-blur",label:e.t("embedding.right_api_key_to_charge"),size:"0"},null,8,["showing","label"])]),_:1})],64)),n(Pa,{label:e.t("rate_limit.understanding"),icon:e.$q.screen.gt.sm?"speed":void 0,"header-class":"text-bold",caption:e.t("rate_limit.understanding_description")},{default:t(()=>[n(e.RateLimitComponent,{"show-action-buttons":!1})]),_:1},8,["label","icon","caption"]),e.isSelfPurchaseDisabled?T("",!0):(m(),v(e.AutoRechargeItem,{key:3,"api-key":e.inputApiKey,"api-key-info":e.inputApiKeyInfo,"is-paid-key":e.isPaidUser,"is-auto-charge":e.isAutoRecharge,"auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":s[2]||(s[2]=a=>e.autoRecharge=a),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":s[3]||(s[3]=a=>e.rechargeThreshold=a),disable:e.isInputApiKeyDisabled,mode:l.mode,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable","mode"]))]),_:1})],64)}const Ct=ve(mt,[["render",pt],["__scopeId","data-v-816f3729"],["__file","PurchaseComponent.vue"]]),At="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='320'%20zoomAndPan='magnify'%20viewBox='0%200%20240%20239.999995'%20height='320'%20preserveAspectRatio='xMidYMid%20meet'%20version='1.0'%3e%3cpath%20fill='%23ffffff'%20d='M%20164.820312%2048%20L%20195%2048%20L%20195%2078.179688%20L%20164.820312%2078.179688%20Z%20M%20164.820312%2085.726562%20L%20195%2085.726562%20L%20195%20115.90625%20L%20164.820312%20115.90625%20Z%20M%20195%20123.449219%20L%20164.820312%20123.449219%20L%20164.820312%20153.632812%20L%20195%20153.632812%20Z%20M%20164.820312%20161.175781%20L%20195%20161.175781%20L%20195%20191.359375%20L%20164.820312%20191.359375%20Z%20M%2076.792969%2053.28125%20L%2067.707031%2063.375%20L%2077.796875%2072.460938%20L%2086.886719%2062.367188%20Z%20M%2067.707031%20101.101562%20L%2076.792969%2091.007812%20L%2086.886719%20100.09375%20L%2077.796875%20110.1875%20Z%20M%2076.792969%20128.734375%20L%2067.707031%20138.824219%20L%2077.796875%20147.914062%20L%2086.886719%20137.820312%20Z%20M%2067.707031%20176.550781%20L%2076.792969%20166.460938%20L%2086.886719%20175.546875%20L%2077.796875%20185.640625%20Z%20M%2048.96875%2057.054688%20L%2045%2065.191406%20L%2053.136719%2069.160156%20L%2057.105469%2061.023438%20Z%20M%2045%20102.917969%20L%2048.96875%2094.78125%20L%2057.105469%2098.75%20L%2053.136719%20106.886719%20Z%20M%2048.96875%20132.507812%20L%2045%20140.644531%20L%2053.136719%20144.613281%20L%2057.105469%20136.476562%20Z%20M%2045%20178.371094%20L%2048.96875%20170.230469%20L%2057.105469%20174.199219%20L%2053.136719%20182.339844%20Z%20M%20113.113281%2050.261719%20L%2097.757812%2059.859375%20L%20107.355469%2075.214844%20L%20122.710938%2065.621094%20Z%20M%2097.757812%2097.585938%20L%20113.113281%2087.988281%20L%20122.710938%20103.347656%20L%20107.355469%20112.941406%20Z%20M%20113.113281%20125.714844%20L%2097.757812%20135.3125%20L%20107.355469%20150.667969%20L%20122.710938%20141.070312%20Z%20M%2097.757812%20173.035156%20L%20113.113281%20163.441406%20L%20122.710938%20178.796875%20L%20107.355469%20188.394531%20Z%20M%20152.050781%2048%20L%20128.839844%2054.65625%20L%20135.496094%2077.863281%20L%20158.703125%2071.210938%20Z%20M%20128.839844%2092.378906%20L%20152.050781%2085.726562%20L%20158.703125%20108.933594%20L%20135.496094%20115.589844%20Z%20M%20152.050781%20123.449219%20L%20128.839844%20130.105469%20L%20135.496094%20153.316406%20L%20158.703125%20146.660156%20Z%20M%20128.839844%20167.832031%20L%20152.050781%20161.175781%20L%20158.703125%20184.386719%20L%20135.496094%20191.042969%20Z%20M%20128.839844%20167.832031%20'%20fill-opacity='1'%20fill-rule='evenodd'/%3e%3c/svg%3e";export{ut as A,Ct as P,Ne as Q,rt as R,Ga as U,Ca as e,At as t,Ie as u};
