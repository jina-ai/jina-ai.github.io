import{Q as p,a as v}from"./QItemLabel.0e95891b.js";import{P as L,b2 as le,bI as se,e as ie,a6 as de,aA as V,az as re,f as O,w as ue,K as ce,J as me,a5 as ge,h as pe,a7 as _,a8 as t,ah as l,an as U,a9 as g,ak as q,ad as o,af as r,ag as s,ae as E,Z as P,ac as W,am as F,aa as _e,ab as be,bG as fe,ai as he,bC as ve,bB as ye,aO as j}from"./index.c36c472b.js";import{Q as y}from"./QTooltip.7f669063.js";import{Q as Me}from"./QList.68f7772b.js";import{Q as ke}from"./QBtnDropdown.6fb82bb2.js";import{C as G}from"./ClosePopup.5641ac93.js";import{u as we}from"./embedding.68224a04.js";function ze(c){const u=Object.assign({noopener:!0},c),n=[];for(const i in u){const d=u[i];d===!0?n.push(i):(se(d)||typeof d=="string"&&d!=="")&&n.push(i+"="+d)}return n.join(",")}function H(c,u,n){let i=window.open;if(L.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)i=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(c,{openExternal:!0})}const d=i(c,"_blank",ze(n));if(d)return L.is.desktop&&d.focus(),d;u&&u()}var qe=(c,u,n)=>{if(L.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(i=>{i?window.SafariViewController.show({url:c},le,u):H(c,u,n)});return}return H(c,u,n)};const Fe={class:"full-width ellipsis q-pl-md"},Se=ie({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1},allowBAAI:{type:Boolean,default:!1},demoOnly:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded"],setup(c,{emit:u}){const{t:n}=de({useScope:"global"}),i=we(),{models:d,baseDeModel:K,baseEnModel:A,baseZhModel:Z,jinaRerankerV1:J}=V(i),X=re(),{language:k}=V(X),C=O(null);let b=null;const w=O(!1),f=c,h=u,x=()=>{var e;h("chooseModel",(e=Z.value)!=null?e:A.value)},Q=()=>{var e;h("chooseModel",(e=K.value)!=null?e:A.value)};ue(k,e=>{f.category==="embedding"&&(e&&["zh-CN","zh-TW"].includes(e)?x():e==="de"&&Q())});const Y=()=>{var m;const e=((m=C.value)==null?void 0:m.$el)||C.value;e instanceof HTMLElement?(b=new IntersectionObserver(async a=>{a[0].isIntersecting&&(await ae(),b==null||b.disconnect())},{root:null,threshold:.1}),b.observe(e)):console.error("Element is not an HTMLElement:",e)};ce(()=>{me(()=>{setTimeout(()=>{Y()},100)})}),ge(()=>{b&&b.disconnect()});const ee=[{name:"bge-small-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-small-en",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-m3",meta_data:{token_length:1024,output_dim:2048,size:"1.3B",language:"multilingual"},request_path:["embedding"]}],B=pe(()=>f.allowBAAI?ee:d.value.filter(e=>{const m=f.category==="multi-embeddings",a=e.request_path,M=m?["multi-embeddings","embedding"]:[f.category];return Array.isArray(a)?a.some(z=>M.includes(z)):M.includes(a)}).sort((e,m)=>m.replicas-e.replicas)),ae=async()=>{w.value=!0,await i.getModels(),w.value=!1,f.category==="embedding"||f.category==="multi-embeddings"?d.value.length>0&&(k.value&&["zh-CN","zh-TW"].includes(k.value)?x():k.value==="de"?Q():h("chooseModel",A.value)):f.category==="rank"&&h("chooseModel",J.value);for(const e of i.models)e.replicas=await i.getReplicas(i.apiKey,e.name);h("modelsLoaded")},te=e=>{ne("event","embedding_view_model_detail",{location:oe.location.href,model:e}),qe(`https://huggingface.co/jinaai/${e}`)},ne=window.gtag,oe=window.document,S=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,m)=>(g(),_(ke,{"no-caps":"",flat:"",square:"",stretch:"",icon:"img:"+(e.category==="rank"?l(ve):l(ye)),loading:w.value,"disable-dropdown":w.value,class:U(e.$q.screen.lt.sm?"full-width q-py-md":""),ref_key:"componentRef",ref:C},{label:t(()=>[q("div",Fe,[o(E,{class:U(e.currentModel?"dynamic-text":"")},{default:t(()=>[o(p,{caption:"",class:"text-grey text-left"},{default:t(()=>[r(s(e.category==="rank"?l(n)("embedding.select_rerank_model"):l(n)("embedding.select_embedding_model")),1)]),_:1}),e.currentModel?(g(),_(p,{key:0},{default:t(()=>{var a;return[q("code",null,s((a=e.currentModel)==null?void 0:a.name),1)]}),_:1})):e.demoOnly&&B.value.length>0?(g(),_(p,{key:1},{default:t(()=>[q("code",null,s(B.value[0].name),1)]),_:1})):(g(),_(p,{key:2},{default:t(()=>[r(s(l(n)("embedding.none")),1)]),_:1}))]),_:1},8,["class"])])]),default:t(()=>[o(Me,null,{default:t(()=>[e.allowNone?P((g(),_(W,{key:0,clickable:"",active:!e.currentModel,onClick:m[0]||(m[0]=a=>h("chooseModel",null)),class:"q-pa-md"},{default:t(()=>[o(E,null,{default:t(()=>[o(p,{overline:"",caption:""},{default:t(()=>[r(s(l(n)("embedding.none")),1)]),_:1}),o(p,{class:"text-weight-bold"},{default:t(()=>[r(s(l(n)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[j],[G]]):F("",!0),(g(!0),_e(he,null,be(B.value,(a,M)=>{var z;return P((g(),_(W,{key:M,clickable:"",active:a.name===((z=e.currentModel)==null?void 0:z.name),onClick:I=>h("chooseModel",a),class:"q-pa-md"},{default:t(()=>[o(E,null,{default:t(()=>[o(p,{overline:"",caption:""},{default:t(()=>[q("code",null,s(a.name),1)]),_:2},1024),o(p,{class:"text-weight-bold"},{default:t(()=>[r(s(l(n)(`embedding.${a.name.replace(".","_")}_description`)),1)]),_:2},1024),o(p,{caption:"",class:"row"},{default:t(()=>{var I,D,R,T,$,N;return[e.allowBAAI?F("",!0):(g(),_(v,{key:0,label:a.replicas>0?l(n)("embedding.running"):l(n)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:t(()=>[o(y,{"max-width":"300px"},{default:t(()=>[r(s(l(n)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"])),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(g(),_(v,{key:1,color:a.name!==((I=e.currentModel)==null?void 0:I.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:l(n)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):F("",!0),o(v,{label:a.meta_data.token_length,square:"",color:a.name!==((D=e.currentModel)==null?void 0:D.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(g(),_(v,{key:2,label:a.meta_data.output_dim,square:"",color:a.name!==((R=e.currentModel)==null?void 0:R.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):F("",!0),o(v,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((T=e.currentModel)==null?void 0:T.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),o(v,{label:S(a.meta_data.language),square:"",color:a.name!==(($=e.currentModel)==null?void 0:$.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.language_explain",{_language:S(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),o(v,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==((N=e.currentModel)==null?void 0:N.name)?"grey-5":"",style:{"border-radius":"0"},onClick:fe(Ae=>te(a.name),["stop"]),clickable:"",label:l(n)("embedding.opensource")},{default:t(()=>[o(y,null,{default:t(()=>[r(s(l(n)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"])]}),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[j],[G]])}),128))]),_:1})]),_:1},8,["icon","loading","disable-dropdown","class"]))}});export{Se as _};
