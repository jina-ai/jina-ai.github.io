import{cd as ue,d1 as ce,s as X,m as T,p as me,K as de,dk as fe,dy as _e,w as pe,j as P,af as Z,a0 as K,aI as q,aQ as I,a1 as l,a2 as n,a3 as a,a4 as t,aj as c,aa as _,ak as p,ac as d,ai as x,a6 as D,ab as u,ah as ye,u as be,an as N,k as M,V as ve,n as ge,ao as he,ap as ke,dH as Se,cC as xe,cM as Te,cN as De,q as k,aM as G,a8 as A,a7 as B,ad as v,aK as Qe,ae as we,a5 as H,a9 as Y,T as Ce,am as Me,aV as Le}from"./index-C40jjZHq.js";import{Q as Ne}from"./QToolbar-R0zcKyXV.js";import{u as Ae,a as Be,b as Ee,Q as qe}from"./QTabs-IL1r1t3I.js";import{P as Ie,d as Re,Q as Pe,a as Ke,b as Fe,c as Oe}from"./PurchaseSuccessDialog-Dbezwccg.js";import{a as R,Q as J}from"./QItemLabel-BptFOWn_.js";import{Q as Ve}from"./QMenu-yfVowHiU.js";import{Q as S}from"./QTooltip-Dl6slTQR.js";import{Q as ze}from"./QBadge-CKWd4kU4.js";import{c as Ue}from"./copy-to-clipboard-DUrBxyTp.js";import{a as je,b as Ge}from"./finetune-BKMRzlcF.js";import{S as W,E,L as He,P as Ye}from"./PurchaseDialog-BMGrH8sY.js";import{u as Je}from"./embedding-0plovmLf.js";import{u as We}from"./QForm-CqLCmPdi.js";import"./QResizeObserver-DekLu5ij.js";import"./QLinearProgress-Du71pLZ4.js";import"./format-DyQxkAtJ.js";import"./TouchPan-dkUMTPQj.js";import"./touch-BjYP5sR0.js";import"./position-engine-Faq5cO2J.js";import"./use-dialog-plugin-component-B62sbrgT.js";import"./package-D9JPNs5w.js";import"./QBtnGroup-CAStwgR0.js";import"./QExpansionItem-DN6XMWV5.js";import"./QTable-fi_FqUDL.js";import"./use-fullscreen-CWe1WmOH.js";import"./ClosePopup-yw5D34iF.js";import"./QSpace-Bw-dp8yH.js";var Xe="[object Number]";function Ze(i){return typeof i=="number"||ue(i)&&ce(i)==Xe}const $e=X({name:"QToolbarTitle",props:{shrink:Boolean},setup(i,{slots:s}){const r=T(()=>"q-toolbar__title ellipsis"+(i.shrink===!0?" col-shrink":""));return()=>me("div",{class:r.value},de(s.default))}}),ea=X({name:"QRouteTab",props:{...fe,...Ae},emits:Be,setup(i,{slots:s,emit:r}){const e=_e({useDisableForRouterLinkProps:!1}),{renderTab:y,$tabs:f}=Ee(i,s,r,{exact:T(()=>i.exact),...e});return pe(()=>`${i.name} | ${i.exact} | ${(e.resolvedLink.value||{}).href}`,f.verifyRouteModel),()=>y(e.linkTag.value,e.linkAttrs.value)}}),aa=P({__name:"DrawerItemComponent",props:{item:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},setup(i,{expose:s}){s();const{t:r}=Z({useScope:"global"}),e={t:r};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function ta(i,s,r,e,y,f){return q((l(),n(x,{to:{name:"api",params:{tab:r.item.name}},"active-class":"text-primary",clickable:""},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(_,{name:r.item.iconType==="svg"||r.item.icon.includes(".svg")?`img:${r.isActive?r.item.activeIcon:r.item.icon}`:r.item.icon},null,8,["name"])]),_:1}),t(c,null,{default:a(()=>[t(R,{lines:"1"},{default:a(()=>[p(d(e.t(r.item.label)),1)]),_:1})]),_:1})]),_:1},8,["to"])),[[I]])}const oa=K(aa,[["render",ta],["__file","DrawerItemComponent.vue"]]),sa=P({__name:"AnimatedLogo",props:{miniState:Boolean},setup(i,{expose:s}){s();const r={};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),ra={style:{height:"56px"},class:"row items-center absolute-top"},la={style:{"padding-left":"20px"}},na={viewBox:"0 0 232 100",style:{width:"56px",height:"56px",transition:"all 0.2s ease-in-out"}},ia={fill:"#FFFFFF"};function ua(i,s,r,e,y,f){return l(),D("div",ra,[u("div",la,[(l(),D("svg",na,[u("g",ia,[s[1]||(s[1]=u("circle",{id:"j-dot",cx:"15",cy:"84.5",r:"15"},null,-1)),s[2]||(s[2]=u("path",{id:"letter-j",d:"M61.5 36.35c2 0 3.6 1.6 3.6 3.6v29.3c0 16.7-13.5 30.3-30 30.5V69.3l-.1-29.4c0-2 1.6-3.6 3.6-3.6h23.3z"},null,-1)),u("g",{style:ye({opacity:r.miniState?0:1,transition:"opacity 0.2s ease-in-out"})},s[0]||(s[0]=[u("circle",{id:"top-dot",cx:"96",cy:"15",r:"15"},null,-1),u("path",{id:"letter-i",d:"M81 40c0-2 1.5-3.6 3.6-3.6h23.4c2 0 3.6 1.6 3.6 3.6v41c0 2-1.6 3.6-3.6 3.6H84.6c-2 0-3.6-1.6-3.6-3.6V40z"},null,-1),u("path",{id:"letter-n",d:"M128.5 39.8c0-2 1.6-3.6 3.6-3.6h13.3l.5.1c15 .2 27.2 12.3 27.6 27.3v17.3c0 2-1.6 3.6-3.6 3.6h-37.8c-2 0-3.6-1.6-3.6-3.6V39.8z"},null,-1),u("path",{id:"letter-a",d:"M207.2 84h-.2c-12.6-.7-22.5-11.2-22.5-24 0-13.3 10.8-24.1 24.1-24.1 12.8 0 23.3 10 24 22.6h.1V80.4c0 2-1.6 3.6-3.6 3.6h-21.9z"},null,-1)]),4)])]))])])}const ca=K(sa,[["render",ua],["__file","AnimatedLogo.vue"]]),ma=P({__name:"SeFoLayout",setup(i,{expose:s}){s();const{t:r}=Z({useScope:"global"}),e=ge(),y=he(),f=ke(),Q=be(),{user:o}=N(Q),g=Je(),{apiKeyTokens:F,isPremiumPaidUser:$,isPaidUser:ee}=N(g),O=We(),{keys:ae,primaryKeyInfo:L}=N(O),te=M(!0),V=M(!0),w=M(),oe=W.filter(m=>m.tooling),se=T(()=>{let m=[],h={};return W.forEach(b=>{b.name===E.KEY_MANAGER?h=b:b.showsOn.includes("menu")&&m.push(b)}),o.value.uid&&m.unshift(h),m}),re=T(()=>{var m,h,b,j;return Ze((h=(m=L.value)==null?void 0:m.wallet)==null?void 0:h.total_balance)?(j=(b=L.value)==null?void 0:b.wallet)==null?void 0:j.total_balance:F.value}),le=m=>{w.value&&clearTimeout(w.value),w.value=setTimeout(()=>{V.value=!m},100)},ne=()=>{o.value.uid?y.push({params:{tab:E.KEY_MANAGER}}):(Te(De,"click_login_button"),e.dialog({component:He,componentProps:{user:o},persistent:!0}))},ie=T(()=>o.value.uid?o.value.displayName||o.value.email||o.value.uid:r("key_manager.login"));function z(){if(f.query.purchase_status==="success"){const m=new Date(parseInt(f.query.session_id)).toLocaleString();Se.create({component:Ie,componentProps:{purchasedTime:m,hideActions:!0}})}}ve(()=>{z(),g.getCurrentKeyInfo()});const C=M(!1),U={t:r,$q:e,router:y,route:f,userStore:Q,user:o,embeddingStore:g,apiKeyTokens:F,isPremiumPaidUser:$,isPaidUser:ee,apiKeyStore:O,keys:ae,primaryKeyInfo:L,drawer:te,miniState:V,timeout:w,seFoMoreRoutes:oe,seFoRoutes:se,availableTokens:re,handleMouseMove:le,login:ne,userDisplayName:ie,checkPurchaseStatus:z,isApiKeyCopyDone:C,copyApiKey:()=>{!g.apiKey||C.value||(Ue(g.apiKey).then(()=>{e.notify({message:r("copy_to_clipboard_success"),icon:"done"}),C.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{C.value=!1},1800))},onBuy:()=>{e.dialog({component:Ye,componentProps:{purchaseKey:g.apiKey}})},get formatNumber(){return je},get formatNumberShort(){return Ge},get EMBEDDING_TABS(){return E},DrawerItemComponent:oa,AnimatedLogo:ca,get formatKey(){return xe}};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),da=["src","alt"],fa={class:"absolute-bottom"},_a={style:{"font-family":"monospace"}},pa=["src","alt"],ya={class:"ellipsis"};function ba(i,s,r,e,y,f){const Q=Le("router-view");return l(),n(Re,{view:"lHh Lpr lff",class:"main-layout"},{default:a(()=>[e.$q.screen.gt.sm?v("",!0):(l(),n(Pe,{key:0,bordered:"",reveal:"",class:"bg-mixed-200 text-white","height-hint":"98"},{default:a(()=>[t(Ne,{class:"q-pa-none"},{default:a(()=>[t(k,{flat:"",square:"",stretch:"",icon:"img:/J.svg",to:{name:"landing"}}),t($e,{class:"my-font non-selectable"}),t(k,{flat:"",stretch:"",square:"",onClick:e.userStore.logout},{default:a(()=>[e.user.photoURL?(l(),n(G,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[u("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,da)]),_:1})):(l(),n(_,{key:1,size:"sm",round:"",name:"person"})),t(_,{name:"logout",class:"q-ml-md"})]),_:1},8,["onClick"])]),_:1}),e.user&&e.$q.screen.lt.md?(l(),n(qe,{key:0,shrink:"","mobile-arrows":"",align:"left"},{default:a(()=>[(l(!0),D(B,null,A([...e.seFoRoutes,...e.seFoMoreRoutes],o=>(l(),n(ea,{key:o.name,to:{name:"api",params:{tab:o.name}},label:o.label?e.t(o.label):"",icon:o.tag==="usage"?`img:${o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)?o.activeIcon:o.icon}`:o.icon,"active-class":"text-primary","no-caps":"",exact:"",replace:""},null,8,["to","label","icon"]))),128))]),_:1})):v("",!0)]),_:1})),e.$q.screen.gt.sm?(l(),n(Ke,{key:1,modelValue:e.drawer,"onUpdate:modelValue":s[1]||(s[1]=o=>e.drawer=o),"show-if-above":"",mini:e.miniState,onMouseover:s[2]||(s[2]=o=>e.handleMouseMove(!0)),onMouseout:s[3]||(s[3]=o=>e.handleMouseMove(!1)),"mini-to-overlay":"",width:250,breakpoint:500,bordered:"",class:"bg-mixed-200"},{default:a(()=>[u("div",{class:"row items-center absolute-top cursor-pointer",onClick:s[0]||(s[0]=o=>e.router.push({name:"landing"}))},[t(e.AnimatedLogo,{"mini-state":e.miniState},null,8,["mini-state"])]),t(Fe,{class:"fit",style:{"max-height":"calc(100% - 112px)","margin-top":"56px"},"horizontal-thumb-style":{opacity:"0"}},{default:a(()=>[t(J,null,{default:a(()=>[t(Qe,{"enter-to-class":"list-enter-from","enter-active-class":"animated bounceIn","leave-active-class":"animated backOutRight","leave-from-class":"list-leave-to","move-class":"list-move","enter-from-class":"list-enter-from","leave-to-class":"list-leave-to"},{default:a(()=>[(l(!0),D(B,null,A(e.seFoRoutes,o=>(l(),n(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)},null,8,["item","is-active"]))),128)),q((l(),n(x,{clickable:"","active-class":"text-primary"},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(_,{name:"service_toolbox"})]),_:1}),t(c,null,{default:a(()=>[t(R,{lines:"1"},{default:a(()=>[p(d(e.t("embedding.tools")),1)]),_:1})]),_:1}),t(Ve,{class:"bg-mixed-300 lock-blur","auto-close":""},{default:a(()=>[t(J,{class:"cursor-pointer",style:{width:"250px"}},{default:a(()=>[(l(!0),D(B,null,A(e.seFoMoreRoutes,o=>(l(),n(e.DrawerItemComponent,{item:o,key:o==null?void 0:o.label,"is-active":o.name===(e.route.params.tab||e.EMBEDDING_TABS.CODE)},null,8,["item","is-active"]))),128))]),_:1})]),_:1})]),_:1})),[[I]])]),_:1})]),_:1})]),_:1}),u("div",fa,[t(Ce,{appear:"","enter-active-class":"animated faster fadeInLeft","leave-active-class":"animated faster fadeOutLeft"},{default:a(()=>[e.miniState?v("",!0):(l(),n(we,{key:0,flat:"",square:"",class:"bg-mixed-300"},{default:a(()=>[t(H,{class:"q-pb-none text-dim"},{default:a(()=>[p(d(e.t("key_manager.available_resources")),1)]),_:1}),t(H,{class:"q-pa-none"},{default:a(()=>[t(x,null,{default:a(()=>[t(c,{side:""},{default:a(()=>[t(_,{name:"o_data_usage"})]),_:1}),t(c,null,{default:a(()=>[u("span",{class:Y(["text-h5",{"text-negative":e.availableTokens<=0}])},d(e.formatNumberShort(e.availableTokens)),3),t(S,null,{default:a(()=>[p(d(e.t("key_manager.balance_primary_key")+": "+e.formatNumber(e.availableTokens)),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(k,{icon:"add_shopping_cart",flat:"",square:"",onClick:e.onBuy},{default:a(()=>[t(S,null,{default:a(()=>[p(d(e.t("embedding.buy_more_quota")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(x,null,{default:a(()=>[t(c,{side:"",class:"relative-position"},{default:a(()=>[t(_,{name:"o_key"}),e.keys.length>0?(l(),n(ze,{key:0,floating:"",rounded:"",label:e.keys.length,class:"bg-mixed-400"},{default:a(()=>[t(S,null,{default:a(()=>[p(d(e.t("key_manager.total_keys")+": "+e.keys.length),1)]),_:1})]),_:1},8,["label"])):v("",!0)]),_:1}),t(c,null,{default:a(()=>[u("span",_a,d(e.formatKey(e.embeddingStore.apiKey,{tailOnly:!0})),1),t(S,null,{default:a(()=>[p(d(e.t("key_manager.is_primary")),1)]),_:1})]),_:1}),t(c,{side:""},{default:a(()=>[t(k,{icon:"content_copy",flat:"",square:"",onClick:e.copyApiKey})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),q((l(),n(x,{clickable:"",style:{height:"56px"},onClick:e.login},{default:a(()=>[t(c,{avatar:"",class:"q-my-sm q-pr-none user-avatar"},{default:a(()=>[e.user.photoURL?(l(),n(G,{key:0,size:"sm",round:"",class:"bordered-avatar"},{default:a(()=>[u("img",{src:e.user.photoURL,referrerpolicy:"no-referrer",alt:e.userDisplayName},null,8,pa)]),_:1})):(l(),n(_,{key:1,size:"sm",round:"",name:"person"}))]),_:1}),t(c,null,{default:a(()=>[t(R,{lines:"1",class:"row items-center"},{default:a(()=>[e.isPaidUser?(l(),n(_,{key:0,name:"verified",class:Y([{"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser},"q-mr-xs"])},null,8,["class"])):v("",!0),u("span",ya,d(e.userDisplayName),1),t(S,null,{default:a(()=>[p(d(e.userDisplayName),1)]),_:1})]),_:1})]),_:1}),e.user.uid&&!e.miniState?(l(),n(c,{key:0,side:""},{default:a(()=>[t(k,{flat:"",square:"",id:"more_menu",icon:"logout",onClick:Me(e.userStore.logout,["stop"])},null,8,["onClick"])]),_:1})):v("",!0)]),_:1})),[[I]])])]),_:1},8,["modelValue","mini"])):v("",!0),t(Oe,null,{default:a(()=>[t(Q)]),_:1})]),_:1})}const Ha=K(ma,[["render",ba],["__file","SeFoLayout.vue"]]);export{Ha as default};
