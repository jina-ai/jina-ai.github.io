import{Q as ye}from"./QImg.238a5969.js";import{_ as we,Q as ge,a as xe}from"./AskAnythingToolTip.c026acb6.js";import{e as ne,a6 as le,f as u,h as G,K as ie,a7 as v,a8 as a,at as J,u as de,aC as be,a9 as c,ad as e,au as m,ah as t,bL as K,j as $,b$ as ae,af as w,ag as p,an as g,az as qe,aa as T,ab as I,ai as j,am as se,ak as M,aj as ke,bA as $e,as as n,al as _}from"./index.ab2a1788.js";import{u as Te}from"./useMetaTags.d51a5162.js";import{_ as je}from"./EmbeddingComponent.a97518a0.js";import{T as Re}from"./TitleBlock.5fd98972.js";import{_ as Ce}from"./FAQComponent.9b65978b.js";import{Q as R}from"./QTooltip.602440fc.js";import{Q as A}from"./QSkeleton.6a927066.js";import{Q as re}from"./QLinearProgress.9ede4d17.js";import{c as Qe}from"./copy-to-clipboard.0d795009.js";import{_ as oe}from"./TypingText.f05b030d.js";import"./QItemLabel.cd0eb3dd.js";import"./QTabs.34d6420d.js";import"./QResizeObserver.83610aa6.js";import"./rtl.4aeb06d5.js";import"./QTabPanels.bf1b64c2.js";import"./use-panel.af8cac10.js";import"./touch.3df10340.js";import"./position-engine.37426134.js";import"./use-cache.b0833c75.js";import"./QList.d1f74bb1.js";import"./QBtnDropdown.b06d3eec.js";import"./QMenu.7f05e679.js";import"./ClosePopup.6db0fedb.js";import"./embedding.b5eb7683.js";import"./QTable.4f2c56db.js";import"./QSelect.a2f4d8a0.js";import"./use-fullscreen.511fac95.js";import"./ModelDropDown.06dae9b2.js";import"./regexp.d033247d.js";import"./QForm.815c9554.js";import"./QExpansionItem.0269539c.js";var Pe="/assets/explain.442c5c8a.svg";const Le=ne({__name:"ReaderDemoComponent",setup(ce){const{t:d}=le({useScope:"global"}),l=u(""),i=u(""),C=u(!1),h=u(!1),H=u("Summarize the content in two sentences."),ue=de(),W=["https://news.ycombinator.com/newest","https://huggingface.co/jinaai","https://twitter.com/elonmusk","https://en.wikipedia.org/wiki/Dot-com_bubble","https://arxiv.org/abs/2310.19923","https://about.google/","https://www.stanford.edu/","https://www.netflix.com/"],X=()=>W[Math.floor(Math.random()*W.length)],x=u(X()),Q=G(()=>`https://r.jina.ai/${x.value}`),me=G(()=>"https://corsproxy.io/?"+encodeURIComponent(x.value)),pe=async()=>{C.value=!0;try{const s=await fetch(me.value);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.text();l.value=`\`\`\`html
${o}
\`\`\``}catch(s){l.value=s.message}finally{C.value=!1}},Y=u(null),b=u([]),fe=u([]),P=u([]),U=u(!1),V=u(!1),z=u(!1),B=u(!1),N=u(!1),Z=async()=>{await Promise.all([ee(!0),ee(!1)])},ee=async s=>{var E,D,L;if(!await((E=Y.value)==null?void 0:E.validate()))return Promise.reject();const y={parameters:{question:H.value,context:s?l.value.slice(0,3e3):i.value.slice(0,3e3)}};s?(b.value=[],U.value=!0,z.value=!0):(P.value=[],V.value=!0,B.value=!0);const r="https://api.promptperfect.jina.ai/ERK3nqviaFRyfGbkBsXD";try{const f=await fetch(r,{headers:{"content-type":"application/json"},body:JSON.stringify(y),method:"POST"});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);if((D=f.headers.get("content-type"))!=null&&D.includes("text/event-stream")){if(f.body){const S=f.body.getReader(),O=new TextDecoder;for(;;){const{done:q,value:k}=await S.read();if(q){s?z.value=!1:B.value=!1;break}k&&O.decode(k).split(`

`).forEach(he=>{const F=he.replace(/data: /g,"");F&&(s?b.value.push(F):P.value.push(F))})}}}else if((L=f.headers.get("content-type"))!=null&&L.includes("application/json")){const S=(await f.json()).data;s?b.value=[S]:P.value=[S]}else throw new Error("Unknown response type")}catch(f){ue.notify({color:"negative",message:d("landing_page.error",{message:f}),icon:"report_problem"})}finally{s?U.value=!1:V.value=!1}},_e=async()=>{var o,y;h.value=!0,fe.value=[];const s=await fetch(Q.value,{headers:{Accept:"text/event-stream","x-no-cache":"true"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);if((o=s.headers.get("content-type"))!=null&&o.includes("text/event-stream")){if(s.body){const r=s.body.getReader(),E=new TextDecoder;for(;;){const{done:D,value:L}=await r.read();if(D){h.value=!1;break}L&&E.decode(L).split(`

`).forEach(O=>{let q=O.replace(/^event: data\ndata: /,"");if(q)if(!q.trim().endsWith('"}'))i.value=`\`\`\`json
${q}
\`\`\``.trim();else{const k=JSON.parse(q);i.value=`\`\`\`markdown
Title: ${k.title}

URL Source: ${k.url}

Markdown Content: ${k.content}
\`\`\``.trim()}})}}}else if((y=s.headers.get("content-type"))!=null&&y.includes("application/json")){const r=(await s.json()).data.replace(/^event: data\ndata: /,"");i.value=`\`\`\`json
${r}
\`\`\``}else throw new Error("Unknown response type")},ve=async()=>{h.value=!0;try{const s=await fetch(Q.value);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.text();i.value=`\`\`\`md
${o}
\`\`\``}catch(s){i.value=s.message}finally{h.value=!1}},te=async()=>{await Promise.all([(N.value?_e:ve)(),pe()])};return ie(()=>{te().then(()=>{Z()})}),(s,o)=>{const y=be("q-markdown");return c(),v(J,{bordered:"",flat:"",square:"",class:"col-12 col-md-10"},{default:a(()=>[e(m,{horizontal:""},{default:a(()=>[e(m,{class:"col"},{default:a(()=>[e(t(K),{modelValue:x.value,"onUpdate:modelValue":o[2]||(o[2]=r=>x.value=r),label:t(d)("reader.demo.your_url"),type:"url",loading:C.value,hint:t(d)("reader.demo.your_url_hint")},{prepend:a(()=>[e($,{dense:"",square:"",flat:"",icon:"casino",onClick:o[0]||(o[0]=r=>x.value=X())})]),append:a(()=>[e($,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:o[1]||(o[1]=r=>t(ae)(x.value))},{default:a(()=>[e(R,null,{default:a(()=>[w(p(t(d)("demo.open")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","label","loading","hint"])]),_:1}),e(g,{vertical:""}),e(m,{class:"col"},{default:a(()=>[e(t(K),{"model-value":Q.value,label:t(d)("reader.demo.reader_url"),readonly:"",loading:h.value,"bottom-slots":""},{append:a(()=>[e($,{flat:"",dense:"",square:"",icon:"content_copy",onClick:o[3]||(o[3]=r=>t(Qe)(Q.value))},{default:a(()=>[e(R,null,{default:a(()=>[w(p(t(d)("copy")),1)]),_:1})]),_:1}),e($,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:o[4]||(o[4]=r=>t(ae)(Q.value))},{default:a(()=>[e(R,null,{default:a(()=>[w(p(t(d)("demo.open")),1)]),_:1})]),_:1})]),hint:a(()=>[e(qe,{modelValue:N.value,"onUpdate:modelValue":o[5]||(o[5]=r=>N.value=r),label:t(d)("reader.demo.stream_mode"),class:"text-caption q-mr-md",icon:"water",dense:""},{default:a(()=>[e(R,{"max-width":"300px"},{default:a(()=>[w(p(t(d)("reader.demo.stream_mode_explain")),1)]),_:1})]),_:1},8,["modelValue","label"]),w(" "+p(t(d)("reader.demo.reader_url_hint")),1)]),_:1},8,["model-value","label","loading"])]),_:1})]),_:1}),e(g),e($,{square:"",label:t(d)("reader.demo.fetch"),class:"full-width",icon:"download",onClick:te,padding:"md"},null,8,["label"]),e(g),e(m,{horizontal:""},{default:a(()=>[e(m,{class:"col"},{default:a(()=>[C.value?(c(),T(j,{key:0},I([100,200,300,300,200],r=>e(A,{type:"text",width:`${r}px`,key:r},null,8,["width"])),64)):(c(),v(y,{key:1,src:l.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1}),e(g,{vertical:""}),e(m,{class:"col"},{default:a(()=>[h.value?(c(),T(j,{key:0},I([100,300,200,200],r=>e(A,{type:"text",width:`${r}px`,key:r},null,8,["width"])),64)):(c(),v(y,{key:1,src:i.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1})]),_:1}),e(g),e(m,null,{default:a(()=>[e(t(K),{label:t(d)("reader.demo.ask_question"),modelValue:H.value,"onUpdate:modelValue":o[6]||(o[6]=r=>H.value=r),ref_key:"questionRef",ref:Y,hint:t(d)("reader.demo.ask_question_hint")},{append:a(()=>[e($,{icon:"send",onClick:Z,padding:"md",square:""})]),_:1},8,["label","modelValue","hint"])]),_:1}),e(g),e(m,{horizontal:""},{default:a(()=>[U.value||b.value.length?(c(),v(J,{key:0,class:"col"},{default:a(()=>[U.value?(c(),v(m,{key:0},{default:a(()=>[e(se,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:a(()=>[e(R,null,{default:a(()=>[w(p(t(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(c(),T(j,null,I([0,1,2,3],r=>e(A,{key:r,class:"q-my-xs",width:r>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(c(),T(j,{key:1},[e(m,{class:"q-pa-lg"},{default:a(()=>[e(oe,{text:b.value,"speed-time":b.value?50:0},null,8,["text","speed-time"])]),_:1}),z.value?(c(),v(re,{key:0,indeterminate:""})):M("",!0)],64))]),_:1})):M("",!0),e(g,{vertical:""}),V.value||P.value.length?(c(),v(J,{key:1,class:"col"},{default:a(()=>[V.value?(c(),v(m,{key:0},{default:a(()=>[e(se,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:a(()=>[e(R,null,{default:a(()=>[w(p(t(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(c(),T(j,null,I([0,1,2,3],r=>e(A,{key:r,class:"q-my-xs",width:r>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(c(),T(j,{key:1},[e(m,{class:"q-pa-lg"},{default:a(()=>[e(oe,{text:P.value,"speed-time":B.value?50:0},null,8,["text","speed-time"])]),_:1}),B.value?(c(),v(re,{key:0,indeterminate:""})):M("",!0)],64))]),_:1})):M("",!0)]),_:1})]),_:1})}}});const Se={class:"col-12 col-md-11 q-py-xl q-mx-xs-xs q-mx-sm-sm q-mx-md-md q-mx-lg-lg q-mx-xl-xl q-ma-xl relative-position"},Ue={class:"row q-mt-xl q-pt-xl justify-center"},Ve={class:"row justify-center items-center"},Be={class:"col-11 col-md-8"},Ee={class:"q-my-xl row justify-center items-center"},De={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},Ie={class:"row q-mt-xl q-pt-xl justify-center"},Me={class:"q-my-xl row justify-center items-center"},Ae={class:"row q-mt-xl q-py-xl justify-center"},He={class:"q-my-xl text-center text-grey-5 text-h6 text-weight-light"},ze={class:"row justify-center"},Ne={class:"col-12 col-md-9 q-pb-xl"},Oe=ne({__name:"ReaderPage",setup(ce){const d=ke(),{t:l}=le({useScope:"global"});Te({page:"reader",banner:"banner-reader-api.png",url:"reader"});const i=de();return G(()=>[{title:l("reader.better_input"),description:l("reader.better_input_description"),name:"improve_input",icon:"mdi-import",anchor:"apiform"},{title:l("reader.fast_stream"),description:l("reader.fast_stream_description"),name:"stream",icon:"mdi-hydro-power",anchor:"benchmark"},{title:l("reader.free"),description:l("reader.free_description"),name:"free_forever",icon:"mdi-currency-usd-off",anchor:"apiform"}]),ie(async()=>{$e(d.hash)}),(C,h)=>(c(),v(ge,null,{default:a(()=>[n("div",{class:_(["row items-center contact-us-background",t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"])},[n("div",Se,[e(Re,{title:t(l)("landing_page.reader"),tagline:t(l)("reader.reader_description"),"large-title":!0,"button-anchor":"#apiform","button-label":t(l)("landing_page.get_api_now"),"button-icon":"code","button2-anchor":"#demo","button2-icon":"play_arrow","button2-label":t(l)("reader.demo.tagline")},null,8,["title","tagline","button-label","button2-label"])])],2),n("div",{class:_(t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"what_reader"},[n("div",Ue,[n("div",{class:_(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[n("h2",{class:_(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},p(t(l)("reader.what_is")),3)],2)]),n("div",Ve,[n("div",Be,[e(ye,{src:Pe})])]),n("div",Ee,[n("div",De,p(t(l)("reader.what_is_answer_long")),1)])],2),n("div",{class:_([t(i).screen.lt.sm?"q-pa-md":"q-pa-xl","bg-dark"]),id:"demo"},[n("div",Ie,[n("div",{class:_(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[n("h2",{class:_(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},p(t(l)("reader.demo.tagline")),3)],2)]),n("div",Me,[e(Le)])],2),n("div",{class:_(t(i).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"apiform"},[n("div",Ae,[n("div",{class:_(t(i).screen.lt.md?"q-mb-lg q-pb-md":"")},[n("h2",{class:_(["text-h2 text-white q-mb-lg text-center",t(i).screen.lt.md?"justify-center":""])},p(t(l)("reader.title")),3)],2)]),n("div",He,p(t(l)("reader.reader_description")),1),n("div",ze,[n("div",Ne,[e(je,{"show-function":"reader","require-a-p-i-key":!1})])])],2),e(Ce,{"faq-sources":["reader.faq_v1"],dark:!0},null,8,["faq-sources"]),e(xe)]),_:1}))}});var jt=we(Oe,[["__scopeId","data-v-5623ae74"]]);export{jt as default};
