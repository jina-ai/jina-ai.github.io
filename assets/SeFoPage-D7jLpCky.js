import{bS as la,c1 as pa,cT as ha,cE as Ka,bX as Va,dv as La,dw as ia,cJ as Aa,bZ as Ca,cQ as Oa,cI as qa,bU as Ma,cM as Ba,j as ce,a2 as me,a3 as _,a4 as x,a5 as t,a6 as a,a7 as ue,n as we,a0 as _e,k as w,m as G,a9 as re,af as k,ag as m,aO as xe,aq as te,aE as be,aR as fe,aa as ee,ah as se,ai as ve,bp as ba,q as ae,aF as Oe,aG as qe,w as Fe,W as Le,a8 as W,ac as ka,ab as q,aP as ua,aQ as Ye,am as ye,ae as K,du as $e,ad as Q,c6 as ze,ba as ja,aN as na,aj as Ke,u as je,ap as de,V as wa,b9 as Ea,_ as d,av as Ua,s as Na,ax as Ha,p as Ce,az as Ga,J as Fa,b7 as za,b2 as Qe,aS as Qa,dx as Xe,aA as Ya,b8 as Xa,ao as Wa,an as Ja,cf as Za}from"./index-DEthwRlz.js";import{Q as $a}from"./QBanner-B6FHsvrX.js";import{Q as et}from"./QPage-CA9Vr6fk.js";import{K as Ee,E as $,g as da}from"./se-fo-BrKSZf1a.js";import{d as at,a as ra,u as Te,Q as Ta,S as tt,b as nt}from"./use-dialog-plugin-component-CeVKbJmm.js";import{j as rt,u as ot,c as st,M as lt,k as it,L as ut,U as dt,A as ct,i as mt,E as _t,a as gt,R as ft,C as vt,b as yt,I as pt,T as ht,S as ca,B as bt,D as kt,e as wt}from"./BrowserInfoDialog-D0MgSTJZ.js";import{P as Et,Q as Tt}from"./PurchaseTab-nXbzxgoZ.js";import{Q as oe}from"./QTooltip-BLKIxny7.js";import{c as ke,d as De,e as Ge,f as oa,Q as St}from"./date-CxUcBmdm.js";import{u as Ae,A as Rt,U as xt,R as Pt}from"./finetune-CcXFrGdK.js";import{b as pe,a as Sa,Q as ea}from"./QChip-BDEF2aVA.js";import{Q as Re,a as Ve,b as Dt}from"./QLinearProgress-gGchlGlR.js";import{C as Me}from"./ClosePopup-4JdEnJzx.js";import{Q as A}from"./QItemLabel-DeC63joe.js";import{c as aa}from"./copy-to-clipboard-B3eozy8A.js";import{P as It}from"./PurchaseDialog-DjgG0f5o.js";import{Q as Be}from"./QList-rJXbgSyL.js";import{t as ma,c as Kt,L as Vt}from"./LoginDialog-CYoiMlir.js";import{t as _a}from"./toNumber-CCIJ8Com.js";import{a as Lt,c as At}from"./_setToArray-DUae3uiI.js";import{a as Ct,c as Ot,f as qt,o as Mt}from"./orderBy-CB2_k954.js";import{_ as Bt}from"./dynamic-import-helper-BheWnx7M.js";import{Q as Ra}from"./QForm-CrOpC_MF.js";import{C as jt}from"./ChatComponent-DysK1cAj.js";import{u as ga}from"./useMetaTags-BUPJ_gdW.js";import{u as Ut}from"./useModels-Dk_e5XF8.js";import{C as Nt}from"./ContactSalesForm-DjMYvr3b.js";import{Q as fa}from"./QBadge-By73DPrq.js";import{Q as Ht}from"./QSpinnerRings--PFI94mb.js";import"./QMenu-D01_NFwD.js";import"./position-engine-cQi8WkQ7.js";import"./blogs-DeWvIw9J.js";import"./VideoDialog-BQbY-KQ9.js";import"./TouchPan-x_zriR-M.js";import"./touch-BjYP5sR0.js";import"./QTab-N-s-JBha.js";import"./QTabs-BLMwtzKy.js";import"./QResizeObserver-CYjUBW_k.js";import"./QBtnDropdown-BKpkh1o5.js";import"./QExpansionItem-B98wSskS.js";import"./use-fullscreen-WeGgDhDq.js";import"./package-D9JPNs5w.js";import"./isSymbol-Cs2-z1KQ.js";import"./QScrollObserver-GnTxekam.js";import"./QSpinnerDots-if0DTFgx.js";var va=la?la.isConcatSpreadable:void 0;function Gt(c){return pa(c)||ha(c)||!!(va&&c&&c[va])}function Ft(c,r,s,e,v){var p=-1,n=c.length;for(s||(s=Gt),v||(v=[]);++p<n;){var o=c[p];s(o)&&Ct(v,o)}return v}var We=function(){return Ka.Date.now()},zt="Expected a function",Qt=Math.max,Yt=Math.min;function Xt(c,r,s){var e,v,p,n,o,i,y=0,E=!1,g=!1,P=!0;if(typeof c!="function")throw new TypeError(zt);r=_a(r)||0,Va(s)&&(E=!!s.leading,g="maxWait"in s,p=g?Qt(_a(s.maxWait)||0,r):p,P="trailing"in s?!!s.trailing:P);function h(R){var f=e,I=v;return e=v=void 0,y=R,n=c.apply(I,f),n}function D(R){return y=R,o=setTimeout(b,r),E?h(R):n}function U(R){var f=R-i,I=R-y,l=r-f;return g?Yt(l,p-I):l}function T(R){var f=R-i,I=R-y;return i===void 0||f>=r||f<0||g&&I>=p}function b(){var R=We();if(T(R))return B(R);o=setTimeout(b,U(R))}function B(R){return o=void 0,P&&e?h(R):(e=v=void 0,n)}function V(){o!==void 0&&clearTimeout(o),y=0,e=i=v=o=void 0}function L(){return o===void 0?n:B(We())}function C(){var R=We(),f=T(R);if(e=arguments,v=this,i=R,f){if(o===void 0)return D(i);if(g)return clearTimeout(o),o=setTimeout(b,r),h(i)}return o===void 0&&(o=setTimeout(b,r)),n}return C.cancel=V,C.flush=L,C}var Wt=200;function Jt(c,r,s,e){var v=-1,p=at,n=!0,o=c.length,i=[],y=r.length;if(!o)return i;r.length>=Wt&&(p=At,n=!1,r=new Lt(r));e:for(;++v<o;){var E=c[v],g=E;if(E=E!==0?E:0,n&&g===g){for(var P=y;P--;)if(r[P]===g)continue e;i.push(E)}else p(r,g,e)||i.push(E)}return i}var Zt=La(function(c,r){return ia(c)?Jt(c,Ft(r,1,ia)):[]}),$t="[object Map]",en="[object Set]",an=Object.prototype,tn=an.hasOwnProperty;function nn(c){if(c==null)return!0;if(Aa(c)&&(pa(c)||typeof c=="string"||typeof c.splice=="function"||Ca(c)||Oa(c)||ha(c)))return!c.length;var r=Ot(c);if(r==$t||r==en)return!c.size;if(qa(c))return!qt(c).length;for(var s in c)if(tn.call(c,s))return!1;return!0}var rn="[object Number]";function on(c){return typeof c=="number"||Ma(c)&&Ba(c)==rn}function sn(c){return on(c)&&c!=+c}const ln=ce({__name:"ContainedPurchaseTab",setup(c,{expose:r}){r();const s={PurchaseTab:Et};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function un(c,r,s,e,v,p){return _(),x(ue,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.PurchaseTab)]),_:1})}const dn=me(ln,[["render",un],["__file","ContainedPurchaseTab.vue"]]),cn=ce({__name:"AddKeyDialog",setup(c,{expose:r}){r();const s=we(),{t:e}=_e({useScope:"global"}),{dialogRef:v,onDialogOK:p}=ra(),n=Te(),o=Ae(),i=w(""),y=w(!1),E=w(!0),g=w(""),P=w(!0),h=w(["poc","test"]),D=w({readonly:!1}),U=G(()=>Object.entries(D.value).filter(([L,C])=>C).reduce((L,[C])=>L.concat(C),[])),V={$q:s,t:e,dialogRef:v,onDialogOK:p,embeddingStore:n,apiKeyStore:o,apiKey:i,isBusy:y,isKeyValid:E,errorMsg:g,isPwd:P,labels:h,roles:D,parsedRoles:U,onCreateKey:()=>{p({action:Ee.GENERATE,metadata:{labels:h,roles:U.value}})},onAdd:async()=>{if(i.value.trim()===""){E.value=!1,g.value=e("key_manager.invalid_key");return}try{y.value=!0,await n.getKeyInfo(i.value)?await o.addKey(i.value,{labels:h.value,roles:U.value})?(s.notify({message:e("key_manager.add_success",{_key:ke(i.value)}),icon:"done"}),p()):(E.value=!1,g.value=e("key_manager.existing_key")):(E.value=!1,g.value=e("key_manager.invalid_key"))}catch(L){E.value=!1,g.value=L instanceof Error?L.message:String(L)}finally{y.value=!1}},onLabelsBlur:L=>{var f,I;const C=L.target,R=(I=(f=C.value)==null?void 0:f.trim())!=null?I:"";C&&R&&(C.value="",h.value.push(R))}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}});function mn(c,r,s,e,v,p){return _(),x(qe,{ref:"dialogRef",persistent:""},{default:t(()=>[a(ue,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(re,{class:"q-pb-none"},{default:t(()=>[k(m(e.t("key_manager.add_key_explain")),1)]),_:1}),a(re,{class:"flex"},{default:t(()=>[a(xe,{modelValue:e.apiKey,"onUpdate:modelValue":r[1]||(r[1]=n=>e.apiKey=n),autofocus:"",filled:"",square:"",clearable:"",class:"full-width","input-class":"ellipsis",label:e.t("key_manager.add"),error:!e.isKeyValid,"error-message":e.errorMsg,type:e.isPwd?"password":"text",style:{width:"400px"}},{prepend:t(()=>[a(te,{name:"o_key"})]),append:t(()=>[a(te,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:r[0]||(r[0]=n=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","label","error","error-message","type"]),a(be,{modelValue:e.roles.readonly,"onUpdate:modelValue":r[2]||(r[2]=n=>e.roles.readonly=n),label:e.t("key_manager.readonly")},null,8,["modelValue","label"])]),_:1}),a(re,{class:"q-pb-none"},{default:t(()=>[k(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1}),a(re,{class:"flex"},{default:t(()=>[a(Re,{modelValue:e.labels,"onUpdate:modelValue":r[3]||(r[3]=n=>e.labels=n),label:e.t("key_manager.customized_tags"),square:"",filled:"",multiple:"","use-input":"","use-chips":"","dense-chips":"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",style:{width:"100%"},hint:e.t("key_manager.add_key_labels_input_explain"),onBlurCapture:fe(e.onLabelsBlur,["stop"])},{prepend:t(()=>[a(te,{name:"rate_review"})]),selected:t(()=>[(_(!0),ee(se,null,ve(e.labels,n=>(_(),x(pe,{key:n,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-400"},{default:t(()=>[k(m(n),1)]),_:2},1024))),128))]),_:1},8,["modelValue","label","hint"])]),_:1}),a(ba,{align:"left"},{default:t(()=>[a(ae,{padding:"md",flat:"",square:"",label:e.t("key_manager.generate_new_key"),disable:e.isBusy,icon:"casino",onClick:e.onCreateKey},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.generate_new_key_tooltip")),1)]),_:1})]),_:1},8,["label","disable"]),a(Ta),Oe(a(ae,{padding:"md",flat:"",square:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Me]]),a(ae,{padding:"md",flat:"",square:"",color:"primary",label:e.t("key_manager.save"),loading:e.isBusy,onClick:e.onAdd},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},512)}const _n=me(cn,[["render",mn],["__file","AddKeyDialog.vue"]]),gn=ce({__name:"UsageChart",props:{apiKey:{},usage:{}},setup(c,{expose:r}){const{t:s}=_e({useScope:"global"}),e=c,v=w(!1),p=w({left:"0px",top:"0px"}),n=w(""),o=w([]),i=w("hour-tokens"),y=G(()=>i.value.replace("-","_")),E=()=>{i.value==="hour-tokens"?i.value="day-tokens":i.value==="day-tokens"?i.value="hour-requests":i.value==="hour-requests"?i.value="day-requests":i.value="hour-tokens",g()},g=()=>{if(!e.usage||e.usage.length===0)return;const T=document.getElementById(`usage_${e.apiKey._id}`);if(!T)return;const b=T.getContext("2d");if(!b)return;const B=window.devicePixelRatio||1,V=T.clientWidth||300,L=T.clientHeight||100;T.width=V*B,T.height=L*B,b.scale(B,B);const C=new Date;let R=[],f={},I={};const l=i.value==="hour-tokens"||i.value==="hour-requests",u=i.value==="hour-requests"||i.value==="day-requests";l?(R=Array.from({length:168},(X,J)=>{const z=new Date(C);return z.setHours(z.getHours()-J),De.formatDate(z,"YYYY-MM-DD HH")}).reverse(),e.usage.forEach(X=>{if(X.type==="consume"){const J=De.formatDate(new Date(X.created_at),"YYYY-MM-DD HH");f[J]=(f[J]||0)+X.quantity,I[J]=(I[J]||0)+(X.request_number||0)}})):(R=Array.from({length:7},(X,J)=>{const z=new Date(C);return z.setDate(z.getDate()-J),De.formatDate(z,"YYYY-MM-DD")}).reverse(),e.usage.forEach(X=>{if(X.type==="consume"){const J=De.formatDate(new Date(X.created_at),"YYYY-MM-DD");f[J]=(f[J]||0)+X.quantity,I[J]=(I[J]||0)+(X.request_number||0)}}));const S=R.map(X=>u?I[X]||0:f[X]||0);let O=Math.max(...S);O===0&&(O=1);const j=Math.max(1,V/S.length*.8),N=Math.max(0,V/S.length*.2);b.clearRect(0,0,V,L),o.value=[],S.forEach((X,J)=>{const z=X/O*L*.9,Y=.1,ie=X>0?Math.max(z,Y):Y,ne=J*(j+N)+N/2,H=L-ie;o.value.push({x:ne,y:H,width:j,height:ie,timeLabel:R[J],usage:f[R[J]]||0,requests:I[R[J]]||0});const Z=X>0?.7:.3;u?b.fillStyle=`rgba(144, 238, 144, ${Z})`:b.fillStyle=`rgba(129, 227, 238, ${Z})`,b.fillRect(ne,H,j,ie),b.strokeStyle=u?"#90EE90":"#81E3EE",b.lineWidth=X>0?0:.5,b.strokeRect(ne,H,j,ie)}),b.shadowColor="transparent",b.shadowBlur=0,P(b,S,V,L,j,N,u)},P=(T,b,B,V,L,C,R)=>{if(b.length<2)return;const f=b.map((ne,H)=>({value:ne,index:H})).filter(ne=>ne.value>0),I=f.length>=2?f:b.map((ne,H)=>({value:ne,index:H}));if(I.length<2)return;const l=I.length;let u=0,S=0,O=0,j=0;for(const ne of I){const H=ne.index,Z=ne.value;u+=H,S+=Z,O+=H*Z,j+=H*H}const N=l*j-u*u;if(N===0)return;const X=(l*O-u*S)/N,J=(S-X*u)/l;let z=Math.max(...b);z===0&&(z=1),T.beginPath();const Y=ne=>ne*(L+C)+C/2+L/2;let ie=!0;b.forEach((ne,H)=>{const Z=Y(H),M=X*H+J,F=V-M/z*V*.9;ie?(T.moveTo(Z,F),ie=!1):T.lineTo(Z,F)}),T.strokeStyle=R?"rgba(144, 238, 144, 0.8)":"rgba(129, 227, 238, 0.8)",T.lineWidth=1,T.setLineDash([5,3]),T.stroke(),T.setLineDash([])},h=T=>{const b=document.getElementById(`usage_${e.apiKey._id}`);if(!b)return;const B=b.getBoundingClientRect(),V=T.clientX-B.left,L=T.clientY-B.top;let C=!1;for(const R of o.value)if(V>=R.x&&V<=R.x+R.width&&L>=R.y&&L<=R.y+R.height)try{let f="";if(i.value==="hour-tokens"||i.value==="hour-requests"){const O=R.timeLabel.split(" "),j=O[0],N=O[1]||"00",X=new Date(`${j}T${N}:00:00`);f=De.formatDate(X,"MMM D, h:mm A")}else{const O=new Date(R.timeLabel);f=De.formatDate(O,"MMM D, YYYY")}const l=i.value==="hour-requests"||i.value==="day-requests",u=l?R.requests:R.usage,S=l?"requests":"tokens";n.value=`${f}: ${u>0?u.toLocaleString():"0"} ${S}`,p.value={left:`${V+10}px`,top:`${L-30}px`},v.value=!0,C=!0;break}catch(f){console.error("Error formatting date:",f)}C||D()},D=()=>{v.value=!1};Fe(()=>e.usage,()=>{setTimeout(()=>{g()},50)},{deep:!0}),r({initChart:g}),Le(()=>{setTimeout(()=>{g()},100)});const U={t:s,props:e,showTooltip:v,tooltipStyle:p,tooltipText:n,barData:o,displayMode:i,displayModeName:y,toggleGroupingMode:E,initChart:g,drawTrendline:P,handleMouseMove:h,hideTooltip:D};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),fn=["id"];function vn(c,r,s,e,v,p){return _(),x(ue,{flat:"",square:"",class:"bg-transparent relative-position",style:{"max-height":"100px",width:"100%",height:"100%",position:"relative"}},{default:t(()=>[a(pe,{class:"absolute-bottom-right bg-dark-transparent",label:e.t(`key_manager.${e.displayModeName}`),size:"xs",square:"",icon:"monitoring"},null,8,["label"]),W("canvas",{id:`usage_${s.apiKey._id}`,style:{width:"100%",height:"100%"},onMousemove:e.handleMouseMove,onMouseleave:e.hideTooltip,onClick:fe(e.toggleGroupingMode,["prevent"])},null,40,fn),e.showTooltip?(_(),ee("div",{key:0,class:"tooltip",style:ka(e.tooltipStyle)},[W("div",null,m(e.tooltipText),1)],4)):q("",!0)]),_:1})}const yn=me(gn,[["render",vn],["__scopeId","data-v-81817ef2"],["__file","UsageChart.vue"]]),pn=ce({__name:"UsageReminderItem",props:ua({apiKey:{},isPaidKey:{type:Boolean}},{email:{type:String},emailModifiers:{},autoReminder:{type:Boolean},autoReminderModifiers:{},thresholds:{type:Array},thresholdsModifiers:{}}),emits:ua(["update"],["update:email","update:autoReminder","update:thresholds"]),setup(c,{expose:r,emit:s}){r();const e=c,v=s,p=Ye(c,"email"),n=Ye(c,"autoReminder"),o=Ye(c,"thresholds"),{t:i}=_e({useScope:"global"}),y=we(),E=Te(),g=Ae(),{isBusyState:P}=ye(g),h=w([{label:"10M",value:1e7},{label:"100M",value:1e8},{label:"1B",value:1e9}]),D=w(h.value),U=w(!1),T=(l,u)=>{const S=Number(l);if(l.length>0&&!sn(S)&&o.value.length<3){if(S<0||S>1e12){U.value=!0;return}U.value=!1;const O={label:Ge(S),value:S};h.value.some(j=>j.value===S)||h.value.push(O),u(O,"toggle")}},b=l=>{l===""?D.value=h.value:D.value=h.value.filter(u=>u.value===Number(l)||u.label===l).concat()},B=(l,u)=>{u(()=>b(l))},V=async l=>{var S,O;const u=l||p.value;if((S=o.value)!=null&&S.length&&u){P.value.add(e.apiKey);try{await E.setBalanceNotification(e.apiKey,{email:u,thresholds:((O=o.value)==null?void 0:O.slice(0,3))||[]})}finally{P.value.delete(e.apiKey)}v("update")}},L=async l=>{!l||!ma(l)||l===p.value||V(l)},C=Xt(()=>{V()},1e3),R=l=>{var S,O,j;const u=(S=o.value)==null?void 0:S.indexOf(l);u===void 0||u<0||((O=o.value)==null||O.splice(u,1),(j=o.value)!=null&&j.length&&V())},f=l=>{var u;!l&&((u=o.value)!=null&&u.length)&&p.value&&y.dialog({title:i("key_manager.auto_reminder_cancel_title"),message:i("key_manager.auto_reminder_cancel_message"),cancel:!0}).onOk(async()=>{n.value=l,P.value.add(e.apiKey);try{await E.cancelBalanceNotification(e.apiKey)?o.value=[]:n.value=!l}finally{P.value.delete(e.apiKey)}v("update")}).onCancel(()=>{n.value=!0})};Le(()=>{const l=Zt(o.value,h.value.map(u=>u.value));l.length&&(h.value.push(...l.map(u=>({label:Ge(u),value:u}))),h.value=Mt(h.value,"value","asc"))});const I={props:e,emit:v,email:p,autoReminder:n,thresholds:o,t:i,$q:y,embeddingStore:E,apiKeyStore:g,isBusyState:P,allOptions:h,filterOptions:D,hasError:U,createValue:T,updateFilterOptions:b,filterFn:B,saveConfig:V,saveEmail:L,saveThresholds:C,removeThreshold:R,updateAutoReminder:f,get QPopupEdit(){return rt},get QSelect(){return Re},get testEmail(){return ma},get formatNumberShort(){return Ge}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),hn={class:"ellipsis"};function bn(c,r,s,e,v,p){return _(),x(Q,{clickable:"","click.stop":""},{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"alarm_smart_wake"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("key_manager.auto_reminder"))+" ",1),a(te,{name:s.isPaidKey?"verified":"lock"},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(A,{caption:"",lines:"2"},{default:t(()=>[k(m(e.t("key_manager.auto_reminder_description"))+" ",1),a(oe,{"max-width":"40rem"},{default:t(()=>[k(m(e.t("key_manager.auto_reminder_description")),1)]),_:1})]),_:1}),e.autoReminder?(_(),x(A,{key:0,class:"cursor-pointer"},{default:t(()=>[k(m(e.t("key_manager.auto_reminder_email"))+": ",1),W("b",null,m(e.email),1),s.isPaidKey&&e.autoReminder?(_(),x(te,{key:0,name:"edit",size:"20px",class:"on-right",color:"primary"})):q("",!0),a(e.QPopupEdit,{modelValue:e.email,"onUpdate:modelValue":r[0]||(r[0]=n=>e.email=n),buttons:"","label-set":e.t("key_manager.save"),"label-cancel":e.t("key_manager.cancel"),validate:e.testEmail,disable:!e.autoReminder,onSave:e.saveEmail},{default:t(n=>[a(xe,{modelValue:n.value,"onUpdate:modelValue":o=>n.value=o,dense:"",autofocus:"",rules:[o=>e.testEmail(o)||e.t("key_manager.invalid_email")],label:e.t("key_manager.auto_reminder_email"),onKeyup:$e(fe(n.set,["stop"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","label","onKeyup"])]),_:1},8,["modelValue","label-set","label-cancel","validate","disable"])]),_:1})):q("",!0)]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.autoReminder,"onUpdate:modelValue":[r[1]||(r[1]=n=>e.autoReminder=n),e.updateAutoReminder],color:"primary",disable:!s.isPaidKey,"checked-icon":"check"},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.auto_reminder_toggle")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),_:1}),a(K,{side:""},{default:t(()=>[a(e.QSelect,{square:"",outline:"","use-input":"","use-chips":"",multiple:"","emit-value":"","map-options":"","new-value-mode":"add",style:{"max-width":"160px"},modelValue:e.thresholds,"onUpdate:modelValue":[r[2]||(r[2]=n=>e.thresholds=n),e.saveThresholds],"max-values":3,error:e.hasError,"error-message":e.t("key_manager.auto_reminder_threshold_error"),label:e.t("key_manager.auto_reminder_threshold"),disable:!e.autoReminder,options:e.filterOptions,onNewValue:e.createValue,onFilter:e.filterFn,onKeyup:r[3]||(r[3]=$e(fe(()=>{},["stop"]),["enter"]))},{selected:t(()=>[(_(!0),ee(se,null,ve(e.thresholds,n=>(_(),x(pe,{dense:"",key:n,square:"",removable:"","text-color":"primary",class:"bg-mixed-300",onRemove:o=>e.removeThreshold(n)},{default:t(()=>{var o;return[W("div",hn,m(`< ${((o=e.allOptions.find(i=>i.value===n))==null?void 0:o.label)||e.formatNumberShort(n)} ${e.t("embedding.tokens")}`),1),a(oe,null,{default:t(()=>[k(m(n),1)]),_:2},1024)]}),_:2},1032,["onRemove"]))),128))]),option:t(n=>[a(Q,ze(n.itemProps,{clickable:""}),{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(`< ${n.opt.label} ${e.t("embedding.tokens")}`)+" ",1),a(oe,null,{default:t(()=>[k(m(n.opt.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error","error-message","label","disable","options","onUpdate:modelValue"])]),_:1})]),_:1})}const kn=me(pn,[["render",bn],["__file","UsageReminderItem.vue"]]),wn=ce({__name:"RevokeKeyDialog",props:{apiKey:{},isPremiumKey:{type:Boolean}},setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global"}),{dialogRef:e,onDialogOK:v}=ra(),p=Ae(),{keys:n,keysInfoCache:o}=ye(p),i=w(""),y=w(!1),E=w(""),P={t:s,dialogRef:e,onDialogOK:v,apiKeyStore:p,keys:n,keysInfoCache:o,confirmKey:i,withTransfer:y,transferKey:E,onConfirm:async()=>{y.value&&E.value?v(E.value):v()},get formatKey(){return ke}};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}});function En(c,r,s,e,v,p){return _(),x(qe,{ref:"dialogRef"},{default:t(()=>[a(ue,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(re,{class:"text-h6"},{default:t(()=>[k(m(e.t("key_manager.revoke")),1)]),_:1}),a(re,null,{default:t(()=>[W("div",null,m(e.t("key_manager.revoke_message")),1),a(xe,{autofocus:"",filled:"",square:"",class:"q-mt-md",modelValue:e.confirmKey,"onUpdate:modelValue":r[0]||(r[0]=n=>e.confirmKey=n),rules:[n=>n===s.apiKey||e.t("key_manager.revoke_error")],label:e.t("key_manager.revoke_label")},{prepend:t(()=>[a(te,{name:"o_key"})]),_:1},8,["modelValue","rules","label"]),s.isPremiumKey?(_(),x(ja,{key:0,modelValue:e.withTransfer,"onUpdate:modelValue":r[1]||(r[1]=n=>e.withTransfer=n),label:e.t("key_manager.transfer_before_revoke")},null,8,["modelValue","label"])):q("",!0),s.isPremiumKey&&e.withTransfer?(_(),x(Re,{key:1,square:"",filled:"","emit-value":"",clearable:"",modelValue:e.transferKey,"onUpdate:modelValue":r[2]||(r[2]=n=>e.transferKey=n),options:e.keys.filter(n=>n.key!==s.apiKey&&e.keysInfoCache[n.key].user_id),"option-value":n=>n.key,label:e.t("key_manager.transfer_label")},na({"no-option":t(()=>[a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(n=>[a(Q,ze(n.itemProps,{clickable:""}),{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ke({"golden-foil":e.apiKeyStore.isPremiumPaidKey(n.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(n.opt.key)})},null,8,["class"])]),_:2},1024),a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[W("code",null,m(e.formatKey(n.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(pe,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label"])):q("",!0)]),_:1}),a(ba,{align:"right"},{default:t(()=>[Oe(a(ae,{flat:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[Me]]),a(ae,{flat:"",label:e.t("key_manager.ok"),color:"primary",disable:e.confirmKey!==s.apiKey,onClick:e.onConfirm},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},512)}const Tn=me(wn,[["render",En],["__file","RevokeKeyDialog.vue"]]),Sn=ce({__name:"ReadonlyKeyItem",props:{apiKey:{},metadata:{},disable:{type:Boolean}},emits:["update"],setup(c,{expose:r,emit:s}){r();const e=c,v=s,{t:p}=_e({useScope:"global"}),n=we(),o=Ae(),i=w(!1),y=async g=>{var h;const P=new Set((h=e.metadata)==null?void 0:h.roles);g?P.add("readonly"):P.delete("readonly");try{await o.updateKey(e.apiKey,{...e.metadata||{},roles:Array.from(P)}),v("update")}catch{n.notify({message:p("key_manager.update_key_failed"),icon:"error",color:"negative"}),i.value=!g}};Le(()=>{var g,P,h;i.value=(h=(P=(g=e.metadata)==null?void 0:g.roles)==null?void 0:P.includes("readonly"))!=null?h:!1});const E={props:e,emit:v,t:p,$q:n,apiKeyStore:o,readonlyKey:i,toggleReadonly:y};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}});function Rn(c,r,s,e,v,p){return _(),x(Q,{tag:"label",disable:s.disable,onClick:r[1]||(r[1]=fe(()=>{},["stop"]))},{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"vpn_key_alert"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("key_manager.readonly_label")),1)]),_:1}),a(A,{caption:"",lines:"2"},{default:t(()=>[k(m(e.t("key_manager.readonly_explain"))+" ",1),a(oe,{"max-width":"40rem"},{default:t(()=>[k(m(e.t("key_manager.readonly_explain")),1)]),_:1})]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.readonlyKey,"onUpdate:modelValue":[r[0]||(r[0]=n=>e.readonlyKey=n),e.toggleReadonly]},null,8,["modelValue"])]),_:1})]),_:1},8,["disable"])}const xn=me(Sn,[["render",Rn],["__file","ReadonlyKeyItem.vue"]]),Pn=ce({__name:"SettingsDialog",props:{apiKey:{}},setup(c,{expose:r}){r();const s=c,e=we(),{t:v}=_e({useScope:"global"}),{dialogRef:p,onDialogOK:n}=ra(),o=je(),{user:i}=ye(o),y=Ae(),{isBusyState:E,keys:g,primaryKey:P,keysInfoCache:h}=ye(y),D=w(),U=w(!1),T=w(""),b=w([]),B=w(!0),V=w(1e6),L=w(""),C=G(()=>{var H;return((H=g.value.find(Z=>Z.key===s.apiKey))==null?void 0:H.metadata)||{}}),R=G(()=>!y.isFreeKey(s.apiKey)),f=G(()=>y.isPremiumPaidKey(s.apiKey)),I=G(()=>{var H,Z;return R.value&&!!((Z=(H=D.value)==null?void 0:H.metadata)!=null&&Z.auto_recharge)}),l=G(()=>{var H;return!!((H=D==null?void 0:D.value)!=null&&H.user_id)}),u=G(()=>!l.value||E.value.has(s.apiKey)),S=G(()=>{var H,Z,M;return(M=(Z=(H=C.value)==null?void 0:H.roles)==null?void 0:Z.includes("readonly"))!=null?M:!1}),O=G(()=>{var H,Z;return((Z=(H=D.value)==null?void 0:H.metadata)==null?void 0:Z.disable_self_purchase)||!1}),j=async()=>{await y.getKeyInfo(s.apiKey,!0),N()},N=async()=>{var H,Z,M,F,le,he,Se,ge,Ue,Pe,Ie,Ne;D.value=h.value[s.apiKey],U.value=!nn((Z=(H=D.value)==null?void 0:H.wallet)==null?void 0:Z.metadata),T.value=((le=(F=(M=D.value)==null?void 0:M.wallet)==null?void 0:F.metadata)==null?void 0:le.notification_email)||i.value.email||"",b.value=((ge=(Se=(he=D.value)==null?void 0:he.wallet)==null?void 0:Se.metadata)==null?void 0:ge.notification_thresholds)||[],B.value=((Pe=(Ue=D.value)==null?void 0:Ue.metadata)==null?void 0:Pe.auto_recharge)||!1,V.value=((Ne=(Ie=D.value)==null?void 0:Ie.metadata)==null?void 0:Ne.threshold)||1e6};N();const X=()=>{if(P.value===s.apiKey&&g.value.length===1){e.notify({message:v("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({title:v("key_manager.remove_title"),message:v("key_manager.remove_message"),cancel:!0,persistent:!0}).onOk(async()=>{var H;await y.removeKey(s.apiKey),e.notify({message:v("key_manager.remove_success",{_key:ke(s.apiKey)}),icon:"done"}),P.value===s.apiKey&&y.setPrimaryKey(g.value[0].key),(H=p.value)==null||H.hide()})},J=()=>{if(P.value===s.apiKey&&g.value.length===1){e.notify({message:v("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({component:Tn,componentProps:{apiKey:s.apiKey,isPremiumKey:f.value}}).onOk(H=>{n({action:Ee.REVOKE,key:s.apiKey,transferTo:H})})},z=H=>{var Z;H&&e.dialog({title:v("key_manager.transfer_title"),message:`<div>
    ${v("key_manager.transfer_message",{_tokens:"<b>"+oa(((Z=D.value)==null?void 0:Z.wallet.regular_balance)||0)+"</b>",_source:'<code class="bg-mixed-300">'+ke(s.apiKey)+"</code>",_target:'<code class="bg-mixed-300">'+ke(L.value)+" </code>"})}
      <div>`,html:!0,cancel:!0,persistent:!0}).onOk(async()=>{n({action:Ee.TRANSFER,source:s.apiKey,target:L.value})})},Y=w(!1),ie=()=>{!s.apiKey||S.value||Y.value||(aa(s.apiKey).then(()=>{e.notify({message:v("copy_to_clipboard_success"),icon:"done"}),Y.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{Y.value=!1},1800))};Fe(()=>h.value[s.apiKey],()=>{N()});const ne={props:s,$q:e,t:v,dialogRef:p,onDialogOK:n,userStore:o,user:i,apiKeyStore:y,isBusyState:E,keys:g,primaryKey:P,keysInfoCache:h,apiKeyInfo:D,autoReminder:U,email:T,reminderThresholds:b,autoRecharge:B,rechargeThreshold:V,transferKey:L,metadata:C,isPaidKey:R,isPremiumPaidKey:f,isAutoCharge:I,isInputApiKeyValid:l,isInputApiKeyDisabled:u,readonlyKey:S,isSelfPurchaseDisabled:O,getKeyInfo:j,init:N,onRemove:X,onRevoke:J,onTransfer:z,isApiKeyCopyDone:Y,copyApiKey:ie,get formatKey(){return ke},AutoRechargeItem:Rt,UsageReminderItem:kn,ReadonlyKeyItem:xn};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}});function Dn(c,r,s,e,v,p){return _(),x(qe,{ref:"dialogRef",onBeforeShow:e.getKeyInfo},{default:t(()=>[a(ue,{class:"bg-mixed-200",flat:"",square:"",style:{width:"900px","max-width":"80vw"}},{default:t(()=>[a(re,null,{default:t(()=>[a(Q,null,{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"settings"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("key_manager.settings")),1)]),_:1}),a(A,{caption:"",style:{"font-family":"monospace"},lines:"1",class:"text-primary cursor-pointer",onClick:e.copyApiKey},{default:t(()=>[a(pe,{icon:"o_key",label:e.formatKey(e.props.apiKey),square:"",size:"sm",class:"bg-mixed-300",ripple:!e.readonlyKey},null,8,["label","ripple"])]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[Oe(a(ae,{icon:"close",flat:"",round:"",dense:""},null,512),[[Me]])]),_:1})]),_:1})]),_:1}),a(de),e.isBusyState.has(s.apiKey)?(_(),x(Ve,{key:0,indeterminate:"",size:"1px"})):q("",!0),a(re,null,{default:t(()=>[a(Be,{class:"q-gutter-y-sm"},{default:t(()=>[!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),x(e.AutoRechargeItem,{key:0,"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPaidKey,"is-auto-charge":e.isAutoCharge,mode:"dashboard","auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":r[0]||(r[0]=n=>e.autoRecharge=n),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":r[1]||(r[1]=n=>e.rechargeThreshold=n),disable:e.isInputApiKeyDisabled,"navigate-to-purchase":!0,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable"])):q("",!0),a(e.UsageReminderItem,{"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPremiumPaidKey,"auto-reminder":e.autoReminder,"onUpdate:autoReminder":r[2]||(r[2]=n=>e.autoReminder=n),email:e.email,"onUpdate:email":r[3]||(r[3]=n=>e.email=n),thresholds:e.reminderThresholds,"onUpdate:thresholds":r[4]||(r[4]=n=>e.reminderThresholds=n),onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","auto-reminder","email","thresholds"]),a(e.ReadonlyKeyItem,{disable:e.isInputApiKeyDisabled,"api-key":s.apiKey,metadata:e.metadata,onUpdate:e.getKeyInfo},null,8,["disable","api-key","metadata"]),!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),x(Q,{key:1,tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"sync"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("key_manager.transfer_title"))+" ",1),a(te,{name:e.isPremiumPaidKey?"verified":"lock"},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(A,{caption:"",lines:"2"},{default:t(()=>[k(m(e.t("key_manager.transfer_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(Re,{square:"",outline:"","emit-value":"",clearable:"",style:{width:"220px"},modelValue:e.transferKey,"onUpdate:modelValue":[r[5]||(r[5]=n=>e.transferKey=n),e.onTransfer],options:e.keys.filter(n=>{var o;return n.key!==s.apiKey&&((o=e.keysInfoCache[n.key])==null?void 0:o.user_id)}),"option-value":n=>n.key,label:e.t("key_manager.transfer_label"),disable:!e.isPremiumPaidKey},na({"no-option":t(()=>[a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(n=>[a(Q,ze(n.itemProps,{clickable:""}),{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ke({"golden-foil":e.apiKeyStore.isPremiumPaidKey(n.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(n.opt.key)})},null,8,["class"])]),_:2},1024),a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[W("code",null,m(e.formatKey(n.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(pe,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label","disable"])]),_:1})]),_:1})):q("",!0),a(Q,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"delete",color:"negative"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold text-negative"},{default:t(()=>[k(m(e.t("key_manager.remove_title")),1)]),_:1}),a(A,{caption:"",lines:"2"},{default:t(()=>[k(m(e.t("key_manager.remove_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(ae,{flat:"",square:"",color:"negative",label:e.t("key_manager.remove"),onClick:e.onRemove,disable:e.isBusyState.has(s.apiKey)},null,8,["label","disable"])]),_:1})]),_:1}),!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),x(Q,{key:2,tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),x(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"delete_forever",color:"negative"})]),_:1})):q("",!0),a(K,null,{default:t(()=>[a(A,{class:"text-bold text-negative"},{default:t(()=>[k(m(e.t("key_manager.revoke_title")),1)]),_:1}),a(A,{caption:"",lines:"2"},{default:t(()=>[k(m(e.t("key_manager.revoke_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(ae,{flat:"",square:"",color:"negative",label:e.t("key_manager.revoke"),onClick:e.onRevoke,disable:e.isBusyState.has(s.apiKey)||!e.isInputApiKeyValid},null,8,["label","disable"])]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},512)}const In=me(Pn,[["render",Dn],["__file","SettingsDialog.vue"]]),Kn=ce({__name:"KeyItem",props:{apiKey:{}},emits:["execute"],setup(c,{expose:r,emit:s}){var H,Z;r();const e=c,v=s,{t:p}=_e({useScope:"global"}),n=we(),o=Ae(),i=Te(),{keysInfoCache:y,isBusyState:E}=ye(o),g=je(),{user:P}=ye(g),h=w(""),D=G(()=>{var M,F,le;return(le=(F=(M=e.apiKey.metadata)==null?void 0:M.roles)==null?void 0:F.includes("readonly"))!=null?le:!1}),U=G({get:()=>e.apiKey.isPrimary?e.apiKey.key:"",set:async M=>{var F;if(M){if(await o.getKeyInfo(e.apiKey.key,!0),!((F=y.value[e.apiKey.key])!=null&&F.user_id)){n.notify({message:p("key_manager.invalid_key"),icon:"warning"});return}await o.setPrimaryKey(e.apiKey.key),i.apiKey=e.apiKey.key,n.notify({caption:p("key_manager.primary_key_set_caption"),message:p("key_manager.primary_key_set",{_apiKey:ke(e.apiKey.key)}),icon:"done"})}}}),T=w(!0),b=w(((Z=(H=e.apiKey.metadata)==null?void 0:H.labels)!=null?Z:[]).slice()),B=w(null),V=G(()=>{var M,F;return b.value.join("").trim()!==((F=(M=e.apiKey.metadata)==null?void 0:M.labels)!=null?F:[]).join("").trim()}),L=()=>{var M,F;b.value=((F=(M=e.apiKey.metadata)==null?void 0:M.labels)!=null?F:[]).slice()},C=async()=>{var M;if(T.value)T.value=!1,await wa(),(M=B.value)==null||M.focus();else if(V.value)try{await o.updateKey(e.apiKey.key,{...e.apiKey.metadata,labels:b.value}),n.notify({message:p("key_manager.labels_updated"),icon:"done"}),T.value=!0}catch(F){n.notify({message:F instanceof Error?F.message:String(F),icon:"warning"}),L()}else T.value=!0},R=G(()=>o.isPremiumPaidKey(e.apiKey.key)),f=G(()=>o.isPaidKey(e.apiKey.key)),I=G(()=>o.isFreeKey(e.apiKey.key)),l=G(()=>{var M;return!((M=y.value[e.apiKey.key])!=null&&M.user_id)}),u=G(()=>{var M,F,le;return(le=(F=(M=y.value[e.apiKey.key])==null?void 0:M.wallet)==null?void 0:F.metadata)==null?void 0:le.notification_email}),S=G(()=>{var M,F,le;return(le=(F=(M=y.value[e.apiKey.key])==null?void 0:M.wallet)==null?void 0:F.metadata)==null?void 0:le.notification_thresholds}),O=()=>{D.value||n.dialog({component:It,componentProps:{purchaseKey:e.apiKey.key}})},j=M=>{!M||h.value||D.value||(aa(M).then(()=>{n.notify({message:p("copy_to_clipboard_success"),icon:"done"}),h.value=M,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href,subLocation:"sefo-api-key-manager"})}),setTimeout(()=>{h.value=""},1800))},N=M=>{n.dialog({component:xt,componentProps:{apiKey:M}})},X=M=>{n.dialog({component:In,componentProps:{apiKey:M,metadata:e.apiKey.metadata}}).onOk(F=>{v("execute",F.action,F)})},J=w(!1),z=async()=>{J.value||n.dialog({message:p("key_manager.share_key_confirm_message"),title:p("key_manager.share_key_confirm_title"),ok:{flat:!0,icon:"content_copy",padding:"md",square:!0,label:p("key_manager.copy_share_link"),textColor:"primary"}}).onOk(async()=>{var he,Se;J.value=!0;const M=window.location.origin+"/api-dashboard",F=e.apiKey.key,le=P.value.displayName||((Se=(he=P.value.email)==null?void 0:he.split("@"))==null?void 0:Se[0])||"";try{const ge=await Kt(M,le,F,{readonly:D.value});aa(ge).then(()=>{n.notify({message:p("key_manager.share_link_copied"),icon:"done"})})}catch(ge){console.error(ge),n.notify({message:ge instanceof Error?ge.message:String(ge),icon:"warning"})}finally{J.value=!1}})},Y=M=>{var he,Se;const F=M.target;if(!F)return;const le=(Se=(he=F.value)==null?void 0:he.trim())!=null?Se:"";le&&(F.value="",b.value.push(le))},ie=G(()=>{var sa;const M=y.value[e.apiKey.key];if(!(M!=null&&M.usage)||!((sa=M==null?void 0:M.wallet)!=null&&sa.total_balance)||l.value)return null;const F=M.wallet.total_balance;if(F<=0)return{date:new Date,message:p("key_manager.tokens_depleted"),percentage:100};const le=new Date,he=new Date(le);he.setHours(he.getHours()-24);const ge=M.usage.filter(He=>He.type==="consume"&&new Date(He.created_at)>=he).reduce((He,Ia)=>He+Ia.quantity,0);if(ge===0)return{date:null,message:p("key_manager.no_recent_usage"),percentage:0};const Ue=ge/24,Pe=F/Ue,Ie=new Date(le);Ie.setHours(Ie.getHours()+Pe);const Ne=F+ge,Da=Math.min(100,Math.round(ge/Ne*100));return{date:Ie,message:p("key_manager.token_expiry_estimate",{_date:De.formatDate(Ie,"YYYY-MM-DD HH:mm"),_days:Math.floor(Pe/24),_hours:Math.floor(Pe%24)}),hoursRemaining:Math.round(Pe),daysRemaining:Math.floor(Pe/24),percentage:Da}}),ne={props:e,emit:v,t:p,$q:n,apiKeyStore:o,embeddingStore:i,keysInfoCache:y,isBusyState:E,userStore:g,user:P,isApiKeyCopyDone:h,readonlyKey:D,primaryKey:U,isReadOnly:T,labels:b,labelsRef:B,isLabelsDirty:V,resetLabels:L,updateLabels:C,isPremiumPaidKey:R,isPaidKey:f,isFreeKey:I,isInvalidKey:l,notifyEmail:u,notifyThresholds:S,onBuy:O,onCopy:j,openUsageHistoryDialog:N,openSettingsDialog:X,isShareBusy:J,onShare:z,onLabelsBlur:Y,tokenExpiryInfo:ie,get date(){return De},get QSelect(){return Re},UsageChart:yn,get formatNumber(){return oa},get formatNumberShort(){return Ge},get formatKey(){return ke}};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}}),Vn={class:"column full-width"},Ln={style:{"font-family":"monospace"},class:"text-bold"},An={key:0},Cn={key:1};function On(c,r,s,e,v,p){return _(),ee("div",Vn,[e.isBusyState.has(s.apiKey.key)?(_(),x(Ve,{key:0,indeterminate:"",size:"1px"})):q("",!0),a(Q,{class:Ke(["full-width key-item",{"column q-gutter-y-lg":e.$q.screen.lt.md,"text-dim":e.isInvalidKey}]),tag:"label",clickable:!e.readonlyKey},{default:t(()=>[a(K,{class:"col-md-3"},{default:t(()=>[a(Q,null,{default:t(()=>[e.readonlyKey?q("",!0):(_(),x(K,{key:0,side:""},{default:t(()=>[a(Ea,{disable:e.isInvalidKey||e.readonlyKey,modelValue:e.primaryKey,"onUpdate:modelValue":r[0]||(r[0]=n=>e.primaryKey=n),val:s.apiKey.key,dense:""},null,8,["disable","modelValue","val"]),a(oe,null,{default:t(()=>[k(m(e.primaryKey===s.apiKey.key?e.t("key_manager.primary_key_set_caption"):e.t("key_manager.primary_key")),1)]),_:1})]),_:1})),a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ke({"golden-foil":e.isPremiumPaidKey,"silver-foil":!e.isPremiumPaidKey&&e.isPaidKey})},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.isInvalidKey?e.t("key_manager.invalid_key"):e.isFreeKey?e.t("key_manager.free_key"):e.isPaidKey?e.t("paywall.standard_key"):e.t("key_manager.subscribed_key")),1)]),_:1})]),_:1},8,["class"])]),_:1}),a(K,null,{default:t(()=>{var n,o,i;return[(n=s.apiKey.metadata)!=null&&n.sharedFrom?(_(),x(A,{key:0,caption:""},{default:t(()=>[k(m(e.t("key_manager.shared_from",{_user:s.apiKey.metadata.sharedFrom})),1)]),_:1})):q("",!0),a(A,{class:"row items-center q-gutter-x-sm no-wrap"},{default:t(()=>{var y;return[W("span",Ln,m(e.formatKey(s.apiKey.key)),1),e.notifyEmail&&((y=e.notifyThresholds)!=null&&y.length)?(_(),x(te,{key:0,name:"alarm_smart_wake"},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.auto_reminder_info",{_email:e.notifyEmail,_threshold:e.notifyThresholds.map(E=>e.formatNumberShort(E)).join(", ")})),1)]),_:1})]),_:1})):q("",!0),e.readonlyKey?q("",!0):(_(),x(ae,{key:1,flat:"",square:"",size:"sm",dense:"",icon:e.isApiKeyCopyDone===s.apiKey.key?"check":"content_copy",color:e.isApiKeyCopyDone===s.apiKey.key?"primary":"",onClick:r[1]||(r[1]=fe(E=>e.onCopy(s.apiKey.key),["stop"]))},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.copy")),1)]),_:1})]),_:1},8,["icon","color"]))]}),_:1}),e.isInvalidKey?q("",!0):(_(),x(A,{key:1,caption:"",class:Ke(((i=(o=e.keysInfoCache[s.apiKey.key])==null?void 0:o.wallet)==null?void 0:i.total_balance)<0?"text-negative":"")},{default:t(()=>{var y,E,g;return[k(m(e.formatNumber((g=(E=(y=e.keysInfoCache[s.apiKey.key])==null?void 0:y.wallet)==null?void 0:E.total_balance)!=null?g:0)+" "+e.t("embedding.tokens")),1)]}),_:1},8,["class"])),e.isInvalidKey&&!e.isBusyState.has(s.apiKey.key)?(_(),x(A,{key:2,caption:"",class:"text-negative"},{default:t(()=>[a(te,{name:"warning"}),k(" "+m(e.t("key_manager.invalid_key")),1)]),_:1})):q("",!0),e.tokenExpiryInfo&&!e.isInvalidKey?(_(),x(A,{key:3,caption:"",class:"token-expiry-info text-dim"},{default:t(()=>[W("span",{class:Ke({"text-negative":e.tokenExpiryInfo.hoursRemaining<24,"text-warning":e.tokenExpiryInfo.hoursRemaining<48&&e.tokenExpiryInfo.hoursRemaining>24})},m(e.tokenExpiryInfo.message),3),a(oe,null,{default:t(()=>{var y,E;return[e.tokenExpiryInfo.date?(_(),ee("div",An,m(e.t("key_manager.token_expiry_detail",{_date:e.date.formatDate(e.tokenExpiryInfo.date,"YYYY-MM-DD HH:mm"),_rate:e.formatNumber(((E=(y=e.keysInfoCache[s.apiKey.key])==null?void 0:y.usage)==null?void 0:E.reduce((g,P)=>P.type==="consume"&&new Date(P.created_at)>=new Date(Date.now()-24*60*60*1e3)?g+P.quantity/24:g,0))||0)+" "+e.t("key_manager.tokens_per_hour")})),1)):(_(),ee("div",Cn,m(e.t("key_manager.token_expiry_no_rate")),1))]}),_:1})]),_:1})):q("",!0)]}),_:1})]),_:1})]),_:1}),a(K,{class:"col-md-2"},{default:t(()=>[a(e.QSelect,{ref:"labelsRef",modelValue:e.labels,"onUpdate:modelValue":r[3]||(r[3]=n=>e.labels=n),square:"",multiple:"","use-input":"","use-chips":"",readonly:e.isReadOnly,outlined:!e.isReadOnly,borderless:e.isReadOnly,"hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique","input-class":"cursor-pointer",disable:e.isInvalidKey||e.isBusyState.has(s.apiKey.key),onKeyupCapture:r[4]||(r[4]=$e(fe(()=>{},["stop"]),["enter"])),onBlurCapture:fe(e.onLabelsBlur,["stop"])},{selected:t(()=>[(_(!0),ee(se,null,ve(e.labels,n=>(_(),x(pe,{key:n,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-200",label:n},null,8,["label"]))),128))]),append:t(()=>[e.isLabelsDirty?(_(),ee(se,{key:0},[a(ae,{dense:"",square:"",flat:"",icon:"close",onClick:r[2]||(r[2]=n=>e.resetLabels())},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.revert_changes")),1)]),_:1})]),_:1}),a(ae,{dense:"",square:"",flat:"",icon:"check",color:"primary",onClick:e.updateLabels},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.update_label")),1)]),_:1})]),_:1})],64)):q("",!0)]),_:1},8,["modelValue","readonly","outlined","borderless","disable"])]),_:1}),a(K,{class:"col-md-3 no-wrap"},{default:t(()=>{var n,o;return[(n=e.keysInfoCache[s.apiKey.key])!=null&&n.last_used_at?(_(),x(A,{key:0,caption:"",style:{"font-size":"0.7em"}},{default:t(()=>{var i;return[k(m(e.t("key_manager.last_used")+": "+e.date.formatDate((i=e.keysInfoCache[s.apiKey.key])==null?void 0:i.last_used_at,"YYYY-MM-DD HH:mm")),1)]}),_:1})):q("",!0),(o=e.keysInfoCache[s.apiKey.key])!=null&&o.usage&&!e.isInvalidKey?(_(),x(A,{key:1},{default:t(()=>{var i;return[a(e.UsageChart,{"api-key":s.apiKey,usage:(i=e.keysInfoCache[s.apiKey.key])==null?void 0:i.usage},null,8,["api-key","usage"])]}),_:1})):q("",!0)]}),_:1}),e.$q.screen.gt.sm?(_(),x(Ta,{key:0,class:"col"})):q("",!0),a(K,{side:"",class:Ke(["actions-section",{"always-show":e.primaryKey===s.apiKey.key}])},{default:t(()=>[a(Sa,{flat:"",square:"",class:"full-height"},{default:t(()=>{var n,o;return[!e.readonlyKey&&!((o=(n=e.keysInfoCache[s.apiKey.key])==null?void 0:n.metadata)!=null&&o.disable_self_purchase)?(_(),x(ae,{key:0,flat:"",square:"",disable:e.isInvalidKey,icon:"add_shopping_cart",onClick:fe(e.onBuy,["stop"]),"no-wrap":"",label:e.t("key_manager.top_up")},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.purchase")),1)]),_:1})]),_:1},8,["disable","label"])):q("",!0),a(ae,{flat:"",square:"",disable:e.isInvalidKey,icon:"history",label:e.t("key_manager.usage"),"no-wrap":"",onClick:r[5]||(r[5]=fe(i=>e.openUsageHistoryDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.usage_history")),1)]),_:1})]),_:1},8,["disable","label"]),a(ae,{square:"",flat:"",icon:"rate_review",onClick:fe(e.updateLabels,["stop"]),color:e.isReadOnly?void 0:"primary"},{default:t(()=>[a(oe,{"max-width":"300px"},{default:t(()=>[k(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1})]),_:1},8,["color"]),a(ae,{flat:"",square:"",disable:e.isInvalidKey,icon:"share",loading:e.isShareBusy,onClick:fe(e.onShare,["stop"])},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.share")),1)]),_:1})]),_:1},8,["disable","loading"]),a(ae,{flat:"",square:"",padding:"md",icon:"more_horiz",onClick:r[6]||(r[6]=fe(i=>e.openSettingsDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("key_manager.advance_settings")),1)]),_:1})]),_:1})]}),_:1})]),_:1},8,["class"])]),_:1},8,["class","clickable"]),a(de)])}const qn=me(Kn,[["render",On],["__scopeId","data-v-138ff54a"],["__file","KeyItem.vue"]]),Mn=ce({__name:"KeysTable",setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global"}),e=we(),v=Ae(),p=je(),n=Te(),{keys:o,isLoading:i,primaryKey:y}=ye(v),{user:E}=ye(p),{products:g}=ye(n),P=w(null),h=w(void 0),D={[Ee.GENERATE]:async z=>{i.value=!0;try{const Y=await n.generate0TokenApiKey(z);Y&&(await v.addKey(Y,h.value),e.notify({message:s("key_manager.generate_success",{_key:ke(Y)}),icon:"done"}))}finally{h.value=void 0,i.value=!1}},[Ee.REVOKE]:async z=>{var Y;i.value=!0;try{let ie;if(l.value?ie=await n.transferToken({source:I.value,target:l.value,withRevoke:!0},z):ie=await n.revokeApiKey(I.value,z),ie){e.notify({message:s("key_manager.revoke_success",{_key:ke(I.value)}),icon:"done"}),l.value&&v.getKeyInfo(l.value,!0);const ne=y.value===I.value;await v.removeKey(I.value),ne&&await v.setPrimaryKey((Y=o.value[0])==null?void 0:Y.key)}}finally{I.value="",l.value="",i.value=!1}},[Ee.TRANSFER]:async z=>{i.value=!0;try{await n.transferToken({source:S.value,target:u.value},z)&&(e.notify({message:s("key_manager.transfer_success",{_source:ke(S.value),_target:ke(u.value)}),icon:"done"}),v.getKeyInfo(S.value,!0),v.getKeyInfo(u.value,!0))}finally{i.value=!1,S.value="",u.value=""}}},U=async z=>{var Y;console.log("handle key in callback"),P.value&&await((Y=D[P.value])==null?void 0:Y.call(D,z))},{turnstileToken:T,turnstileRef:b,turnstileVisible:B,proceeding:V,onUpdateToken:L,checkReady:C,resetVariables:R}=ot(U),f=w(""),I=w(""),l=w(""),u=w(""),S=w(""),O=G(()=>o.value.some(z=>!v.isFreeKey(z.key))),j=G(()=>{const z=f.value.toLowerCase();return o.value.filter(Y=>{var ne;const ie=((ne=Y.metadata)==null?void 0:ne.labels)||[];return ie.length>0&&ie.some(Z=>Z.toLowerCase().includes(z))?!0:Y.key.toLowerCase().includes(z)}).sort((Y,ie)=>{var Z,M,F,le;const ne=((M=(Z=Y.metadata)==null?void 0:Z.roles)==null?void 0:M.includes("readonly"))||!1,H=((le=(F=ie.metadata)==null?void 0:F.roles)==null?void 0:le.includes("readonly"))||!1;return ne?1:H?-1:0})}),N=()=>{e.dialog({component:_n}).onOk(async({action:z,metadata:Y})=>{h.value=Y,z===Ee.GENERATE&&(P.value=Ee.GENERATE,C()&&(await U(T.value),R(),gtag==null||gtag("event","add_new_key",{location:document.location.href})))})},X=(z,Y)=>{z===Ee.REVOKE?(I.value=Y.key,l.value=Y.transferTo):z===Ee.TRANSFER&&(u.value=Y.target,S.value=Y.source),P.value=z,C()&&(U(T.value),R())};Le(async()=>{await v.fetchKeys(),v.checkPrimaryKey(),g.value.length===0&&await n.getProducts()});const J={t:s,$q:e,apiKeyStore:v,userStore:p,embeddingStore:n,keys:o,isLoading:i,primaryKey:y,user:E,products:g,currentAction:P,currentMetadata:h,actionCallback:D,handleTurnstileCb:U,turnstileToken:T,turnstileRef:b,turnstileVisible:B,proceeding:V,onUpdateToken:L,checkReady:C,resetVariables:R,filterQuery:f,revokeKey:I,revokeWithTransferKey:l,transferTarget:u,transferSource:S,hasPaidKey:O,visibleKeys:j,openApiKeyDialog:N,onExecute:X,KeyItem:qn,TurnstileComponent:st};return Object.defineProperty(J,"__isScriptSetup",{enumerable:!1,value:!0}),J}});function Bn(c,r,s,e,v,p){return _(),x(ue,{class:"fit"},{default:t(()=>[a(St,{ref:"decisionTable",grid:"",rows:e.visibleKeys,flat:"","row-key":"_id","hide-header":"",loading:e.isLoading||e.proceeding,pagination:{rowsPerPage:10},"card-container-class":"tour-optimizer-result-table"},{top:t(()=>[a(ue,{class:"full-width",flat:"",square:""},{default:t(()=>[a(re,{class:"row q-pa-none"},{default:t(()=>[a(ae,{disable:!e.user.uid||e.isLoading,flat:"",square:"","no-caps":"",padding:"md",icon:"add",label:e.t("key_manager.add"),onClick:e.openApiKeyDialog},null,8,["disable","label"]),a(ae,{disable:!e.hasPaidKey,flat:"",square:"",padding:"md",icon:"receipt_long",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["disable","label"]),a(ae,{flat:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/api-dashboard/contact-sales",padding:"md","no-caps":""},null,8,["label"]),a(xe,{filled:"",square:"",class:"full-width",debounce:"300",modelValue:e.filterQuery,"onUpdate:modelValue":r[0]||(r[0]=n=>e.filterQuery=n),placeholder:e.t("key_manager.filter_by")},{prepend:t(()=>[a(te,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(de)]),_:1})]),item:t(n=>[(_(),x(e.KeyItem,{key:n.row.key,"api-key":n.row,onExecute:e.onExecute},null,8,["api-key"]))]),_:1},8,["rows","loading"]),e.turnstileVisible?(_(),x(e.TurnstileComponent,{key:0,ref:"turnstileRef",modelValue:e.turnstileToken,"onUpdate:modelValue":[r[1]||(r[1]=n=>e.turnstileToken=n),e.onUpdateToken]},null,8,["modelValue","onUpdate:modelValue"])):q("",!0)]),_:1})}const jn=me(Mn,[["render",Bn],["__file","KeysTable.vue"]]),ya="https://api.jina.ai/v1/classify",Je=6,Un=ce({__name:"AvatarTab",setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global"}),e=we(),v=w(!1),p=w([]),n=w(null),o=w(!1),i=w(""),y=w(""),E=Te(),g=w(null),P=f=>{g.value=f},h={accessories:{Eyepatch:"person wearing a mysterious black eye patch",Glasses:"person wearing modern round glasses with clear lenses","Glasses 2":"person wearing thin-framed contemporary glasses","Glasses 3":"person wearing classic rectangular glasses","Glasses 4":"person wearing vintage round glasses","Glasses 5":"person wearing designer wire-frame glasses",None:"person without any eyewear or accessories",Sunglasses:"person wearing fashionable dark sunglasses","Sunglasses 2":"person wearing sporty aviator sunglasses"},body:{"Blazer Black Tee":"person wearing a black t-shirt under a professional blazer","Button Shirt 1":"person in a crisp button-up dress shirt","Button Shirt 2":"person in a light colored button-up shirt",Coffee:"person holding a coffee cup in casual attire",Device:"person using a mobile device in casual wear",Dress:"person wearing an elegant flowing dress",Explaining:"person gesturing while explaining in business attire","Fur Jacket":"person wearing a luxurious fur jacket",Gaming:"person in gaming attire with controller","Gym Shirt":"person wearing athletic workout clothes",Hoodie:"person in a comfortable casual hoodie",Killer:"person in dark mysterious attire",Macbook:"person working on laptop in casual clothes",Paper:"person holding papers in professional attire","Pointing Up":"person gesturing upward in business wear","Polka Dot Jacket":"person in playful polka dot jacket","Polo and Sweater":"person wearing polo shirt under sweater","Shirt and Coat":"person in formal shirt and coat combination","Sporty Tee":"person in athletic sports t-shirt","Striped Pocket Tee":"person in casual striped t-shirt with pocket","Striped Tee":"person wearing horizontal striped t-shirt",Sweater:"person in cozy knit sweater","Sweater Dots":"person wearing sweater with polka dot pattern","Tee 1":"person in basic solid t-shirt","Tee 2":"person in casual graphic t-shirt","Tee Arms Crossed":"person with crossed arms in t-shirt","Tee Selena":"person in fitted casual t-shirt","Thunder T-Shirt":"person wearing t-shirt with thunder design",Turtleneck:"person in sophisticated black turtleneck",Whatever:"person in casual wear with relaxed pose"},face:{"Angry with Fang":"person with an intense angry expression showing fangs",Awe:"person with an expression of wonder and amazement",Blank:"person with a neutral blank expression",Calm:"person with serene peaceful expression",Cheeky:"person with a playful mischievous expression",Concerned:"person with a worried concerned expression","Concerned Fear":"person with a worried fearful expression",Contempt:"person with a disdainful contemptuous expression",Cute:"person with adorable cheerful expression",Cyclops:"person has only one one-eye",Driven:"person with determined focused expression","Eating Happy":"person with a joyful expression while eating",Explaining:"person with an animated expression while explaining","Eyes Closed":"person with a peaceful expression and closed eyes",Fear:"person with a frightened fearful expression",Hectic:"person with a frantic overwhelmed expression","Loving Grin 1":"person with gentle loving smile","Loving Grin 2":"person with bright heartfelt smile",Monster:"person with a playful monster-like expression",Old:"person with an aged wise expression",Rage:"person with an intense angry expression",Serious:"person with professional serious expression",Smile:"person with friendly welcoming smile","Smile Big":"person with broad enthusiastic smile","Smile LOL":"person with joyful laughing expression","Smile Teeth Gap":"person with charming gap-toothed smile",Solemn:"person with a deeply serious thoughtful expression",Suspicious:"person with a skeptical suspicious expression",Tired:"person with an exhausted weary expression","Very Angry":"person with an extremely angry expression"},head:{Afro:"person with natural afro hairstyle",Bangs:"person with straight front bangs","Bangs 2":"person with side-swept bangs","Bantu Knots":"person with traditional bantu knots hairstyle",Bear:"person with bear-themed hairstyle",Bun:"person with hair styled in neat bun","Bun 2":"person with messy top bun",Buns:"person with double hair buns",Cornrows:"person with cornrow braided hairstyle","Cornrows 2":"person with intricate cornrow design","Flat Top":"person with classic flat top haircut","Flat Top Long":"person with long flat top haircut","Gray Bun":"person with gray hair in bun","Gray Medium":"person with medium-length gray hair","Gray Short":"person with short gray hair",Long:"person with long flowing hair","Long Afro":"person with long voluminous afro","Long Bangs":"person with long layered bangs","Long Curly":"person with long curly hair","Medium 1":"person with shoulder-length hair","Medium 2":"person with wavy medium hair","Medium 3":"person with textured medium hair","Medium Bangs":"person with medium hair and bangs","Medium Bangs 2":"person with feathered medium bangs","Medium Bangs 3":"person with side-parted medium bangs","Medium Straight":"person with straight medium-length hair",Mohawk:"person with classic mohawk style","Mohawk 2":"person with longer mohawk variation","No Hair 1":"person with smooth bald head","No Hair 2":"person with polished bald style","No Hair 3":"person with completely shaved head",Pomp:"person with pompadour hairstyle","Shaved 1":"person with partially shaved head style","Shaved 2":"person with modern shaved haircut","Shaved 3":"person with artistic shaved design","Short 1":"person with short textured cut","Short 2":"person with short faded haircut","Short 3":"person with short spiky style","Short 4":"person with short layered cut","Short 5":"person with short tapered haircut",Twists:"person with twisted loc hairstyle","Twists 2":"person with longer twisted locs","hat-beanie":"person wearing a casual beanie hat","hat-hip":"person wearing a trendy hip-hop style hat"}};async function D(f){var I;try{const l=f.includes("base64,")?f.split("base64,")[1]:f,u=await fetch(ya,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E.apiKey}`},body:JSON.stringify({model:(I=g==null?void 0:g.value)==null?void 0:I.name,input:[{image:l}],labels:{accessories:Object.values(h.accessories),body:Object.values(h.body),face:Object.values(h.face),head:Object.values(h.head)}})});if(!u.ok)throw new Error(`Classification failed: ${u.status}`);return await u.json()}catch(l){throw console.error("Classification error:",l),l}}async function U(f,I){try{return(await Bt(Object.assign({"../../assets/avatar/accessories/Eyepatch.svg":()=>d(()=>import("./Eyepatch-CPtCE8NI.js"),[]),"../../assets/avatar/accessories/Glasses 2.svg":()=>d(()=>import("./Glasses 2-CisVqvW9.js"),[]),"../../assets/avatar/accessories/Glasses 3.svg":()=>d(()=>import("./Glasses 3--AGI-_U5.js"),[]),"../../assets/avatar/accessories/Glasses 4.svg":()=>d(()=>import("./Glasses 4-CkCSLu0z.js"),[]),"../../assets/avatar/accessories/Glasses 5.svg":()=>d(()=>import("./Glasses 5-BnBdJIiD.js"),[]),"../../assets/avatar/accessories/Glasses.svg":()=>d(()=>import("./Glasses-bHTDfG2F.js"),[]),"../../assets/avatar/accessories/None.svg":()=>d(()=>import("./None-CBIsyCCu.js"),[]),"../../assets/avatar/accessories/Sunglasses 2.svg":()=>d(()=>import("./Sunglasses 2-Bm0kyZv8.js"),[]),"../../assets/avatar/accessories/Sunglasses.svg":()=>d(()=>import("./Sunglasses-CCXW1Ow2.js"),[]),"../../assets/avatar/body/Blazer Black Tee.svg":()=>d(()=>import("./Blazer Black Tee-CCvV2dgG.js"),[]),"../../assets/avatar/body/Button Shirt 1.svg":()=>d(()=>import("./Button Shirt 1-CmLXOUNx.js"),[]),"../../assets/avatar/body/Button Shirt 2.svg":()=>d(()=>import("./Button Shirt 2-s_x7_Ujv.js"),[]),"../../assets/avatar/body/Coffee.svg":()=>d(()=>import("./Coffee-BWgpJV-A.js"),[]),"../../assets/avatar/body/Device.svg":()=>d(()=>import("./Device-DEcjonbR.js"),[]),"../../assets/avatar/body/Dress.svg":()=>d(()=>import("./Dress-_6EnLKsY.js"),[]),"../../assets/avatar/body/Explaining.svg":()=>d(()=>import("./Explaining-DadwYvu0.js"),[]),"../../assets/avatar/body/Fur Jacket.svg":()=>d(()=>import("./Fur Jacket-CdWbrdPB.js"),[]),"../../assets/avatar/body/Gaming.svg":()=>d(()=>import("./Gaming-BDiAmtUY.js"),[]),"../../assets/avatar/body/Gym Shirt.svg":()=>d(()=>import("./Gym Shirt-DQCaFZ3f.js"),[]),"../../assets/avatar/body/Hoodie.svg":()=>d(()=>import("./Hoodie-B07UN-Nl.js"),[]),"../../assets/avatar/body/Killer.svg":()=>d(()=>import("./Killer-DTtnEXXI.js"),[]),"../../assets/avatar/body/Macbook.svg":()=>d(()=>import("./Macbook-CZ7Tiuu8.js"),[]),"../../assets/avatar/body/Paper.svg":()=>d(()=>import("./Paper-DK__jVLJ.js"),[]),"../../assets/avatar/body/Pointing Up.svg":()=>d(()=>import("./Pointing Up-DMSWjUIR.js"),[]),"../../assets/avatar/body/Polka Dot Jacket.svg":()=>d(()=>import("./Polka Dot Jacket-Ccaxzz07.js"),[]),"../../assets/avatar/body/Polo and Sweater.svg":()=>d(()=>import("./Polo and Sweater-DtFh9BfC.js"),[]),"../../assets/avatar/body/Shirt and Coat.svg":()=>d(()=>import("./Shirt and Coat-CUM3_bbN.js"),[]),"../../assets/avatar/body/Sporty Tee.svg":()=>d(()=>import("./Sporty Tee-DC-mJGrt.js"),[]),"../../assets/avatar/body/Striped Pocket Tee.svg":()=>d(()=>import("./Striped Pocket Tee-CIvIqxDn.js"),[]),"../../assets/avatar/body/Striped Tee.svg":()=>d(()=>import("./Striped Tee-DNfZDSQM.js"),[]),"../../assets/avatar/body/Sweater Dots.svg":()=>d(()=>import("./Sweater Dots-BlH7xuFs.js"),[]),"../../assets/avatar/body/Sweater.svg":()=>d(()=>import("./Sweater-CuOBOSOz.js"),[]),"../../assets/avatar/body/Tee 1.svg":()=>d(()=>import("./Tee 1-BAomRkw9.js"),[]),"../../assets/avatar/body/Tee 2.svg":()=>d(()=>import("./Tee 2-C4UUC6VK.js"),[]),"../../assets/avatar/body/Tee Arms Crossed.svg":()=>d(()=>import("./Tee Arms Crossed-Cd7ErYZG.js"),[]),"../../assets/avatar/body/Tee Selena.svg":()=>d(()=>import("./Tee Selena-BuBczbrL.js"),[]),"../../assets/avatar/body/Thunder T-Shirt.svg":()=>d(()=>import("./Thunder T-Shirt-R3FQYUZD.js"),[]),"../../assets/avatar/body/Turtleneck.svg":()=>d(()=>import("./Turtleneck-CBu5E31v.js"),[]),"../../assets/avatar/body/Whatever.svg":()=>d(()=>import("./Whatever-C_L7o4PD.js"),[]),"../../assets/avatar/face/Angry with Fang.svg":()=>d(()=>import("./Angry with Fang-Cz56tpGA.js"),[]),"../../assets/avatar/face/Awe.svg":()=>d(()=>import("./Awe-BZkmV47x.js"),[]),"../../assets/avatar/face/Blank.svg":()=>d(()=>import("./Blank-NsmhZSM1.js"),[]),"../../assets/avatar/face/Calm.svg":()=>d(()=>import("./Calm-CPd4QvYU.js"),[]),"../../assets/avatar/face/Cheeky.svg":()=>d(()=>import("./Cheeky-CiEXIAta.js"),[]),"../../assets/avatar/face/Concerned Fear.svg":()=>d(()=>import("./Concerned Fear-DW5JY4CD.js"),[]),"../../assets/avatar/face/Concerned.svg":()=>d(()=>import("./Concerned-BgtD4Mod.js"),[]),"../../assets/avatar/face/Contempt.svg":()=>d(()=>import("./Contempt-CvrrLjDN.js"),[]),"../../assets/avatar/face/Cute.svg":()=>d(()=>import("./Cute-BwsaONwn.js"),[]),"../../assets/avatar/face/Cyclops.svg":()=>d(()=>import("./Cyclops-DTp1IdXY.js"),[]),"../../assets/avatar/face/Driven.svg":()=>d(()=>import("./Driven-De_O7WVZ.js"),[]),"../../assets/avatar/face/Eating Happy.svg":()=>d(()=>import("./Eating Happy-BgMnwg9g.js"),[]),"../../assets/avatar/face/Explaining.svg":()=>d(()=>import("./Explaining-THnIdgyB.js"),[]),"../../assets/avatar/face/Eyes Closed.svg":()=>d(()=>import("./Eyes Closed-CdI1KQdq.js"),[]),"../../assets/avatar/face/Fear.svg":()=>d(()=>import("./Fear-BexFCH5R.js"),[]),"../../assets/avatar/face/Hectic.svg":()=>d(()=>import("./Hectic-AExjuXjY.js"),[]),"../../assets/avatar/face/Loving Grin 1.svg":()=>d(()=>import("./Loving Grin 1-B_w88qcc.js"),[]),"../../assets/avatar/face/Loving Grin 2.svg":()=>d(()=>import("./Loving Grin 2-zoGieaDF.js"),[]),"../../assets/avatar/face/Monster.svg":()=>d(()=>import("./Monster-C1lwNnn2.js"),[]),"../../assets/avatar/face/Old.svg":()=>d(()=>import("./Old-D4BSyuLE.js"),[]),"../../assets/avatar/face/Rage.svg":()=>d(()=>import("./Rage-B2uNaaGQ.js"),[]),"../../assets/avatar/face/Serious.svg":()=>d(()=>import("./Serious-DI3hxq-4.js"),[]),"../../assets/avatar/face/Smile Big.svg":()=>d(()=>import("./Smile Big-aT5CkwfB.js"),[]),"../../assets/avatar/face/Smile LOL.svg":()=>d(()=>import("./Smile LOL-DC93Zyi_.js"),[]),"../../assets/avatar/face/Smile Teeth Gap.svg":()=>d(()=>import("./Smile Teeth Gap-DBZFawB0.js"),[]),"../../assets/avatar/face/Smile.svg":()=>d(()=>import("./Smile-0Wibgfy8.js"),[]),"../../assets/avatar/face/Solemn.svg":()=>d(()=>import("./Solemn-CxgWcI-i.js"),[]),"../../assets/avatar/face/Suspicious.svg":()=>d(()=>import("./Suspicious-D7j672A1.js"),[]),"../../assets/avatar/face/Tired.svg":()=>d(()=>import("./Tired-D_AtxcGW.js"),[]),"../../assets/avatar/face/Very Angry.svg":()=>d(()=>import("./Very Angry-D5F4ua3s.js"),[]),"../../assets/avatar/facialHair/Chin.svg":()=>d(()=>import("./Chin-DUNkMTkI.js"),[]),"../../assets/avatar/facialHair/Full 2.svg":()=>d(()=>import("./Full 2-gHgrzbn6.js"),[]),"../../assets/avatar/facialHair/Full 3.svg":()=>d(()=>import("./Full 3-Ds9Mi2Pn.js"),[]),"../../assets/avatar/facialHair/Full 4.svg":()=>d(()=>import("./Full 4-CpyHDOKi.js"),[]),"../../assets/avatar/facialHair/Full.svg":()=>d(()=>import("./Full--tLCytme.js"),[]),"../../assets/avatar/facialHair/Goatee 1.svg":()=>d(()=>import("./Goatee 1-CjxWNkM4.js"),[]),"../../assets/avatar/facialHair/Goatee 2.svg":()=>d(()=>import("./Goatee 2-DX91ea6G.js"),[]),"../../assets/avatar/facialHair/Moustache 1.svg":()=>d(()=>import("./Moustache 1-DCfFyVoz.js"),[]),"../../assets/avatar/facialHair/Moustache 2.svg":()=>d(()=>import("./Moustache 2-DvTVVVR4.js"),[]),"../../assets/avatar/facialHair/Moustache 3.svg":()=>d(()=>import("./Moustache 3-7DebNHil.js"),[]),"../../assets/avatar/facialHair/Moustache 4.svg":()=>d(()=>import("./Moustache 4-SJn7FG3B.js"),[]),"../../assets/avatar/facialHair/Moustache 5.svg":()=>d(()=>import("./Moustache 5-44Xj2EZF.js"),[]),"../../assets/avatar/facialHair/Moustache 6.svg":()=>d(()=>import("./Moustache 6-CEr5yFL1.js"),[]),"../../assets/avatar/facialHair/Moustache 7.svg":()=>d(()=>import("./Moustache 7-Bq0VvETl.js"),[]),"../../assets/avatar/facialHair/Moustache 8.svg":()=>d(()=>import("./Moustache 8-mUxMyGGc.js"),[]),"../../assets/avatar/facialHair/Moustache 9.svg":()=>d(()=>import("./Moustache 9-DOisYSjS.js"),[]),"../../assets/avatar/facialHair/None.svg":()=>d(()=>import("./None-DgNcDPcG.js"),[]),"../../assets/avatar/head/Afro.svg":()=>d(()=>import("./Afro-BcTe8cjZ.js"),[]),"../../assets/avatar/head/Bangs 2.svg":()=>d(()=>import("./Bangs 2-8gDxCaJT.js"),[]),"../../assets/avatar/head/Bangs.svg":()=>d(()=>import("./Bangs-VMnv_1Bg.js"),[]),"../../assets/avatar/head/Bantu Knots.svg":()=>d(()=>import("./Bantu Knots-FkG8IqlL.js"),[]),"../../assets/avatar/head/Bear.svg":()=>d(()=>import("./Bear-B_wppsaW.js"),[]),"../../assets/avatar/head/Bun 2.svg":()=>d(()=>import("./Bun 2-EtBMU_d9.js"),[]),"../../assets/avatar/head/Bun.svg":()=>d(()=>import("./Bun-B7Kj-Cx2.js"),[]),"../../assets/avatar/head/Buns.svg":()=>d(()=>import("./Buns-0MUj_y-O.js"),[]),"../../assets/avatar/head/Cornrows 2.svg":()=>d(()=>import("./Cornrows 2-m36CFRMN.js"),[]),"../../assets/avatar/head/Cornrows.svg":()=>d(()=>import("./Cornrows-D_tFOLo2.js"),[]),"../../assets/avatar/head/Flat Top Long.svg":()=>d(()=>import("./Flat Top Long-BYSVHErS.js"),[]),"../../assets/avatar/head/Flat Top.svg":()=>d(()=>import("./Flat Top-3MNwLsIB.js"),[]),"../../assets/avatar/head/Gray Bun.svg":()=>d(()=>import("./Gray Bun-6Dorz2Bf.js"),[]),"../../assets/avatar/head/Gray Medium.svg":()=>d(()=>import("./Gray Medium-lrleAuub.js"),[]),"../../assets/avatar/head/Gray Short.svg":()=>d(()=>import("./Gray Short-DEP2bB8l.js"),[]),"../../assets/avatar/head/Long Afro.svg":()=>d(()=>import("./Long Afro-CZArt9o6.js"),[]),"../../assets/avatar/head/Long Bangs.svg":()=>d(()=>import("./Long Bangs-CEgFEE8r.js"),[]),"../../assets/avatar/head/Long Curly.svg":()=>d(()=>import("./Long Curly-CzVOPxU6.js"),[]),"../../assets/avatar/head/Long.svg":()=>d(()=>import("./Long-mD9BOv0I.js"),[]),"../../assets/avatar/head/Medium 1.svg":()=>d(()=>import("./Medium 1-BIbsz7Fr.js"),[]),"../../assets/avatar/head/Medium 2.svg":()=>d(()=>import("./Medium 2-CnPtrhj9.js"),[]),"../../assets/avatar/head/Medium 3.svg":()=>d(()=>import("./Medium 3-B-FK1tKj.js"),[]),"../../assets/avatar/head/Medium Bangs 2.svg":()=>d(()=>import("./Medium Bangs 2-Cr7FTMco.js"),[]),"../../assets/avatar/head/Medium Bangs 3.svg":()=>d(()=>import("./Medium Bangs 3-CN81QHc8.js"),[]),"../../assets/avatar/head/Medium Bangs.svg":()=>d(()=>import("./Medium Bangs-DvU1aw27.js"),[]),"../../assets/avatar/head/Medium Straight.svg":()=>d(()=>import("./Medium Straight-C1jK9Qgd.js"),[]),"../../assets/avatar/head/Mohawk 2.svg":()=>d(()=>import("./Mohawk 2-BPHaakiH.js"),[]),"../../assets/avatar/head/Mohawk.svg":()=>d(()=>import("./Mohawk-BtkBrxTU.js"),[]),"../../assets/avatar/head/No Hair 1.svg":()=>d(()=>import("./No Hair 1-BM-4_kmR.js"),[]),"../../assets/avatar/head/No Hair 2.svg":()=>d(()=>import("./No Hair 2-DjnYbtaT.js"),[]),"../../assets/avatar/head/No Hair 3.svg":()=>d(()=>import("./No Hair 3-CDiHEwX9.js"),[]),"../../assets/avatar/head/Pomp.svg":()=>d(()=>import("./Pomp-Di6BypHV.js"),[]),"../../assets/avatar/head/Shaved 1.svg":()=>d(()=>import("./Shaved 1-DUFavbik.js"),[]),"../../assets/avatar/head/Shaved 2.svg":()=>d(()=>import("./Shaved 2-BIYv1-1_.js"),[]),"../../assets/avatar/head/Shaved 3.svg":()=>d(()=>import("./Shaved 3-DX966IJI.js"),[]),"../../assets/avatar/head/Short 1.svg":()=>d(()=>import("./Short 1-B-el4prz.js"),[]),"../../assets/avatar/head/Short 2.svg":()=>d(()=>import("./Short 2-YawmDo8u.js"),[]),"../../assets/avatar/head/Short 3.svg":()=>d(()=>import("./Short 3-Bq0t9n5E.js"),[]),"../../assets/avatar/head/Short 4.svg":()=>d(()=>import("./Short 4-B1nPxZXu.js"),[]),"../../assets/avatar/head/Short 5.svg":()=>d(()=>import("./Short 5-xc1sa6I2.js"),[]),"../../assets/avatar/head/Twists 2.svg":()=>d(()=>import("./Twists 2-1XiLWkyn.js"),[]),"../../assets/avatar/head/Twists.svg":()=>d(()=>import("./Twists-DxjfQDSj.js"),[]),"../../assets/avatar/head/hat-beanie.svg":()=>d(()=>import("./hat-beanie-3it8Xmnp.js"),[]),"../../assets/avatar/head/hat-hip.svg":()=>d(()=>import("./hat-hip-CbkFXWiS.js"),[])}),`../../assets/avatar/${f}/${I}.svg`,6)).default}catch(l){throw console.error("Error loading SVG:",l),e.notify({type:"negative",message:s("avatar.error_loading")}),l}}function T(f,I){return Object.entries(f).map(([l,u])=>({category:l,items:u.sort((S,O)=>O.score-S.score).slice(0,I).map(S=>{var O;return{label:S.label,score:S.score,feature:((O=Object.entries(h[l]).find(([j,N])=>N===S.label))==null?void 0:O[0])||Object.keys(h[l])[0]}})}))}function b(f,I){const l={};return f.forEach(({category:u,items:S})=>{const O=S[I%S.length];l[u]=O.feature}),l}async function B(){if(!y.value){e.notify({type:"warning",message:s("avatar.noImageSelected")});return}v.value=!0,p.value=[];try{const f=await D(y.value),I=T(f.data[0].predictions,Je);for(let l=0;l<Je;l++){const u=b(I,l),S=await Promise.all([U("body",u.body),U("head",u.head),U("face",u.face),U("accessories",u.accessories)]),O=["translate(0, 550)","translate(200, 50)","translate(320, 250)","translate(210, 310)"],N=`
        <svg
          width="380"
          height="380"
          viewBox="0 0 900 900"
          fill="none"
          stroke="black"
          stroke-width="0.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g>
            ${S.map((X,J)=>{const z=X.slice(X.indexOf(">",X.indexOf("<svg"))+1).replace("</svg>","");return`<g transform="${O[J]}">${z}</g>`}).join("")}
          </g>
        </svg>
      `;p.value.push(N)}}catch(f){console.error("Error generating avatars:",f),p.value=[],e.notify({type:"negative",message:s("avatar.classificationError")})}finally{v.value=!1}}async function V(f){return new Promise((I,l)=>{const u=new Image,S=document.createElement("canvas"),O=S.getContext("2d");S.width=256,S.height=256,u.onload=()=>{const N=Math.max(S.width/u.width,S.height/u.height),X=(S.width-u.width*N)/2,J=(S.height-u.height*N)/2;O.fillStyle="white",O.fillRect(0,0,S.width,S.height),O.drawImage(u,X,J,u.width*N,u.height*N);const z=S.toDataURL(f.type),Y=z.split(",")[1];i.value=z,y.value=Y,I(Y)},u.onerror=()=>{l(new Error(s("avatar.error_processing")))};const j=new FileReader;j.onload=N=>{u.src=N.target.result},j.onerror=()=>{l(new Error(s("avatar.error_processing")))},j.readAsDataURL(f)})}async function L(){if(n.value){o.value=!0;try{await V(n.value)}catch(f){console.error("Error processing image:",f),e.notify({type:"negative",message:s("avatar.error_processing")})}finally{o.value=!1}}else i.value=""}function C(f,I){const l=new Blob([f],{type:"image/svg+xml"}),u=window.URL.createObjectURL(l),S=document.createElement("a");S.href=u,S.download=`avatar-${I+1}.svg`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(u),e.notify({message:s("avatar.download_success",{index:I+1})})}const R={API_URL:ya,t:s,$q:e,isLoading:v,svgContents:p,TOP_N:Je,selectedFile:n,isProcessing:o,processedImage:i,imageBase64:y,embeddingStore:E,currentModel:g,onModelItemClick:P,featureMapping:h,classifyImage:D,importSVG:U,getTopNPredictions:T,generateFeatureCombination:b,generateAvatar:B,processImage:V,handleFileSelect:L,downloadSVG:C,ModelDropDown:lt};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Nn={class:"row full-width"},Hn={class:"row q-col-gutter-md"},Gn=["innerHTML"];function Fn(c,r,s,e,v,p){return _(),x(ue,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[W("div",Nn,[a(Tt,{class:"col",square:"",filled:"","input-class":"text-no-wrap ellipsis",modelValue:e.selectedFile,"onUpdate:modelValue":[r[0]||(r[0]=n=>e.selectedFile=n),e.handleFileSelect],label:e.t("avatar.select_file"),accept:".jpg,.jpeg,.png,.gif,.webp",loading:e.isProcessing},{prepend:t(()=>[e.processedImage?(_(),x(ea,{key:1,src:e.processedImage,width:"24px",height:"24px"},null,8,["src"])):(_(),x(te,{key:0,name:"attach_file"}))]),_:1},8,["modelValue","label","loading"]),a(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,category:"clip",onChooseModel:e.onModelItemClick},null,8,["currentModel"]),a(ae,{square:"",flat:"","no-caps":"",padding:"md",label:e.t("avatar.generate"),onClick:e.generateAvatar,icon:"play_arrow",loading:e.isLoading,disable:!e.currentModel||!e.selectedFile},null,8,["label","loading","disable"]),a(ae,{square:"",flat:"",padding:"md","no-caps":"",label:e.t("avatar.how_does_it_work"),to:"/news/scaling-test-time-compute-for-embedding-models",icon:"help"},null,8,["label"])]),e.isProcessing||e.isLoading?(_(),x(Ve,{key:0,indeterminate:"",size:"1px"})):q("",!0),a(de),a(re,null,{default:t(()=>[W("div",Hn,[(_(!0),ee(se,null,ve(e.svgContents,(n,o)=>(_(),ee("div",{key:o,class:"col-auto"},[a(ue,{flat:"",bordered:"",class:"cursor-pointer q-hoverable",onClick:i=>e.downloadSVG(n,o)},{default:t(()=>[r[1]||(r[1]=W("span",{class:"q-focus-helper"},null,-1)),a(re,null,{default:t(()=>[W("div",{class:"text-center",innerHTML:n},null,8,Gn)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})}const zn=me(Un,[["render",Fn],["__file","AvatarTab.vue"]]),Qn={...Ua,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:c=>c>=0&&c<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ta=50,xa=2*ta,Pa=xa*Math.PI,Yn=Math.round(Pa*1e3)/1e3,Xn=Na({name:"QCircularProgress",props:{...Qn,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(c,{slots:r}){const{proxy:{$q:s}}=Fa(),e=Ha(c),v=G(()=>{const h=(s.lang.rtl===!0?-1:1)*c.angle;return{transform:c.reverse!==(s.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),p=G(()=>c.instantFeedback!==!0&&c.indeterminate!==!0?{transition:`stroke-dashoffset ${c.animationSpeed}ms ease 0s, stroke ${c.animationSpeed}ms ease`}:""),n=G(()=>xa/(1-c.thickness/2)),o=G(()=>`${n.value/2} ${n.value/2} ${n.value} ${n.value}`),i=G(()=>Dt(c.value,c.min,c.max)),y=G(()=>c.max-c.min),E=G(()=>c.thickness/2*n.value),g=G(()=>{const h=(c.max-i.value)/y.value,D=c.rounded===!0&&i.value<c.max&&h<.25?E.value/2*(1-h/.25):0;return Pa*h+D});function P({thickness:h,offset:D,color:U,cls:T,rounded:b}){return Ce("circle",{class:"q-circular-progress__"+T+(U!==void 0?` text-${U}`:""),style:p.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":Yn,"stroke-dashoffset":D,"stroke-linecap":b,cx:n.value,cy:n.value,r:ta})}return()=>{const h=[];c.centerColor!==void 0&&c.centerColor!=="transparent"&&h.push(Ce("circle",{class:`q-circular-progress__center text-${c.centerColor}`,fill:"currentColor",r:ta-E.value/2,cx:n.value,cy:n.value})),c.trackColor!==void 0&&c.trackColor!=="transparent"&&h.push(P({cls:"track",thickness:E.value,offset:0,color:c.trackColor})),h.push(P({cls:"circle",thickness:E.value,offset:g.value,color:c.color,rounded:c.rounded===!0?"round":void 0}));const D=[Ce("svg",{class:"q-circular-progress__svg",style:v.value,viewBox:o.value,"aria-hidden":"true"},h)];return c.showValue===!0&&D.push(Ce("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:c.fontSize}},r.default!==void 0?r.default():[Ce("div",i.value)])),Ce("div",{class:`q-circular-progress q-circular-progress--${c.indeterminate===!0?"in":""}determinate`,style:e.value,role:"progressbar","aria-valuemin":c.min,"aria-valuemax":c.max,"aria-valuenow":c.indeterminate===!0?void 0:i.value},Ga(r.internal,D))}}}),Wn=ce({__name:"GroundingDemoComponent",props:{useLazyLoading:{type:Boolean,default:!0}},setup(c,{expose:r}){r();const s=c,e=Te(),{apiKey:v}=ye(e),{t:p}=_e({useScope:"global"}),n=w("In 2012, President Barack Hussein Obama repealed the Smith-Mundt act, which had been in place in 1948. The law prevented the government from putting its propaganda on TV and Radio."),o=w(!1),i=w(!0),y=w(0),E=w(null),g=w(null),P=w(null);let h=null;const D=G(()=>{var f;return(f=E.value)==null?void 0:f.data}),U=G(()=>{var f;return(f=D.value)!=null&&f.factuality?D.value.factuality*100:0}),T=G(()=>{var f;return((f=D.value)==null?void 0:f.references.filter(I=>I.isSupportive))||[]}),b=G(()=>{const f=Math.floor(y.value/1e3),I=Math.floor(y.value%1e3/100);return`${f}.${I} s`}),B=G(()=>{var f,I;return g.value!==null?((f=D.value)==null?void 0:f.references.filter(l=>l.isSupportive===g.value))||[]:((I=D.value)==null?void 0:I.references)||[]}),V=f=>{g.value===f?g.value=null:g.value=f},L=async()=>{if(!n.value)return;i.value=!0,E.value=null;const f=Date.now(),I=`https://g.jina.ai/${encodeURIComponent(n.value)}${o.value?"?deepdive=true":""}`;try{const l=await fetch(I,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${v.value}`}});y.value=Date.now()-f,E.value=await l.json()}catch(l){E.value={message:l instanceof Error?l.message:String(l)}}finally{i.value=!1}},C=()=>{var I;const f=((I=P.value)==null?void 0:I.$el)||P.value;f instanceof HTMLElement?(h=new IntersectionObserver(l=>{l[0].isIntersecting&&(L(),h==null||h.disconnect())},{root:null,threshold:.1}),h.observe(f)):console.error("Element is not an HTMLElement:",f)};Le(()=>{s.useLazyLoading?wa(()=>{setTimeout(()=>{C()},100)}):L()}),za(()=>{h&&h.disconnect()});const R={props:s,embeddingStore:e,apiKey:v,t:p,query:n,isDeepDive:o,isBusy:i,responseTime:y,response:E,filters:g,componentRef:P,get observer(){return h},set observer(f){h=f},responseData:D,factuality:U,supportiveNum:T,responseTimeString:b,references:B,onFilter:V,sendQuery:L,initIntersectionObserver:C,ref:w,get formatNumber(){return oa}};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Jn={class:"text-negative"};function Zn(c,r,s,e,v,p){return _(),x(ue,{ref:"componentRef",flat:"",square:"",bordered:"",class:"col-12 col-md-10"},{default:t(()=>{var n;return[a(re,{class:"q-pa-none"},{default:t(()=>[a(Ra,{onSubmit:e.sendQuery,ref:"formRef"},{default:t(()=>{var o,i;return[a(xe,{square:"",filled:"","bottom-slots":!!e.response,modelValue:e.query,"onUpdate:modelValue":r[1]||(r[1]=y=>e.query=y),disable:e.isBusy,clearable:"",label:e.t("reader.demo.your_statement")},na({prepend:t(()=>[a(be,{modelValue:e.isDeepDive,"onUpdate:modelValue":r[0]||(r[0]=y=>e.isDeepDive=y),disable:e.isBusy,"checked-icon":"biotech","icon-color":"black","unchecked-icon":"bolt"},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("reader.demo.headers.deepdive")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),append:t(()=>[a(ae,{square:"",flat:"",icon:"send",padding:"md",loading:e.isBusy,onClick:e.sendQuery,type:"submit"},null,8,["loading"])]),_:2},[(o=e.response)!=null&&o.name||(i=e.response)!=null&&i.message?{name:"hint",fn:t(()=>[W("span",Jn,[k(m(e.response.name||e.response.message)+" ",1),e.response.readableMessage?(_(),x(oe,{key:0},{default:t(()=>[k(m(e.response.readableMessage),1)]),_:1})):q("",!0)])]),key:"0"}:e.response?{name:"hint",fn:t(()=>{var y;return[a(pe,{icon:"timer",label:`${e.responseTimeString}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"]),a(pe,{icon:"straighten",label:`${e.formatNumber(((y=e.responseData)==null?void 0:y.usage.tokens)||0)} ${e.t("embedding.tokens")}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])]}),key:"1"}:void 0]),1032,["bottom-slots","modelValue","disable","label"])]}),_:1},512)]),_:1}),e.isBusy?(_(),x(Ve,{key:0,indeterminate:"",size:"1px"})):q("",!0),e.responseData?(_(),x(re,{key:1,class:"q-mt-lg"},{default:t(()=>[a(Q,null,{default:t(()=>[a(K,{side:""},{default:t(()=>[a(Xn,{"show-value":"",value:e.factuality,size:"60px",thickness:.1,color:e.factuality>50?"positive":"negative","track-color":"surface-mixed-200"},{default:t(()=>{var o,i;return[a(te,{name:(o=e.responseData)!=null&&o.result?"check":"close",color:(i=e.responseData)!=null&&i.result?"accent":"negative",size:"30px"},null,8,["name","color"])]}),_:1},8,["value","color"])]),_:1}),a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.responseData.result?e.t("reader.demo.grounding_result_true"):e.t("reader.demo.grounding_result_false")),1)]),_:1}),a(A,{caption:""},{default:t(()=>{var o;return[k(m((o=e.responseData)==null?void 0:o.reason),1)]}),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(Sa,{outline:"",square:""},{default:t(()=>{var o,i,y;return[a(ae,{label:(o=e.supportiveNum)==null?void 0:o.length,icon:"thumb_up",square:"",onClick:r[2]||(r[2]=E=>e.onFilter(!0)),outline:""},null,8,["label"]),a(de),a(ae,{label:(((i=e.responseData)==null?void 0:i.references.length)||0)-((y=e.supportiveNum)==null?void 0:y.length),icon:"thumb_down",square:"",onClick:r[3]||(r[3]=E=>e.onFilter(!1)),outline:""},null,8,["label"])]}),_:1})]),_:1})]),_:1})]),_:1})):q("",!0),(n=e.responseData)!=null&&n.references.length?(_(),x(re,{key:2},{default:t(()=>[a(Be,null,{default:t(()=>[a(Qe,{name:"list2"},{default:t(()=>[(_(!0),ee(se,null,ve(e.references,o=>(_(),x(Q,{clickable:"",key:o.url,href:o.url,target:"_blank",class:"card-details"},{default:t(()=>[a(K,{avatar:""},{default:t(()=>[a(te,{name:o.isSupportive?"thumb_up":"thumb_down",color:o.isSupportive?"positive":"negative"},null,8,["name","color"])]),_:2},1024),a(K,null,{default:t(()=>[a(A,{lines:"1",class:"text-italic"},{default:t(()=>[k("... "+m(o.keyQuote)+" ...",1)]),_:2},1024),a(A,{caption:""},{default:t(()=>[a(pe,{square:"",size:"sm",icon:`img:https://www.google.com/s2/favicons?sz=32&domain_url=${o.url}`,label:o.url,class:"text-caption q-mx-none bg-mixed-200",style:{"max-width":"60%"}},null,8,["icon","label"])]),_:2},1024)]),_:2},1024),a(K,{side:""},{default:t(()=>[a(te,{name:"open_in_new",size:"xs",class:"read-more-btn"})]),_:1})]),_:2},1032,["href"]))),128))]),_:1})]),_:1})]),_:1})):q("",!0)]}),_:1},512)}const $n=me(Wn,[["render",Zn],["__file","GroundingDemoComponent.vue"]]),er=ce({__name:"GroundingTab",setup(c,{expose:r}){r();const s={GroundingDemoComponent:$n};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function ar(c,r,s,e,v,p){return _(),x(ue,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.GroundingDemoComponent,{"use-lazy-loading":!1})]),_:1})}const tr=me(er,[["render",ar],["__scopeId","data-v-0622c9bb"],["__file","GroundingTab.vue"]]),Ze="https://llm-serp.jina.ai",nr=ce({__name:"UsageComponent",setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global"}),e=we(),v=Te(),{apiKey:p}=ye(v),n=w(!1),o=w({}),i=w({q:"jina ai",location:""}),y=G(()=>{const T={};for(const[b,B]of Object.entries(i.value))B&&(T[b]=B);return T}),E=w({}),g=w([{header:"Authorization",value:`Bearer ${p.value}`,label:"auth_token",type:"toggle",url:"/api-dashboard/rate-limit",get disabled(){return!p.value},get indicator(){return!!E.value[this.header]},set(T){T?E.value[this.header]=this.value:delete E.value[this.header]}},{label:"country",type:"select",value:i.value.gl,options:[{value:"Default"},...it],indicator:!0,set(T){if(this.value=T,T==="Default"){delete i.value.gl;return}i.value.gl=T},init(){this.value="Default"}},{label:"location",type:"text",value:i.value.location,indicator:!0,set(T){this.value=T,i.value.location=T}},{label:"language",type:"select",value:i.value.hl,indicator:!0,options:[{value:"Default"},...ut],set(T){if(this.value=T,T==="Default"){delete i.value.hl;return}i.value.hl=T},init(){this.value="Default"}},{label:"number",type:"select",options:[{value:10},{value:20},{value:30}],value:i.value.num,set(T){this.value=T||null;const b=Number(this.value);if(b===10){delete i.value.num;return}i.value.num=b},init(){this.set(10)}},{label:"page",type:"number",min:1,indicator:!0,value:i.value.page,set(T){this.value=T||null;const b=Number(this.value);if(b===1){delete i.value.page;return}i.value.page=b},init(){this.set(1)}}]),P=G(()=>{for(const V of g.value)V.disabled&&V.set(!1);const T=["Content-Type: application/json"];for(const[V,L]of Object.entries(E.value))if(L){if(typeof L=="string")T.push(`${V}: ${L}`);else if(Array.isArray(L))for(const C of L)T.push(`${V}: ${C}`)}const b=T.map(V=>`  -H "${V}"`).join(`\\
`);return`
\`\`\`bash
${[`curl ${Ze}`,`${b}`,`  -d @- <<EOFEOF
  {
    ${JSON.stringify(y.value,null,4).slice(1,-1).trim()}
  }
EOFEOF`].join(` \\
`)}
\`\`\`
  `}),h=w(!1),D=async()=>{if(!p.value||!y.value.q)return;o.value={};const T={"Content-Type":"application/json"};for(const b of g.value)b.indicator&&b.header&&(T[b.header]=b.value);n.value=!0,fetch(Ze,{method:"POST",headers:T,body:JSON.stringify(y.value)}).then(async b=>{var B;if((B=b.headers.get("content-type"))!=null&&B.includes("text/event-stream")){if(b.body){o.value={status:b.status,statusText:b.statusText,eventStream:!0,data:[]};const V=b.body.getReader(),L=new TextDecoder;for(;;){const{done:C,value:R}=await V.read();if(C){h.value=!1,n.value=!1;break}R&&(h.value=!0,L.decode(R).split(`

`).forEach(l=>{const S=l.split(`
`).find(j=>j.startsWith("data: "));if(!S)return;const O=S.replace(/data: /g,"");try{O&&o.value.data.push(O)}catch(j){console.error("Error:",j)}}))}}}else{o.value={status:b.status,statusText:b.statusText};const V=await b.json();o.value.data={status:b.status,type:"json",content:V}}}).catch(b=>{console.error("Error:",b),o.value={status:500,data:b.message}}).finally(()=>{n.value=!1,h.value=!1})};Le(()=>{g.value.forEach(T=>{T.init&&T.init()})});const U={t:s,$q:e,embeddingStore:v,apiKey:p,isBusy:n,response:o,payload:i,BASE_URL:Ze,adaptablePayload:y,headers:E,availableParameters:g,adaptableCode:P,isStreaming:h,onExecute:D,UsageHeader:dt,APIPanel:ct};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}});function rr(c,r,s,e,v,p){return _(),x(ue,{flat:"",square:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.UsageHeader,{"home-link":"/llm-serp-demo","issue-link":"https://github.com/jina-ai/node-serp/issues","is-support-c-s-p":!1,"api-link":""}),a(de),a(re,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none",style:{"flex-grow":"1"}},{default:t(()=>[a(re,{class:"col-md-6 col-lg-5 col-xl-4 q-pa-none"},{default:t(()=>[a(Be,{class:"full-width"},{default:t(()=>[a(Qe,{name:"list2"},{default:t(()=>[a(Q,{key:"query",class:"q-pa-none"},{default:t(()=>[a(K,null,{default:t(()=>[a(xe,{type:"textarea",rows:"1",modelValue:e.payload.q,"onUpdate:modelValue":r[0]||(r[0]=n=>e.payload.q=n),class:"full-width text-caption",filled:"",square:"","hide-bottom-space":"",label:e.t("llm_serp.query_label"),rules:[n=>!!n]},{prepend:t(()=>[a(te,{name:"search"})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1}),(_(!0),ee(se,null,ve(e.availableParameters,n=>(_(),ee(se,{key:n.label},[n.disabled?q("",!0):(_(),x(Q,{tag:"label",key:n.label},{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t(`llm_serp.parameters.${n.label}`)),1)]),_:2},1024),a(A,{caption:"",innerHTML:e.t(`llm_serp.parameters.${n.label}_explain`)},null,8,["innerHTML"]),n.url?(_(),x(A,{key:0,caption:"",class:"q-pt-sm"},{default:t(()=>[a(ae,{href:n.url,label:e.t("deepsearch.learn_more"),size:"xs",outline:"",square:"",icon:"open_in_new",target:"_blank"},null,8,["href","label"])]),_:2},1024)):q("",!0)]),_:2},1024),n.type==="toggle"?(_(),x(K,{key:0,side:""},{default:t(()=>[a(be,{disable:n.disabled,"model-value":n.indicator,"onUpdate:modelValue":o=>n.set(o)},null,8,["disable","model-value","onUpdate:modelValue"])]),_:2},1024)):n.type==="text"||n.type==="number"?(_(),x(K,{key:1,side:""},{default:t(()=>[a(xe,{"model-value":n.value,"onUpdate:modelValue":o=>n.set(o),filled:"",square:"",type:n.type,min:n.min,style:{"max-width":"100px"},disable:!n.indicator},null,8,["model-value","onUpdate:modelValue","type","min","disable"])]),_:2},1024)):n.type==="select"?(_(),x(K,{key:2,side:""},{default:t(()=>[a(Re,{modelValue:n.value,"onUpdate:modelValue":[o=>n.value=o,o=>n.set(o)],options:n.options,style:{"min-width":"100px"},filled:"",square:"","hide-bottom-space":"","emit-value":"","map-options":""},{option:t(({opt:o,itemProps:i})=>[a(Q,ze({ref_for:!0},i),{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[W("code",null,m(o.value),1)]),_:2},1024),a(A,{caption:""},{default:t(()=>[k(m(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),selected:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[W("code",null,m(n.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):q("",!0)]),_:2},1024))],64))),128))]),_:1})]),_:1})]),_:1}),a(de,{vertical:e.$q.screen.gt.sm},null,8,["vertical"]),a(e.APIPanel,{code:e.adaptableCode,onExecute:e.onExecute,loading:e.isBusy,"is-streaming":e.isStreaming,response:e.response,disabled:!e.apiKey},null,8,["code","loading","is-streaming","response","disabled"])]),_:1},8,["horizontal"])]),_:1})}const or=me(nr,[["render",rr],["__file","UsageComponent.vue"]]),sr=ce({__name:"CostEstimator",setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global",inheritLocale:!0}),e=je(),v=w("quarterly"),p=w(!1),n=w("business"),o=w(5);Fe(n,u=>{o.value=u==="business"?5:1e4});const i=w("standard"),y=w(3),E=w(!1),g=w("steady"),P=w({"jina-embeddings":!0,"jina-clip":!1,"jina-colbert":!1,"jina-reranker":!1,ReaderLM:!1}),h=w("standard"),D=w(!1),U=w(!1),T=w(!1),b={usageTiers:{business:[{limit:5,price:0},{limit:10,price:2e3},{limit:25,price:5e3},{limit:50,price:1e4},{limit:100,price:2e4}],consumer:[{limit:1e4,price:0},{limit:5e4,price:2e3},{limit:1e5,price:5e3},{limit:5e5,price:1e4},{limit:1e6,price:2e4}]},modelPrices:{"jina-embeddings":0,"jina-clip":5e3,"jina-colbert":3e3,"jina-reranker":4e3,ReaderLM:2e3},supportTiers:{standard:0,premium:5e3,enterprise:15e3},features:{priorityResponse:2e3,dedicatedCSM:8e3,customModelTraining:1e4},basePrice:5e3},B=G(()=>{let u=b.basePrice;const S=b.usageTiers[n.value],O=S.find((j,N)=>o.value<=j.limit||N===S.length-1);if(u+=(O==null?void 0:O.price)||0,Object.entries(P.value).forEach(([j,N])=>{N&&b.modelPrices[j]>0&&(u+=b.modelPrices[j])}),u+=b.supportTiers[h.value],D.value&&(u+=b.features.priorityResponse),U.value&&(u+=b.features.dedicatedCSM),T.value&&(u+=b.features.customModelTraining),i.value==="poc")u=u*.4;else if(i.value==="department"){let j=.15;const N={limited:1,steady:.95,high:.9};E.value&&(u=u*1.1,j=.25),u=u*(1-j)*N[g.value]}return{monthly:u/3,quarterly:u,annual:u*4*.9,final:p.value?u*4*.9:u}}),V=[{label:s("estimator.labels.upTo",{count:5}),value:5},{label:s("estimator.labels.upTo",{count:10}),value:10},{label:s("estimator.labels.upTo",{count:25}),value:25},{label:s("estimator.labels.upTo",{count:50}),value:50},{label:s("estimator.labels.upTo",{count:100}),value:100}],L=[{label:s("estimator.labels.upTo",{count:1e4}),value:1e4},{label:s("estimator.labels.upTo",{count:5e4}),value:5e4},{label:s("estimator.labels.upTo",{count:1e5}),value:1e5},{label:s("estimator.labels.upTo",{count:5e5}),value:5e5},{label:s("estimator.labels.upTo",{count:1e6}),value:1e6}],C=G(()=>n.value==="business"&&o.value>100||n.value==="consumer"&&o.value>1e6),R=G({get(){return Object.entries(P.value).filter(([,u])=>u).map(([u])=>u)},set(u){for(let S of Object.keys(P.value))P.value[S]=!1;u.forEach(S=>{P.value[S]=!0})}}),f=["jina-embeddings","jina-clip","jina-colbert","jina-reranker","ReaderLM"],I=G(()=>[i.value==="standard"&&{title:s("estimator.messaging.standardFeatures"),icon:null,items:[{label:s("estimator.messaging.baseModelIncluded"),hasCheckmark:!0},{label:s("estimator.messaging.supportTierIncluded",{tier:s(`estimator.support.${h.value}`),hours:s("estimator.support.hoursQuarter",{hours:h.value==="standard"?10:h.value==="premium"?25:40})}),hasCheckmark:!0},{label:s(n.value==="business"?"estimator.messaging.usageTierBusiness":"estimator.messaging.usageTierConsumer",{count:o.value.toLocaleString()}),hasCheckmark:!0}]},R.value.length>1&&{title:s("estimator.messaging.selectedModels"),icon:"info",items:R.value.map(u=>({label:u}))},(D.value||U.value||T.value)&&{title:s("estimator.messaging.additionalFeatures"),icon:"info",items:[D.value&&{label:s("estimator.features.priority")},U.value&&{label:s("estimator.features.csm")},T.value&&{label:s("estimator.features.training")}].filter(Boolean)},i.value==="poc"&&{title:s("estimator.messaging.pocIncludes"),icon:"info",items:[{label:s("estimator.messaging.pocMetrics")},{label:s("estimator.messaging.pocCheckins")},{label:s("estimator.messaging.pocMigration")}]},i.value==="department"&&{title:s("estimator.messaging.deptIncludes"),icon:"info",items:[{label:s("estimator.messaging.deptReviews")},{label:s("estimator.messaging.deptRoadmap")},E.value&&{label:s("estimator.messaging.deptSponsor")},g.value==="high"&&{label:s("estimator.messaging.deptWorkshops")}].filter(Boolean)},C.value&&{title:s("estimator.messaging.enterpriseAlert"),icon:"warning",isAlert:!0,items:[]}].filter(Boolean));Qa(()=>{e.setLicenseConfig({contractType:i.value,pocDuration:y.value,hasBusinessSponsor:i.value==="department"?E.value:void 0,expectedGrowth:i.value==="department"?g.value:void 0,selectedModels:R.value,supportTier:h.value,priorityResponse:D.value,dedicatedCSM:U.value,customModelTraining:T.value,usageType:n.value,usageCount:o.value,paymentFrequency:p.value?"annual":"quarterly",price:B.value.final})});const l={t:s,userStore:e,paymentFrequency:v,isAnnual:p,usageType:n,usageCount:o,contractType:i,pocDuration:y,hasBusinessSponsor:E,expectedGrowth:g,selectedModels:P,supportTier:h,priorityResponse:D,dedicatedCSM:U,customModelTraining:T,prices:b,calculateTotalPrice:B,businessUsageOptions:V,consumerUsageOptions:L,showEnterpriseAlert:C,selectedModelsArray:R,allModelOptions:f,featuresSections:I};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function lr(c,r,s,e,v,p){return _(),x(ue,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(re,{horizontal:c.$q.screen.gt.sm,class:"full-height"},{default:t(()=>[a(Be,{class:"col"},{default:t(()=>[a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.models.title")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.models.description")),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Re,{square:"",modelValue:e.selectedModelsArray,"onUpdate:modelValue":r[0]||(r[0]=n=>e.selectedModelsArray=n),multiple:"",options:e.allModelOptions,"use-chips":"","emit-value":"",filled:"",label:e.t("estimator.labels.selectAll")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.contractType.title")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t(`estimator.descriptions.contractType.${e.contractType}`)),1)]),_:1})]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(Xe,{modelValue:e.contractType,"onUpdate:modelValue":r[1]||(r[1]=n=>e.contractType=n),options:[{label:e.t("estimator.contractType.standard"),value:"standard"},{label:e.t("estimator.contractType.department"),value:"department"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),e.contractType==="poc"?(_(),x(Q,{key:0},{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("estimator.poc.duration")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.poc.description")),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(mt,{modelValue:e.pocDuration,"onUpdate:modelValue":r[2]||(r[2]=n=>e.pocDuration=n),min:3,max:6,step:1,label:"","label-always":""},null,8,["modelValue"])]),_:1})]),_:1})):q("",!0),e.contractType==="department"?(_(),ee(se,{key:1},[a(Q,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.department.executionModel")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.department.sponsorDescription")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.hasBusinessSponsor,"onUpdate:modelValue":r[3]||(r[3]=n=>e.hasBusinessSponsor=n),label:e.t("estimator.department.businessSponsor")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.department.growthTitle")),1)]),_:1})]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(Xe,{modelValue:e.expectedGrowth,"onUpdate:modelValue":r[5]||(r[5]=n=>e.expectedGrowth=n),options:[{label:e.t("estimator.department.growth.limited"),value:"limited",caption:e.t("estimator.department.growth.limitedDesc")},{label:e.t("estimator.department.growth.steady"),value:"steady",caption:e.t("estimator.department.growth.steadyDesc")},{label:e.t("estimator.department.growth.high"),value:"high",caption:e.t("estimator.department.growth.highDesc")}],type:"radio"},{item:t(({opt:n,index:o})=>[Oe((_(),x(Q,{tag:"label"},{default:t(()=>[a(K,{avatar:""},{default:t(()=>[a(Ea,{modelValue:e.expectedGrowth,"onUpdate:modelValue":r[4]||(r[4]=i=>e.expectedGrowth=i),val:n.value},null,8,["modelValue","val"])]),_:2},1024),a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(n.label),1)]),_:2},1024),a(A,{caption:""},{default:t(()=>[k(m(n.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Ya]])]),_:1},8,["modelValue","options"])]),_:1})],64)):q("",!0),a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.usage.title")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t(`estimator.descriptions.usage.${e.usageType}`)),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Re,{class:"full-width",square:"",modelValue:e.usageCount,"onUpdate:modelValue":r[6]||(r[6]=n=>e.usageCount=n),options:e.usageType==="business"?e.businessUsageOptions:e.consumerUsageOptions,label:e.usageType==="business"?e.t("estimator.usage.businessCount"):e.t("estimator.usage.consumerCount"),filled:"","emit-value":"","map-options":"","option-label":"label","option-value":"value"},null,8,["modelValue","options","label"])]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(Xe,{modelValue:e.usageType,"onUpdate:modelValue":r[7]||(r[7]=n=>e.usageType=n),options:[{label:e.t("estimator.usage.business"),value:"business"},{label:e.t("estimator.usage.consumer"),value:"consumer"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.support.title")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t(`estimator.descriptions.support.${e.supportTier}`)),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Re,{modelValue:e.supportTier,"onUpdate:modelValue":r[8]||(r[8]=n=>e.supportTier=n),options:[{label:e.t("estimator.support.hoursQuarter",{hours:10}),value:"standard"},{label:e.t("estimator.support.hoursQuarter",{hours:25}),value:"premium"},{label:e.t("estimator.support.hoursQuarter",{hours:40}),value:"enterprise"}],filled:"",square:"","emit-value":"","map-options":"","option-label":"label","option-value":"value",label:e.t("estimator.labels.selectSupport")},null,8,["modelValue","options","label"])]),_:1})]),_:1}),e.contractType!=="poc"?(_(),ee(se,{key:2},[a(Q,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.features.title")),1)]),_:1})]),_:1}),a(Q,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("estimator.features.priority")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.descriptions.features.priority")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.priorityResponse,"onUpdate:modelValue":r[9]||(r[9]=n=>e.priorityResponse=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(Q,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("estimator.features.csm")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.descriptions.features.csm")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.dedicatedCSM,"onUpdate:modelValue":r[10]||(r[10]=n=>e.dedicatedCSM=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(Q,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(e.t("estimator.features.training")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t("estimator.descriptions.features.training")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.customModelTraining,"onUpdate:modelValue":r[11]||(r[11]=n=>e.customModelTraining=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):q("",!0)]),_:1}),a(de,{vertical:c.$q.screen.gt.sm},null,8,["vertical"]),a(ue,{class:"col-4 bg-mixed-200",flat:"",square:""},{default:t(()=>[a(re,{class:"q-pa-none"},{default:t(()=>[a(Be,{dense:""},{default:t(()=>[a(Q,{class:"q-my-lg"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,{overline:""},{default:t(()=>[k(m(e.t("estimator.pricing.title")),1)]),_:1}),a(Qe,{name:"list2"},{default:t(()=>[(_(),x(A,{key:e.calculateTotalPrice.final,class:"text-h5 q-py-md"},{default:t(()=>[k(m(e.contractType==="poc"?e.t("estimator.pricing.oneTime",{price:Math.round(e.calculateTotalPrice.monthly*e.pocDuration).toLocaleString()}):e.t("estimator.pricing.frequency",{price:e.calculateTotalPrice[e.isAnnual?"final":"quarterly"].toLocaleString(),frequency:e.t(`estimator.pricing.${e.isAnnual?"annual":"quarterly"}`)})),1)]),_:1}))]),_:1}),a(A,{caption:"",class:"text-dim"},{default:t(()=>[k(m(e.t("estimator.pricing.disclaimer")),1)]),_:1})]),_:1})]),_:1}),a(Q,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[k(m(e.t("estimator.payment.title")),1)]),_:1}),a(A,{caption:""},{default:t(()=>[k(m(e.t(`estimator.descriptions.payment.${e.isAnnual?"annual":"quarterly"}`)),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(be,{modelValue:e.isAnnual,"onUpdate:modelValue":r[12]||(r[12]=n=>e.isAnnual=n),label:e.t("estimator.payment.annual"),"checked-icon":"percent"},null,8,["modelValue","label"])]),_:1})]),_:1}),a(Q,null,{default:t(()=>[a(ae,{square:"",outline:"",icon:"handshake",label:e.t("estimator.pricing.cta"),padding:"lg",class:"full-width q-my-lg",to:"/contact-sales?license-config=true"},null,8,["label"])]),_:1}),a(de),(_(!0),ee(se,null,ve(e.featuresSections,n=>(_(),ee(se,{key:n.title},[a(A,{header:""},{default:t(()=>[k(m(n.title),1)]),_:2},1024),(_(!0),ee(se,null,ve(n.items,(o,i)=>(_(),x(Q,{key:i},{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"task_alt",size:"xs"})]),_:1}),a(K,null,{default:t(()=>[a(A,null,{default:t(()=>[k(m(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["horizontal"])]),_:1})}const ir=me(sr,[["render",lr],["__file","CostEstimator.vue"]]),ur=ce({__name:"ReaderDecideComponent",props:{originalURL:{type:String,default:""},disableQA:{type:Boolean,default:!1},disableOriginalURL:{type:Boolean,default:!1}},setup(c,{expose:r}){r();const{t:s}=_e({useScope:"global"}),e=Te(),v=we(),p=w(!0),n=w(!0),o=w(!1),i=c,y=w(i.originalURL||"https://jina.ai/news/a-practical-guide-to-implementing-deepsearch-deepresearch"),E=w(["engine_default","engine_default_timeout","engine_default_markdown","engine_default_html","browser","direct","cf_browser"]),g=w(E.value.reduce((l,u)=>(l[u]={content:"",timing:null,contentLength:null,isLoading:!1},l),{})),P=w(!1),h=l=>{const u=`https://r.jina.ai/${y.value}`,S=p.value?`"Authorization: Bearer ${e.apiKey}"`:"",O=n.value?'"X-No-Cache: true"':"";let j=`\`\`\`bash
curl ${u}`,N=!1;return l==="engine_default_markdown"?(j+=` \\
  -H "X-Return-Format: markdown"`,N=!0):l==="engine_default_html"?(j+=` \\
  -H "X-Return-Format: html"`,N=!0):l==="engine_default_timeout"?(j+=` \\
  -H "X-Timeout: 5"`,N=!0):l==="browser"?(j+=` \\
  -H "X-Engine: browser"`,N=!0):l==="cf_browser"?(j+=` \\
  -H "X-Engine: cf-browser-rendering"`,N=!0):l==="direct"&&(j+=` \\
  -H "X-Engine: direct"`,N=!0),n.value&&(j+=`${N?"":" \\"}
  -H ${O}`,N=!0),p.value&&(j+=`${N?"":" \\"}
  -H ${S}`),j+="\n```",j},D=l=>{const u={};return p.value&&(u.Authorization=`Bearer ${e.apiKey}`),n.value&&(u["X-No-Cache"]="true"),l==="engine_default_timeout"?u["X-Timeout"]="5":l==="engine_default_html"?u["X-Return-Format"]="html":l==="engine_default_markdown"?u["X-Return-Format"]="markdown":l==="browser"?u["X-Engine"]="browser":l==="cf_browser"?u["X-Engine"]="cf-browser-rendering":l==="direct"&&(u["X-Engine"]="direct"),u},U=async l=>{const u=`https://r.jina.ai/${y.value}`;g.value[l].isLoading=!0;const S=performance.now();try{const O=await fetch(u,{headers:D(l)}),j=performance.now();if(g.value[l].timing=Math.round(j-S),!O.ok){g.value[l].content=await O.json();return}const N=await O.text();g.value[l].contentLength=N.length,g.value[l].content=N}catch(O){g.value[l].content=O instanceof Error?O.message:String(O),g.value[l].contentLength=0,g.value[l].timing=0}finally{g.value[l].isLoading=!1}},T=async()=>{o.value=!0,P.value=!0,E.value.forEach(l=>{g.value[l]={content:"",timing:null,contentLength:null,isLoading:!0}});try{await Promise.all(E.value.map(l=>U(l)))}finally{P.value=!1}},b=G(()=>Object.values(g.value).some(l=>l.timing!==null)),B=G(()=>{let l=0;for(const u of E.value)g.value[u].timing!==null&&g.value[u].timing>l&&(l=g.value[u].timing);return l>0?l:1}),V=G(()=>{let l=0;for(const u of E.value)g.value[u].contentLength!==null&&g.value[u].contentLength>l&&(l=g.value[u].contentLength);return l>0?l:1}),I={t:s,embeddingStore:e,$q:v,useAuth:p,useNoCache:n,fetchWasClicked:o,props:i,originalURL:y,paramsGroup:E,results:g,isLoading:P,getReaderCode:h,getHeaders:D,fetchForParam:U,fetchAllURLs:T,hasResults:b,maxTiming:B,maxContentLength:V,getTimingPercentage:l=>g.value[l].timing===null?0:g.value[l].timing/B.value,getLengthPercentage:l=>g.value[l].contentLength===null?0:g.value[l].contentLength/V.value,getBarColor:l=>({engine_default:"primary",engine_default_timeout:"info",engine_default_markdown:"warning",engine_default_html:"negative",browser:"secondary",direct:"accent",cf_browser:"positive"})[l]||"primary",formatBytes:l=>{if(l===0)return"0 Bytes";const u=1024,S=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(l)/Math.log(u));return parseFloat((l/Math.pow(u,O)).toFixed(2))+" "+S[O]},get QInput(){return xe}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),dr={class:"row q-mt-sm"},cr={class:"text-h6 q-mb-md"},mr={class:"q-mb-lg"},_r={class:"text-subtitle2 q-mb-sm"},gr={class:"col-3 text-right q-pr-md"},fr={class:"col-8"},vr={class:"absolute-full flex flex-center"},yr={class:"text-subtitle2 q-mb-sm"},pr={class:"col-3 text-right q-pr-md"},hr={class:"col-8"},br={class:"absolute-full flex flex-center"},kr={class:"row items-center"},wr={class:"overflow-auto q-px-xs"};function Er(c,r,s,e,v,p){const n=Xa("q-markdown");return _(),x(ue,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(re,{class:"q-pa-none"},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.originalURL,"onUpdate:modelValue":r[0]||(r[0]=o=>e.originalURL=o),label:e.t("reader.demo.your_url"),type:"url",loading:e.isLoading},null,8,["modelValue","label","loading"]),W("div",dr,[a(be,{modelValue:e.useAuth,"onUpdate:modelValue":r[1]||(r[1]=o=>e.useAuth=o),label:e.t("reader.demo.headers.auth_token"),size:"sm",icon:"o_key",class:"q-mr-md"},null,8,["modelValue","label"]),a(be,{modelValue:e.useNoCache,"onUpdate:modelValue":r[2]||(r[2]=o=>e.useNoCache=o),label:e.t("reader.demo.headers.no_cache"),size:"sm",icon:"o_cached"},null,8,["modelValue","label"])])]),_:1}),a(de),a(re,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none"},{default:t(()=>[(_(!0),ee(se,null,ve(e.paramsGroup,(o,i)=>(_(),ee(se,{key:o},[a(ue,{class:"col q-pa-none",flat:"",square:""},{default:t(()=>[a(Q,null,{default:t(()=>[a(K,null,{default:t(()=>[a(A,{lines:"1"},{default:t(()=>[k(m(e.t(`reader.demo.headers.${o}`)),1)]),_:2},1024),a(A,{caption:"",class:"text-dim",lines:"2"},{default:t(()=>[k(m(e.t(`reader.demo.headers.${o}_explain`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(n,{src:e.getReaderCode(o),"no-line-numbers":"","show-copy":"","copy-icon":"content_copy",class:"overflow-auto"},null,8,["src"])]),_:2},1024),i<e.paramsGroup.length-1?(_(),x(de,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):q("",!0)],64))),128))]),_:1},8,["horizontal"]),a(de),a(ae,{square:"",label:e.t("reader.demo.fetch"),class:"full-width",icon:"download",onClick:e.fetchAllURLs,flat:"",padding:"md",loading:e.isLoading},null,8,["label","loading"]),e.fetchWasClicked?(_(),ee(se,{key:0},[a(de),e.hasResults?(_(),x(re,{key:0},{default:t(()=>[W("div",cr,m(e.t("reader.demo.performance_compare")),1),W("div",mr,[W("div",_r,m(e.t("reader.demo.response_time")),1),(_(!0),ee(se,null,ve(e.paramsGroup,o=>(_(),ee("div",{class:"row items-center",key:o+"-time"},[W("div",gr,m(e.t(`reader.demo.headers.${o}`)),1),W("div",fr,[a(Ve,{value:e.getTimingPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[W("div",vr,[e.results[o].timing!==null?(_(),x(fa,{key:0,color:"white","text-color":"black"},{default:t(()=>[k(m(e.results[o].timing)+"ms ",1)]),_:2},1024)):q("",!0)])]),_:2},1032,["value","color"])])]))),128))]),W("div",null,[W("div",yr,m(e.t("reader.demo.content_length")),1),(_(!0),ee(se,null,ve(e.paramsGroup,o=>(_(),ee("div",{class:"row items-center",key:o+"-length"},[W("div",pr,m(e.t(`reader.demo.headers.${o}`)),1),W("div",hr,[a(Ve,{value:e.getLengthPercentage(o),size:"25px",color:e.getBarColor(o),class:"q-mb-xs"},{default:t(()=>[W("div",br,[e.results[o].contentLength!==null?(_(),x(fa,{key:0,color:"white","text-color":"black"},{default:t(()=>[k(m(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):q("",!0)])]),_:2},1032,["value","color"])])]))),128))])]),_:1})):q("",!0),e.hasResults?(_(),x(de,{key:1})):q("",!0),a(re,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none overflow-auto"},{default:t(()=>[(_(!0),ee(se,null,ve(e.paramsGroup,(o,i)=>(_(),ee(se,{key:o},[a(re,{class:"col column overflow-auto no-wrap q-pa-none"},{default:t(()=>[W("div",kr,[a(pe,{label:e.t(`reader.demo.headers.${o}`),size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim"},null,8,["label"]),e.results[o].timing!==null?(_(),x(pe,{key:0,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"timer"},{default:t(()=>[k(m(e.results[o].timing)+"ms ",1)]),_:2},1024)):q("",!0),e.results[o].contentLength!==null?(_(),x(pe,{key:1,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"straighten"},{default:t(()=>[k(m(e.formatBytes(e.results[o].contentLength)),1)]),_:2},1024)):q("",!0)]),e.isLoading&&!e.results[o].content?(_(),ee(se,{key:0},ve([100,300,200,200],y=>a(Ht,{type:"text",width:`${y}px`,key:y},null,8,["width"])),64)):q("",!0),W("pre",wr,""+m(e.results[o].content)+`
          `,1)]),_:2},1024),i<e.paramsGroup.length-1?(_(),x(de,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):q("",!0)],64))),128))]),_:1},8,["horizontal"]),a(de)],64)):q("",!0)]),_:1})}const Tr=me(ur,[["render",Er],["__file","ReaderDecideComponent.vue"]]),Sr=`https://example1.png
https://example2.png`,Rr=ce({__name:"ImageRankComponent",setup(c,{expose:r}){r();const s=["https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-ai-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-ai-startup-landscape.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-chinese.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-Q2-ROSS.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-Q3-ROSS.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-top-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2022-ai-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2022-ai-startup-landscape.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023_agi_mvp_top_50.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023_ai_startup_german.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-Annual-Impactful-Tech-Company.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-Annual-Impactful-Tech-Team.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-China’s-High-Technology-Growth-Top-30.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2024_ai_startup_german.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2024-wired.webp","https://raw.githubusercontent.com/jina-ai/image-assets/main/ai_hot_75.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/faz-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/forbes-ai-30.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/forbes-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/generative_developer_tools_Infrastructure.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/handelsblatt-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/juejin_top10.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/MIT_JINA_Cover1200.webp","https://raw.githubusercontent.com/jina-ai/image-assets/main/mit-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_1.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_2.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_3.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_4.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_5.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-6.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-7.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-8.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-9.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-10.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-11.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/preview.jpg","https://raw.githubusercontent.com/jina-ai/image-assets/main/tc-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/video-apikey-holder.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/wired-preview.png"],{t:e}=_e({useScope:"global"}),v=we(),p=Te(),{apiKey:n}=ye(p),o=w(!1),i=w(""),y=w(s),E=w([]),g=w(!1),P=w(y.value.join(`
`)),h=w(""),D=w(!1),U=w(""),T=G(()=>{var L;return(L=E.value)!=null&&L.length?E.value.map(C=>({image:y.value[C.index],score:C.relevance_score})):y.value.map(C=>({image:C,score:null}))}),V={IMAGE_ASSETS:s,PLACEHOLDER:Sr,t:e,$q:v,embeddingStore:p,apiKey:n,isLoading:o,query:i,images:y,rankResult:E,showImageCollection:g,imagesInput:P,errorMsg:h,showImageDialog:D,selectedImage:U,imageList:T,rankImages:()=>{if(!i.value)return;o.value=!0,h.value="";const L=`${tt}/v1/rerank`,C={"Content-Type":"application/json",Authorization:`Bearer ${n.value}`},R={model:"jina-reranker-m0",query:i.value,documents:y.value.map(f=>({image:f})),return_documents:!1};fetch(L,{method:"POST",headers:C,body:JSON.stringify(R)}).then(async f=>{var I;if(!f.ok){const l=((I=await f.json())==null?void 0:I.detail)||`${f.status}: ${f.statusText}`;throw new Error(l)}return f.json()}).then(f=>{E.value=f.results}).catch(f=>{h.value=f instanceof Error?f.message:String(f)}).finally(()=>o.value=!1)},addImages:()=>{P.value&&(y.value=P.value.split(/\n|,|;/).map(L=>L.trim().replace(/"|'/g,"")).filter(L=>L),E.value=[])},get QInput(){return xe}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),xr={class:"text-negative text-caption"},Pr={style:{"world-break":"break-all"}},Dr={class:"text-subtitle1 q-ma-none"},Ir={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};function Kr(c,r,s,e,v,p){return _(),ee(se,null,[a(ue,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(Ra,{onSubmit:fe(e.rankImages,["prevent"])},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.query,"onUpdate:modelValue":r[1]||(r[1]=n=>e.query=n),type:"search",placeholder:e.t("reranker.demo.your_query"),loading:e.isLoading,disable:e.isLoading,square:""},{prepend:t(()=>[a(te,{name:"search"})]),before:t(()=>[a(ae,{flat:"",stretch:"",square:"",label:e.t("reranker.demo.add_images"),icon:"add_photo_alternate",onClick:r[0]||(r[0]=n=>e.showImageCollection=!0),disable:e.isLoading},null,8,["label","disable"])]),_:1},8,["modelValue","placeholder","loading","disable"])]),_:1}),e.isLoading?(_(),x(Ve,{key:0,indeterminate:"",size:"1px"})):q("",!0),e.errorMsg?(_(),x(re,{key:1},{default:t(()=>[W("span",xr,m(e.errorMsg),1)]),_:1})):q("",!0),a(de),a(re,{class:"row q-gutter-xs q-pa-xs"},{default:t(()=>[a(Qe,{name:"list2"},{default:t(()=>[(_(!0),ee(se,null,ve(e.imageList,n=>(_(),x(ue,{key:n.image,flat:"",square:"",bordered:"",class:"flex items-center justify-center",style:{width:"200px",height:"200px"},onClick:o=>{e.selectedImage=n.image,e.showImageDialog=!0}},{default:t(()=>[a(ea,{src:n.image,style:{"max-height":"100%","max-width":"100%"}},{error:t(()=>[W("div",Pr,[a(te,{name:"error",class:"on-left"}),k(" "+m(e.t("reranker.demo.image_error")),1)])]),_:2},1032,["src"]),n.score!==null?(_(),x(re,{key:0,class:"q-pa-none absolute-bottom lock-blur full-width text-center"},{default:t(()=>[a(pe,{square:"",icon:"readiness_score",label:Number(n.score).toFixed(4),class:"bg-dark-transparent",style:{"font-family":"monospace","border-radius":"0"}},{default:t(()=>[a(oe,null,{default:t(()=>[k(m(e.t("reranker.demo.relevance_score",{_score:n.score})),1)]),_:2},1024)]),_:2},1032,["label"])]),_:2},1024)):q("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(qe,{modelValue:e.showImageCollection,"onUpdate:modelValue":r[3]||(r[3]=n=>e.showImageCollection=n),maximized:e.$q.screen.lt.md},{default:t(()=>[a(ue,{flat:"",class:"q-pa-md",style:ka({minWidth:e.$q.screen.lt.md?"100vw":"50vw"})},{default:t(()=>[a(re,null,{default:t(()=>[W("p",Dr,m(e.t("reranker.demo.image_collection")),1),Oe(a(ae,{flat:"",icon:"close",class:"absolute-top-right"},null,512),[[Me]])]),_:1}),a(re,null,{default:t(()=>[a(e.QInput,{modelValue:e.imagesInput,"onUpdate:modelValue":[r[2]||(r[2]=n=>e.imagesInput=n),e.addImages],filled:"",square:"",autofocus:"",type:"textarea",label:e.t("reranker.demo.image_urls"),placeholder:e.PLACEHOLDER,autogrow:"",rows:"5","input-style":"font-family: monospace; font-size: 0.8rem;"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"]),a(qe,{modelValue:e.showImageDialog,"onUpdate:modelValue":r[4]||(r[4]=n=>e.showImageDialog=n),maximized:"","auto-close":""},{default:t(()=>[a(ue,{flat:"",class:"q-pa-none row items-center"},{default:t(()=>[Oe(a(ae,{flat:"",icon:"close",class:"absolute-top-right z-top"},null,512),[[Me]]),a(ea,{src:e.selectedImage,fit:"contain",style:{"max-height":"100%","max-width":"100%"}},{error:t(()=>[W("div",Ir,[a(te,{name:"error",class:"on-left"}),k(" "+m(e.t("reranker.demo.image_error")),1)])]),_:1},8,["src"])]),_:1})]),_:1},8,["modelValue"])],64)}const Vr=me(Rr,[["render",Kr],["__file","ImageRankComponent.vue"]]),Lr=ce({__name:"SeFoPage",setup(c,{expose:r}){r();const s={[$.PRICING]:dn,[$.CODE]:_t,[$.RERANK_CODE]:gt,[$.READER_CODE]:ft,[$.CLASSIFY]:vt,[$.TOKENIZER]:yt,[$.INTEGRATIONS]:pt,[$.TEST]:ht,[$.SEARCH]:ca,[$.VISUALIZE]:ca,[$.BULK]:bt,[$.ONPREM]:null,[$.KEY_MANAGER]:jn,[$.AVATAR]:zn,[$.GROUNDING]:tr,[$.DEEPSEARCH]:kt,[$.LICENSE_CONFIG]:ir,[$.CHAT]:jt,[$.RATE_LIMIT]:Pt,[$.CONTACT_SALES]:Nt,[$.LLM_SERP]:or,[$.ENGINE_SPEED_TEST]:Tr,[$.IMAGE_SEARCH]:Vr},e=we(),v=Wa(),p=Ja(),{t:n}=_e({useScope:"global"}),o=Te(),{apiKey:i,classifiers:y,turnstileState:E}=ye(o),g=je(),{user:P}=ye(g),{models:h}=Ut();v.params.tab===$.CHAT?ga({page:"deepsearch.chat_ui",banner:"banner-deepsearch.png",url:"api-dashboard/deepsearch-chat"}):ga({page:"key_manager",banner:"banner-api.png",url:"api-dashboard"});const D=w(da(v.params.tab instanceof Array?v.params.tab[0]:v.params.tab));Fe(()=>v.params.tab,B=>{const V=B instanceof Array?B[0]:B;!P.value.uid&&V===$.KEY_MANAGER&&p.push({params:{tab:$.READER_CODE},query:v.query}),D.value=V}),Le(()=>{navigator.userAgent.toLowerCase().includes("headless")||U()});async function U(){console.log("checkURLForParam");const B=new URLSearchParams(window.location.search);if(B.has("login")&&!P.value.uid){const V=new URL(window.location.href);V.searchParams.delete("login"),window.history.pushState({},"",V),e.dialog({component:Vt,persistent:!0})}if(B.has("sui")){const V=B.get("model"),L=h.value.find(R=>R.name===V),C=da(B.get("sui")||"","page",L);if(D.value!==C)p.replace({params:{tab:C},query:{...v.query,sui:void 0}});else{const R=new URL(window.location.href);R.searchParams.delete("sui"),window.history.pushState({},"",R)}}if(B.has("task")){o.task=B.get("task")||"";const V=new URL(window.location.href);V.searchParams.delete("task"),window.history.pushState({},"",V)}if(B.has("model")){const V=B.get("model"),L=V&&h.value.find(C=>C.name===V);if(L&&D.value!==$.CLASSIFY){const C=L.metadata.endpoints||[];[$.CODE,$.RERANK_CODE].includes(D.value)||(C.some(R=>["embedding","multi-vector"].includes(R))?D.value=$.CODE:C.includes("rank")&&(D.value=$.RERANK_CODE))}else y.value.length===0&&await o.getClassifiers(i.value),y.value.find(R=>R.classifier_id===V)&&(D.value=$.CLASSIFY)}}const b={COMPONENTS:s,$q:e,route:v,router:p,t:n,embeddingStore:o,apiKey:i,classifiers:y,turnstileState:E,userStore:g,user:P,allModels:h,currentTab:D,checkURLForParam:U,openBrowserInfoDialog:()=>{e.dialog({component:wt,componentProps:{state:E.value}})},get EMBEDDING_TABS(){return $},get TurnstileState(){return nt}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),Ar={key:0},Cr={key:1},Or={class:"column no-wrap full-width",style:{"flex-grow":"1"}};function qr(c,r,s,e,v,p){return _(),x(et,{class:"row"},{default:t(()=>[e.turnstileState===e.TurnstileState.ERROR||e.turnstileState===e.TurnstileState.UNSUPPORTED?(_(),x($a,{key:0,"inline-actions":"",class:"text-white bg-negative full-width"},{action:t(()=>[a(ae,{square:"",outline:"",class:"q-mr-sm",label:e.t("landing_page.view_browser_info"),onClick:e.openBrowserInfoDialog},null,8,["label"]),a(ae,{square:"",outline:"",to:"/contact-sales",label:e.t("landing_page.contact_sales")},null,8,["label"])]),default:t(()=>[a(te,{name:"report_problem",size:"sm",class:"q-mr-sm"}),e.turnstileState===e.TurnstileState.ERROR?(_(),ee("span",Ar,m(e.t("embedding.turnstile_error")),1)):e.turnstileState===e.TurnstileState.UNSUPPORTED?(_(),ee("span",Cr,m(e.t("embedding.turnstile_unsupported")),1)):q("",!0),k(" "+m(e.t("embedding.mistake_contact"))+" ",1)]),_:1})):q("",!0),W("div",Or,[(_(),x(Za(e.COMPONENTS[e.currentTab]),{asVisualizer:e.currentTab===e.EMBEDDING_TABS.VISUALIZE,maximizedWindow:!0},null,8,["asVisualizer"]))])]),_:1})}const Io=me(Lr,[["render",qr],["__file","SeFoPage.vue"]]);export{Io as default};
