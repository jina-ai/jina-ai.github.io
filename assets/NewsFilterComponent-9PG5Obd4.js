import{b as se,a as de,Q as Z}from"./QLinearProgress-DlhL9Kna.js";import{s as ce,au as me,dh as ve,aw as fe,m as o,k as p,w as re,p as D,aI as ue,J as ge,di as $,dj as be,R as ye,q as he,j as xe,a0 as Se,n as Pe,b2 as Ce,a2 as Be,a3 as T,aa as G,a4 as U,ab as R,a8 as we,a6 as r,a5 as u,ah as Ve,ai as _e,b4 as pe,aH as ke,ce as Ne,aj as W,aq as qe,b3 as ee,af as Q,ag as F,ad as te,cp as ae,cq as le,ae as J}from"./index-DxGUDYzm.js";import{b as ne,Q as ie}from"./QChip-lhFKeVsG.js";import{Q as oe}from"./QTooltip-RQUtbnnj.js";import{N as Te}from"./NewsVerticalCard-DDJFdbTP.js";import{A as Le}from"./SXTooltip-CTWllc8-.js";function H(e,s){return[!0,!1].includes(e)?e:s}const Ae=ce({name:"QPagination",props:{...me,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ve.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:b}=ge(),{$q:a}=b,L=fe(e,a),d=o(()=>parseInt(e.min,10)),t=o(()=>parseInt(e.max,10)),C=o(()=>parseInt(e.maxPages,10)),A=o(()=>y.value+" / "+t.value),B=o(()=>H(e.boundaryLinks,e.input)),S=o(()=>H(e.boundaryNumbers,!e.input)),j=o(()=>H(e.directionLinks,e.input)),I=o(()=>H(e.ellipses,!e.input)),k=p(null),y=o({get:()=>e.modelValue,set:l=>{if(l=parseInt(l,10),e.disable||isNaN(l))return;const n=se(l,d.value,t.value);e.modelValue!==n&&s("update:modelValue",n)}});re(()=>`${d.value}|${t.value}`,()=>{y.value=e.modelValue});const E=o(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),z=o(()=>e.gutter in $?`${$[e.gutter]}px`:e.gutter||null),X=o(()=>z.value!==null?`--q-pagination-gutter-parent:-${z.value};--q-pagination-gutter-child:${z.value}`:null),N=o(()=>{const l=[e.iconFirst||a.iconSet.pagination.first,e.iconPrev||a.iconSet.pagination.prev,e.iconNext||a.iconSet.pagination.next,e.iconLast||a.iconSet.pagination.last];return a.lang.rtl===!0?l.reverse():l}),f=o(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),P=o(()=>be(e,"flat")),O=o(()=>({[P.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),w=o(()=>{const l={[P.value]:!1};return e.activeDesign!==""&&(l[e.activeDesign]=!0),l}),m=o(()=>({...w.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),v=o(()=>{let l=Math.max(C.value,1+(I.value?2:0)+(S.value?2:0));const n={pgFrom:d.value,pgTo:t.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(t.value).length)}em`}};return C.value&&l<t.value-d.value+1&&(l=1+Math.floor(l/2)*2,n.pgFrom=Math.max(d.value,Math.min(t.value-l+1,e.modelValue-Math.floor(l/2))),n.pgTo=Math.min(t.value,n.pgFrom+l-1),S.value&&(n.boundaryStart=!0,n.pgFrom++),I.value&&n.pgFrom>d.value+(S.value?1:0)&&(n.ellipsesStart=!0,n.pgFrom++),S.value&&(n.boundaryEnd=!0,n.pgTo--),I.value&&n.pgTo<t.value-(S.value?1:0)&&(n.ellipsesEnd=!0,n.pgTo--)),n});function x(l){y.value=l}function M(l){y.value=y.value+l}const Y=o(()=>{function l(){y.value=k.value,k.value=null}return{"onUpdate:modelValue":n=>{k.value=n},onKeyup:n=>{ye(n,13)===!0&&l()},onBlur:l}});function h(l,n,q){const V={"aria-label":n,"aria-current":"false",...O.value,...l};return q===!0&&Object.assign(V,{"aria-current":"true",...m.value}),n!==void 0&&(e.toFn!==void 0?V.to=e.toFn(n):V.onClick=()=>{x(n)}),D(he,V)}return Object.assign(b,{set:x,setByOffset:M}),()=>{const l=[],n=[];let q;if(B.value===!0&&(l.push(h({key:"bls",disable:e.disable||e.modelValue<=d.value,icon:N.value[0]},d.value)),n.unshift(h({key:"ble",disable:e.disable||e.modelValue>=t.value,icon:N.value[3]},t.value))),j.value===!0&&(l.push(h({key:"bdp",disable:e.disable||e.modelValue<=d.value,icon:N.value[1]},e.modelValue-1)),n.unshift(h({key:"bdn",disable:e.disable||e.modelValue>=t.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){q=[];const{pgFrom:V,pgTo:c,marginalStyle:_}=v.value;if(v.value.boundaryStart===!0){const i=d.value===e.modelValue;l.push(h({key:"bns",style:_,disable:e.disable,label:d.value},d.value,i))}if(v.value.boundaryEnd===!0){const i=t.value===e.modelValue;n.unshift(h({key:"bne",style:_,disable:e.disable,label:t.value},t.value,i))}v.value.ellipsesStart===!0&&l.push(h({key:"bes",style:_,disable:e.disable,label:"…",ripple:!1},V-1)),v.value.ellipsesEnd===!0&&n.unshift(h({key:"bee",style:_,disable:e.disable,label:"…",ripple:!1},c+1));for(let i=V;i<=c;i++)q.push(h({key:`bpg${i}`,style:_,disable:e.disable,label:i},i,i===e.modelValue))}return D("div",{class:E.value,...f.value},[D("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...l,e.input===!0?D(ue,{class:"inline",style:{width:`${A.value.length/1.5}em`},type:"number",dense:!0,value:k.value,disable:e.disable,dark:L.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:A.value,min:d.value,max:t.value,...Y.value}):D("div",{class:"q-pagination__middle row justify-center"},q),...n])])}}}),Ie=xe({__name:"NewsFilterComponent",props:{initiating:{type:Boolean},translatedAllBlogs:{},tab:{default:"all"},searchByTitle:{},allProducts:{},authorOptions:{},perPage:{default:10}},emits:["update:filteredBlogs","update:initiating"],setup(e,{expose:s,emit:b}){s();const a=e,L=b,{t:d,te:t}=Se({useScope:"global"}),C=Pe(),A=p(!0),B=p(1),S=p(1),j=p(""),I=p([]),k=p([]),y=p([]),E=(f,P)=>{if(!P.trim())return f;const w=P.toLowerCase().split(/\s+/);return f.map(m=>{let v=0;return w.forEach(x=>{m.title.toLowerCase().includes(x)&&(v+=1)}),w.forEach(x=>{m.excerpt.toLowerCase().includes(x)&&(v+=1)}),w.forEach(x=>{m.html.toLowerCase().includes(x)&&(v+=.1)}),{blog:m,score:v}}).filter(m=>m.score>0).sort((m,v)=>v.score-m.score).map(m=>m.blog)};re([()=>a.tab,B,()=>a.searchByTitle,j,k,I,()=>a.translatedAllBlogs],([f,P,O,w,m,v,x],[M,Y,h,l,n,q])=>{(f!==M||O!==h||w!==l||JSON.stringify(m)!==JSON.stringify(n)||JSON.stringify(v)!==JSON.stringify(q))&&(B.value=1),f!==M&&(A.value=!0);let c=x;m.length>0&&(c=c.filter(i=>m.map(g=>g.value.toLowerCase()).some(g=>i.title.toLowerCase().includes(g)||i.title.toLowerCase().includes(d(g).toLowerCase())))),v.length>0&&(c=c.filter(i=>v.map(g=>g.value).some(g=>i.authors.map(K=>K.name).includes(g)))),f!=="all"&&(f==="featured"?c=c.filter(i=>i.featured):c=c.filter(i=>i.tags.map(g=>g.name.toLowerCase()).includes(f)));const _=O||w;if(_&&(c=E(c,_)),c&&c.length>0){const i=c.length;S.value=Math.ceil(i/a.perPage);const g=(B.value-1)*a.perPage,K=g+a.perPage;y.value=c.slice(g,K),L("update:filteredBlogs",y.value)}else S.value=0,B.value=1,y.value=[],L("update:filteredBlogs",[]);A.value=!1},{immediate:!0});const N={props:a,emit:L,t:d,te:t,$q:C,loading:A,currentPage:B,totalPage:S,localSearchByTitle:j,selectedAuthors:I,selectedProducts:k,filteredBlogs:y,searchBlogs:E,moveToTop:f=>{Ce("#newslist"),B.value=f},isUnread:f=>{const P=localStorage.getItem("lastAccessedAt");return P?new Date(f.publishedAt)>new Date(P):!1},NewsVerticalCard:Te,AvatarsComponent:Le};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Qe={class:"row justify-between",id:"newslist"};function Fe(e,s,b,a,L,d){return T(),G("div",Qe,[b.initiating?(T(),U(de,{key:0,indeterminate:"",size:"xs"})):R("",!0),we("div",{class:W(["col-12 relative-position",{"col-md-9":!b.searchByTitle}])},[r(pe,{name:"list2"},{default:u(()=>[(T(!0),G(Ve,null,_e(a.filteredBlogs,(t,C)=>(T(),U(a.NewsVerticalCard,{key:C,item:t,class:"q-my-md","un-read":a.isUnread(t)},null,8,["item","un-read"]))),128))]),_:1}),ke(r(Ae,{"active-design":"outline","text-color":"text-dim","active-text-color":"primary",modelValue:a.currentPage,"onUpdate:modelValue":[s[0]||(s[0]=t=>a.currentPage=t),a.moveToTop],max:a.totalPage,"max-pages":5,class:W(["row justify-center",a.$q.screen.gt.xs?"q-ma-xl":"q-ma-lg"])},null,8,["modelValue","max","class"]),[[Ne,!a.loading&&a.filteredBlogs.length]])],2),!b.searchByTitle&&b.allProducts&&b.authorOptions?(T(),G("div",{key:1,class:W(["col-12 col-md-3 q-py-md",a.$q.screen.lt.md?"order-first":"q-pl-md"])},[r(ue,{borderless:"",filled:"",square:"",modelValue:a.localSearchByTitle,"onUpdate:modelValue":s[1]||(s[1]=t=>a.localSearchByTitle=t),label:a.t("newsroom_page.search"),class:"col-auto"},{append:u(()=>[r(qe,{name:"search"})]),_:1},8,["modelValue","label"]),r(Z,{clearable:"",filled:"",modelValue:a.selectedProducts,"onUpdate:modelValue":s[2]||(s[2]=t=>a.selectedProducts=t),onClear:s[3]||(s[3]=t=>a.selectedProducts=[]),options:b.allProducts,square:"","use-chips":"",multiple:"","stack-label":"",label:a.t("newsroom_page.product")},{"selected-item":u(t=>[r(ne,{removable:"",outline:"",onRemove:C=>t.removeAtIndex(t.index),tabindex:t.tabindex,class:"q-ma-xs no-border-radius"},{default:u(()=>[t.opt.icon?(T(),U(ee,{key:0,size:"xs"},{default:u(()=>[r(ie,{fit:"contain",src:t.opt.icon,loading:"lazy"},null,8,["src"])]),_:2},1024)):R("",!0),Q(" "+F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),option:u(t=>[r(te,ae(le(t.itemProps)),{default:u(()=>[r(J,{avatar:""},{default:u(()=>[t.opt.icon?(T(),U(ee,{key:0},{default:u(()=>[r(ie,{fit:"contain",height:"32px",width:"32px",src:t.opt.icon,loading:"lazy"},null,8,["src"])]),_:2},1024)):R("",!0)]),_:2},1024),r(J,null,{default:u(()=>[Q(F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label"]),r(Z,{clearable:"",filled:"",modelValue:a.selectedAuthors,"onUpdate:modelValue":s[4]||(s[4]=t=>a.selectedAuthors=t),onClear:s[5]||(s[5]=t=>a.selectedProducts=[]),options:b.authorOptions,square:"","use-chips":"",multiple:"","stack-label":"",label:a.t("newsroom_page.author")},{"selected-item":u(t=>[r(ne,{removable:"",outline:"",onRemove:C=>t.removeAtIndex(t.index),tabindex:t.tabindex,class:"q-ma-xs no-border-radius"},{default:u(()=>[r(a.AvatarsComponent,{authors:[t.opt.author]},{default:u(()=>[r(oe,null,{default:u(()=>[Q(F(e.opt.label),1)]),_:1})]),_:2},1032,["authors"]),Q(" "+F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),option:u(t=>[r(te,ae(le(t.itemProps)),{default:u(()=>[r(J,{avatar:""},{default:u(()=>[r(a.AvatarsComponent,{authors:[t.opt.author]},{default:u(()=>[r(oe,null,{default:u(()=>[Q(F(e.opt.label),1)]),_:1})]),_:2},1032,["authors"])]),_:2},1024),r(J,null,{default:u(()=>[Q(F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label"])],2)):R("",!0)])}const Ue=Be(Ie,[["render",Fe],["__file","NewsFilterComponent.vue"]]);export{Ue as N};
