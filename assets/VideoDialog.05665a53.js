import{bZ as S,bY as P,b_ as A,aN as L,bq as v,e as N,ae as k,ag as D,ah as c,aH as x,ai as B,am as l,as as w,ap as p,aq as h,an as d,aC as E,al as j,ao as f,av as I,a4 as O,j as Q,aA as R}from"./index.cf645aef.js";import{u as G}from"./blogs.c18a9b1a.js";import{Q as y}from"./plugin-vue_export-helper.632ddc41.js";import{u as Y,C as q}from"./EmbeddingDialog.21fc5b1c.js";const M=S.value.map(t=>({...t,type:"product"}));var H=(t=>(t.PRODUCT="product",t.NEWS="news",t.COMPANY="company",t.ELLIPSIS="ellipsis",t.HEADER="header",t.SEPARATOR="separator",t.ON_PAGE_RAG="onPageRAG",t.ASK_SOLUTION="askSolution",t))(H||{});const Z=P("search",{state:()=>({answerChunks:[],isBusy:!1,isStreaming:!1,isComposing:!1,searchImmediate:!1}),getters:{},actions:{async composeResult(t){this.isComposing=!0;try{const o=G(),s=3;let i=M;o.allBlogs.length===0&&await o.getAllNews();const u=o.allBlogs.map(a=>({label:a.title,icon:a.featureImage,value:a.title,description:a.excerpt,time:A(a.publishedAt).format("MMMM DD, YYYY"),slug:a.slug,type:"news"}));let n=u,r=L.filter(a=>!a.external);t&&(i=i.filter(a=>this.t(a.label).toLowerCase().includes(t.toLowerCase())||this.t(a.description).toLowerCase().includes(t.toLowerCase())),n=u.filter(a=>a.label.toLowerCase().includes(t.toLowerCase())),n.length===0&&(n=u.filter(a=>a.description.toLowerCase().replaceAll("-"," ").includes(t.toLowerCase()))),r=r.filter(a=>this.t(a.label).toLowerCase().includes(t.toLowerCase())));let e=[{type:"onPageRAG",label:t},{type:"askSolution",label:t}];return i.length&&(e.length&&e.push({type:"separator"}),e.push({label:"header.products",number:i.length,type:"header"}),e=e.concat(i.slice(0,s)),i.length>s&&e.push({label:"header.see_all_products",type:"ellipsis",number:i.length-s})),r.length&&(e.length&&e.push({type:"separator"}),e.push({label:"header.company",number:r.length,type:"header"}),e=e.concat(r.slice(0,s)),r.length>s&&e.push({label:"header.see_all_company",type:"ellipsis",number:r.length-s})),n.length&&(e.length&&e.push({type:"separator"}),e.push({label:"header.news",number:n.length,type:"header"}),e=e.concat(n.slice(0,s)),n.length>s&&e.push({label:"header.see_all_news",type:"ellipsis",number:n.length-s})),e}finally{this.isComposing=!1}},async search(t,o){var n,r;this.answerChunks=[],this.isBusy=!0,this.isStreaming=!0;let s="";o==="onPageRAG"&&await fetch(`https://r.jina.ai/https://jina.ai${window.location.pathname}`).then(e=>e.text()).then(e=>{s=e});const i={parameters:{question:t,content:s}},u=o==="onPageRAG"?"https://api.promptperfect.jina.ai/BcHLFuKk3u9naJ4u4G1H":"https://api.promptperfect.jina.ai/EEBuotbLAugUDjr4mq1j";try{const e=await fetch(u,{headers:{"content-type":"application/json"},body:JSON.stringify(i),method:"POST"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);if((n=e.headers.get("content-type"))!=null&&n.includes("text/event-stream")){if(e.body){const a=e.body.getReader(),C=new TextDecoder;for(;;){const{done:_,value:m}=await a.read();if(_){this.isStreaming=!1;break}m&&(this.isBusy=!1,C.decode(m).split(`

`).forEach(b=>{const g=b.replace(/data: /g,"");g&&this.answerChunks.push(g)}))}}}else if((r=e.headers.get("content-type"))!=null&&r.includes("application/json")){const a=(await e.json()).data;this.answerChunks=[a]}else throw new Error("Unknown response type")}catch(e){v.create({color:"negative",message:this.t("landing_page.error",{message:e}),icon:"report_problem"})}finally{this.isBusy=!1}}}}),U={controls:"",style:{width:"100%",height:"auto"},autoplay:""},V=["src"],z=N({__name:"VideoDialog",props:{videoSrc:String,title:String,description:String,icon:String},setup(t){const{t:o}=k({useScope:"global"}),{dialogRef:s}=Y();return(i,u)=>(B(),D(x,{ref_key:"dialogRef",ref:s},{default:c(()=>[l(R,{square:"",flat:"",class:"bg-mixed-300"},{default:c(()=>[w("video",U,[w("source",{src:t.videoSrc,type:"video/mp4"},null,8,V),p(" "+h(d(o)("video_not_supported")),1)]),l(E,null,{default:c(()=>[l(j,null,{default:c(()=>[l(f,{side:""},{default:c(()=>[l(I,{name:t.icon},null,8,["name"])]),_:1}),l(f,null,{default:c(()=>[l(y,{caption:""},{default:c(()=>[p(h(d(o)(t.description)),1)]),_:1}),l(y,{class:"text-weight-bold"},{default:c(()=>[p(h(d(o)(t.title)),1)]),_:1})]),_:1}),l(f,{side:""},{default:c(()=>[O(l(Q,{flat:"",round:"",icon:"close"},null,512),[[q]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))}});export{H as R,z as _,Z as u};
