import{Q as ae}from"./QImg.f13cfd7e.js";import{_ as ye,Q as xe,a as we}from"./AskAnythingToolTip.5dccdd00.js";import{e as ne,a6 as ie,f as m,h as W,K as de,a7 as v,a8 as s,av as K,u as ce,aE as qe,a9 as u,ad as t,aw as _,ah as e,bM as G,j as C,al as se,af as x,ag as c,ap as w,aB as be,ak as a,aa as q,ab as z,ai as b,ao as re,am as E,aj as ke,bB as je,an as p}from"./index.a2d8d76f.js";import{u as $e}from"./useMetaTags.a6dfcafd.js";import{_ as Te}from"./EmbeddingComponent.71997428.js";import{T as Re}from"./TitleBlock.cb89a398.js";import{_ as Ce}from"./FAQComponent.33b7091d.js";import{Q}from"./QTooltip.b3397998.js";import{Q as A}from"./QSkeleton.06016043.js";import{Q as le}from"./QLinearProgress.eb0ecb26.js";import{c as Qe}from"./copy-to-clipboard.88e19d68.js";import{_ as oe}from"./TypingText.d71690a4.js";import"./QItemLabel.002a64cb.js";import"./QTabs.f7a073bd.js";import"./QResizeObserver.9ea8d6cd.js";import"./rtl.4aeb06d5.js";import"./QTabPanels.2abc808c.js";import"./use-panel.32660027.js";import"./touch.3df10340.js";import"./position-engine.4471316e.js";import"./use-cache.b0833c75.js";import"./QList.50eb9c4c.js";import"./QBtnDropdown.fb048f7b.js";import"./QMenu.eef9e5cf.js";import"./ClosePopup.b514dffa.js";import"./embedding.da2cf039.js";import"./QTable.4a7a9098.js";import"./QSelect.6f82031c.js";import"./use-fullscreen.55f7adaa.js";import"./ModelDropDown.f745d50b.js";import"./regexp.d033247d.js";import"./QForm.a351c836.js";import"./QSlideTransition.9704fcf1.js";import"./QExpansionItem.f8bd6ddd.js";var Pe="/assets/explain.00d2d1a4.svg",Be="/assets/explain2.eda58d92.svg";const Se={class:"text-caption text-bold text-grey-5"},Ue={class:"text-caption text-bold text-grey-5"},Le=ne({__name:"ReaderDemoComponent",setup(ue){const{t:d}=ie({useScope:"global"}),o=m(""),n=m(""),k=m(!1),h=m(!1),D=m("Summarize the content in two sentences."),P=ce(),X=["https://news.ycombinator.com/newest","https://huggingface.co/jinaai","https://twitter.com/elonmusk","https://en.wikipedia.org/wiki/Dot-com_bubble","https://arxiv.org/abs/2310.19923","https://arxiv.org/html/2310.19923v4","https://about.google/","https://www.stanford.edu/","https://stackoverflow.com/questions/45802404/failed-to-execute-setattribute-on-element-is-not-a-valid-attribute-name"],Y=()=>X[Math.floor(Math.random()*X.length)],j=m(Y()),B=W(()=>`https://r.jina.ai/${j.value}`),me=W(()=>"https://corsproxy.io/?"+encodeURIComponent(j.value)),pe=async()=>{k.value=!0;try{const r=await fetch(me.value);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.text();o.value=`\`\`\`html
${i}
\`\`\``}catch(r){o.value=r.message}finally{k.value=!1}},Z=m(null),g=m([]),_e=m([]),$=m([]),S=m(!1),U=m(!1),N=m(!1),I=m(!1),O=m(!1),fe=async()=>{await Promise.all([ee(!0),ee(!1)])},ee=async r=>{var M,H,L;if(!await((M=Z.value)==null?void 0:M.validate()))return Promise.reject();const y={parameters:{question:D.value,context:r?o.value.slice(0,3e3):n.value.slice(0,3e3)}};r?(g.value=[],S.value=!0,N.value=!0):($.value=[],U.value=!0,I.value=!0);const l="https://api.promptperfect.jina.ai/ERK3nqviaFRyfGbkBsXD";try{const f=await fetch(l,{headers:{"content-type":"application/json"},body:JSON.stringify(y),method:"POST"});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);if((H=f.headers.get("content-type"))!=null&&H.includes("text/event-stream")){if(f.body){const V=f.body.getReader(),F=new TextDecoder;for(;;){const{done:T,value:R}=await V.read();if(T){r?N.value=!1:I.value=!1;break}R&&F.decode(R).split(`

`).forEach(ge=>{const J=ge.replace(/data: /g,"");J&&(r?g.value.push(J):$.value.push(J))})}}}else if((L=f.headers.get("content-type"))!=null&&L.includes("application/json")){const V=(await f.json()).data;r?g.value=[V]:$.value=[V]}else throw new Error("Unknown response type")}catch(f){P.notify({color:"negative",message:d("landing_page.error",{message:f}),icon:"report_problem"})}finally{r?S.value=!1:U.value=!1}},ve=async()=>{var i,y;h.value=!0,_e.value=[];const r=await fetch(B.value,{headers:{Accept:"text/event-stream","x-no-cache":"true"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);if((i=r.headers.get("content-type"))!=null&&i.includes("text/event-stream")){if(r.body){const l=r.body.getReader(),M=new TextDecoder;for(;;){const{done:H,value:L}=await l.read();if(H){h.value=!1;break}L&&M.decode(L).split(`

`).forEach(F=>{let T=F.replace(/^event: data\ndata: /,"");if(T)if(!T.trim().endsWith('"}'))n.value=`\`\`\`json
${T}
\`\`\``.trim();else{const R=JSON.parse(T);n.value=`\`\`\`markdown
Title: ${R.title}

URL Source: ${R.url}

Markdown Content: ${R.content}
\`\`\``.trim()}})}}}else if((y=r.headers.get("content-type"))!=null&&y.includes("application/json")){const l=(await r.json()).data.replace(/^event: data\ndata: /,"");n.value=`\`\`\`json
${l}
\`\`\``}else throw new Error("Unknown response type")},he=async()=>{h.value=!0;try{const r=await fetch(B.value);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.text();n.value=`\`\`\`md
${i}
\`\`\``}catch(r){n.value=r.message}finally{h.value=!1}},te=async()=>{await Promise.all([(O.value?ve:he)(),pe()])};return de(()=>{te().then(()=>{})}),(r,i)=>{const y=qe("q-markdown");return u(),v(K,{bordered:"",flat:"",square:"",class:"col-12 col-md-10"},{default:s(()=>[t(_,{horizontal:e(P).screen.gt.sm},{default:s(()=>[t(_,{class:"col"},{default:s(()=>[t(e(G),{modelValue:j.value,"onUpdate:modelValue":i[2]||(i[2]=l=>j.value=l),label:e(d)("reader.demo.your_url"),type:"url",loading:k.value,hint:e(d)("reader.demo.your_url_hint")},{prepend:s(()=>[t(C,{dense:"",square:"",flat:"",icon:"casino",onClick:i[0]||(i[0]=l=>j.value=Y())})]),append:s(()=>[t(C,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:i[1]||(i[1]=l=>e(se)(j.value))},{default:s(()=>[t(Q,null,{default:s(()=>[x(c(e(d)("demo.open")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","label","loading","hint"])]),_:1}),t(w,{vertical:e(P).screen.gt.sm},null,8,["vertical"]),t(_,{class:"col"},{default:s(()=>[t(e(G),{"model-value":B.value,label:e(d)("reader.demo.reader_url"),readonly:"",loading:h.value,"bottom-slots":""},{append:s(()=>[t(C,{flat:"",dense:"",square:"",icon:"content_copy",onClick:i[3]||(i[3]=l=>e(Qe)(B.value))},{default:s(()=>[t(Q,null,{default:s(()=>[x(c(e(d)("copy")),1)]),_:1})]),_:1}),t(C,{flat:"",dense:"",square:"",icon:"open_in_new",onClick:i[4]||(i[4]=l=>e(se)(B.value))},{default:s(()=>[t(Q,null,{default:s(()=>[x(c(e(d)("demo.open")),1)]),_:1})]),_:1})]),hint:s(()=>[t(be,{modelValue:O.value,"onUpdate:modelValue":i[5]||(i[5]=l=>O.value=l),label:e(d)("reader.demo.stream_mode"),class:"text-caption q-mr-md",icon:"water",dense:""},{default:s(()=>[t(Q,{"max-width":"300px"},{default:s(()=>[x(c(e(d)("reader.demo.stream_mode_explain1")),1)]),_:1})]),_:1},8,["modelValue","label"]),x(" "+c(e(d)("reader.demo.reader_url_hint")),1)]),_:1},8,["model-value","label","loading"])]),_:1})]),_:1},8,["horizontal"]),t(w),t(C,{square:"",label:e(d)("reader.demo.fetch"),class:"full-width",icon:"download",onClick:te,padding:"md"},null,8,["label"]),t(w),t(_,{horizontal:e(P).screen.gt.sm,class:"q-pa-none"},{default:s(()=>[t(_,{class:"col"},{default:s(()=>[a("span",Se,c(e(d)("reader.demo.raw_html")),1),k.value?(u(),q(b,{key:0},z([100,200,300,300,200],l=>t(A,{type:"text",width:`${l}px`,key:l},null,8,["width"])),64)):(u(),v(y,{key:1,src:o.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1}),t(w,{vertical:e(P).screen.gt.sm},null,8,["vertical"]),t(_,{class:"col"},{default:s(()=>[a("span",Ue,c(e(d)("reader.demo.reader_output")),1),h.value?(u(),q(b,{key:0},z([100,300,200,200],l=>t(A,{type:"text",width:`${l}px`,key:l},null,8,["width"])),64)):(u(),v(y,{key:1,src:n.value,"no-line-numbers":"",style:{"max-height":"300px"}},null,8,["src"]))]),_:1})]),_:1},8,["horizontal"]),t(w),t(_,null,{default:s(()=>[t(e(G),{label:e(d)("reader.demo.ask_question"),modelValue:D.value,"onUpdate:modelValue":i[6]||(i[6]=l=>D.value=l),ref_key:"questionRef",ref:Z,hint:e(d)("reader.demo.ask_question_hint")},{append:s(()=>[t(C,{icon:"send",onClick:fe,padding:"md",square:""})]),_:1},8,["label","modelValue","hint"])]),_:1}),S.value||U.value||g.value.length||$.value.length?(u(),q(b,{key:0},[t(w),t(_,{horizontal:""},{default:s(()=>[S.value||g.value.length?(u(),v(K,{key:0,class:"col"},{default:s(()=>[S.value?(u(),v(_,{key:0},{default:s(()=>[t(re,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:s(()=>[t(Q,null,{default:s(()=>[x(c(e(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(u(),q(b,null,z([0,1,2,3],l=>t(A,{key:l,class:"q-my-xs",width:l>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(u(),q(b,{key:1},[t(_,{class:"q-pa-lg"},{default:s(()=>[t(oe,{text:g.value,"speed-time":g.value?50:0},null,8,["text","speed-time"])]),_:1}),N.value?(u(),v(le,{key:0,indeterminate:""})):E("",!0)],64))]),_:1})):E("",!0),t(w,{vertical:""}),U.value||$.value.length?(u(),v(K,{key:1,class:"col"},{default:s(()=>[U.value?(u(),v(_,{key:0},{default:s(()=>[t(re,{name:"img:https://promptperfect.jina.ai/PromptPerfect-dark.svg",class:"q-mr-sm"},{default:s(()=>[t(Q,null,{default:s(()=>[x(c(e(d)("landing_page.powered_by_promptperfect")),1)]),_:1})]),_:1}),(u(),q(b,null,z([0,1,2,3],l=>t(A,{key:l,class:"q-my-xs",width:l>0?"":"100px",type:"text"},null,8,["width"])),64))]),_:1})):(u(),q(b,{key:1},[t(_,{class:"q-pa-lg"},{default:s(()=>[t(oe,{text:$.value,"speed-time":I.value?50:0},null,8,["text","speed-time"])]),_:1}),I.value?(u(),v(le,{key:0,indeterminate:""})):E("",!0)],64))]),_:1})):E("",!0)]),_:1})],64)):E("",!0)]),_:1})}}});const Ve={class:"col-12 col-md-11 q-py-xl q-mx-xs-xs q-mx-sm-sm q-mx-md-md q-mx-lg-lg q-mx-xl-xl q-ma-xl relative-position"},Ee={class:"row q-mt-xl q-pt-xl justify-center"},De={class:"row justify-center items-center"},Ie={class:"col-11 col-md-8"},Me={class:"q-my-xl row justify-center items-center"},He={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},ze={class:"row q-mt-xl q-pt-xl justify-center"},Ae={class:"row justify-center items-center"},Ne={class:"col-11 col-md-8"},Oe={class:"q-my-xl row justify-center items-center"},Fe={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},Je={class:"row q-mt-xl q-pt-xl justify-center"},Ke={class:"q-my-xl row justify-center items-center"},Ge={class:"col-11 col-md-8 col-lg-6 text-subtitle1 q-pa-lg-xl q-my-lg",style:{"white-space":"pre-line"}},We={class:"row q-mt-xl q-pt-xl justify-center"},Xe={class:"q-my-xl row justify-center items-center"},Ye={class:"row q-mt-xl q-py-xl justify-center"},Ze={class:"q-my-xl text-center text-grey-5 text-h6 text-weight-light"},et={class:"row justify-center"},tt={class:"col-12 col-md-9 q-pb-xl"},at=ne({__name:"ReaderPage",setup(ue){const d=ke(),{t:o}=ie({useScope:"global"});$e({page:"reader",banner:"banner-reader-api.png",url:"reader"});const n=ce();W(()=>[{title:o("reader.better_input"),description:o("reader.better_input_description"),name:"improve_input",icon:"mdi-import",anchor:"apiform"},{title:o("reader.fast_stream"),description:o("reader.fast_stream_description"),name:"stream",icon:"mdi-hydro-power",anchor:"benchmark"},{title:o("reader.free"),description:o("reader.free_description"),name:"free_forever",icon:"mdi-currency-usd-off",anchor:"apiform"}]);const k=[{label:"landing_page.get_api_now",icon:"code",anchor:"#apiform"},{label:"reader.demo.try_demo",icon:"play_arrow",anchor:"#demo"},{label:"landing_page.source_code",icon:"fab fa-github",anchor:"https://github.com/jina-ai/reader"}];return de(async()=>{je(d.hash)}),(h,D)=>(u(),v(xe,null,{default:s(()=>[a("div",{class:p(["row justify-center items-center img-bg",e(n).screen.lt.sm?"q-pa-md":"q-pa-xl"])},[a("div",Ve,[t(Re,{title:e(o)("landing_page.reader"),tagline:e(o)("reader.reader_description"),"large-title":!0,buttons:k},null,8,["title","tagline"])])],2),a("div",{class:p(e(n).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"what_reader"},[a("div",Ee,[a("div",{class:p(e(n).screen.lt.md?"q-mb-lg q-pb-md":"")},[a("h2",{class:p(["text-h2 text-white q-mb-lg text-center",e(n).screen.lt.md?"justify-center":""])},c(e(o)("reader.what_is")),3)],2)]),a("div",De,[a("div",Ie,[t(ae,{src:Pe})])]),a("div",Me,[a("div",He,c(e(o)("reader.what_is_answer_long")),1)]),a("div",ze,[a("div",{class:p(e(n).screen.lt.md?"q-mb-lg q-pb-md":"")},[a("h3",{class:p(["text-h3 text-white q-mb-lg text-center",e(n).screen.lt.md?"justify-center":""])},c(e(o)("reader.reader_reads_images")),3)],2)]),a("div",Ae,[a("div",Ne,[t(ae,{src:Be})])]),a("div",Oe,[a("div",Fe,c(e(o)("reader.reader_also_read_images")),1)]),a("div",Je,[a("div",{class:p(e(n).screen.lt.md?"q-mb-lg q-pb-md":"")},[a("h3",{class:p(["text-h3 text-white q-mb-lg text-center",e(n).screen.lt.md?"justify-center":""])},c(e(o)("reader.is_free")),3)],2)]),a("div",Ke,[a("div",Ge,c(e(o)("reader.is_free_description")),1)])],2),a("div",{class:p([e(n).screen.lt.sm?"q-pa-md":"q-pa-xl","bg-dark"]),id:"demo"},[a("div",We,[a("div",{class:p(e(n).screen.lt.md?"q-mb-lg q-pb-md":"")},[a("h2",{class:p(["text-h2 text-white q-mb-lg text-center",e(n).screen.lt.md?"justify-center":""])},c(e(o)("reader.demo.tagline")),3)],2)]),a("div",Xe,[t(Le)])],2),a("div",{class:p(e(n).screen.lt.sm?"q-pa-md":"q-pa-xl"),id:"apiform"},[a("div",Ye,[a("div",{class:p(e(n).screen.lt.md?"q-mb-lg q-pb-md":"")},[a("h2",{class:p(["text-h2 text-white q-mb-lg text-center",e(n).screen.lt.md?"justify-center":""])},c(e(o)("reader.title")),3)],2)]),a("div",Ze,c(e(o)("reader.reader_description")),1),a("div",et,[a("div",tt,[t(Te,{"show-function":"reader","require-a-p-i-key":!1})])])],2),t(Ce,{"faq-sources":["reader.faq_v1"],dark:!0},null,8,["faq-sources"]),t(we)]),_:1}))}});var It=ye(at,[["__scopeId","data-v-5af80058"]]);export{It as default};
