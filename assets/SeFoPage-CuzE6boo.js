import{j as X,ag as $,k,n as ee,a1 as ae,a2 as m,a3 as A,a4 as E,ac as N,a5 as b,ab as se,q as K,ae as Q,as as te,a7 as U,a9 as ne,a8 as oe,a6 as H,af as Y,ao as Z,u as ie,w as le,W as ce,aq as pe,ap as de,ad as V,al as ue,bx as he}from"./index-BSykyakD.js";import{a as ge}from"./QSpinnerRings-CTkcKvJ3.js";import{Q as me}from"./QPage-CwTHyLF-.js";import{E as a,L as we}from"./PurchaseDialog-C5N3uGxR.js";import{u as re,T as fe}from"./embedding-CnE0O2Nz.js";import{M as ye,E as be,a as ve,R as Se,C as _e,b as ke,I as Ee,T as Te,S as W,B as Ce,K as xe}from"./KeysTable-k2upbgq2.js";import{Q as Ae,P as Re}from"./PurchaseTab-CdDu1yjm.js";import{Q as Oe}from"./QItemLabel-BX56n8qM.js";import{a as Pe}from"./QLinearProgress-DvVmxiDT.js";import{u as Le}from"./useMetaTags-tzXaJRtq.js";import"./ClosePopup-Dn8ZCaa6.js";import"./use-dialog-plugin-component-j2Um5S05.js";import"./finetune-BK4nW3uF.js";import"./format-DyQxkAtJ.js";import"./QForm-BpiQ8YuP.js";import"./QTooltip-CBESzXu-.js";import"./position-engine-DI7YmeFJ.js";import"./QExpansionItem-Du2Tnw3L.js";import"./copy-to-clipboard-B8UVl1rJ.js";import"./package-D9JPNs5w.js";import"./QMenu-O8qDEhEk.js";import"./blogs-DGHaUBtY.js";import"./orderBy-Dg0_itX7.js";import"./TouchPan-Cedb_dKh.js";import"./touch-BjYP5sR0.js";import"./QTab-DoRR5AWE.js";import"./QTabs-C0FAjUCZ.js";import"./QResizeObserver-DeldwiJK.js";import"./QBtnDropdown-Dys5cNIH.js";const J="https://api.jina.ai/v1/classify",q=6,Me=X({__name:"AvatarTab",setup(F,{expose:v}){v();const{t:p}=$({useScope:"global"}),e=ee(),c=k(!1),w=k([]),f=k(null),d=k(!1),T=k(""),_=k(""),R=re(),C=k(null),I=n=>{C.value=n},h={accessories:{Eyepatch:"person wearing a mysterious black eye patch",Glasses:"person wearing modern round glasses with clear lenses","Glasses 2":"person wearing thin-framed contemporary glasses","Glasses 3":"person wearing classic rectangular glasses","Glasses 4":"person wearing vintage round glasses","Glasses 5":"person wearing designer wire-frame glasses",None:"person without any eyewear or accessories",Sunglasses:"person wearing fashionable dark sunglasses","Sunglasses 2":"person wearing sporty aviator sunglasses"},body:{"Blazer Black Tee":"person wearing a black t-shirt under a professional blazer","Button Shirt 1":"person in a crisp button-up dress shirt","Button Shirt 2":"person in a light colored button-up shirt",Coffee:"person holding a coffee cup in casual attire",Device:"person using a mobile device in casual wear",Dress:"person wearing an elegant flowing dress",Explaining:"person gesturing while explaining in business attire","Fur Jacket":"person wearing a luxurious fur jacket",Gaming:"person in gaming attire with controller","Gym Shirt":"person wearing athletic workout clothes",Hoodie:"person in a comfortable casual hoodie",Killer:"person in dark mysterious attire",Macbook:"person working on laptop in casual clothes",Paper:"person holding papers in professional attire","Pointing Up":"person gesturing upward in business wear","Polka Dot Jacket":"person in playful polka dot jacket","Polo and Sweater":"person wearing polo shirt under sweater","Shirt and Coat":"person in formal shirt and coat combination","Sporty Tee":"person in athletic sports t-shirt","Striped Pocket Tee":"person in casual striped t-shirt with pocket","Striped Tee":"person wearing horizontal striped t-shirt",Sweater:"person in cozy knit sweater","Sweater Dots":"person wearing sweater with polka dot pattern","Tee 1":"person in basic solid t-shirt","Tee 2":"person in casual graphic t-shirt","Tee Arms Crossed":"person with crossed arms in t-shirt","Tee Selena":"person in fitted casual t-shirt","Thunder T-Shirt":"person wearing t-shirt with thunder design",Turtleneck:"person in sophisticated black turtleneck",Whatever:"person in casual wear with relaxed pose"},face:{"Angry with Fang":"person with an intense angry expression showing fangs",Awe:"person with an expression of wonder and amazement",Blank:"person with a neutral blank expression",Calm:"person with serene peaceful expression",Cheeky:"person with a playful mischievous expression",Concerned:"person with a worried concerned expression","Concerned Fear":"person with a worried fearful expression",Contempt:"person with a disdainful contemptuous expression",Cute:"person with adorable cheerful expression",Cyclops:"person has only one one-eye",Driven:"person with determined focused expression","Eating Happy":"person with a joyful expression while eating",Explaining:"person with an animated expression while explaining","Eyes Closed":"person with a peaceful expression and closed eyes",Fear:"person with a frightened fearful expression",Hectic:"person with a frantic overwhelmed expression","Loving Grin 1":"person with gentle loving smile","Loving Grin 2":"person with bright heartfelt smile",Monster:"person with a playful monster-like expression",Old:"person with an aged wise expression",Rage:"person with an intense angry expression",Serious:"person with professional serious expression",Smile:"person with friendly welcoming smile","Smile Big":"person with broad enthusiastic smile","Smile LOL":"person with joyful laughing expression","Smile Teeth Gap":"person with charming gap-toothed smile",Solemn:"person with a deeply serious thoughtful expression",Suspicious:"person with a skeptical suspicious expression",Tired:"person with an exhausted weary expression","Very Angry":"person with an extremely angry expression"},head:{Afro:"person with natural afro hairstyle",Bangs:"person with straight front bangs","Bangs 2":"person with side-swept bangs","Bantu Knots":"person with traditional bantu knots hairstyle",Bear:"person with bear-themed hairstyle",Bun:"person with hair styled in neat bun","Bun 2":"person with messy top bun",Buns:"person with double hair buns",Cornrows:"person with cornrow braided hairstyle","Cornrows 2":"person with intricate cornrow design","Flat Top":"person with classic flat top haircut","Flat Top Long":"person with long flat top haircut","Gray Bun":"person with gray hair in bun","Gray Medium":"person with medium-length gray hair","Gray Short":"person with short gray hair",Long:"person with long flowing hair","Long Afro":"person with long voluminous afro","Long Bangs":"person with long layered bangs","Long Curly":"person with long curly hair","Medium 1":"person with shoulder-length hair","Medium 2":"person with wavy medium hair","Medium 3":"person with textured medium hair","Medium Bangs":"person with medium hair and bangs","Medium Bangs 2":"person with feathered medium bangs","Medium Bangs 3":"person with side-parted medium bangs","Medium Straight":"person with straight medium-length hair",Mohawk:"person with classic mohawk style","Mohawk 2":"person with longer mohawk variation","No Hair 1":"person with smooth bald head","No Hair 2":"person with polished bald style","No Hair 3":"person with completely shaved head",Pomp:"person with pompadour hairstyle","Shaved 1":"person with partially shaved head style","Shaved 2":"person with modern shaved haircut","Shaved 3":"person with artistic shaved design","Short 1":"person with short textured cut","Short 2":"person with short faded haircut","Short 3":"person with short spiky style","Short 4":"person with short layered cut","Short 5":"person with short tapered haircut",Twists:"person with twisted loc hairstyle","Twists 2":"person with longer twisted locs","hat-beanie":"person wearing a casual beanie hat","hat-hip":"person wearing a trendy hip-hop style hat"}};async function g(n){var i;try{const s=n.includes("base64,")?n.split("base64,")[1]:n,t=await fetch(J,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R.apiKey}`},body:JSON.stringify({model:(i=C==null?void 0:C.value)==null?void 0:i.name,input:[{image:s}],labels:{accessories:Object.values(h.accessories),body:Object.values(h.body),face:Object.values(h.face),head:Object.values(h.head)}})});if(!t.ok)throw new Error(`Classification failed: ${t.status}`);return await t.json()}catch(s){throw console.error("Classification error:",s),s}}async function S(n,i){try{const s=await fetch(`/src/assets/avatar/${n}/${i}.svg`);if(!s.ok)throw console.error(`Failed to load SVG: ${n}/${i}.svg, status: ${s.status}`),new Error(`Failed to load SVG: ${n}/${i}.svg`);return s.text()}catch(s){throw console.error("Error loading SVG:",s),e.notify({type:"negative",message:p("avatar.error_loading")}),s}}function L(n,i){return Object.entries(n).map(([s,t])=>({category:s,items:t.sort((r,u)=>u.score-r.score).slice(0,i).map(r=>{var u;return{label:r.label,score:r.score,feature:((u=Object.entries(h[s]).find(([B,y])=>y===r.label))==null?void 0:u[0])||Object.keys(h[s])[0]}})}))}function M(n,i){const s={};return n.forEach(({category:t,items:r})=>{const u=r[i%r.length];s[t]=u.feature}),s}async function l(){if(!_.value){e.notify({type:"warning",message:p("avatar.noImageSelected")});return}c.value=!0,w.value=[];try{const n=await g(_.value),i=L(n.data[0].predictions,q);for(let s=0;s<q;s++){const t=M(i,s),r=await Promise.all([S("body",t.body),S("head",t.head),S("face",t.face),S("accessories",t.accessories)]),u=["translate(0, 550)","translate(200, 50)","translate(320, 250)","translate(210, 310)"],y=`
        <svg
          width="380"
          height="380"
          viewBox="0 0 900 900"
          fill="none"
          stroke="black"
          stroke-width="0.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g>
            ${r.map((D,j)=>{const G=D.slice(D.indexOf(">",D.indexOf("<svg"))+1).replace("</svg>","");return`<g transform="${u[j]}">${G}</g>`}).join("")}
          </g>
        </svg>
      `;w.value.push(y)}}catch(n){console.error("Error generating avatars:",n),w.value=[],e.notify({type:"negative",message:p("avatar.classificationError")})}finally{c.value=!1}}async function o(n){return new Promise((i,s)=>{const t=new Image,r=document.createElement("canvas"),u=r.getContext("2d");r.width=256,r.height=256,t.onload=()=>{const y=Math.max(r.width/t.width,r.height/t.height),D=(r.width-t.width*y)/2,j=(r.height-t.height*y)/2;u.fillStyle="white",u.fillRect(0,0,r.width,r.height),u.drawImage(t,D,j,t.width*y,t.height*y);const G=r.toDataURL(n.type),z=G.split(",")[1];T.value=G,_.value=z,i(z)},t.onerror=()=>{s(new Error(p("avatar.error_processing")))};const B=new FileReader;B.onload=y=>{t.src=y.target.result},B.onerror=()=>{s(new Error(p("avatar.error_processing")))},B.readAsDataURL(n)})}async function O(){if(f.value){d.value=!0;try{await o(f.value)}catch(n){console.error("Error processing image:",n),e.notify({type:"negative",message:p("avatar.error_processing")})}finally{d.value=!1}}else T.value=""}function x(n,i){const s=new Blob([n],{type:"image/svg+xml"}),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`avatar-${i+1}.svg`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t),e.notify({message:p("avatar.download_success",{index:i+1})})}const P={API_URL:J,t:p,$q:e,isLoading:c,svgContents:w,TOP_N:q,selectedFile:f,isProcessing:d,processedImage:T,imageBase64:_,embeddingStore:R,currentModel:C,onModelItemClick:I,featureMapping:h,classifyImage:g,importSVG:S,getTopNPredictions:L,generateFeatureCombination:M,generateAvatar:l,processImage:o,handleFileSelect:O,downloadSVG:x,ModelDropDown:ye};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),Be={class:"row full-width"},De={class:"row q-col-gutter-md"},Ne=["innerHTML"];function Ie(F,v,p,e,c,w){return m(),A(Y,{flat:"",class:"column no-wrap full-height"},{default:E(()=>[N("div",Be,[b(Ae,{class:"col",square:"",filled:"","input-class":"text-no-wrap ellipsis",modelValue:e.selectedFile,"onUpdate:modelValue":[v[0]||(v[0]=f=>e.selectedFile=f),e.handleFileSelect],label:e.t("avatar.select_file"),accept:".jpg,.jpeg,.png,.gif,.webp",loading:e.isProcessing},{prepend:E(()=>[e.processedImage?(m(),A(Oe,{key:1,src:e.processedImage,width:"24px",height:"24px"},null,8,["src"])):(m(),A(se,{key:0,name:"attach_file"}))]),_:1},8,["modelValue","label","loading"]),b(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,category:"clip",onChooseModel:e.onModelItemClick},null,8,["currentModel"]),b(K,{square:"",flat:"","no-caps":"",padding:"md",label:e.t("avatar.generate"),onClick:e.generateAvatar,icon:"play_arrow",loading:e.isLoading,disable:!e.currentModel},null,8,["label","loading","disable"]),b(K,{square:"",flat:"",padding:"md","no-caps":"",label:e.t("avatar.how_does_it_work"),to:"/news/scaling-test-time-compute-for-embedding-models",icon:"help"},null,8,["label"])]),e.isProcessing||e.isLoading?(m(),A(Pe,{key:0,indeterminate:"",size:"1px"})):Q("",!0),b(te),b(H,null,{default:E(()=>[N("div",De,[(m(!0),U(oe,null,ne(e.svgContents,(f,d)=>(m(),U("div",{key:d,class:"col-auto"},[b(Y,{flat:"",bordered:"",class:"cursor-pointer q-hoverable",onClick:T=>e.downloadSVG(f,d)},{default:E(()=>[v[1]||(v[1]=N("span",{class:"q-focus-helper"},null,-1)),b(H,null,{default:E(()=>[N("div",{class:"text-center",innerHTML:f},null,8,Ne)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})}const Ge=ae(Me,[["render",Ie],["__file","AvatarTab.vue"]]),Ue=X({__name:"SeFoPage",setup(F,{expose:v}){v();const p={[a.MANAGE_QUOTA]:Re,[a.CODE]:be,[a.RERANK_CODE]:ve,[a.READER_CODE]:Se,[a.CLASSIFY]:_e,[a.TOKENIZER]:ke,[a.INTEGRATIONS]:Ee,[a.TEST]:Te,[a.SEARCH]:W,[a.VISUALIZE]:W,[a.BULK]:Ce,[a.ONPREM]:null,[a.KEY_MANAGER]:xe,[a.AVATAR]:Ge},e=ee(),c=pe(),w=de(),{t:f}=$({useScope:"global"}),d=re(),{apiKey:T,allModels:_,classifiers:R,turnstileState:C}=Z(d),I=ie(),{user:h}=Z(I);Le({page:"key_manager",banner:"banner-api.png",url:"api-dashboard"});const g=k(S(c.params.tab instanceof Array?c.params.tab[0]:c.params.tab));le(()=>c.params.tab,l=>{const o=l instanceof Array?l[0]:l;!h.value.uid&&o===a.KEY_MANAGER&&w.push({params:{tab:a.CODE},query:c.query}),g.value=o}),ce(()=>{navigator.userAgent.toLowerCase().includes("headless")||L()});function S(l=""){switch(l.toLowerCase()){case"apikey":case"key-manager":return a.KEY_MANAGER;case"embedding":return a.CODE;case"reranker":return a.RERANK_CODE;case"reader":return a.READER_CODE;case"tokenizer":case"segmenter":return a.TOKENIZER;case"integration":return a.INTEGRATIONS;case"classifier":return a.CLASSIFY;case"test":return a.TEST;case"search":return a.SEARCH;case"visualize":return a.VISUALIZE;case"bulk":return a.BULK;case"onprem":return a.ONPREM;case"avatar":return a.AVATAR;default:return a.CODE}}async function L(){console.log("checkURLForParam");const l=new URLSearchParams(window.location.search);if(l.has("login")&&!h.value.uid){const o=new URL(window.location.href);o.searchParams.delete("login"),window.history.pushState({},"",o),e.dialog({component:we,persistent:!0})}if(l.has("sui")){const o=S(l.get("sui")||"");g.value!==o&&w.replace({params:{tab:o},query:{...c.query,sui:void 0}})}if(l.has("task")){d.task=l.get("task")||"";const o=new URL(window.location.href);o.searchParams.delete("task"),window.history.pushState({},"",o)}if(l.has("model")){_.value.length||await d.getModels();const o=l.get("model"),O=o&&_.value.find(x=>x.name===o);if(O&&g.value!==a.CLASSIFY){const x=Array.isArray(O.request_path)?O.request_path:[O.request_path];[a.CODE,a.RERANK_CODE].includes(g.value)||(x.some(P=>["embedding","multi-vector"].includes(P))?g.value=a.CODE:x.includes("rank")&&(g.value=a.RERANK_CODE))}else R.value.length===0&&await d.getClassifiers(T.value),R.value.find(P=>P.classifier_id===o)&&(g.value=a.CLASSIFY)}}const M={COMPONENTS:p,$q:e,route:c,router:w,t:f,embeddingStore:d,apiKey:T,allModels:_,classifiers:R,turnstileState:C,userStore:I,user:h,currentTab:g,getActiveTab:S,checkURLForParam:L,get EMBEDDING_TABS(){return a},get TurnstileState(){return fe}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),Fe={key:0},je={key:1},Ve={class:"column no-wrap full-width",style:{"flex-grow":"1"}};function qe(F,v,p,e,c,w){return m(),A(me,{class:"row"},{default:E(()=>[e.turnstileState===e.TurnstileState.ERROR||e.turnstileState===e.TurnstileState.UNSUPPORTED?(m(),A(ge,{key:0,"inline-actions":"",class:"text-white bg-negative full-width"},{action:E(()=>[b(K,{square:"",outline:"",to:"/contact-sales",label:e.t("landing_page.contact_sales")},null,8,["label"])]),default:E(()=>[b(se,{name:"report_problem",size:"sm",class:"q-mr-sm"}),e.turnstileState===e.TurnstileState.ERROR?(m(),U("span",Fe,V(e.t("embedding.turnstile_error")),1)):e.turnstileState===e.TurnstileState.UNSUPPORTED?(m(),U("span",je,V(e.t("embedding.turnstile_unsupported")),1)):Q("",!0),ue(" "+V(e.t("embedding.mistake_contact"))+" ",1)]),_:1})):Q("",!0),N("div",Ve,[(m(),A(he(e.COMPONENTS[e.currentTab]),{asVisualizer:e.currentTab===e.EMBEDDING_TABS.VISUALIZE,maximizedWindow:!0},null,8,["asVisualizer"]))])]),_:1})}const ba=ae(Ue,[["render",qe],["__file","SeFoPage.vue"]]);export{ba as default};
