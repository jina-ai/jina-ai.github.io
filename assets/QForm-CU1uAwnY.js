import{aG as Me,e as X,dq as L,j as re,af as de,k as P,a0 as ue,a1 as c,a2 as f,a3 as t,a4 as n,ae as oe,ai as E,aj as h,aa as I,ak as g,ac as d,aI as ve,q as V,ar as ce,ab as q,aW as Be,aX as ae,b1 as De,a_ as Ue,a$ as Qe,b0 as te,m as F,ap as je,b5 as Le,a6 as z,ad as S,an as Ee,cw as Oe,V as we,bt as Ve,n as Fe,dr as He,ds as ze,a9 as U,aP as Ne,a7 as ne,a8 as ie,ah as Ge,a5 as le,aQ as Ye,aO as Je,am as We,s as Xe,bJ as Ze,bK as $e,p as ea,K as aa,J as ta,au as na,L as ge,U as ia,bS as la,aT as oa,dt as sa}from"./index-BCTjxjxh.js";import{a as x,b as ke,Q as pe}from"./QItemLabel-CWSA0D_n.js";import{Q as O}from"./QTooltip-BAtk3gIR.js";import{a as Pe,Q as ra}from"./QBtnGroup-DuXsaqwg.js";import{d as da,a as se,Q as be}from"./finetune-Bm7uKDu6.js";import{a as ua}from"./QExpansionItem-BQub8Cck.js";import{Q as Ie}from"./QLinearProgress-B2AWI8Ps.js";import{c as ca}from"./copy-to-clipboard-DC1hULnQ.js";import{u as N,T as ma}from"./embedding-BSmNSc89.js";import{a as qe,Q,b as he}from"./QTable-jrDu4qco.js";import{C as _a}from"./ClosePopup-B2u0_NXw.js";import{u as fa}from"./use-dialog-plugin-component-Bb5_RcbD.js";import{Q as ya}from"./QSpace-BlVav70h.js";const ga=Me("apiKey",{state:()=>({keys:[],isLoading:!1,keysInfoCache:{},isBusyState:new Set}),getters:{},actions:{async addKey(l){var o;if(!(!((o=X.currentUser)!=null&&o.uid)||!l))try{const{data:i}=await L.request("apiKey","addKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await L.getIdToken()}`},body:JSON.stringify({key:l})});return i&&(this.keys.unshift(i),this.getKeyInfo(l)),i}catch(i){console.error(i)}},async setPrimaryKey(l){var o;if((o=X.currentUser)!=null&&o.uid){this.isBusyState.add(l);try{const{data:i}=await L.request("apiKey","setPrimaryKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await L.getIdToken()}`},body:JSON.stringify({key:l,isPrimary:!0})});return i&&(this.keys.forEach(e=>(e.key===l?e.isPrimary=!0:e.isPrimary=!1,e)),N().apiKey=l,N().getCurrentKeyInfo()),i}catch(i){console.error(i)}finally{this.isBusyState.delete(l)}}},async removeKey(l){var o;if((o=X.currentUser)!=null&&o.uid){this.isBusyState.add(l);try{const{data:i}=await L.request("apiKey","removeKey",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await L.getIdToken()}`},body:JSON.stringify({key:l})});i&&(this.keys.splice(this.keys.findIndex(e=>e.key===l),1),delete this.keysInfoCache[l])}catch(i){console.error(i)}finally{this.isBusyState.delete(l)}}},async fetchKeys(){var l;if(!(!((l=X.currentUser)!=null&&l.uid)||this.isLoading)){this.isLoading=!0;try{const{data:o}=await L.request("apiKey","keyList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await L.getIdToken()}`}});this.keys=o;for(const i of this.keys)this.getKeyInfo(i.key)}catch(o){console.error(o)}finally{this.isLoading=!1}}},async getKeyInfo(l){var o;if(l&&!this.isBusyState.has(l))try{this.isBusyState.add(l);const i=await N().getKeyInfo(l),e=await N().getUsage(l);this.keysInfoCache[l]={...i,usage:e,last_used_at:(o=e==null?void 0:e[0])==null?void 0:o.updated_at}}finally{this.isBusyState.delete(l)}}}}),pa=re({__name:"UsageHistoryDialog",props:{apiKey:{}},setup(l,{expose:o}){o();const i=l,{t:e}=de({useScope:"global"}),m=N(),{dialogRef:v}=fa(),a=()=>{var r;(r=T.value)==null||r.requestServerInteraction()},k=()=>{w.value=[]},b=r=>{var y,M;switch((y=r.request_path)==null?void 0:y.toLowerCase()){case"/encode":case"/checkfact":return K((M=r.metadata)==null?void 0:M.model_name);case"/embeddings":case"/rerank":case"/classify":case"/train":return`api.jina.ai/v1${r.request_path}`;case"/multi-embeddings":return"api.jina.ai/v1/multi-vector";case"/segment":return"segment.jina.ai";default:return r.request_path}},K=r=>{if(!r)return"";switch(r.toLowerCase()){case"reader-crawl":return"r.jina.ai";case"reader-search":return"s.jina.ai";case"grounding-checkfact":return"g.jina.ai";default:return r}},C=P(!1),T=P(null),w=P([]),s=P([{name:"icon",label:"",field:"amount",sortable:!1,align:"right"},{name:"createdAt",label:e("embedding.usage_time"),field:"createdAt",sortable:!1,align:"left",format:r=>da.formatDate(r,"YYYY-MM-DD")},{name:"amount",label:e("embedding.tokens"),field:"amount",sortable:!1,align:"right",format:r=>r>0?`+${r}`:`${r}`},{name:"reason",label:e("embedding.usage_reason"),field:"reason",sortable:!1,align:"left"},{name:"requestPath",label:e("embedding.request_path"),field:"request_path",sortable:!1,align:"left"},{name:"requestNumber",label:e("embedding.request_number"),field:"request_number",sortable:!1,align:"right",format:r=>r?se(r):""}]),D={props:i,t:e,embeddingStore:m,dialogRef:v,onUsageHistoryDialogShow:a,onUsageHistoryDialogHide:k,getEndpoint:b,formatModelName:K,isUsageLoading:C,usageTableRef:T,usageRows:w,usageColumns:s,getUsageHistory:async()=>{C.value=!0;const r=await m.getUsage(i.apiKey);C.value=!1,!(!r||r.length===0)&&(w.value=r.map(y=>{const M=new Date(y.updated_at);let _=y.quantity,p=e(`embedding.usage_reason_${y.type}`);return y.type===ma.CONSUME?(_=-_,y.metadata.model_name&&(p=p+": "+K(y.metadata.model_name))):(y.metadata.product_name&&(p=p+": "+y.metadata.product_name),y.metadata.order_quantity&&y.metadata.order_quantity>1&&(p=p+` (x ${y.metadata.order_quantity})`)),{createdAt:M,amount:_,reason:p,request_path:b(y),request_number:y.request_number}}))},get QTable(){return qe},get formatNumber(){return se}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}});function ba(l,o,i,e,m,v){return c(),f(Be,{ref:"dialogRef",onShow:e.onUsageHistoryDialogShow,onHide:e.onUsageHistoryDialogHide},{default:t(()=>[n(oe,{style:{width:"1000px","max-width":"80vw"}},{default:t(()=>[n(E,{class:"q-pa-md"},{default:t(()=>[n(h,{avatar:""},{default:t(()=>[n(I,{name:"history"})]),_:1}),n(h,null,{default:t(()=>[n(x,null,{default:t(()=>[g(d(e.t("embedding.usage_history")),1)]),_:1}),n(x,{caption:""},{default:t(()=>[g(d(e.t("embedding.usage_history_explain")),1)]),_:1})]),_:1}),n(h,{side:""},{default:t(()=>[ve(n(V,{icon:"close",flat:"",round:"",dense:""},null,512),[[_a]])]),_:1})]),_:1}),n(ce),n(e.QTable,{ref:"usageTableRef",flat:"",class:"bg-transparent","row-key":"createdAt",rows:e.usageRows,columns:e.usageColumns,loading:e.isUsageLoading,onRequest:e.getUsageHistory,pagination:{rowsPerPage:10}},{"body-cell-icon":t(a=>[n(Q,{key:"icon",props:a},{default:t(()=>[a.row.amount>0?(c(),f(I,{key:0,name:"o_add_circle_outline",color:"primary"})):(c(),f(I,{key:1,name:"o_remove_circle_outline",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-amount":t(a=>[n(Q,{key:"amount",props:a},{default:t(()=>[g(d((a.row.amount>0?"+":"")+e.formatNumber(a.row.amount)),1)]),_:2},1032,["props"])]),"body-cell-requestPath":t(a=>[n(Q,{key:"request_path",props:a},{default:t(()=>[q("code",null,d(a.row.request_path),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1},512)}const ha=ue(pa,[["render",ba],["__file","UsageHistoryDialog.vue"]]),va=re({__name:"RateLimitComponent",props:{showActionButtons:Boolean},setup(l,{expose:o}){o();const{t:i}=de({useScope:"global"}),e=je(),m=P([{icon:ae,endpoint:"https://r.jina.ai",name:i("reader.title"),description:i("rate_limit.rjinaai"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1000 RPM",tokenCounting:i("rate_limit.output_token_counting"),latency:"4.6s",weight:e.name==="reader"?100:18},{icon:ae,endpoint:"https://s.jina.ai",name:i("reader.title"),description:i("rate_limit.sjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"40 RPM",wPremium:"100 RPM",tokenCounting:i("rate_limit.output_token_counting"),latency:"8.7s",weight:e.name==="reader"?99:17},{icon:ae,endpoint:"https://g.jina.ai",name:i("reader.title"),description:i("rate_limit.gjinaai"),requestType:"GET/POST",woAPIkey:null,wAPIkey:"10 RPM",wPremium:"30 RPM",tokenCounting:i("rate_limit.total_token_counting"),latency:"22.7s",weight:e.name==="reader"?99:17},{icon:De,endpoint:"https://segment.jina.ai",name:i("tokenizer.title"),description:i("rate_limit.tokenizer"),requestType:"GET/POST",woAPIkey:"20 RPM",wAPIkey:"200 RPM",wPremium:"1,000 RPM",tokenCounting:i("rate_limit.no_token_counting"),latency:"0.3s",weight:e.name==="segmenter"?100:1},{icon:Ue,endpoint:"https://api.jina.ai/v1/embeddings",name:i("embedding.title"),description:i("rate_limit.embeddings"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",tokenCounting:i("rate_limit.input_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),latencyExplain:i("rate_limit.batch_explain"),weight:e.name==="embeddings"?100:20},{icon:Qe,endpoint:"https://api.jina.ai/v1/rerank",name:i("reranker.title"),description:i("rate_limit.tokenizer"),requestType:"POST",woAPIkey:null,wAPIkey:"500 RPM & 1,000,000 TPM",wPremium:"2,000 RPM & 5,000,000 TPM",tokenCounting:i("rate_limit.input_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),latencyExplain:i("rate_limit.batch_explain"),weight:e.name==="reranker"?100:19},{icon:te,endpoint:"https://api.jina.ai/v1/classify",name:`${i("classifier.title")} (${i("classifier.compare_table.zero_shot")})`,description:i("rate_limit.classifier_zero_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"200 RPM & 500,000 TPM",wPremium:"1,000 RPM & 3,000,000 TPM",tokenCounting:i("rate_limit.classifier_zero_shot_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?100:15},{icon:te,endpoint:"https://api.jina.ai/v1/classify",name:`${i("classifier.title")} (${i("classifier.compare_table.few_shot")})`,description:i("rate_limit.classifier_few_shot"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:i("rate_limit.classifier_few_shot_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?98:15},{icon:te,endpoint:"https://api.jina.ai/v1/train",name:i("classifier.title"),description:i("rate_limit.classifier"),requestType:"POST",woAPIkey:null,wAPIkey:"20 RPM & 200,000 TPM",wPremium:"60 RPM & 1,000,000 TPM",tokenCounting:i("rate_limit.classifier_token_counting"),latency:null,latencyDepends:i("rate_limit.depends"),weight:e.name==="classifier"?99:15}]),v=P([{name:"icon",field:"icon",label:"",align:"left"},{name:"name",field:"name",label:i("rate_limit.product"),align:"left"},{name:"endpoint",field:"endpoint",label:i("rate_limit.endpoint"),align:"left"},{name:"description",field:"description",label:i("rate_limit.description"),align:"left",sortable:!0},{name:"woAPIkey",field:"woAPIkey",label:i("rate_limit.woAPIkey"),align:"right"},{name:"wAPIkey",field:"wAPIkey",label:i("rate_limit.wAPIkey"),align:"right"},{name:"wPremium",field:"wPremium",label:i("rate_limit.wPremium"),align:"right"},{name:"latency",field:"latency",label:i("rate_limit.latency"),align:"right"},{name:"tokenCounting",field:"tokenCounting",label:i("rate_limit.tokenCounting"),align:"left"},{name:"requestType",field:"requestType",label:i("rate_limit.requestType"),align:"left"}]),a=P(v.value.map(C=>C.name)),k=F(()=>m.value.sort((C,T)=>T.weight-C.weight)),b=P({rowsPerPage:10}),K={t:i,route:e,rows:m,columns:v,visibleColumns:a,sortedRows:k,initialPagination:b};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),wa=["innerHTML"],ka={class:"text-bold silver-foil"},Pa={class:"text-bold golden-foil"},Ia={class:"row q-pa-md justify-center full-width"},qa={key:1},Ta={class:"silver-foil text-bold"},Aa={class:"golden-foil text-bold"},Sa={key:1};function xa(l,o,i,e,m,v){return c(),f(qe,{class:"my-sticky-column-table",flat:"",square:"","title-class":"q-pa-md",title:e.t("rate_limit.title"),rows:e.sortedRows,columns:e.columns,"row-key":"endpoint",pagination:e.initialPagination,"hide-pagination":"","visible-columns":e.visibleColumns},Le({top:t(()=>[n(E,{class:"full-width q-pa-lg"},{default:t(()=>[n(h,null,{default:t(()=>[n(x,{class:"text-weight-bold"},{default:t(()=>[g(d(e.t("rate_limit.title")),1)]),_:1}),n(x,{caption:""},{default:t(()=>[q("span",{innerHTML:e.t("rate_limit.explain")},null,8,wa)]),_:1})]),_:1}),n(ya),n(h,{side:""},{default:t(()=>[n(Ie,{modelValue:e.visibleColumns,"onUpdate:modelValue":o[0]||(o[0]=a=>e.visibleColumns=a),multiple:"",outlined:"",square:"",dense:"","options-dense":"","display-value":l.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),_:1})]),_:1})]),"header-cell-wAPIkey":t(a=>[n(he,{props:a},{default:t(()=>[q("span",ka,d(a.col.label),1)]),_:2},1032,["props"])]),"header-cell-wPremium":t(a=>[n(he,{props:a},{default:t(()=>[q("span",Pa,d(a.col.label),1)]),_:2},1032,["props"])]),"body-cell-icon":t(a=>[n(Q,{props:a},{default:t(()=>[n(ra,{src:a.value,width:"36px"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-endpoint":t(a=>[n(Q,{props:a},{default:t(()=>[q("code",null,d(a.value),1)]),_:2},1032,["props"])]),"body-cell-woAPIkey":t(a=>[n(Q,{props:a},{default:t(()=>[a.value?(c(),z("span",qa,d(a.value),1)):(c(),f(I,{key:0,name:"block",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-wAPIkey":t(a=>[n(Q,{props:a},{default:t(()=>[q("span",Ta,d(a.value),1),String(a.value).includes("X")?(c(),f(I,{key:0,name:"keyboard_double_arrow_up",color:"primary",class:"cursor-pointer"},{default:t(()=>[n(O,{"max-width":"300px"},{default:t(()=>[g(d(e.t("rate_limit.batch_explain")),1)]),_:1})]),_:1})):S("",!0)]),_:2},1032,["props"])]),"body-cell-wPremium":t(a=>[n(Q,{props:a},{default:t(()=>[q("span",Aa,d(a.value),1)]),_:2},1032,["props"])]),"body-cell-latency":t(a=>[n(Q,{props:a},{default:t(()=>[a.value?(c(),z("span",Sa,d(a.value),1)):(c(),f(ke,{key:0,icon:"bolt",label:a.row.latencyDepends,size:"sm"},{default:t(()=>[g(d(a.value)+" ",1),a.row.latencyExplain?(c(),f(I,{key:0,name:"help",class:"cursor-pointer q-ml-sm"},{default:t(()=>[n(O,{"max-width":"300px"},{default:t(()=>[g(d(a.row.latencyExplain),1)]),_:2},1024)]),_:2},1024)):S("",!0)]),_:2},1032,["label"]))]),_:2},1032,["props"])]),_:2},[i.showActionButtons?{name:"bottom",fn:t(()=>[q("div",Ia,[n(Pe,{outline:"",square:""},{default:t(()=>[n(V,{outline:"",label:e.t("get_new_key"),square:"",icon:"key",href:"/?sui=apikey",padding:"md",target:"_blank"},null,8,["label"]),n(ce),n(V,{outline:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/contact-sales",padding:"md"},null,8,["label"])]),_:1})])]),key:"0"}:void 0]),1032,["title","rows","columns","pagination","visible-columns"])}const Ka=ue(va,[["render",xa],["__file","RateLimitComponent.vue"]]),Ca=re({__name:"PurchaseComponent",props:{purchaseKey:{default:""},hideUsage:{type:Boolean,default:!1},hideKey:{type:Boolean,default:!1},hideStripeInfo:{type:Boolean,default:!1},hideFreePlan:{type:Boolean,default:!1}},setup(l,{expose:o}){o();const i=l,{t:e}=de({useScope:"global"}),m=Fe(),v=ga(),a=N(),{apiKey:k,products:b,isApiKeyInfoLoading:K,isPremiumPaidUser:C,apiKeyInfo:T}=Ee(a),w=P(i.purchaseKey||k.value),s=P(T==null?void 0:T.value);Oe(async()=>{s.value=await a.getKeyInfo(w.value),r.value=!j.value||G.value});const A=P(0),D=[{label:"10K",value:1e4},{label:"1M",value:1e6}],r=P(!0),y=P(1e6),M=P(""),_=P(!0),p={"1M tokens":["paywall.no_commercial"],"1B tokens":["paywall.full_commercial"],"11B tokens":["paywall.full_commercial","paywall.higher_limit","paywall.key_manager","paywall.priority_support","paywall.free_hour_consult"]},B=F(()=>b.value.map(u=>({...u,isActive:()=>M.value===u.price_id,tag:()=>e(`embedding.${u.product_name}_targetUser`),title:()=>e(`embedding.${u.product_name.replace(".","_")}`),description:()=>e(`embedding.${u.product_name.replace(".","_")}_intuition1`),isFree:u.price===0,priceLabel:()=>u.price>0?`$${u.price}`:e("embedding.free"),priceDescription:()=>u.price>0?`${(u.price/u.token_quantity*1e6).toFixed(3)} ${e("embedding.per_m")}`:e("embedding.1M_free_description"),handler:()=>u.price>0?me(u.price_id):void 0}))),Y=F(()=>{var u,R;return(R=(u=s.value)==null?void 0:u.wallet.total_balance)!=null?R:0}),j=F(()=>{var u;return!!((u=s.value)!=null&&u.email)}),G=F(()=>{var u;return j.value&&!!((u=s.value)!=null&&u.metadata.auto_recharge)}),Z=F(()=>!!w.value&&(s==null?void 0:s.value)!==void 0),$=F(()=>!Z.value||K.value),me=async u=>{if($.value||M.value)return;const R=b.value.find(Re=>Re.price_id===u),H=new URL(window.location.href),xe=Date.now().toString();H.searchParams.set("price_id",u),H.searchParams.set("session_id",xe),H.searchParams.set("purchase_status","cancel");const Ke=H.toString();H.searchParams.set("purchase_status","success");const Ce=H.toString();M.value=u;const W={price_id:u,success_url:Ce,cancel_url:Ke},fe=localStorage.getItem(He);fe&&(W.meta_data={sales_key:fe}),r.value&&(W.meta_data={...W.meta_data,auto_recharge:!0,threshold:y.value}),R&&gtag("event","begin_checkout",{currency:R.currency,value:R.price,items:[{id:R.product_id,name:R.product_name}]});const ye=await a.checkoutWithStripe(w.value,W);M.value="",ye&&(a.apiKey=w.value,await v.setPrimaryKey(a.apiKey),a.getCurrentKeyInfo(),window.location.href=ye.url)},ee=async()=>{s.value=await a.getKeyInfo(w.value),r.value=!j.value||G.value,k.value===w.value&&a.setApiKeyInfo(s.value)},Te=async u=>{j.value&&(!G.value&&u?m.dialog({title:e("embedding.auto_recharge_enable_title"),message:e("embedding.auto_recharge_enable_message")}):G.value&&!u&&m.dialog({title:e("embedding.auto_recharge_confirm_title"),message:e("embedding.auto_recharge_confirm_message"),cancel:!0}).onOk(async()=>{try{await a.cancelAutoRecharge(i.purchaseKey||k.value)}catch(R){m.notify({message:R instanceof Error?R.message:String(R),color:"negative"}),r.value=!0}ee()}).onCancel(()=>{r.value=!0}))},Ae=async()=>{Z.value&&w.value!==k.value&&m.dialog({title:e("embedding.api_key_update_title"),message:e("embedding.api_key_update_message"),cancel:!0}).onOk(async()=>{k.value=w.value,ee(),await v.addKey(w.value),v.setPrimaryKey(w.value)})},Se=()=>{$.value||m.dialog({component:ha,componentProps:{apiKey:w.value}})};we(async()=>{await a.getProducts(),setInterval(()=>{A.value=(A.value+1)%Ve.length},3e3)});const J=P(!1),_e={props:i,t:e,$q:m,apiKeyStore:v,embeddingStore:a,apiKey:k,products:b,isApiKeyInfoLoading:K,isPremiumPaidUser:C,apiKeyInfo:T,inputApiKey:w,inputApiKeyInfo:s,currentIndex:A,rechargeThresholdOptions:D,autoRecharge:r,rechargeThreshold:y,currentPriceID:M,isPwd:_,tierFeatures:p,productCards:B,apiKeyTokens:Y,isPaidUser:j,isAutoCharge:G,isInputApiKeyValid:Z,isInputApiKeyDisabled:$,checkoutProduct:me,getKeyInfo:ee,updateAutoRecharge:Te,updateApiKey:Ae,openUsageHistoryDialog:Se,isApiKeyCopyDone:J,copyApiKey:()=>{!k.value||J.value||(ca(k.value).then(()=>{m.notify({message:e("copy_to_clipboard_success"),icon:"done"}),J.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{J.value=!1},1800))},get flatEnterprises(){return ze},get formatNumber(){return se},RateLimitComponent:Ka};return Object.defineProperty(_e,"__isScriptSetup",{enumerable:!1,value:!0}),_e}}),Ra=["innerHTML"],Ma=["innerHTML","data-text"],Ba={class:"row justify-center text-caption text-dim q-pt-md q-pb-sm"},Da={class:"row justify-center q-gutter-x-sm"};function Ua(l,o,i,e,m,v){return c(),f(pe,{class:"q-pa-md q-gutter-y-sm"},{default:t(()=>[!i.hideUsage&&e.isInputApiKeyValid?(c(),f(E,{key:0},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(h,{key:0,avatar:""},{default:t(()=>[n(I,{name:"data_usage"})]),_:1})):S("",!0),n(h,null,{default:t(()=>[n(x,{class:"text-bold"},{default:t(()=>[g(d(e.t("embedding.remaining")),1)]),_:1}),n(x,{class:U({"text-negative":e.apiKeyTokens<0})},{default:t(()=>[q("span",{innerHTML:e.t("embedding.remaining_left",{_leftTokens:e.formatNumber(e.apiKeyTokens)})},null,8,Ra)]),_:1},8,["class"])]),_:1}),n(h,{side:""},{default:t(()=>[n(Pe,{square:"",outline:""},{default:t(()=>[n(V,{outline:"",square:"",icon:"refresh",disable:e.isInputApiKeyDisabled,onClick:e.getKeyInfo,loading:e.isApiKeyInfoLoading},{default:t(()=>[n(O,null,{default:t(()=>[g(d(e.t("embedding.refresh_token_count1")),1)]),_:1})]),_:1},8,["disable","loading"]),n(ce),n(V,{square:"",outline:"","no-caps":"",label:e.t("embedding.last_7_days"),disable:e.isInputApiKeyDisabled,onClick:e.openUsageHistoryDialog},null,8,["label","disable"])]),_:1})]),_:1})]),_:1})):S("",!0),i.hideKey?S("",!0):(c(),f(E,{key:1},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(h,{key:0,avatar:""},{default:t(()=>[n(I,{name:"key",class:U({"golden-foil":e.isPremiumPaidUser,"silver-foil":e.isPaidUser})},null,8,["class"])]),_:1})):S("",!0),n(h,null,{default:t(()=>[n(Ne,{"input-style":"font-family: monospace",modelValue:e.inputApiKey,"onUpdate:modelValue":o[1]||(o[1]=a=>e.inputApiKey=a),"hide-bottom-space":"",type:e.isPwd?"password":"text",hint:e.t("embedding.key_to_top_up"),filled:"",square:"",label:e.inputApiKey?`${e.t("embedding.key_warn_v2")}`:e.t("embedding.key_enter_placeholder_to_topup"),error:!e.isInputApiKeyValid,"error-message":e.inputApiKey?e.t("embedding.input_api_key_error1"):"","input-class":"ellipsis"},{append:t(()=>[n(I,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),prepend:t(()=>[n(V,{flat:"",square:"",icon:e.isApiKeyCopyDone?"done":"content_copy",color:e.isApiKeyCopyDone?"primary":"",onClick:e.copyApiKey,stretch:""},{default:t(()=>[n(O,null,{default:t(()=>[g(d(e.t("copy")),1)]),_:1})]),_:1},8,["icon","color"])]),after:t(()=>[e.isInputApiKeyValid&&e.inputApiKey!==e.apiKey?(c(),f(V,{key:0,icon:"save",onClick:e.updateApiKey,stretch:"",square:"",flat:""})):S("",!0)]),_:1},8,["modelValue","type","hint","label","error","error-message"])]),_:1})]),_:1})),i.hideStripeInfo?S("",!0):(c(),f(E,{key:2},{default:t(()=>[e.$q.screen.gt.sm?(c(),f(h,{key:0,avatar:"",side:"",class:"relative-position"},{default:t(()=>[n(I,{name:"fab fa-stripe"}),n(I,{name:"o_verified_user",size:"xs",class:"absolute-bottom-right q-mr-sm q-mb-xs text-positive"})]),_:1})):S("",!0),n(h,null,{default:t(()=>[n(x,{class:"text-bold"},{default:t(()=>[g(d(e.t("embedding.buy_more_quota")),1)]),_:1}),n(x,{caption:"",lines:"2"},{default:t(()=>[g(d(e.t("embedding.tax_may_apply")),1)]),_:1})]),_:1}),e.isPaidUser?(c(),f(h,{key:1,side:"",class:"q-pa-none"},{default:t(()=>[n(V,{outline:"","icon-right":"open_in_new",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[n(O,null,{default:t(()=>[g(d(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["label"])]),_:1})):S("",!0)]),_:1})),n(oe,{class:"row q-pa-md q-py-none bg-transparent",flat:""},{default:t(()=>[(c(!0),z(ne,null,ie(e.productCards.filter(a=>!i.hideFreePlan||!a.isFree),(a,k)=>(c(),z("div",{key:k,class:U(["col-12 col-sm-6 q-pa-sm cursor-pointer",{"col-lg-4":!i.hideFreePlan}])},[ve((c(),f(oe,{bordered:"",flat:"",class:U(["full-width full-height column justify-between",!e.isInputApiKeyDisabled&&!e.currentPriceID&&!a.isFree?"q-hoverable bg-mixed-200":"cursor-not-allowed"]),square:"",style:Ge(a.isActive()?"cursor: wait !important;":""),onClick:a.handler},{default:t(()=>[o[6]||(o[6]=q("span",{class:"q-focus-helper"},null,-1)),n(le,{class:"column items-center non-selectable text-h2 q-pt-xl"},{default:t(()=>[n(ke,{label:a.tag(),outline:"",square:"",style:{"border-radius":"0"},size:"sm",class:U(["q-my-xl",{"silver-border":a.product_name==="1B tokens","gold-border":a.product_name==="11B tokens"}])},null,8,["label","class"]),q("span",{innerHTML:a.title(),"data-text":a.title(),class:U(["text-weight-bold",{"text-dim":a.product_name==="1M tokens","silver-foil":a.product_name==="1B tokens","golden-foil":a.product_name==="11B tokens"}])},null,10,Ma),q("div",Ba,[g(d(e.t("embedding.includes"))+" ",1),n(O,{"max-width":"300px"},{default:t(()=>[g(d(a.description()),1)]),_:2},1024)]),q("div",Da,[(c(!0),z(ne,null,ie(e.flatEnterprises,b=>(c(),f(I,{key:b.label,name:`img:${b.icon}`,size:"sm"},{default:t(()=>[n(O,null,{default:t(()=>[q("b",null,d(e.t(b.label)),1),o[5]||(o[5]=q("br",null,null,-1)),g(" "+d(e.t(b.caption)),1)]),_:2},1024)]),_:2},1032,["name"]))),128))])]),_:2},1024),n(le,{class:"column items-center non-selectable"},{default:t(()=>[n(pe,{dense:""},{default:t(()=>[(c(!0),z(ne,null,ie(e.tierFeatures[a.product_name],b=>(c(),f(E,{key:b},{default:t(()=>[n(h,null,{default:t(()=>[n(x,{caption:""},{default:t(()=>[a.product_name!=="1M tokens"?(c(),f(I,{key:0,name:"task_alt",class:U({"golden-foil":a.product_name==="11B tokens","silver-foil":a.product_name==="1B tokens"})},null,8,["class"])):S("",!0),g(" "+d(e.t(b)),1)]),_:2},1024),n(O,{"max-width":"300px"},{default:t(()=>[g(d(e.t(`${b}_description`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),n(le,{class:U({"bg-mixed-300":!a.isFree})},{default:t(()=>[n(E,null,{default:t(()=>[n(h,null,{default:t(()=>[n(x,{class:U({"text-bold":!a.isFree})},{default:t(()=>[g(d(a.priceLabel()),1)]),_:2},1032,["class"]),n(x,{caption:""},{default:t(()=>[g(d(a.priceDescription()),1)]),_:2},1024)]),_:2},1024),a.isFree?S("",!0):(c(),f(h,{key:0,side:""},{default:t(()=>[n(I,{name:"add_shopping_cart"})]),_:1}))]),_:2},1024)]),_:2},1032,["class"]),n(be,{showing:e.currentPriceID===a.price_id,label:e.t("embedding.wait_stripe"),"label-style":"font-size: 0.8em",size:"sm",class:"non-selectable lock-blur"},null,8,["showing","label"])]),_:2},1032,["class","style","onClick"])),[[Ye,!a.isFree&&!e.isInputApiKeyDisabled&&!e.currentPriceID]])],2))),128)),n(be,{showing:!e.isInputApiKeyValid,class:"lock-blur",label:e.t("embedding.right_api_key_to_charge"),size:"0"},null,8,["showing","label"])]),_:1}),n(ua,{label:e.t("rate_limit.understanding"),icon:e.$q.screen.gt.sm?"speed":void 0,"header-class":"text-bold",caption:e.t("rate_limit.understanding_description")},{default:t(()=>[n(e.RateLimitComponent,{"show-action-buttons":!1})]),_:1},8,["label","icon","caption"]),n(E,null,{default:t(()=>[e.$q.screen.gt.sm?(c(),f(h,{key:0,avatar:""},{default:t(()=>[n(I,{name:"currency_exchange"})]),_:1})):S("",!0),n(h,null,{default:t(()=>[n(x,{class:"text-bold"},{default:t(()=>[g(d(e.t("embedding.auto_recharge")),1)]),_:1}),n(x,{caption:"",lines:"2"},{default:t(()=>[g(d(e.isAutoCharge?e.t("embedding.auto_recharge_enable"):e.t("embedding.auto_recharge_description")),1)]),_:1})]),_:1}),n(h,{side:""},{default:t(()=>[n(Je,{modelValue:e.autoRecharge,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.autoRecharge=a),e.updateAutoRecharge],color:"primary",disable:e.isInputApiKeyDisabled,"checked-icon":"check","unchecked-icon":"close"},null,8,["modelValue","disable"])]),_:1}),n(h,{side:""},{default:t(()=>[n(Ie,{disable:!e.autoRecharge,modelValue:e.rechargeThreshold,"onUpdate:modelValue":o[3]||(o[3]=a=>e.rechargeThreshold=a),options:e.rechargeThresholdOptions,label:e.t("embedding.recharge_threshold"),style:{"min-width":"160px"},"option-label":a=>`≤ ${a.label} ${e.t("embedding.tokens")}`,onClick:o[4]||(o[4]=We(()=>{},["prevent"])),"emit-value":"","map-options":""},null,8,["disable","modelValue","label","option-label"])]),_:1})]),_:1})]),_:1})}const Xa=ue(Ca,[["render",Ua],["__scopeId","data-v-41741221"],["__file","PurchaseComponent.vue"]]),Za=Xe({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(l,{slots:o,emit:i}){const e=ta(),m=P(null);let v=0;const a=[];function k(s){const A=typeof s=="boolean"?s:l.noErrorFocus!==!0,D=++v,r=(_,p)=>{i(`validation${_===!0?"Success":"Error"}`,p)},y=_=>{const p=_.validate();return typeof p.then=="function"?p.then(B=>({valid:B,comp:_}),B=>({valid:!1,comp:_,err:B})):Promise.resolve({valid:p,comp:_})};return(l.greedy===!0?Promise.all(a.map(y)).then(_=>_.filter(p=>p.valid!==!0)):a.reduce((_,p)=>_.then(()=>y(p).then(B=>{if(B.valid===!1)return Promise.reject(B)})),Promise.resolve()).catch(_=>[_])).then(_=>{if(_===void 0||_.length===0)return D===v&&r(!0),!0;if(D===v){const{comp:p,err:B}=_[0];if(B!==void 0&&console.error(B),r(!1,p),A===!0){const Y=_.find(({comp:j})=>typeof j.focus=="function"&&na(j.$)===!1);Y!==void 0&&Y.comp.focus()}}return!1})}function b(){v++,a.forEach(s=>{typeof s.resetValidation=="function"&&s.resetValidation()})}function K(s){s!==void 0&&ge(s);const A=v+1;k().then(D=>{A===v&&D===!0&&(l.onSubmit!==void 0?i("submit",s):s!==void 0&&s.target!==void 0&&typeof s.target.submit=="function"&&s.target.submit())})}function C(s){s!==void 0&&ge(s),i("reset"),ia(()=>{b(),l.autofocus===!0&&l.noResetFocus!==!0&&T()})}function T(){la(()=>{if(m.value===null)return;const s=m.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||m.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||m.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(m.value.querySelectorAll("[tabindex]"),A=>A.tabIndex!==-1);s!=null&&s.focus({preventScroll:!0})})}oa(sa,{bindComponent(s){a.push(s)},unbindComponent(s){const A=a.indexOf(s);A!==-1&&a.splice(A,1)}});let w=!1;return Ze(()=>{w=!0}),$e(()=>{w===!0&&l.autofocus===!0&&T()}),we(()=>{l.autofocus===!0&&T()}),Object.assign(e.proxy,{validate:k,resetValidation:b,submit:K,reset:C,focus:T,getValidationComponents:()=>a}),()=>ea("form",{class:"q-form",ref:m,onSubmit:K,onReset:C},aa(o.default))}});export{Xa as P,Za as Q,Ka as R,ha as U,ga as u};
