import{bS as ya,c1 as Da,cU as Pa,cG as za,bX as Fa,dv as Qa,dw as va,c3 as Ya,bZ as Wa,cR as Xa,cK as Ja,bU as Za,cN as $a,j as me,a2 as _e,a3 as _,a4 as I,a5 as t,a6 as a,a7 as de,n as Re,a0 as fe,k as E,m as F,a9 as se,af as b,ag as m,aG as Ce,aq as te,aE as we,aR as pe,aa as ae,ah as ue,ai as he,bp as Ka,q as J,aF as qe,aH as Ne,w as Ze,W as Be,a8 as X,ac as Va,ab as U,aP as pa,aQ as na,am as be,ae as K,du as ua,ad as W,c9 as $e,ba as et,aO as _a,aj as Ae,u as Fe,ap as ce,V as La,b9 as Ca,e as at,_ as d,av as tt,s as nt,ax as ot,p as je,az as rt,J as st,b7 as lt,b2 as ea,aS as it,dx as oa,aA as ut,b8 as dt,aM as ct,aL as ha,ao as mt,an as _t,ch as gt}from"./index-CXa8tttx.js";import{Q as ft}from"./QBanner-2hxQw3UP.js";import{Q as yt}from"./QPage-bCglIZuP.js";import{K as Ie,E as ee,g as ba}from"./se-fo-DEpR3xxp.js";import{e as vt,a as aa,u as De,Q as Aa,S as ka,b as pt}from"./use-dialog-plugin-component-CdjwB9wk.js";import{k as ht,u as bt,c as kt,M as Oa,l as wt,L as Et,U as Tt,A as St,j as Rt,m as xt,E as It,a as Dt,R as Pt,C as Kt,b as Vt,I as Lt,T as Ct,S as wa,B as At,D as Ot,e as qt}from"./BrowserInfoDialog-BZu1fSaU.js";import{P as Mt,Q as Bt}from"./PurchaseTab-Co0rodCh.js";import{Q as re}from"./QTooltip-f4MhfJh3.js";import{c as Ee,d as Ke,e as Je,f as Ve,Q as qa,a as ra}from"./date-B7os37_S.js";import{u as Ue,A as Ut,e as jt,U as Nt,R as Ht}from"./finetune-CUom9kqV.js";import{b as ge,a as ga,Q as da}from"./QChip-CBUlMRdW.js";import{Q as Le,a as Me,b as Gt}from"./QLinearProgress-DNf8LxLK.js";import{C as He}from"./ClosePopup-DR-OFfwK.js";import{Q as O}from"./QItemLabel-CHXZdWZE.js";import{c as ca}from"./copy-to-clipboard-COXvBm8t.js";import{P as zt}from"./PurchaseDialog-B1sYsyhG.js";import{Q as ze}from"./QList-DnQY-PCh.js";import{t as Ea,c as Ft,L as Qt}from"./LoginDialog-Df2ZHf9-.js";import{a as Ta}from"./toInteger-DpqqEELa.js";import{a as Yt,c as Wt}from"./_setToArray-CXADfB_F.js";import{a as Xt,c as Jt,h as Zt,o as $t}from"./orderBy-DTVAD936.js";import{_ as en}from"./dynamic-import-helper-BheWnx7M.js";import{Q as Ma}from"./QForm-DQTPzevw.js";import{C as an}from"./ChatComponent-BMKsg-Ly.js";import{u as Sa}from"./useMetaTags-CtKzBXMp.js";import{u as tn}from"./useModels-6vO2-T4T.js";import{C as nn}from"./ContactSalesForm-Bv2TJbke.js";import{Q as Ra}from"./QBadge-BCL3_oNN.js";import{Q as on}from"./QSpinnerRings-DvxOt1Uz.js";import"./QMenu-ByQmC5CP.js";import"./position-engine-B7y8hGAv.js";import"./blogs-CIDssdkg.js";import"./VideoDialog-t5HVTckE.js";import"./TouchPan-CQ0jV-qV.js";import"./touch-BjYP5sR0.js";import"./QTab-BAs2Ht9_.js";import"./QTabs-BjXr5nlL.js";import"./QResizeObserver-BSm95Fs4.js";import"./QBtnDropdown-DZlwBBGG.js";import"./QExpansionItem-DLY25Z50.js";import"./use-fullscreen-F4TNJZza.js";import"./package-D9JPNs5w.js";import"./isSymbol-trOl_g_6.js";import"./QScrollObserver-Bo7_v-KB.js";import"./QSpinnerDots-CXnCazEr.js";var xa=ya?ya.isConcatSpreadable:void 0;function rn(c){return Da(c)||Pa(c)||!!(xa&&c&&c[xa])}function sn(c,o,s,e,g){var f=-1,n=c.length;for(s||(s=rn),g||(g=[]);++f<n;){var r=c[f];s(r)&&Xt(g,r)}return g}var sa=function(){return za.Date.now()},ln="Expected a function",un=Math.max,dn=Math.min;function cn(c,o,s){var e,g,f,n,r,l,p=0,x=!1,y=!1,D=!0;if(typeof c!="function")throw new TypeError(ln);o=Ta(o)||0,Fa(s)&&(x=!!s.leading,y="maxWait"in s,f=y?un(Ta(s.maxWait)||0,o):f,D="trailing"in s?!!s.trailing:D);function k(h){var T=e,V=g;return e=g=void 0,p=h,n=c.apply(V,T),n}function P(h){return p=h,r=setTimeout(w,o),x?k(h):n}function H(h){var T=h-l,V=h-p,i=o-T;return y?dn(i,f-V):i}function S(h){var T=h-l,V=h-p;return l===void 0||T>=o||T<0||y&&V>=f}function w(){var h=sa();if(S(h))return j(h);r=setTimeout(w,H(h))}function j(h){return r=void 0,D&&e?k(h):(e=g=void 0,n)}function C(){r!==void 0&&clearTimeout(r),p=0,e=l=g=r=void 0}function R(){return r===void 0?n:j(sa())}function A(){var h=sa(),T=S(h);if(e=arguments,g=this,l=h,T){if(r===void 0)return P(l);if(y)return clearTimeout(r),r=setTimeout(w,o),k(l)}return r===void 0&&(r=setTimeout(w,o)),n}return A.cancel=C,A.flush=R,A}var mn=200;function _n(c,o,s,e){var g=-1,f=vt,n=!0,r=c.length,l=[],p=o.length;if(!r)return l;o.length>=mn&&(f=Wt,n=!1,o=new Yt(o));e:for(;++g<r;){var x=c[g],y=x;if(x=x!==0?x:0,n&&y===y){for(var D=p;D--;)if(o[D]===y)continue e;l.push(x)}else f(o,y,e)||l.push(x)}return l}var gn=Qa(function(c,o){return va(c)?_n(c,sn(o,1,va)):[]}),fn="[object Map]",yn="[object Set]",vn=Object.prototype,pn=vn.hasOwnProperty;function hn(c){if(c==null)return!0;if(Ya(c)&&(Da(c)||typeof c=="string"||typeof c.splice=="function"||Wa(c)||Xa(c)||Pa(c)))return!c.length;var o=Jt(c);if(o==fn||o==yn)return!c.size;if(Ja(c))return!Zt(c).length;for(var s in c)if(pn.call(c,s))return!1;return!0}var bn="[object Number]";function kn(c){return typeof c=="number"||Za(c)&&$a(c)==bn}function wn(c){return kn(c)&&c!=+c}const En=me({__name:"ContainedPurchaseTab",setup(c,{expose:o}){o();const s={PurchaseTab:Mt};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function Tn(c,o,s,e,g,f){return _(),I(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.PurchaseTab)]),_:1})}const Sn=_e(En,[["render",Tn],["__file","ContainedPurchaseTab.vue"]]),Rn=me({__name:"AddKeyDialog",setup(c,{expose:o}){o();const s=Re(),{t:e}=fe({useScope:"global"}),{dialogRef:g,onDialogOK:f}=aa(),n=De(),r=Ue(),l=E(""),p=E(!1),x=E(!0),y=E(""),D=E(!0),k=E(["poc","test"]),P=E({readonly:!1}),H=F(()=>Object.entries(P.value).filter(([R,A])=>A).reduce((R,[A])=>R.concat(A),[])),C={$q:s,t:e,dialogRef:g,onDialogOK:f,embeddingStore:n,apiKeyStore:r,apiKey:l,isBusy:p,isKeyValid:x,errorMsg:y,isPwd:D,labels:k,roles:P,parsedRoles:H,onCreateKey:()=>{f({action:Ie.GENERATE,metadata:{labels:k,roles:H.value}})},onAdd:async()=>{if(l.value.trim()===""){x.value=!1,y.value=e("key_manager.invalid_key");return}try{p.value=!0,await n.getKeyInfo(l.value)?await r.addKey(l.value,{labels:k.value,roles:H.value})?(s.notify({message:e("key_manager.add_success",{_key:Ee(l.value)}),icon:"done"}),f()):(x.value=!1,y.value=e("key_manager.existing_key")):(x.value=!1,y.value=e("key_manager.invalid_key"))}catch(R){x.value=!1,y.value=R instanceof Error?R.message:String(R)}finally{p.value=!1}},onLabelsBlur:R=>{var T,V;const A=R.target,h=(V=(T=A.value)==null?void 0:T.trim())!=null?V:"";A&&h&&(A.value="",k.value.push(h))}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}});function xn(c,o,s,e,g,f){return _(),I(Ne,{ref:"dialogRef",persistent:""},{default:t(()=>[a(de,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(se,{class:"q-pb-none"},{default:t(()=>[b(m(e.t("key_manager.add_key_explain")),1)]),_:1}),a(se,{class:"flex"},{default:t(()=>[a(Ce,{modelValue:e.apiKey,"onUpdate:modelValue":o[1]||(o[1]=n=>e.apiKey=n),autofocus:"",filled:"",square:"",clearable:"",class:"full-width","input-class":"ellipsis",label:e.t("key_manager.add"),error:!e.isKeyValid,"error-message":e.errorMsg,type:e.isPwd?"password":"text",style:{width:"400px"}},{prepend:t(()=>[a(te,{name:"o_key"})]),append:t(()=>[a(te,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[0]||(o[0]=n=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","label","error","error-message","type"]),a(we,{modelValue:e.roles.readonly,"onUpdate:modelValue":o[2]||(o[2]=n=>e.roles.readonly=n),label:e.t("key_manager.readonly")},null,8,["modelValue","label"])]),_:1}),a(se,{class:"q-pb-none"},{default:t(()=>[b(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1}),a(se,{class:"flex"},{default:t(()=>[a(Le,{modelValue:e.labels,"onUpdate:modelValue":o[3]||(o[3]=n=>e.labels=n),label:e.t("key_manager.customized_tags"),square:"",filled:"",multiple:"","use-input":"","use-chips":"","dense-chips":"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",style:{width:"100%"},hint:e.t("key_manager.add_key_labels_input_explain"),onBlurCapture:pe(e.onLabelsBlur,["stop"])},{prepend:t(()=>[a(te,{name:"rate_review"})]),selected:t(()=>[(_(!0),ae(ue,null,he(e.labels,n=>(_(),I(ge,{key:n,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-400"},{default:t(()=>[b(m(n),1)]),_:2},1024))),128))]),_:1},8,["modelValue","label","hint"])]),_:1}),a(Ka,{align:"left"},{default:t(()=>[a(J,{padding:"md",flat:"",square:"",label:e.t("key_manager.generate_new_key"),disable:e.isBusy,icon:"casino",onClick:e.onCreateKey},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.generate_new_key_tooltip")),1)]),_:1})]),_:1},8,["label","disable"]),a(Aa),qe(a(J,{padding:"md",flat:"",square:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[He]]),a(J,{padding:"md",flat:"",square:"",color:"primary",label:e.t("key_manager.save"),loading:e.isBusy,onClick:e.onAdd},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},512)}const In=_e(Rn,[["render",xn],["__file","AddKeyDialog.vue"]]),Dn=me({__name:"UsageChart",props:{apiKey:{},usage:{},isPayByRequest:{type:Boolean}},setup(c,{expose:o}){const{t:s}=fe({useScope:"global"}),e=c,g=E(!1),f=E({left:"0px",top:"0px"}),n=E(""),r=E([]),l=E(e.isPayByRequest?"hour-requests":"hour-tokens"),p=F(()=>l.value.replace("-","_")),x=()=>{l.value==="hour-tokens"?l.value="day-tokens":l.value==="day-tokens"?l.value="hour-requests":l.value==="hour-requests"?l.value="day-requests":l.value="hour-tokens",y()},y=()=>{if(!e.usage||e.usage.length===0)return;const S=document.getElementById(`usage_${e.apiKey._id}`);if(!S)return;const w=S.getContext("2d");if(!w)return;const j=window.devicePixelRatio||1,C=S.clientWidth||300,R=S.clientHeight||100;S.width=C*j,S.height=R*j,w.scale(j,j);const A=new Date;let h=[],T={},V={};const i=l.value==="hour-tokens"||l.value==="hour-requests",u=l.value==="hour-requests"||l.value==="day-requests";i?(h=Array.from({length:168},(Y,Z)=>{const N=new Date(A);return N.setHours(N.getHours()-Z),Ke.formatDate(N,"YYYY-MM-DD HH")}).reverse(),e.usage.forEach(Y=>{if(Y.type==="consume"){const Z=Ke.formatDate(new Date(Y.created_at),"YYYY-MM-DD HH");T[Z]=(T[Z]||0)+Y.quantity,V[Z]=(V[Z]||0)+(Y.request_number||0)}})):(h=Array.from({length:7},(Y,Z)=>{const N=new Date(A);return N.setDate(N.getDate()-Z),Ke.formatDate(N,"YYYY-MM-DD")}).reverse(),e.usage.forEach(Y=>{if(Y.type==="consume"){const Z=Ke.formatDate(new Date(Y.created_at),"YYYY-MM-DD");T[Z]=(T[Z]||0)+Y.quantity,V[Z]=(V[Z]||0)+(Y.request_number||0)}}));const v=h.map(Y=>u?V[Y]||0:T[Y]||0);let L=Math.max(...v);L===0&&(L=1);const B=Math.max(1,C/v.length*.8),M=Math.max(0,C/v.length*.2);w.clearRect(0,0,C,R),r.value=[],v.forEach((Y,Z)=>{const N=Y/L*R*.9,Q=.1,le=Y>0?Math.max(N,Q):Q,ne=Z*(B+M)+M/2,G=R-le;r.value.push({x:ne,y:G,width:B,height:le,timeLabel:h[Z],usage:T[h[Z]]||0,requests:V[h[Z]]||0});const $=Y>0?.7:.3;u?w.fillStyle=`rgba(144, 238, 144, ${$})`:w.fillStyle=`rgba(129, 227, 238, ${$})`,w.fillRect(ne,G,B,le),w.strokeStyle=u?"#90EE90":"#81E3EE",w.lineWidth=Y>0?0:.5,w.strokeRect(ne,G,B,le)}),w.shadowColor="transparent",w.shadowBlur=0,D(w,v,C,R,B,M,u)},D=(S,w,j,C,R,A,h)=>{if(w.length<2)return;const T=w.map((ne,G)=>({value:ne,index:G})).filter(ne=>ne.value>0),V=T.length>=2?T:w.map((ne,G)=>({value:ne,index:G}));if(V.length<2)return;const i=V.length;let u=0,v=0,L=0,B=0;for(const ne of V){const G=ne.index,$=ne.value;u+=G,v+=$,L+=G*$,B+=G*G}const M=i*B-u*u;if(M===0)return;const Y=(i*L-u*v)/M,Z=(v-Y*u)/i;let N=Math.max(...w);N===0&&(N=1),S.beginPath();const Q=ne=>ne*(R+A)+A/2+R/2;let le=!0;w.forEach((ne,G)=>{const $=Q(G),ye=Y*G+Z,ie=C-ye/N*C*.9;le?(S.moveTo($,ie),le=!1):S.lineTo($,ie)}),S.strokeStyle=h?"rgba(144, 238, 144, 0.8)":"rgba(129, 227, 238, 0.8)",S.lineWidth=1,S.setLineDash([5,3]),S.stroke(),S.setLineDash([])},k=S=>{const w=document.getElementById(`usage_${e.apiKey._id}`);if(!w)return;const j=w.getBoundingClientRect(),C=S.clientX-j.left,R=S.clientY-j.top;let A=!1;for(const h of r.value)if(C>=h.x&&C<=h.x+h.width&&R>=h.y&&R<=h.y+h.height)try{let T="";if(l.value==="hour-tokens"||l.value==="hour-requests"){const L=h.timeLabel.split(" "),B=L[0],M=L[1]||"00",Y=new Date(`${B}T${M}:00:00`);T=Ke.formatDate(Y,"MMM D, h:mm A")}else{const L=new Date(h.timeLabel);T=Ke.formatDate(L,"MMM D, YYYY")}const i=l.value==="hour-requests"||l.value==="day-requests",u=i?h.requests:h.usage,v=i?"requests":"tokens";n.value=`${T}: ${u>0?u.toLocaleString():"0"} ${v}`,f.value={left:`${C+10}px`,top:`${R-30}px`},g.value=!0,A=!0;break}catch(T){console.error("Error formatting date:",T)}A||P()},P=()=>{g.value=!1};Ze(()=>e.usage,()=>{setTimeout(()=>{y()},50)},{deep:!0}),o({initChart:y}),Be(()=>{setTimeout(()=>{y()},100)});const H={t:s,props:e,showTooltip:g,tooltipStyle:f,tooltipText:n,barData:r,displayMode:l,displayModeName:p,toggleGroupingMode:x,initChart:y,drawTrendline:D,handleMouseMove:k,hideTooltip:P};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),Pn=["id"];function Kn(c,o,s,e,g,f){return _(),I(de,{flat:"",square:"",class:"bg-transparent relative-position",style:{"max-height":"100px",width:"100%",height:"100%",position:"relative"}},{default:t(()=>[a(ge,{class:"absolute-bottom-right bg-dark-transparent",label:e.t(`key_manager.${e.displayModeName}`),size:"xs",square:"",icon:"monitoring"},null,8,["label"]),X("canvas",{id:`usage_${s.apiKey._id}`,style:{width:"100%",height:"100%"},onMousemove:e.handleMouseMove,onMouseleave:e.hideTooltip,onClick:pe(e.toggleGroupingMode,["prevent"])},null,40,Pn),e.showTooltip?(_(),ae("div",{key:0,class:"tooltip",style:Va(e.tooltipStyle)},[X("div",null,m(e.tooltipText),1)],4)):U("",!0)]),_:1})}const Vn=_e(Dn,[["render",Kn],["__scopeId","data-v-56366749"],["__file","UsageChart.vue"]]),Ln=me({__name:"UsageReminderItem",props:pa({apiKey:{},isPaidKey:{type:Boolean}},{email:{type:String},emailModifiers:{},autoReminder:{type:Boolean},autoReminderModifiers:{},thresholds:{type:Array},thresholdsModifiers:{}}),emits:pa(["update"],["update:email","update:autoReminder","update:thresholds"]),setup(c,{expose:o,emit:s}){o();const e=c,g=s,f=na(c,"email"),n=na(c,"autoReminder"),r=na(c,"thresholds"),{t:l}=fe({useScope:"global"}),p=Re(),x=De(),y=Ue(),{isBusyState:D}=be(y),k=E([{label:"10M",value:1e7},{label:"100M",value:1e8},{label:"1B",value:1e9}]),P=E(k.value),H=E(!1),S=(i,u)=>{const v=Number(i);if(i.length>0&&!wn(v)&&r.value.length<3){if(v<0||v>1e12){H.value=!0;return}H.value=!1;const L={label:Je(v),value:v};k.value.some(B=>B.value===v)||k.value.push(L),u(L,"toggle")}},w=i=>{i===""?P.value=k.value:P.value=k.value.filter(u=>u.value===Number(i)||u.label===i).concat()},j=(i,u)=>{u(()=>w(i))},C=async i=>{var v,L;const u=i||f.value;if((v=r.value)!=null&&v.length&&u){D.value.add(e.apiKey);try{await x.setBalanceNotification(e.apiKey,{email:u,thresholds:((L=r.value)==null?void 0:L.slice(0,3))||[]})}finally{D.value.delete(e.apiKey)}g("update")}},R=async i=>{!i||!Ea(i)||i===f.value||C(i)},A=cn(()=>{C()},1e3),h=i=>{var v,L,B;const u=(v=r.value)==null?void 0:v.indexOf(i);u===void 0||u<0||((L=r.value)==null||L.splice(u,1),(B=r.value)!=null&&B.length&&C())},T=i=>{var u;!i&&((u=r.value)!=null&&u.length)&&f.value&&p.dialog({title:l("key_manager.auto_reminder_cancel_title"),message:l("key_manager.auto_reminder_cancel_message"),cancel:!0}).onOk(async()=>{n.value=i,D.value.add(e.apiKey);try{await x.cancelBalanceNotification(e.apiKey)?r.value=[]:n.value=!i}finally{D.value.delete(e.apiKey)}g("update")}).onCancel(()=>{n.value=!0})};Be(()=>{const i=gn(r.value,k.value.map(u=>u.value));i.length&&(k.value.push(...i.map(u=>({label:Je(u),value:u}))),k.value=$t(k.value,"value","asc"))});const V={props:e,emit:g,email:f,autoReminder:n,thresholds:r,t:l,$q:p,embeddingStore:x,apiKeyStore:y,isBusyState:D,allOptions:k,filterOptions:P,hasError:H,createValue:S,updateFilterOptions:w,filterFn:j,saveConfig:C,saveEmail:R,saveThresholds:A,removeThreshold:h,updateAutoReminder:T,get QPopupEdit(){return ht},get QSelect(){return Le},get testEmail(){return Ea},get formatNumberShort(){return Je}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Cn={class:"ellipsis"};function An(c,o,s,e,g,f){return _(),I(W,{clickable:"","click.stop":""},{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"alarm_smart_wake"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("key_manager.auto_reminder"))+" ",1),a(te,{name:s.isPaidKey?"verified":"lock"},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(O,{caption:"",lines:"2"},{default:t(()=>[b(m(e.t("key_manager.auto_reminder_description"))+" ",1),a(re,{"max-width":"40rem"},{default:t(()=>[b(m(e.t("key_manager.auto_reminder_description")),1)]),_:1})]),_:1}),e.autoReminder?(_(),I(O,{key:0,class:"cursor-pointer"},{default:t(()=>[b(m(e.t("key_manager.auto_reminder_email"))+": ",1),X("b",null,m(e.email),1),s.isPaidKey&&e.autoReminder?(_(),I(te,{key:0,name:"edit",size:"20px",class:"on-right",color:"primary"})):U("",!0),a(e.QPopupEdit,{modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=n=>e.email=n),buttons:"","label-set":e.t("key_manager.save"),"label-cancel":e.t("key_manager.cancel"),validate:e.testEmail,disable:!e.autoReminder,onSave:e.saveEmail},{default:t(n=>[a(Ce,{modelValue:n.value,"onUpdate:modelValue":r=>n.value=r,dense:"",autofocus:"",rules:[r=>e.testEmail(r)||e.t("key_manager.invalid_email")],label:e.t("key_manager.auto_reminder_email"),onKeyup:ua(pe(n.set,["stop"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","label","onKeyup"])]),_:1},8,["modelValue","label-set","label-cancel","validate","disable"])]),_:1})):U("",!0)]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.autoReminder,"onUpdate:modelValue":[o[1]||(o[1]=n=>e.autoReminder=n),e.updateAutoReminder],color:"primary",disable:!s.isPaidKey,"checked-icon":"check"},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.auto_reminder_toggle")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),_:1}),a(K,{side:""},{default:t(()=>[a(e.QSelect,{square:"",outline:"","use-input":"","use-chips":"",multiple:"","emit-value":"","map-options":"","new-value-mode":"add",style:{"max-width":"160px"},modelValue:e.thresholds,"onUpdate:modelValue":[o[2]||(o[2]=n=>e.thresholds=n),e.saveThresholds],"max-values":3,error:e.hasError,"error-message":e.t("key_manager.auto_reminder_threshold_error"),label:e.t("key_manager.auto_reminder_threshold"),disable:!e.autoReminder,options:e.filterOptions,onNewValue:e.createValue,onFilter:e.filterFn,onKeyup:o[3]||(o[3]=ua(pe(()=>{},["stop"]),["enter"]))},{selected:t(()=>[(_(!0),ae(ue,null,he(e.thresholds,n=>(_(),I(ge,{dense:"",key:n,square:"",removable:"","text-color":"primary",class:"bg-mixed-300",onRemove:r=>e.removeThreshold(n)},{default:t(()=>{var r;return[X("div",Cn,m(`< ${((r=e.allOptions.find(l=>l.value===n))==null?void 0:r.label)||e.formatNumberShort(n)} ${e.t("embedding.tokens")}`),1),a(re,null,{default:t(()=>[b(m(n),1)]),_:2},1024)]}),_:2},1032,["onRemove"]))),128))]),option:t(n=>[a(W,$e(n.itemProps,{clickable:""}),{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(`< ${n.opt.label} ${e.t("embedding.tokens")}`)+" ",1),a(re,null,{default:t(()=>[b(m(n.opt.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error","error-message","label","disable","options","onUpdate:modelValue"])]),_:1})]),_:1})}const On=_e(Ln,[["render",An],["__file","UsageReminderItem.vue"]]),qn=me({__name:"RevokeKeyDialog",props:{apiKey:{},isPremiumKey:{type:Boolean}},setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global"}),{dialogRef:e,onDialogOK:g}=aa(),f=Ue(),{keys:n,keysInfoCache:r}=be(f),l=E(""),p=E(!1),x=E(""),D={t:s,dialogRef:e,onDialogOK:g,apiKeyStore:f,keys:n,keysInfoCache:r,confirmKey:l,withTransfer:p,transferKey:x,onConfirm:async()=>{p.value&&x.value?g(x.value):g()},get formatKey(){return Ee}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}});function Mn(c,o,s,e,g,f){return _(),I(Ne,{ref:"dialogRef"},{default:t(()=>[a(de,{flat:"",square:"",class:"bg-mixed-200 q-pa-md"},{default:t(()=>[a(se,{class:"text-h6"},{default:t(()=>[b(m(e.t("key_manager.revoke")),1)]),_:1}),a(se,null,{default:t(()=>[X("div",null,m(e.t("key_manager.revoke_message")),1),a(Ce,{autofocus:"",filled:"",square:"",class:"q-mt-md",modelValue:e.confirmKey,"onUpdate:modelValue":o[0]||(o[0]=n=>e.confirmKey=n),rules:[n=>n===s.apiKey||e.t("key_manager.revoke_error")],label:e.t("key_manager.revoke_label")},{prepend:t(()=>[a(te,{name:"o_key"})]),_:1},8,["modelValue","rules","label"]),s.isPremiumKey?(_(),I(et,{key:0,modelValue:e.withTransfer,"onUpdate:modelValue":o[1]||(o[1]=n=>e.withTransfer=n),label:e.t("key_manager.transfer_before_revoke")},null,8,["modelValue","label"])):U("",!0),s.isPremiumKey&&e.withTransfer?(_(),I(Le,{key:1,square:"",filled:"","emit-value":"",clearable:"",modelValue:e.transferKey,"onUpdate:modelValue":o[2]||(o[2]=n=>e.transferKey=n),options:e.keys.filter(n=>n.key!==s.apiKey&&e.keysInfoCache[n.key].user_id),"option-value":n=>n.key,label:e.t("key_manager.transfer_label")},_a({"no-option":t(()=>[a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(n=>[a(W,$e(n.itemProps,{clickable:""}),{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ae({"golden-foil":e.apiKeyStore.isPremiumPaidKey(n.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(n.opt.key)})},null,8,["class"])]),_:2},1024),a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[X("code",null,m(e.formatKey(n.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(ge,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label"])):U("",!0)]),_:1}),a(Ka,{align:"right"},{default:t(()=>[qe(a(J,{flat:"",label:e.t("key_manager.cancel")},null,8,["label"]),[[He]]),a(J,{flat:"",label:e.t("key_manager.ok"),color:"primary",disable:e.confirmKey!==s.apiKey,onClick:e.onConfirm},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},512)}const Bn=_e(qn,[["render",Mn],["__file","RevokeKeyDialog.vue"]]),Un=me({__name:"ReadonlyKeyItem",props:{apiKey:{},metadata:{},disable:{type:Boolean}},emits:["update"],setup(c,{expose:o,emit:s}){o();const e=c,g=s,{t:f}=fe({useScope:"global"}),n=Re(),r=Ue(),l=E(!1),p=async y=>{var k;const D=new Set((k=e.metadata)==null?void 0:k.roles);y?D.add("readonly"):D.delete("readonly");try{await r.updateKey(e.apiKey,{...e.metadata||{},roles:Array.from(D)}),g("update")}catch{n.notify({message:f("key_manager.update_key_failed"),icon:"error",color:"negative"}),l.value=!y}};Be(()=>{var y,D,k;l.value=(k=(D=(y=e.metadata)==null?void 0:y.roles)==null?void 0:D.includes("readonly"))!=null?k:!1});const x={props:e,emit:g,t:f,$q:n,apiKeyStore:r,readonlyKey:l,toggleReadonly:p};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}});function jn(c,o,s,e,g,f){return _(),I(W,{tag:"label",disable:s.disable,onClick:o[1]||(o[1]=pe(()=>{},["stop"]))},{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"vpn_key_alert"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("key_manager.readonly_label")),1)]),_:1}),a(O,{caption:"",lines:"2"},{default:t(()=>[b(m(e.t("key_manager.readonly_explain"))+" ",1),a(re,{"max-width":"40rem"},{default:t(()=>[b(m(e.t("key_manager.readonly_explain")),1)]),_:1})]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.readonlyKey,"onUpdate:modelValue":[o[0]||(o[0]=n=>e.readonlyKey=n),e.toggleReadonly]},null,8,["modelValue"])]),_:1})]),_:1},8,["disable"])}const Nn=_e(Un,[["render",jn],["__file","ReadonlyKeyItem.vue"]]),Hn=me({__name:"SettingsDialog",props:{apiKey:{}},setup(c,{expose:o}){o();const s=c,e=Re(),{t:g}=fe({useScope:"global"}),{dialogRef:f,onDialogOK:n}=aa(),r=Fe(),{user:l}=be(r),p=Ue(),{isBusyState:x,keys:y,primaryKey:D,keysInfoCache:k}=be(p),P=E(),H=E(!1),S=E(""),w=E([]),j=E(!0),C=E(1e6),R=E(""),A=F(()=>{var G;return((G=y.value.find($=>$.key===s.apiKey))==null?void 0:G.metadata)||{}}),h=F(()=>!p.isFreeKey(s.apiKey)),T=F(()=>p.isPremiumPaidKey(s.apiKey)),V=F(()=>{var G,$;return h.value&&!!(($=(G=P.value)==null?void 0:G.metadata)!=null&&$.auto_recharge)}),i=F(()=>{var G;return!!((G=P==null?void 0:P.value)!=null&&G.user_id)}),u=F(()=>!i.value||x.value.has(s.apiKey)),v=F(()=>{var G,$,ye;return(ye=($=(G=A.value)==null?void 0:G.roles)==null?void 0:$.includes("readonly"))!=null?ye:!1}),L=F(()=>{var G,$;return(($=(G=P.value)==null?void 0:G.metadata)==null?void 0:$.disable_self_purchase)||!1}),B=async()=>{await p.getKeyInfo(s.apiKey,{excludeUsage:!0}),M()},M=async()=>{var G,$,ye,ie,ke,Pe,Te,Oe,q,z,oe,ve;P.value=k.value[s.apiKey],H.value=!hn(($=(G=P.value)==null?void 0:G.wallet)==null?void 0:$.metadata),S.value=((ke=(ie=(ye=P.value)==null?void 0:ye.wallet)==null?void 0:ie.metadata)==null?void 0:ke.notification_email)||l.value.email||"",w.value=((Oe=(Te=(Pe=P.value)==null?void 0:Pe.wallet)==null?void 0:Te.metadata)==null?void 0:Oe.notification_thresholds)||[],j.value=((z=(q=P.value)==null?void 0:q.metadata)==null?void 0:z.auto_recharge)||!1,C.value=((ve=(oe=P.value)==null?void 0:oe.metadata)==null?void 0:ve.threshold)||1e6};M();const Y=()=>{if(D.value===s.apiKey&&y.value.length===1){e.notify({message:g("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({title:g("key_manager.remove_title"),message:g("key_manager.remove_message"),cancel:!0,persistent:!0}).onOk(async()=>{var G;await p.removeKey(s.apiKey),e.notify({message:g("key_manager.remove_success",{_key:Ee(s.apiKey)}),icon:"done"}),D.value===s.apiKey&&p.setPrimaryKey(y.value[0].key),(G=f.value)==null||G.hide()})},Z=()=>{if(D.value===s.apiKey&&y.value.length===1){e.notify({message:g("key_manager.remove_primary_key"),color:"negative",icon:"error"});return}e.dialog({component:Bn,componentProps:{apiKey:s.apiKey,isPremiumKey:T.value}}).onOk(G=>{n({action:Ie.REVOKE,key:s.apiKey,transferTo:G})})},N=G=>{var $;G&&e.dialog({title:g("key_manager.transfer_title"),message:`<div>
    ${g("key_manager.transfer_message",{_tokens:"<b>"+Ve((($=P.value)==null?void 0:$.wallet.regular_balance)||0)+"</b>",_source:'<code class="bg-mixed-300">'+Ee(s.apiKey)+"</code>",_target:'<code class="bg-mixed-300">'+Ee(R.value)+" </code>"})}
      <div>`,html:!0,cancel:!0,persistent:!0}).onOk(async()=>{n({action:Ie.TRANSFER,source:s.apiKey,target:R.value})})},Q=E(!1),le=()=>{!s.apiKey||v.value||Q.value||(ca(s.apiKey).then(()=>{e.notify({message:g("copy_to_clipboard_success"),icon:"done"}),Q.value=!0,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href})}),setTimeout(()=>{Q.value=!1},1800))};Ze(()=>k.value[s.apiKey],()=>{M()});const ne={props:s,$q:e,t:g,dialogRef:f,onDialogOK:n,userStore:r,user:l,apiKeyStore:p,isBusyState:x,keys:y,primaryKey:D,keysInfoCache:k,apiKeyInfo:P,autoReminder:H,email:S,reminderThresholds:w,autoRecharge:j,rechargeThreshold:C,transferKey:R,metadata:A,isPaidKey:h,isPremiumPaidKey:T,isAutoCharge:V,isInputApiKeyValid:i,isInputApiKeyDisabled:u,readonlyKey:v,isSelfPurchaseDisabled:L,getKeyInfo:B,init:M,onRemove:Y,onRevoke:Z,onTransfer:N,isApiKeyCopyDone:Q,copyApiKey:le,get formatKey(){return Ee},AutoRechargeItem:Ut,UsageReminderItem:On,ReadonlyKeyItem:Nn};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}});function Gn(c,o,s,e,g,f){return _(),I(Ne,{ref:"dialogRef",onBeforeShow:e.getKeyInfo},{default:t(()=>[a(de,{class:"bg-mixed-200",flat:"",square:"",style:{width:"900px","max-width":"80vw"}},{default:t(()=>[a(se,null,{default:t(()=>[a(W,null,{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"settings"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("key_manager.settings")),1)]),_:1}),a(O,{caption:"",style:{"font-family":"monospace"},lines:"1",class:"text-primary cursor-pointer",onClick:e.copyApiKey},{default:t(()=>[a(ge,{icon:"o_key",label:e.formatKey(e.props.apiKey),square:"",size:"sm",class:"bg-mixed-300",ripple:!e.readonlyKey},null,8,["label","ripple"])]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[qe(a(J,{icon:"close",flat:"",round:"",dense:""},null,512),[[He]])]),_:1})]),_:1})]),_:1}),a(ce),e.isBusyState.has(s.apiKey)?(_(),I(Me,{key:0,indeterminate:"",size:"1px"})):U("",!0),a(se,null,{default:t(()=>[a(ze,{class:"q-gutter-y-sm"},{default:t(()=>[!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),I(e.AutoRechargeItem,{key:0,"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPaidKey,"is-auto-charge":e.isAutoCharge,mode:"dashboard","auto-recharge":e.autoRecharge,"onUpdate:autoRecharge":o[0]||(o[0]=n=>e.autoRecharge=n),"recharge-threshold":e.rechargeThreshold,"onUpdate:rechargeThreshold":o[1]||(o[1]=n=>e.rechargeThreshold=n),disable:e.isInputApiKeyDisabled,"navigate-to-purchase":!0,onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","is-auto-charge","auto-recharge","recharge-threshold","disable"])):U("",!0),a(e.UsageReminderItem,{"api-key":s.apiKey,"api-key-info":e.apiKeyInfo,"is-paid-key":e.isPremiumPaidKey,"auto-reminder":e.autoReminder,"onUpdate:autoReminder":o[2]||(o[2]=n=>e.autoReminder=n),email:e.email,"onUpdate:email":o[3]||(o[3]=n=>e.email=n),thresholds:e.reminderThresholds,"onUpdate:thresholds":o[4]||(o[4]=n=>e.reminderThresholds=n),onUpdate:e.getKeyInfo},null,8,["api-key","api-key-info","is-paid-key","auto-reminder","email","thresholds"]),a(e.ReadonlyKeyItem,{disable:e.isInputApiKeyDisabled,"api-key":s.apiKey,metadata:e.metadata,onUpdate:e.getKeyInfo},null,8,["disable","api-key","metadata"]),!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),I(W,{key:1,tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"sync"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("key_manager.transfer_title"))+" ",1),a(te,{name:e.isPremiumPaidKey?"verified":"lock"},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.advanced_feature")),1)]),_:1})]),_:1},8,["name"])]),_:1}),a(O,{caption:"",lines:"2"},{default:t(()=>[b(m(e.t("key_manager.transfer_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(Le,{square:"",outline:"","emit-value":"",clearable:"",style:{width:"220px"},modelValue:e.transferKey,"onUpdate:modelValue":[o[5]||(o[5]=n=>e.transferKey=n),e.onTransfer],options:e.keys.filter(n=>{var r;return n.key!==s.apiKey&&((r=e.keysInfoCache[n.key])==null?void 0:r.user_id)}),"option-value":n=>n.key,label:e.t("key_manager.transfer_label"),disable:!e.isPremiumPaidKey},_a({"no-option":t(()=>[a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("key_manager.no_transferable_keys")),1)]),_:1})]),_:1})]),_:1})]),option:t(n=>[a(W,$e(n.itemProps,{clickable:""}),{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ae({"golden-foil":e.apiKeyStore.isPremiumPaidKey(n.opt.key),"silver-foil":e.apiKeyStore.isPaidKey(n.opt.key)})},null,8,["class"])]),_:2},1024),a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[X("code",null,m(e.formatKey(n.opt.key)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.transferKey?{name:"selected",fn:t(()=>[a(ge,{label:e.formatKey(e.transferKey),dense:"","text-color":"primary",class:"bg-mixed-300"},null,8,["label"])]),key:"0"}:void 0]),1032,["modelValue","options","option-value","label","disable"])]),_:1})]),_:1})):U("",!0),a(W,{tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"delete",color:"negative"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold text-negative"},{default:t(()=>[b(m(e.t("key_manager.remove_title")),1)]),_:1}),a(O,{caption:"",lines:"2"},{default:t(()=>[b(m(e.t("key_manager.remove_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(J,{flat:"",square:"",color:"negative",label:e.t("key_manager.remove"),onClick:e.onRemove,disable:e.isBusyState.has(s.apiKey)},null,8,["label","disable"])]),_:1})]),_:1}),!e.readonlyKey&&!e.isSelfPurchaseDisabled?(_(),I(W,{key:2,tag:"label"},{default:t(()=>[e.$q.screen.gt.sm?(_(),I(K,{key:0,avatar:""},{default:t(()=>[a(te,{name:"delete_forever",color:"negative"})]),_:1})):U("",!0),a(K,null,{default:t(()=>[a(O,{class:"text-bold text-negative"},{default:t(()=>[b(m(e.t("key_manager.revoke_title")),1)]),_:1}),a(O,{caption:"",lines:"2"},{default:t(()=>[b(m(e.t("key_manager.revoke_explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(J,{flat:"",square:"",color:"negative",label:e.t("key_manager.revoke"),onClick:e.onRevoke,disable:e.isBusyState.has(s.apiKey)||!e.isInputApiKeyValid},null,8,["label","disable"])]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1},512)}const zn=_e(Hn,[["render",Gn],["__file","SettingsDialog.vue"]]),Fn=me({__name:"TicketsDialog",props:{apiKey:{}},setup(c,{expose:o}){o();const s=c,{t:e}=fe({useScope:"global"}),{dialogRef:g}=aa(),f=E(!1),n=E(null),r=E([]),l=(R,A)=>A==="CNY"?e("key_manager.tickets.currency_cny_format",{value:Ve(R)}):A==="USD"?e("key_manager.tickets.currency_usd_format",{value:Ve(R)}):Ve(R),p=E([{name:"clientName",label:e("key_manager.tickets.client_name"),field:"clientName",sortable:!0,align:"left"},{name:"openTime",label:e("key_manager.tickets.open_time"),field:"openTime",sortable:!0,align:"left"},{name:"productName",label:e("key_manager.tickets.product_name"),field:"productName",sortable:!0,align:"left"},{name:"pricingStrategy",label:e("key_manager.tickets.pricing_strategy"),field:"pricingStrategy",sortable:!0,align:"right"},{name:"unitPrice",label:e("key_manager.tickets.unit_price"),field:"unitPrice",sortable:!0,align:"right",format:(R,A)=>l(R,A.currency)},{name:"quantity",label:e("key_manager.tickets.quantity"),field:"quantity",sortable:!0,align:"right",format:R=>Ve(R)},{name:"totalAmount",label:e("key_manager.tickets.total_amount"),field:"totalAmount",sortable:!0,align:"right",format:(R,A)=>l(R,A.currency)},{name:"paymentStatus",label:e("key_manager.tickets.payment_status"),field:"paymentStatus",sortable:!0,align:"center"},{name:"paymentTime",label:e("key_manager.tickets.payment_time"),field:"paymentTime",sortable:!0,align:"left",format:R=>R?Ke.formatDate(R,"YYYY-MM-DD"):""},{name:"invoiceStatus",label:e("key_manager.tickets.invoice_status"),field:"invoiceStatus",sortable:!0,align:"center"}]),x=()=>{var R;(R=n.value)==null||R.requestServerInteraction()},y=()=>{r.value=[]},D=async()=>{f.value=!0;try{const A=await(await fetch("https://po-tickets-viewer.jina.ai/",{headers:{Authorization:`Bearer ${s.apiKey}`}})).json();r.value=A.tickets}catch(R){console.error("Failed to fetch tickets:",R)}finally{f.value=!1}},k=R=>{switch(R){case"issued":return"positive";case"processing":return"info";case"pending":return"warning";case"failed":return"negative";default:return"grey"}},P=R=>R.paymentStatus==="paid"&&R.invoiceStatus==="pending",H=R=>{console.log("View ticket details:",R)},S=R=>{console.log("Request invoice for:",R)};function w(R,A){let h=A!==void 0?A(R):R;return h=h==null?"":String(h),h=h.split('"').join('""'),`"${h}"`}const C={props:s,t:e,dialogRef:g,isLoading:f,ticketsTableRef:n,ticketRows:r,formatCurrencyValue:l,ticketColumns:p,onTicketsDialogShow:x,onTicketsDialogHide:y,getTicketsHistory:D,getInvoiceStatusColor:k,canRequestInvoice:P,viewTicketDetails:H,requestInvoice:S,wrapCsvValue:w,exportTable:()=>{const R=[p.value.map(h=>w(h.label))].concat(r.value.map(h=>p.value.map(T=>{const V=h[T.field],i=T.format;return w(V,i?u=>i(u,h):void 0)}).join(","))).join(`\r
`);jt("tickets-history.csv",R,"text/csv")!==!0&&console.error("Browser denied file download...")},get QTable(){return qa}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),Qn={class:"row q-gutter-x-sm"};function Yn(c,o,s,e,g,f){return _(),I(Ne,{ref:"dialogRef",onShow:e.onTicketsDialogShow,onHide:e.onTicketsDialogHide},{default:t(()=>[a(de,{style:{"max-width":"90vw"}},{default:t(()=>[a(W,{class:"q-pa-md"},{default:t(()=>[a(K,{avatar:""},{default:t(()=>[a(te,{name:"receipt_long"})]),_:1}),a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("key_manager.tickets.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("key_manager.tickets.explain")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[X("div",Qn,[a(J,{flat:"",square:"",stretch:"",icon:"download",label:e.t("key_manager.tickets.export_csv"),onClick:e.exportTable},null,8,["label"]),qe(a(J,{icon:"close",flat:"",round:""},null,512),[[He]])])]),_:1})]),_:1}),a(ce),a(e.QTable,{ref:"ticketsTableRef",flat:"",class:"bg-transparent","row-key":"orderId",rows:e.ticketRows,columns:e.ticketColumns,loading:e.isLoading,onRequest:e.getTicketsHistory,pagination:{rowsPerPage:10}},{"body-cell-paymentStatus":t(n=>[a(ra,{key:"paymentStatus",props:n},{default:t(()=>[a(ge,{color:n.row.paymentStatus==="paid"?"positive":"warning",square:"",outline:"",style:{"border-radius":"0"},size:"sm"},{default:t(()=>[b(m(e.t(`key_manager.tickets.payment_status_${n.row.paymentStatus}`)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-invoiceStatus":t(n=>[a(ra,{key:"invoiceStatus",props:n},{default:t(()=>[a(ge,{color:e.getInvoiceStatusColor(n.row.invoiceStatus),square:"",outline:"",style:{"border-radius":"0"},size:"sm"},{default:t(()=>[b(m(e.t(`key_manager.tickets.invoice_status_${n.row.invoiceStatus}`)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":t(n=>[a(ra,{key:"actions",props:n},{default:t(()=>[a(ga,{flat:""},{default:t(()=>[a(J,{flat:"",round:"",size:"sm",icon:"visibility",onClick:r=>e.viewTicketDetails(n.row)},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.tickets.view_details")),1)]),_:1})]),_:2},1032,["onClick"]),a(J,{flat:"",round:"",size:"sm",icon:"receipt",disable:!e.canRequestInvoice(n.row),onClick:r=>e.requestInvoice(n.row)},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.tickets.request_invoice")),1)]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1},512)}const Wn=_e(Fn,[["render",Yn],["__scopeId","data-v-9b9857e7"],["__file","TicketsDialog.vue"]]),Xn=me({__name:"KeyItem",props:{apiKey:{}},emits:["execute"],setup(c,{expose:o,emit:s}){var Te,Oe;o();const e=c,g=s,{t:f}=fe({useScope:"global"}),n=Re(),r=Ue(),l=De(),{keysInfoCache:p,isBusyState:x}=be(r),y=Fe(),{user:D}=be(y),k=E(""),P=F(()=>{var q,z,oe;return(oe=(z=(q=e.apiKey.metadata)==null?void 0:q.roles)==null?void 0:z.includes("readonly"))!=null?oe:!1}),H=F({get:()=>e.apiKey.isPrimary?e.apiKey.key:"",set:async q=>{var z;if(q){if(await r.getKeyInfo(e.apiKey.key,{excludeUsage:!0}),!((z=p.value[e.apiKey.key])!=null&&z.user_id)){n.notify({message:f("key_manager.invalid_key"),icon:"warning"});return}await r.setPrimaryKey(e.apiKey.key),l.apiKey=e.apiKey.key,n.notify({caption:f("key_manager.primary_key_set_caption"),message:f("key_manager.primary_key_set",{_apiKey:Ee(e.apiKey.key)}),icon:"done"})}}}),S=E(!0),w=E(((Oe=(Te=e.apiKey.metadata)==null?void 0:Te.labels)!=null?Oe:[]).slice()),j=E(null),C=F(()=>{var q,z;return w.value.join("").trim()!==((z=(q=e.apiKey.metadata)==null?void 0:q.labels)!=null?z:[]).join("").trim()}),R=()=>{var q,z;w.value=((z=(q=e.apiKey.metadata)==null?void 0:q.labels)!=null?z:[]).slice()},A=async()=>{var q;if(S.value)S.value=!1,await La(),(q=j.value)==null||q.focus();else if(C.value)try{await r.updateKey(e.apiKey.key,{...e.apiKey.metadata,labels:w.value}),n.notify({message:f("key_manager.labels_updated"),icon:"done"}),S.value=!0}catch(z){n.notify({message:z instanceof Error?z.message:String(z),icon:"warning"}),R()}else S.value=!0},h=F(()=>p.value[e.apiKey.key]),T=F(()=>{var q;return(q=h.value)==null?void 0:q.usageStats}),V=F(()=>r.isPremiumPaidKey(e.apiKey.key)),i=F(()=>r.isPaidKey(e.apiKey.key)),u=F(()=>r.isFreeKey(e.apiKey.key)),v=F(()=>{var q;return!((q=h.value)!=null&&q.user_id)}),L=F(()=>{var q,z,oe;return(oe=(z=(q=h.value)==null?void 0:q.wallet)==null?void 0:z.metadata)==null?void 0:oe.notification_email}),B=F(()=>{var q,z,oe;return(oe=(z=(q=h.value)==null?void 0:q.wallet)==null?void 0:z.metadata)==null?void 0:oe.notification_thresholds}),M=F(()=>{var q,z,oe;return((oe=(z=(q=h.value)==null?void 0:q.metadata)==null?void 0:z.num_keys)!=null?oe:1)-1}),Y=F(()=>{var q,z;return(z=(q=h.value)==null?void 0:q.metadata)==null?void 0:z.pay_by_requests}),Z=F(()=>{var xe,Se,Qe;const q=h.value;let z=(Se=(xe=q==null?void 0:q.wallet)==null?void 0:xe.total_balance)!=null?Se:0,oe="";const ve={usage:q==null?void 0:q.usage,totalBalance:z,reduceBy:"quantity",depletedKey:"key_manager.tokens_depleted",noRecentUsageKey:"key_manager.no_recent_usage",expiryEstimationKey:"key_manager.token_expiry_estimate"};return Y.value?(z=(Qe=T.value)==null?void 0:Qe.requestBalance,oe=f("key_manager.left_requests",{_num:Ve(z)}),ve.reduceBy="request_number",ve.totalBalance=z,ve.depletedKey="key_manager.requests_depleted"):oe=f("key_manager.left_tokens",{_num:Ve(z)}),{totalBalance:z,remainingUsage:oe,expiryInfo:ie(ve)}}),N=()=>{P.value||n.dialog({component:zt,componentProps:{purchaseKey:e.apiKey.key}})},Q=q=>{!q||k.value||(ca(q).then(()=>{n.notify({message:f("copy_to_clipboard_success"),icon:"done"}),k.value=q,gtag==null||gtag("event","embedding_copy_api_key",{location:document.location.href,subLocation:"sefo-api-key-manager"})}),setTimeout(()=>{k.value=""},1800))},le=q=>{n.dialog({component:Nt,componentProps:{apiKey:q}})},ne=q=>{n.dialog({component:zn,componentProps:{apiKey:q,metadata:e.apiKey.metadata}}).onOk(z=>{g("execute",z.action,z)})},G=E(!1),$=async()=>{G.value||n.dialog({message:f("key_manager.share_key_confirm_message"),title:f("key_manager.share_key_confirm_title"),ok:{flat:!0,icon:"content_copy",padding:"md",square:!0,label:f("key_manager.copy_share_link"),textColor:"primary"}}).onOk(async()=>{var ve,xe;G.value=!0;const q=window.location.origin+"/api-dashboard",z=e.apiKey.key,oe=D.value.displayName||((xe=(ve=D.value.email)==null?void 0:ve.split("@"))==null?void 0:xe[0])||"";try{const Se=await Ft(q,oe,z,{readonly:P.value});ca(Se).then(()=>{n.notify({message:f("key_manager.share_link_copied"),icon:"done"})})}catch(Se){console.error(Se),n.notify({message:Se instanceof Error?Se.message:String(Se),icon:"warning"})}finally{G.value=!1}})},ye=q=>{var ve,xe;const z=q.target;if(!z)return;const oe=(xe=(ve=z.value)==null?void 0:ve.trim())!=null?xe:"";oe&&(z.value="",w.value.push(oe))},ie=q=>{const{usage:z,totalBalance:oe,reduceBy:ve,depletedKey:xe,noRecentUsageKey:Se,expiryEstimationKey:Qe}=q;if(!z||oe==null||v.value)return null;if(oe<=0)return{date:new Date,message:f(xe),percentage:100};const fa=new Date,ta=new Date(fa);ta.setHours(ta.getHours()-24);const Ye=z.filter(Xe=>Xe.type==="consume"&&new Date(Xe.created_at)>=ta).reduce((Xe,Ga)=>Xe+(Ga[ve]||0),0);if(Ye===0)return{date:null,message:f(Se),percentage:0};const ja=Ye/24,Ge=oe/ja,We=new Date(fa);We.setHours(We.getHours()+Ge);const Na=oe+Ye,Ha=Math.min(100,Math.round(Ye/Na*100));return{date:We,message:f(Qe,{_date:Ke.formatDate(We,"YYYY-MM-DD HH:mm"),_days:Math.floor(Ge/24),_hours:Math.floor(Ge%24)}),hoursRemaining:Math.round(Ge),daysRemaining:Math.floor(Ge/24),percentage:Ha}},Pe={props:e,emit:g,t:f,$q:n,apiKeyStore:r,embeddingStore:l,keysInfoCache:p,isBusyState:x,userStore:y,user:D,isApiKeyCopyDone:k,readonlyKey:P,primaryKey:H,isReadOnly:S,labels:w,labelsRef:j,isLabelsDirty:C,resetLabels:R,updateLabels:A,apiKeyInfo:h,apiKeyTotalUsage:T,isPremiumPaidKey:V,isPaidKey:i,isFreeKey:u,isInvalidKey:v,notifyEmail:L,notifyThresholds:B,sharedTokenKeys:M,isPayByRequests:Y,keyUIInfo:Z,onBuy:N,onCopy:Q,openUsageHistoryDialog:le,openSettingsDialog:ne,isShareBusy:G,onShare:$,onLabelsBlur:ye,calculateExpiryInfo:ie,openTicketsDialog:()=>{n.dialog({component:Wn,componentProps:{apiKey:e.apiKey.key}})},get date(){return Ke},get QSelect(){return Le},UsageChart:Vn,get formatNumber(){return Ve},get formatNumberShort(){return Je},get formatKey(){return Ee}};return Object.defineProperty(Pe,"__isScriptSetup",{enumerable:!1,value:!0}),Pe}}),Jn={class:"column full-width"},Zn={style:{"font-family":"monospace"},class:"text-bold"},$n={key:0},eo={key:1};function ao(c,o,s,e,g,f){return _(),ae("div",Jn,[e.isBusyState.has(s.apiKey.key)?(_(),I(Me,{key:0,indeterminate:"",size:"1px"})):U("",!0),a(W,{class:Ae(["full-width key-item",{"column q-gutter-y-lg":e.$q.screen.lt.md,"text-dim":e.isInvalidKey}]),tag:"label",clickable:!e.readonlyKey},{default:t(()=>[a(K,{class:"col-md-3"},{default:t(()=>[a(W,null,{default:t(()=>[e.readonlyKey?U("",!0):(_(),I(K,{key:0,side:""},{default:t(()=>[a(Ca,{disable:e.isInvalidKey||e.readonlyKey,modelValue:e.primaryKey,"onUpdate:modelValue":o[0]||(o[0]=n=>e.primaryKey=n),val:s.apiKey.key,dense:""},null,8,["disable","modelValue","val"]),a(re,null,{default:t(()=>[b(m(e.primaryKey===s.apiKey.key?e.t("key_manager.primary_key_set_caption"):e.t("key_manager.primary_key")),1)]),_:1})]),_:1})),a(K,{side:""},{default:t(()=>[a(te,{name:"o_key",class:Ae({"golden-foil":e.isPremiumPaidKey,"silver-foil":!e.isPremiumPaidKey&&e.isPaidKey})},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.isInvalidKey?e.t("key_manager.invalid_key"):e.isFreeKey?e.t("key_manager.free_key"):e.isPaidKey?e.t("paywall.standard_key"):e.t("key_manager.subscribed_key")),1)]),_:1})]),_:1},8,["class"])]),_:1}),a(K,null,{default:t(()=>{var n,r,l;return[(n=s.apiKey.metadata)!=null&&n.sharedFrom?(_(),I(O,{key:0,caption:""},{default:t(()=>[b(m(e.t("key_manager.shared_from",{_user:s.apiKey.metadata.sharedFrom})),1)]),_:1})):U("",!0),a(O,{class:"row items-center q-gutter-x-sm no-wrap"},{default:t(()=>{var p;return[X("span",Zn,m(e.formatKey(s.apiKey.key)),1),e.notifyEmail&&((p=e.notifyThresholds)!=null&&p.length)?(_(),I(te,{key:0,name:"alarm_smart_wake"},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.auto_reminder_info",{_email:e.notifyEmail,_threshold:e.notifyThresholds.map(x=>e.formatNumberShort(x)).join(", ")})),1)]),_:1})]),_:1})):U("",!0),a(J,{flat:"",square:"",size:"sm",dense:"",icon:e.isApiKeyCopyDone===s.apiKey.key?"check":"content_copy",color:e.isApiKeyCopyDone===s.apiKey.key?"primary":"",onClick:o[1]||(o[1]=pe(x=>e.onCopy(s.apiKey.key),["stop"]))},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.copy")),1)]),_:1})]),_:1},8,["icon","color"])]}),_:1}),e.isInvalidKey?U("",!0):(_(),I(O,{key:1,caption:"",class:Ae(((l=(r=e.keysInfoCache[s.apiKey.key])==null?void 0:r.wallet)==null?void 0:l.total_balance)<0?"text-negative":"")},{default:t(()=>[e.sharedTokenKeys>0?(_(),I(ge,{key:0,icon:"group",size:"xs",label:e.sharedTokenKeys,class:"bg-mixed-200",square:"",style:{"border-radius":"0"}},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.share_token_keys",{_num:e.sharedTokenKeys})),1)]),_:1})]),_:1},8,["label"])):U("",!0),X("span",{class:Ae({"text-negative":e.keyUIInfo.totalBalance<0})},m(e.keyUIInfo.remainingUsage),3)]),_:1},8,["class"])),e.isInvalidKey&&!e.isBusyState.has(s.apiKey.key)?(_(),I(O,{key:2,caption:"",class:"text-negative"},{default:t(()=>[a(te,{name:"warning"}),b(" "+m(e.t("key_manager.invalid_key")),1)]),_:1})):U("",!0),e.keyUIInfo.expiryInfo&&!e.isInvalidKey?(_(),I(O,{key:3,caption:"",class:"token-expiry-info text-dim"},{default:t(()=>[X("span",{class:Ae({"text-negative":e.keyUIInfo.expiryInfo.hoursRemaining<24||e.keyUIInfo.expiryInfo.percentage===100,"text-warning":e.keyUIInfo.expiryInfo.hoursRemaining<48&&e.keyUIInfo.expiryInfo.hoursRemaining>24})},m(e.keyUIInfo.expiryInfo.message),3),a(re,null,{default:t(()=>{var p,x;return[e.keyUIInfo.expiryInfo.date?(_(),ae("div",$n,m(e.t("key_manager.token_expiry_detail",{_date:e.date.formatDate(e.keyUIInfo.expiryInfo.date,"YYYY-MM-DD HH:mm"),_rate:e.formatNumber(((x=(p=e.keysInfoCache[s.apiKey.key])==null?void 0:p.usage)==null?void 0:x.reduce((y,D)=>D.type==="consume"&&new Date(D.created_at)>=new Date(Date.now()-24*60*60*1e3)?y+D.quantity/24:y,0))||0)+" "+e.t("key_manager.tokens_per_hour")})),1)):(_(),ae("div",eo,m(e.t("key_manager.token_expiry_no_rate")),1))]}),_:1})]),_:1})):U("",!0)]}),_:1})]),_:1})]),_:1}),a(K,{class:"col-md-2"},{default:t(()=>[a(e.QSelect,{ref:"labelsRef",modelValue:e.labels,"onUpdate:modelValue":o[3]||(o[3]=n=>e.labels=n),square:"",multiple:"","use-input":"","use-chips":"",readonly:e.isReadOnly,outlined:!e.isReadOnly,borderless:e.isReadOnly,"hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique","input-class":"cursor-pointer",disable:e.isInvalidKey||e.isBusyState.has(s.apiKey.key),onKeyupCapture:o[4]||(o[4]=ua(pe(()=>{},["stop"]),["enter"])),onBlurCapture:pe(e.onLabelsBlur,["stop"])},{selected:t(()=>[(_(!0),ae(ue,null,he(e.labels,n=>(_(),I(ge,{key:n,square:"",dense:"",style:{"border-radius":"0"},class:"bg-mixed-200",label:n},null,8,["label"]))),128))]),append:t(()=>[e.isLabelsDirty?(_(),ae(ue,{key:0},[a(J,{dense:"",square:"",flat:"",icon:"close",onClick:o[2]||(o[2]=n=>e.resetLabels())},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.revert_changes")),1)]),_:1})]),_:1}),a(J,{dense:"",square:"",flat:"",icon:"check",color:"primary",onClick:e.updateLabels},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.update_label")),1)]),_:1})]),_:1})],64)):U("",!0)]),_:1},8,["modelValue","readonly","outlined","borderless","disable"])]),_:1}),a(K,{class:"col-md-3 no-wrap"},{default:t(()=>{var n,r;return[(n=e.keysInfoCache[s.apiKey.key])!=null&&n.last_used_at?(_(),I(O,{key:0,caption:"",style:{"font-size":"0.7em"}},{default:t(()=>{var l;return[b(m(e.t("key_manager.last_used")+": "+e.date.formatDate((l=e.keysInfoCache[s.apiKey.key])==null?void 0:l.last_used_at,"YYYY-MM-DD HH:mm")),1)]}),_:1})):U("",!0),(r=e.keysInfoCache[s.apiKey.key])!=null&&r.usage&&!e.isInvalidKey?(_(),I(O,{key:1},{default:t(()=>{var l;return[a(e.UsageChart,{"api-key":s.apiKey,"is-pay-by-request":e.isPayByRequests,usage:(l=e.keysInfoCache[s.apiKey.key])==null?void 0:l.usage},null,8,["api-key","is-pay-by-request","usage"])]}),_:1})):U("",!0)]}),_:1}),e.$q.screen.gt.sm?(_(),I(Aa,{key:0,class:"col"})):U("",!0),a(K,{side:"",class:Ae(["actions-section",{"always-show":e.primaryKey===s.apiKey.key}])},{default:t(()=>[a(ga,{flat:"",square:"",class:"full-height"},{default:t(()=>{var n,r,l,p;return[!e.readonlyKey&&!((r=(n=e.keysInfoCache[s.apiKey.key])==null?void 0:n.metadata)!=null&&r.disable_self_purchase)?(_(),I(J,{key:0,flat:"",square:"",disable:e.isInvalidKey,icon:"add_shopping_cart",onClick:pe(e.onBuy,["stop"]),"no-wrap":"",label:e.t("key_manager.top_up")},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.purchase")),1)]),_:1})]),_:1},8,["disable","label"])):U("",!0),(p=(l=e.keysInfoCache[s.apiKey.key])==null?void 0:l.metadata)!=null&&p.disable_self_purchase?(_(),I(J,{key:1,flat:"",square:"",icon:"receipt_long",onClick:pe(e.openTicketsDialog,["stop"]),"no-wrap":"",label:e.t("key_manager.tickets.button")},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.tickets.explain")),1)]),_:1})]),_:1},8,["label"])):U("",!0),a(J,{flat:"",square:"",disable:e.isInvalidKey,icon:"history",label:e.t("key_manager.usage"),"no-wrap":"",onClick:o[5]||(o[5]=pe(x=>e.openUsageHistoryDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.usage_history")),1)]),_:1})]),_:1},8,["disable","label"]),a(J,{square:"",flat:"",icon:"rate_review",onClick:pe(e.updateLabels,["stop"]),color:e.isReadOnly?void 0:"primary"},{default:t(()=>[a(re,{"max-width":"300px"},{default:t(()=>[b(m(e.t("key_manager.add_key_labels_explain")),1)]),_:1})]),_:1},8,["color"]),a(J,{flat:"",square:"",disable:e.isInvalidKey,icon:"share",loading:e.isShareBusy,onClick:pe(e.onShare,["stop"])},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.share")),1)]),_:1})]),_:1},8,["disable","loading"]),a(J,{flat:"",square:"",padding:"md",icon:"more_horiz",onClick:o[6]||(o[6]=pe(x=>e.openSettingsDialog(s.apiKey.key),["stop"]))},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("key_manager.advance_settings")),1)]),_:1})]),_:1})]}),_:1})]),_:1},8,["class"])]),_:1},8,["class","clickable"]),a(ce)])}const to=_e(Xn,[["render",ao],["__scopeId","data-v-29b0a47d"],["__file","KeyItem.vue"]]),no=me({__name:"KeysTable",setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global"}),e=Re(),g=Ue(),f=Fe(),n=De(),{keys:r,isLoading:l,primaryKey:p}=be(g),{user:x}=be(f),{products:y}=be(n),D=E(null),k=E(void 0),P={[Ie.GENERATE]:async N=>{l.value=!0;try{const Q=await n.generate0TokenApiKey(N);Q&&(await g.addKey(Q,k.value),e.notify({message:s("key_manager.generate_success",{_key:Ee(Q)}),icon:"done"}))}finally{k.value=void 0,l.value=!1}},[Ie.REVOKE]:async N=>{var Q;l.value=!0;try{let le;if(i.value?le=await n.transferToken({source:V.value,target:i.value,withRevoke:!0},N):le=await n.revokeApiKey(V.value,N),le){e.notify({message:s("key_manager.revoke_success",{_key:Ee(V.value)}),icon:"done"}),i.value&&g.getKeyInfo(i.value,{excludeUsage:!0});const ne=p.value===V.value;await g.removeKey(V.value),ne&&await g.setPrimaryKey((Q=r.value[0])==null?void 0:Q.key)}}finally{V.value="",i.value="",l.value=!1}},[Ie.TRANSFER]:async N=>{l.value=!0;try{await n.transferToken({source:v.value,target:u.value},N)&&(e.notify({message:s("key_manager.transfer_success",{_source:Ee(v.value),_target:Ee(u.value)}),icon:"done"}),g.getKeyInfo(v.value,{excludeUsage:!0}),g.getKeyInfo(u.value,{excludeUsage:!0}))}finally{l.value=!1,v.value="",u.value=""}}},H=async N=>{var Q;console.log("handle key in callback"),D.value&&await((Q=P[D.value])==null?void 0:Q.call(P,N))},{turnstileToken:S,turnstileRef:w,turnstileVisible:j,proceeding:C,onUpdateToken:R,checkReady:A,resetVariables:h}=bt(H),T=E(""),V=E(""),i=E(""),u=E(""),v=E(""),L=F(()=>r.value.some(N=>!g.isFreeKey(N.key))),B=F(()=>{const N=T.value.toLowerCase();return r.value.filter(Q=>{var ne;const le=((ne=Q.metadata)==null?void 0:ne.labels)||[];return le.length>0&&le.some($=>$.toLowerCase().includes(N))?!0:Q.key.toLowerCase().includes(N)}).sort((Q,le)=>{var $,ye,ie,ke;const ne=((ye=($=Q.metadata)==null?void 0:$.roles)==null?void 0:ye.includes("readonly"))||!1,G=((ke=(ie=le.metadata)==null?void 0:ie.roles)==null?void 0:ke.includes("readonly"))||!1;return ne?1:G?-1:0})}),M=()=>{e.dialog({component:In}).onOk(async({action:N,metadata:Q})=>{k.value=Q,N===Ie.GENERATE&&(D.value=Ie.GENERATE,A()&&(await H(S.value),h(),gtag==null||gtag("event","add_new_key",{location:document.location.href})))})},Y=(N,Q)=>{N===Ie.REVOKE?(V.value=Q.key,i.value=Q.transferTo):N===Ie.TRANSFER&&(u.value=Q.target,v.value=Q.source),D.value=N,A()&&(H(S.value),h())};Be(async()=>{var N,Q;if(!((N=at.currentUser)!=null&&N.uid)&&((Q=x.value)!=null&&Q.uid)){e.notify({message:s("key_manager.token_expired"),icon:"warning"});return}await g.fetchKeys(),g.checkPrimaryKey(),y.value.length===0&&await n.getProducts()});const Z={t:s,$q:e,apiKeyStore:g,userStore:f,embeddingStore:n,keys:r,isLoading:l,primaryKey:p,user:x,products:y,currentAction:D,currentMetadata:k,actionCallback:P,handleTurnstileCb:H,turnstileToken:S,turnstileRef:w,turnstileVisible:j,proceeding:C,onUpdateToken:R,checkReady:A,resetVariables:h,filterQuery:T,revokeKey:V,revokeWithTransferKey:i,transferTarget:u,transferSource:v,hasPaidKey:L,visibleKeys:B,openApiKeyDialog:M,onExecute:Y,KeyItem:to,TurnstileComponent:kt};return Object.defineProperty(Z,"__isScriptSetup",{enumerable:!1,value:!0}),Z}});function oo(c,o,s,e,g,f){return _(),I(de,{class:"fit"},{default:t(()=>[a(qa,{ref:"decisionTable",grid:"",rows:e.visibleKeys,flat:"","row-key":"_id","hide-header":"",loading:e.isLoading||e.proceeding,pagination:{rowsPerPage:10},"card-container-class":"tour-optimizer-result-table"},{top:t(()=>[a(de,{class:"full-width",flat:"",square:""},{default:t(()=>[a(se,{class:"row q-pa-none"},{default:t(()=>[a(J,{disable:!e.user.uid||e.isLoading,flat:"",square:"","no-caps":"",padding:"md",icon:"add",label:e.t("key_manager.add"),onClick:e.openApiKeyDialog},null,8,["disable","label"]),a(J,{disable:!e.hasPaidKey,flat:"",square:"",padding:"md",icon:"receipt_long",label:e.t("embedding.manage_billing"),stretch:"",href:"https://stripe.jina.ai",target:"_blank","no-caps":""},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("embedding.manage_billing_tip")),1)]),_:1})]),_:1},8,["disable","label"]),a(J,{flat:"",label:e.t("header.contact_us"),square:"",icon:"handshake",to:"/api-dashboard/contact-sales",padding:"md","no-caps":""},null,8,["label"]),a(Ce,{filled:"",square:"",class:"full-width",debounce:"300",modelValue:e.filterQuery,"onUpdate:modelValue":o[0]||(o[0]=n=>e.filterQuery=n),placeholder:e.t("key_manager.filter_by")},{prepend:t(()=>[a(te,{name:"filter_alt"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(ce)]),_:1})]),item:t(n=>[(_(),I(e.KeyItem,{key:n.row.key,"api-key":n.row,onExecute:e.onExecute},null,8,["api-key"]))]),_:1},8,["rows","loading"]),e.turnstileVisible?(_(),I(e.TurnstileComponent,{key:0,ref:"turnstileRef",modelValue:e.turnstileToken,"onUpdate:modelValue":[o[1]||(o[1]=n=>e.turnstileToken=n),e.onUpdateToken]},null,8,["modelValue","onUpdate:modelValue"])):U("",!0)]),_:1})}const ro=_e(no,[["render",oo],["__file","KeysTable.vue"]]),Ia="https://api.jina.ai/v1/classify",la=6,so=me({__name:"AvatarTab",setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global"}),e=Re(),g=E(!1),f=E([]),n=E(null),r=E(!1),l=E(""),p=E(""),x=De(),y=E(null),D=T=>{y.value=T},k={accessories:{Eyepatch:"person wearing a mysterious black eye patch",Glasses:"person wearing modern round glasses with clear lenses","Glasses 2":"person wearing thin-framed contemporary glasses","Glasses 3":"person wearing classic rectangular glasses","Glasses 4":"person wearing vintage round glasses","Glasses 5":"person wearing designer wire-frame glasses",None:"person without any eyewear or accessories",Sunglasses:"person wearing fashionable dark sunglasses","Sunglasses 2":"person wearing sporty aviator sunglasses"},body:{"Blazer Black Tee":"person wearing a black t-shirt under a professional blazer","Button Shirt 1":"person in a crisp button-up dress shirt","Button Shirt 2":"person in a light colored button-up shirt",Coffee:"person holding a coffee cup in casual attire",Device:"person using a mobile device in casual wear",Dress:"person wearing an elegant flowing dress",Explaining:"person gesturing while explaining in business attire","Fur Jacket":"person wearing a luxurious fur jacket",Gaming:"person in gaming attire with controller","Gym Shirt":"person wearing athletic workout clothes",Hoodie:"person in a comfortable casual hoodie",Killer:"person in dark mysterious attire",Macbook:"person working on laptop in casual clothes",Paper:"person holding papers in professional attire","Pointing Up":"person gesturing upward in business wear","Polka Dot Jacket":"person in playful polka dot jacket","Polo and Sweater":"person wearing polo shirt under sweater","Shirt and Coat":"person in formal shirt and coat combination","Sporty Tee":"person in athletic sports t-shirt","Striped Pocket Tee":"person in casual striped t-shirt with pocket","Striped Tee":"person wearing horizontal striped t-shirt",Sweater:"person in cozy knit sweater","Sweater Dots":"person wearing sweater with polka dot pattern","Tee 1":"person in basic solid t-shirt","Tee 2":"person in casual graphic t-shirt","Tee Arms Crossed":"person with crossed arms in t-shirt","Tee Selena":"person in fitted casual t-shirt","Thunder T-Shirt":"person wearing t-shirt with thunder design",Turtleneck:"person in sophisticated black turtleneck",Whatever:"person in casual wear with relaxed pose"},face:{"Angry with Fang":"person with an intense angry expression showing fangs",Awe:"person with an expression of wonder and amazement",Blank:"person with a neutral blank expression",Calm:"person with serene peaceful expression",Cheeky:"person with a playful mischievous expression",Concerned:"person with a worried concerned expression","Concerned Fear":"person with a worried fearful expression",Contempt:"person with a disdainful contemptuous expression",Cute:"person with adorable cheerful expression",Cyclops:"person has only one one-eye",Driven:"person with determined focused expression","Eating Happy":"person with a joyful expression while eating",Explaining:"person with an animated expression while explaining","Eyes Closed":"person with a peaceful expression and closed eyes",Fear:"person with a frightened fearful expression",Hectic:"person with a frantic overwhelmed expression","Loving Grin 1":"person with gentle loving smile","Loving Grin 2":"person with bright heartfelt smile",Monster:"person with a playful monster-like expression",Old:"person with an aged wise expression",Rage:"person with an intense angry expression",Serious:"person with professional serious expression",Smile:"person with friendly welcoming smile","Smile Big":"person with broad enthusiastic smile","Smile LOL":"person with joyful laughing expression","Smile Teeth Gap":"person with charming gap-toothed smile",Solemn:"person with a deeply serious thoughtful expression",Suspicious:"person with a skeptical suspicious expression",Tired:"person with an exhausted weary expression","Very Angry":"person with an extremely angry expression"},head:{Afro:"person with natural afro hairstyle",Bangs:"person with straight front bangs","Bangs 2":"person with side-swept bangs","Bantu Knots":"person with traditional bantu knots hairstyle",Bear:"person with bear-themed hairstyle",Bun:"person with hair styled in neat bun","Bun 2":"person with messy top bun",Buns:"person with double hair buns",Cornrows:"person with cornrow braided hairstyle","Cornrows 2":"person with intricate cornrow design","Flat Top":"person with classic flat top haircut","Flat Top Long":"person with long flat top haircut","Gray Bun":"person with gray hair in bun","Gray Medium":"person with medium-length gray hair","Gray Short":"person with short gray hair",Long:"person with long flowing hair","Long Afro":"person with long voluminous afro","Long Bangs":"person with long layered bangs","Long Curly":"person with long curly hair","Medium 1":"person with shoulder-length hair","Medium 2":"person with wavy medium hair","Medium 3":"person with textured medium hair","Medium Bangs":"person with medium hair and bangs","Medium Bangs 2":"person with feathered medium bangs","Medium Bangs 3":"person with side-parted medium bangs","Medium Straight":"person with straight medium-length hair",Mohawk:"person with classic mohawk style","Mohawk 2":"person with longer mohawk variation","No Hair 1":"person with smooth bald head","No Hair 2":"person with polished bald style","No Hair 3":"person with completely shaved head",Pomp:"person with pompadour hairstyle","Shaved 1":"person with partially shaved head style","Shaved 2":"person with modern shaved haircut","Shaved 3":"person with artistic shaved design","Short 1":"person with short textured cut","Short 2":"person with short faded haircut","Short 3":"person with short spiky style","Short 4":"person with short layered cut","Short 5":"person with short tapered haircut",Twists:"person with twisted loc hairstyle","Twists 2":"person with longer twisted locs","hat-beanie":"person wearing a casual beanie hat","hat-hip":"person wearing a trendy hip-hop style hat"}};async function P(T){var V;try{const i=T.includes("base64,")?T.split("base64,")[1]:T,u=await fetch(Ia,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x.apiKey}`},body:JSON.stringify({model:(V=y==null?void 0:y.value)==null?void 0:V.name,input:[{image:i}],labels:{accessories:Object.values(k.accessories),body:Object.values(k.body),face:Object.values(k.face),head:Object.values(k.head)}})});if(!u.ok)throw new Error(`Classification failed: ${u.status}`);return await u.json()}catch(i){throw console.error("Classification error:",i),i}}async function H(T,V){try{return(await en(Object.assign({"../../assets/avatar/accessories/Eyepatch.svg":()=>d(()=>import("./Eyepatch-CPtCE8NI.js"),[]),"../../assets/avatar/accessories/Glasses 2.svg":()=>d(()=>import("./Glasses 2-CisVqvW9.js"),[]),"../../assets/avatar/accessories/Glasses 3.svg":()=>d(()=>import("./Glasses 3--AGI-_U5.js"),[]),"../../assets/avatar/accessories/Glasses 4.svg":()=>d(()=>import("./Glasses 4-CkCSLu0z.js"),[]),"../../assets/avatar/accessories/Glasses 5.svg":()=>d(()=>import("./Glasses 5-BnBdJIiD.js"),[]),"../../assets/avatar/accessories/Glasses.svg":()=>d(()=>import("./Glasses-bHTDfG2F.js"),[]),"../../assets/avatar/accessories/None.svg":()=>d(()=>import("./None-CBIsyCCu.js"),[]),"../../assets/avatar/accessories/Sunglasses 2.svg":()=>d(()=>import("./Sunglasses 2-Bm0kyZv8.js"),[]),"../../assets/avatar/accessories/Sunglasses.svg":()=>d(()=>import("./Sunglasses-CCXW1Ow2.js"),[]),"../../assets/avatar/body/Blazer Black Tee.svg":()=>d(()=>import("./Blazer Black Tee-CCvV2dgG.js"),[]),"../../assets/avatar/body/Button Shirt 1.svg":()=>d(()=>import("./Button Shirt 1-CmLXOUNx.js"),[]),"../../assets/avatar/body/Button Shirt 2.svg":()=>d(()=>import("./Button Shirt 2-s_x7_Ujv.js"),[]),"../../assets/avatar/body/Coffee.svg":()=>d(()=>import("./Coffee-BWgpJV-A.js"),[]),"../../assets/avatar/body/Device.svg":()=>d(()=>import("./Device-DEcjonbR.js"),[]),"../../assets/avatar/body/Dress.svg":()=>d(()=>import("./Dress-_6EnLKsY.js"),[]),"../../assets/avatar/body/Explaining.svg":()=>d(()=>import("./Explaining-DadwYvu0.js"),[]),"../../assets/avatar/body/Fur Jacket.svg":()=>d(()=>import("./Fur Jacket-CdWbrdPB.js"),[]),"../../assets/avatar/body/Gaming.svg":()=>d(()=>import("./Gaming-BDiAmtUY.js"),[]),"../../assets/avatar/body/Gym Shirt.svg":()=>d(()=>import("./Gym Shirt-DQCaFZ3f.js"),[]),"../../assets/avatar/body/Hoodie.svg":()=>d(()=>import("./Hoodie-B07UN-Nl.js"),[]),"../../assets/avatar/body/Killer.svg":()=>d(()=>import("./Killer-DTtnEXXI.js"),[]),"../../assets/avatar/body/Macbook.svg":()=>d(()=>import("./Macbook-CZ7Tiuu8.js"),[]),"../../assets/avatar/body/Paper.svg":()=>d(()=>import("./Paper-DK__jVLJ.js"),[]),"../../assets/avatar/body/Pointing Up.svg":()=>d(()=>import("./Pointing Up-DMSWjUIR.js"),[]),"../../assets/avatar/body/Polka Dot Jacket.svg":()=>d(()=>import("./Polka Dot Jacket-Ccaxzz07.js"),[]),"../../assets/avatar/body/Polo and Sweater.svg":()=>d(()=>import("./Polo and Sweater-DtFh9BfC.js"),[]),"../../assets/avatar/body/Shirt and Coat.svg":()=>d(()=>import("./Shirt and Coat-CUM3_bbN.js"),[]),"../../assets/avatar/body/Sporty Tee.svg":()=>d(()=>import("./Sporty Tee-DC-mJGrt.js"),[]),"../../assets/avatar/body/Striped Pocket Tee.svg":()=>d(()=>import("./Striped Pocket Tee-CIvIqxDn.js"),[]),"../../assets/avatar/body/Striped Tee.svg":()=>d(()=>import("./Striped Tee-DNfZDSQM.js"),[]),"../../assets/avatar/body/Sweater Dots.svg":()=>d(()=>import("./Sweater Dots-BlH7xuFs.js"),[]),"../../assets/avatar/body/Sweater.svg":()=>d(()=>import("./Sweater-CuOBOSOz.js"),[]),"../../assets/avatar/body/Tee 1.svg":()=>d(()=>import("./Tee 1-BAomRkw9.js"),[]),"../../assets/avatar/body/Tee 2.svg":()=>d(()=>import("./Tee 2-C4UUC6VK.js"),[]),"../../assets/avatar/body/Tee Arms Crossed.svg":()=>d(()=>import("./Tee Arms Crossed-Cd7ErYZG.js"),[]),"../../assets/avatar/body/Tee Selena.svg":()=>d(()=>import("./Tee Selena-BuBczbrL.js"),[]),"../../assets/avatar/body/Thunder T-Shirt.svg":()=>d(()=>import("./Thunder T-Shirt-R3FQYUZD.js"),[]),"../../assets/avatar/body/Turtleneck.svg":()=>d(()=>import("./Turtleneck-CBu5E31v.js"),[]),"../../assets/avatar/body/Whatever.svg":()=>d(()=>import("./Whatever-C_L7o4PD.js"),[]),"../../assets/avatar/face/Angry with Fang.svg":()=>d(()=>import("./Angry with Fang-Cz56tpGA.js"),[]),"../../assets/avatar/face/Awe.svg":()=>d(()=>import("./Awe-BZkmV47x.js"),[]),"../../assets/avatar/face/Blank.svg":()=>d(()=>import("./Blank-NsmhZSM1.js"),[]),"../../assets/avatar/face/Calm.svg":()=>d(()=>import("./Calm-CPd4QvYU.js"),[]),"../../assets/avatar/face/Cheeky.svg":()=>d(()=>import("./Cheeky-CiEXIAta.js"),[]),"../../assets/avatar/face/Concerned Fear.svg":()=>d(()=>import("./Concerned Fear-DW5JY4CD.js"),[]),"../../assets/avatar/face/Concerned.svg":()=>d(()=>import("./Concerned-BgtD4Mod.js"),[]),"../../assets/avatar/face/Contempt.svg":()=>d(()=>import("./Contempt-CvrrLjDN.js"),[]),"../../assets/avatar/face/Cute.svg":()=>d(()=>import("./Cute-BwsaONwn.js"),[]),"../../assets/avatar/face/Cyclops.svg":()=>d(()=>import("./Cyclops-DTp1IdXY.js"),[]),"../../assets/avatar/face/Driven.svg":()=>d(()=>import("./Driven-De_O7WVZ.js"),[]),"../../assets/avatar/face/Eating Happy.svg":()=>d(()=>import("./Eating Happy-BgMnwg9g.js"),[]),"../../assets/avatar/face/Explaining.svg":()=>d(()=>import("./Explaining-THnIdgyB.js"),[]),"../../assets/avatar/face/Eyes Closed.svg":()=>d(()=>import("./Eyes Closed-CdI1KQdq.js"),[]),"../../assets/avatar/face/Fear.svg":()=>d(()=>import("./Fear-BexFCH5R.js"),[]),"../../assets/avatar/face/Hectic.svg":()=>d(()=>import("./Hectic-AExjuXjY.js"),[]),"../../assets/avatar/face/Loving Grin 1.svg":()=>d(()=>import("./Loving Grin 1-B_w88qcc.js"),[]),"../../assets/avatar/face/Loving Grin 2.svg":()=>d(()=>import("./Loving Grin 2-zoGieaDF.js"),[]),"../../assets/avatar/face/Monster.svg":()=>d(()=>import("./Monster-C1lwNnn2.js"),[]),"../../assets/avatar/face/Old.svg":()=>d(()=>import("./Old-D4BSyuLE.js"),[]),"../../assets/avatar/face/Rage.svg":()=>d(()=>import("./Rage-B2uNaaGQ.js"),[]),"../../assets/avatar/face/Serious.svg":()=>d(()=>import("./Serious-DI3hxq-4.js"),[]),"../../assets/avatar/face/Smile Big.svg":()=>d(()=>import("./Smile Big-aT5CkwfB.js"),[]),"../../assets/avatar/face/Smile LOL.svg":()=>d(()=>import("./Smile LOL-DC93Zyi_.js"),[]),"../../assets/avatar/face/Smile Teeth Gap.svg":()=>d(()=>import("./Smile Teeth Gap-DBZFawB0.js"),[]),"../../assets/avatar/face/Smile.svg":()=>d(()=>import("./Smile-0Wibgfy8.js"),[]),"../../assets/avatar/face/Solemn.svg":()=>d(()=>import("./Solemn-CxgWcI-i.js"),[]),"../../assets/avatar/face/Suspicious.svg":()=>d(()=>import("./Suspicious-D7j672A1.js"),[]),"../../assets/avatar/face/Tired.svg":()=>d(()=>import("./Tired-D_AtxcGW.js"),[]),"../../assets/avatar/face/Very Angry.svg":()=>d(()=>import("./Very Angry-D5F4ua3s.js"),[]),"../../assets/avatar/facialHair/Chin.svg":()=>d(()=>import("./Chin-DUNkMTkI.js"),[]),"../../assets/avatar/facialHair/Full 2.svg":()=>d(()=>import("./Full 2-gHgrzbn6.js"),[]),"../../assets/avatar/facialHair/Full 3.svg":()=>d(()=>import("./Full 3-Ds9Mi2Pn.js"),[]),"../../assets/avatar/facialHair/Full 4.svg":()=>d(()=>import("./Full 4-CpyHDOKi.js"),[]),"../../assets/avatar/facialHair/Full.svg":()=>d(()=>import("./Full--tLCytme.js"),[]),"../../assets/avatar/facialHair/Goatee 1.svg":()=>d(()=>import("./Goatee 1-CjxWNkM4.js"),[]),"../../assets/avatar/facialHair/Goatee 2.svg":()=>d(()=>import("./Goatee 2-DX91ea6G.js"),[]),"../../assets/avatar/facialHair/Moustache 1.svg":()=>d(()=>import("./Moustache 1-DCfFyVoz.js"),[]),"../../assets/avatar/facialHair/Moustache 2.svg":()=>d(()=>import("./Moustache 2-DvTVVVR4.js"),[]),"../../assets/avatar/facialHair/Moustache 3.svg":()=>d(()=>import("./Moustache 3-7DebNHil.js"),[]),"../../assets/avatar/facialHair/Moustache 4.svg":()=>d(()=>import("./Moustache 4-SJn7FG3B.js"),[]),"../../assets/avatar/facialHair/Moustache 5.svg":()=>d(()=>import("./Moustache 5-44Xj2EZF.js"),[]),"../../assets/avatar/facialHair/Moustache 6.svg":()=>d(()=>import("./Moustache 6-CEr5yFL1.js"),[]),"../../assets/avatar/facialHair/Moustache 7.svg":()=>d(()=>import("./Moustache 7-Bq0VvETl.js"),[]),"../../assets/avatar/facialHair/Moustache 8.svg":()=>d(()=>import("./Moustache 8-mUxMyGGc.js"),[]),"../../assets/avatar/facialHair/Moustache 9.svg":()=>d(()=>import("./Moustache 9-DOisYSjS.js"),[]),"../../assets/avatar/facialHair/None.svg":()=>d(()=>import("./None-DgNcDPcG.js"),[]),"../../assets/avatar/head/Afro.svg":()=>d(()=>import("./Afro-BcTe8cjZ.js"),[]),"../../assets/avatar/head/Bangs 2.svg":()=>d(()=>import("./Bangs 2-8gDxCaJT.js"),[]),"../../assets/avatar/head/Bangs.svg":()=>d(()=>import("./Bangs-VMnv_1Bg.js"),[]),"../../assets/avatar/head/Bantu Knots.svg":()=>d(()=>import("./Bantu Knots-FkG8IqlL.js"),[]),"../../assets/avatar/head/Bear.svg":()=>d(()=>import("./Bear-B_wppsaW.js"),[]),"../../assets/avatar/head/Bun 2.svg":()=>d(()=>import("./Bun 2-EtBMU_d9.js"),[]),"../../assets/avatar/head/Bun.svg":()=>d(()=>import("./Bun-B7Kj-Cx2.js"),[]),"../../assets/avatar/head/Buns.svg":()=>d(()=>import("./Buns-0MUj_y-O.js"),[]),"../../assets/avatar/head/Cornrows 2.svg":()=>d(()=>import("./Cornrows 2-m36CFRMN.js"),[]),"../../assets/avatar/head/Cornrows.svg":()=>d(()=>import("./Cornrows-D_tFOLo2.js"),[]),"../../assets/avatar/head/Flat Top Long.svg":()=>d(()=>import("./Flat Top Long-BYSVHErS.js"),[]),"../../assets/avatar/head/Flat Top.svg":()=>d(()=>import("./Flat Top-3MNwLsIB.js"),[]),"../../assets/avatar/head/Gray Bun.svg":()=>d(()=>import("./Gray Bun-6Dorz2Bf.js"),[]),"../../assets/avatar/head/Gray Medium.svg":()=>d(()=>import("./Gray Medium-lrleAuub.js"),[]),"../../assets/avatar/head/Gray Short.svg":()=>d(()=>import("./Gray Short-DEP2bB8l.js"),[]),"../../assets/avatar/head/Long Afro.svg":()=>d(()=>import("./Long Afro-CZArt9o6.js"),[]),"../../assets/avatar/head/Long Bangs.svg":()=>d(()=>import("./Long Bangs-CEgFEE8r.js"),[]),"../../assets/avatar/head/Long Curly.svg":()=>d(()=>import("./Long Curly-CzVOPxU6.js"),[]),"../../assets/avatar/head/Long.svg":()=>d(()=>import("./Long-mD9BOv0I.js"),[]),"../../assets/avatar/head/Medium 1.svg":()=>d(()=>import("./Medium 1-BIbsz7Fr.js"),[]),"../../assets/avatar/head/Medium 2.svg":()=>d(()=>import("./Medium 2-CnPtrhj9.js"),[]),"../../assets/avatar/head/Medium 3.svg":()=>d(()=>import("./Medium 3-B-FK1tKj.js"),[]),"../../assets/avatar/head/Medium Bangs 2.svg":()=>d(()=>import("./Medium Bangs 2-Cr7FTMco.js"),[]),"../../assets/avatar/head/Medium Bangs 3.svg":()=>d(()=>import("./Medium Bangs 3-CN81QHc8.js"),[]),"../../assets/avatar/head/Medium Bangs.svg":()=>d(()=>import("./Medium Bangs-DvU1aw27.js"),[]),"../../assets/avatar/head/Medium Straight.svg":()=>d(()=>import("./Medium Straight-C1jK9Qgd.js"),[]),"../../assets/avatar/head/Mohawk 2.svg":()=>d(()=>import("./Mohawk 2-BPHaakiH.js"),[]),"../../assets/avatar/head/Mohawk.svg":()=>d(()=>import("./Mohawk-BtkBrxTU.js"),[]),"../../assets/avatar/head/No Hair 1.svg":()=>d(()=>import("./No Hair 1-BM-4_kmR.js"),[]),"../../assets/avatar/head/No Hair 2.svg":()=>d(()=>import("./No Hair 2-DjnYbtaT.js"),[]),"../../assets/avatar/head/No Hair 3.svg":()=>d(()=>import("./No Hair 3-CDiHEwX9.js"),[]),"../../assets/avatar/head/Pomp.svg":()=>d(()=>import("./Pomp-Di6BypHV.js"),[]),"../../assets/avatar/head/Shaved 1.svg":()=>d(()=>import("./Shaved 1-DUFavbik.js"),[]),"../../assets/avatar/head/Shaved 2.svg":()=>d(()=>import("./Shaved 2-BIYv1-1_.js"),[]),"../../assets/avatar/head/Shaved 3.svg":()=>d(()=>import("./Shaved 3-DX966IJI.js"),[]),"../../assets/avatar/head/Short 1.svg":()=>d(()=>import("./Short 1-B-el4prz.js"),[]),"../../assets/avatar/head/Short 2.svg":()=>d(()=>import("./Short 2-YawmDo8u.js"),[]),"../../assets/avatar/head/Short 3.svg":()=>d(()=>import("./Short 3-Bq0t9n5E.js"),[]),"../../assets/avatar/head/Short 4.svg":()=>d(()=>import("./Short 4-B1nPxZXu.js"),[]),"../../assets/avatar/head/Short 5.svg":()=>d(()=>import("./Short 5-xc1sa6I2.js"),[]),"../../assets/avatar/head/Twists 2.svg":()=>d(()=>import("./Twists 2-1XiLWkyn.js"),[]),"../../assets/avatar/head/Twists.svg":()=>d(()=>import("./Twists-DxjfQDSj.js"),[]),"../../assets/avatar/head/hat-beanie.svg":()=>d(()=>import("./hat-beanie-3it8Xmnp.js"),[]),"../../assets/avatar/head/hat-hip.svg":()=>d(()=>import("./hat-hip-CbkFXWiS.js"),[])}),`../../assets/avatar/${T}/${V}.svg`,6)).default}catch(i){throw console.error("Error loading SVG:",i),e.notify({type:"negative",message:s("avatar.error_loading")}),i}}function S(T,V){return Object.entries(T).map(([i,u])=>({category:i,items:u.sort((v,L)=>L.score-v.score).slice(0,V).map(v=>{var L;return{label:v.label,score:v.score,feature:((L=Object.entries(k[i]).find(([B,M])=>M===v.label))==null?void 0:L[0])||Object.keys(k[i])[0]}})}))}function w(T,V){const i={};return T.forEach(({category:u,items:v})=>{const L=v[V%v.length];i[u]=L.feature}),i}async function j(){if(!p.value){e.notify({type:"warning",message:s("avatar.noImageSelected")});return}g.value=!0,f.value=[];try{const T=await P(p.value),V=S(T.data[0].predictions,la);for(let i=0;i<la;i++){const u=w(V,i),v=await Promise.all([H("body",u.body),H("head",u.head),H("face",u.face),H("accessories",u.accessories)]),L=["translate(0, 550)","translate(200, 50)","translate(320, 250)","translate(210, 310)"],M=`
        <svg
          width="380"
          height="380"
          viewBox="0 0 900 900"
          fill="none"
          stroke="black"
          stroke-width="0.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g>
            ${v.map((Y,Z)=>{const N=Y.slice(Y.indexOf(">",Y.indexOf("<svg"))+1).replace("</svg>","");return`<g transform="${L[Z]}">${N}</g>`}).join("")}
          </g>
        </svg>
      `;f.value.push(M)}}catch(T){console.error("Error generating avatars:",T),f.value=[],e.notify({type:"negative",message:s("avatar.classificationError")})}finally{g.value=!1}}async function C(T){return new Promise((V,i)=>{const u=new Image,v=document.createElement("canvas"),L=v.getContext("2d");v.width=256,v.height=256,u.onload=()=>{const M=Math.max(v.width/u.width,v.height/u.height),Y=(v.width-u.width*M)/2,Z=(v.height-u.height*M)/2;L.fillStyle="white",L.fillRect(0,0,v.width,v.height),L.drawImage(u,Y,Z,u.width*M,u.height*M);const N=v.toDataURL(T.type),Q=N.split(",")[1];l.value=N,p.value=Q,V(Q)},u.onerror=()=>{i(new Error(s("avatar.error_processing")))};const B=new FileReader;B.onload=M=>{u.src=M.target.result},B.onerror=()=>{i(new Error(s("avatar.error_processing")))},B.readAsDataURL(T)})}async function R(){if(n.value){r.value=!0;try{await C(n.value)}catch(T){console.error("Error processing image:",T),e.notify({type:"negative",message:s("avatar.error_processing")})}finally{r.value=!1}}else l.value=""}function A(T,V){const i=new Blob([T],{type:"image/svg+xml"}),u=window.URL.createObjectURL(i),v=document.createElement("a");v.href=u,v.download=`avatar-${V+1}.svg`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(u),e.notify({message:s("avatar.download_success",{index:V+1})})}const h={API_URL:Ia,t:s,$q:e,isLoading:g,svgContents:f,TOP_N:la,selectedFile:n,isProcessing:r,processedImage:l,imageBase64:p,embeddingStore:x,currentModel:y,onModelItemClick:D,featureMapping:k,classifyImage:P,importSVG:H,getTopNPredictions:S,generateFeatureCombination:w,generateAvatar:j,processImage:C,handleFileSelect:R,downloadSVG:A,ModelDropDown:Oa};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),lo={class:"row full-width"},io={class:"row q-col-gutter-md"},uo=["innerHTML"];function co(c,o,s,e,g,f){return _(),I(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[X("div",lo,[a(Bt,{class:"col",square:"",filled:"","input-class":"text-no-wrap ellipsis",modelValue:e.selectedFile,"onUpdate:modelValue":[o[0]||(o[0]=n=>e.selectedFile=n),e.handleFileSelect],label:e.t("avatar.select_file"),accept:".jpg,.jpeg,.png,.gif,.webp",loading:e.isProcessing},{prepend:t(()=>[e.processedImage?(_(),I(da,{key:1,src:e.processedImage,width:"24px",height:"24px"},null,8,["src"])):(_(),I(te,{key:0,name:"attach_file"}))]),_:1},8,["modelValue","label","loading"]),a(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,category:"clip",onChooseModel:e.onModelItemClick},null,8,["currentModel"]),a(J,{square:"",flat:"","no-caps":"",padding:"md",label:e.t("avatar.generate"),onClick:e.generateAvatar,icon:"play_arrow",loading:e.isLoading,disable:!e.currentModel||!e.selectedFile},null,8,["label","loading","disable"]),a(J,{square:"",flat:"",padding:"md","no-caps":"",label:e.t("avatar.how_does_it_work"),to:"/news/scaling-test-time-compute-for-embedding-models",icon:"help"},null,8,["label"])]),e.isProcessing||e.isLoading?(_(),I(Me,{key:0,indeterminate:"",size:"1px"})):U("",!0),a(ce),a(se,null,{default:t(()=>[X("div",io,[(_(!0),ae(ue,null,he(e.svgContents,(n,r)=>(_(),ae("div",{key:r,class:"col-auto"},[a(de,{flat:"",bordered:"",class:"cursor-pointer q-hoverable",onClick:l=>e.downloadSVG(n,r)},{default:t(()=>[o[1]||(o[1]=X("span",{class:"q-focus-helper"},null,-1)),a(se,null,{default:t(()=>[X("div",{class:"text-center",innerHTML:n},null,8,uo)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})}const mo=_e(so,[["render",co],["__file","AvatarTab.vue"]]),_o={...tt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:c=>c>=0&&c<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ma=50,Ba=2*ma,Ua=Ba*Math.PI,go=Math.round(Ua*1e3)/1e3,fo=nt({name:"QCircularProgress",props:{..._o,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(c,{slots:o}){const{proxy:{$q:s}}=st(),e=ot(c),g=F(()=>{const k=(s.lang.rtl===!0?-1:1)*c.angle;return{transform:c.reverse!==(s.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-k}deg)`:`rotate3d(0, 0, 1, ${k-90}deg)`}}),f=F(()=>c.instantFeedback!==!0&&c.indeterminate!==!0?{transition:`stroke-dashoffset ${c.animationSpeed}ms ease 0s, stroke ${c.animationSpeed}ms ease`}:""),n=F(()=>Ba/(1-c.thickness/2)),r=F(()=>`${n.value/2} ${n.value/2} ${n.value} ${n.value}`),l=F(()=>Gt(c.value,c.min,c.max)),p=F(()=>c.max-c.min),x=F(()=>c.thickness/2*n.value),y=F(()=>{const k=(c.max-l.value)/p.value,P=c.rounded===!0&&l.value<c.max&&k<.25?x.value/2*(1-k/.25):0;return Ua*k+P});function D({thickness:k,offset:P,color:H,cls:S,rounded:w}){return je("circle",{class:"q-circular-progress__"+S+(H!==void 0?` text-${H}`:""),style:f.value,fill:"transparent",stroke:"currentColor","stroke-width":k,"stroke-dasharray":go,"stroke-dashoffset":P,"stroke-linecap":w,cx:n.value,cy:n.value,r:ma})}return()=>{const k=[];c.centerColor!==void 0&&c.centerColor!=="transparent"&&k.push(je("circle",{class:`q-circular-progress__center text-${c.centerColor}`,fill:"currentColor",r:ma-x.value/2,cx:n.value,cy:n.value})),c.trackColor!==void 0&&c.trackColor!=="transparent"&&k.push(D({cls:"track",thickness:x.value,offset:0,color:c.trackColor})),k.push(D({cls:"circle",thickness:x.value,offset:y.value,color:c.color,rounded:c.rounded===!0?"round":void 0}));const P=[je("svg",{class:"q-circular-progress__svg",style:g.value,viewBox:r.value,"aria-hidden":"true"},k)];return c.showValue===!0&&P.push(je("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:c.fontSize}},o.default!==void 0?o.default():[je("div",l.value)])),je("div",{class:`q-circular-progress q-circular-progress--${c.indeterminate===!0?"in":""}determinate`,style:e.value,role:"progressbar","aria-valuemin":c.min,"aria-valuemax":c.max,"aria-valuenow":c.indeterminate===!0?void 0:l.value},rt(o.internal,P))}}}),yo=me({__name:"GroundingDemoComponent",props:{useLazyLoading:{type:Boolean,default:!0}},setup(c,{expose:o}){o();const s=c,e=De(),{apiKey:g}=be(e),{t:f}=fe({useScope:"global"}),n=E("In 2012, President Barack Hussein Obama repealed the Smith-Mundt act, which had been in place in 1948. The law prevented the government from putting its propaganda on TV and Radio."),r=E(!1),l=E(!0),p=E(0),x=E(null),y=E(null),D=E(null);let k=null;const P=F(()=>{var T;return(T=x.value)==null?void 0:T.data}),H=F(()=>{var T;return(T=P.value)!=null&&T.factuality?P.value.factuality*100:0}),S=F(()=>{var T;return((T=P.value)==null?void 0:T.references.filter(V=>V.isSupportive))||[]}),w=F(()=>{const T=Math.floor(p.value/1e3),V=Math.floor(p.value%1e3/100);return`${T}.${V} s`}),j=F(()=>{var T,V;return y.value!==null?((T=P.value)==null?void 0:T.references.filter(i=>i.isSupportive===y.value))||[]:((V=P.value)==null?void 0:V.references)||[]}),C=T=>{y.value===T?y.value=null:y.value=T},R=async()=>{if(!n.value)return;l.value=!0,x.value=null;const T=Date.now(),V=`https://g.jina.ai/${encodeURIComponent(n.value)}${r.value?"?deepdive=true":""}`;try{const i=await fetch(V,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${g.value}`}});p.value=Date.now()-T,x.value=await i.json()}catch(i){x.value={message:i instanceof Error?i.message:String(i)}}finally{l.value=!1}},A=()=>{var V;const T=((V=D.value)==null?void 0:V.$el)||D.value;T instanceof HTMLElement?(k=new IntersectionObserver(i=>{i[0].isIntersecting&&(R(),k==null||k.disconnect())},{root:null,threshold:.1}),k.observe(T)):console.error("Element is not an HTMLElement:",T)};Be(()=>{s.useLazyLoading?La(()=>{setTimeout(()=>{A()},100)}):R()}),lt(()=>{k&&k.disconnect()});const h={props:s,embeddingStore:e,apiKey:g,t:f,query:n,isDeepDive:r,isBusy:l,responseTime:p,response:x,filters:y,componentRef:D,get observer(){return k},set observer(T){k=T},responseData:P,factuality:H,supportiveNum:S,responseTimeString:w,references:j,onFilter:C,sendQuery:R,initIntersectionObserver:A,ref:E,get formatNumber(){return Ve}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),vo={class:"text-negative"};function po(c,o,s,e,g,f){return _(),I(de,{ref:"componentRef",flat:"",square:"",bordered:"",class:"col-12 col-md-10"},{default:t(()=>{var n;return[a(se,{class:"q-pa-none"},{default:t(()=>[a(Ma,{onSubmit:e.sendQuery,ref:"formRef"},{default:t(()=>{var r,l;return[a(Ce,{square:"",filled:"","bottom-slots":!!e.response,modelValue:e.query,"onUpdate:modelValue":o[1]||(o[1]=p=>e.query=p),disable:e.isBusy,clearable:"",label:e.t("reader.demo.your_statement")},_a({prepend:t(()=>[a(we,{modelValue:e.isDeepDive,"onUpdate:modelValue":o[0]||(o[0]=p=>e.isDeepDive=p),disable:e.isBusy,"checked-icon":"biotech","icon-color":"black","unchecked-icon":"bolt"},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("reader.demo.headers.deepdive")),1)]),_:1})]),_:1},8,["modelValue","disable"])]),append:t(()=>[a(J,{square:"",flat:"",icon:"send",padding:"md",loading:e.isBusy,onClick:e.sendQuery,type:"submit"},null,8,["loading"])]),_:2},[(r=e.response)!=null&&r.name||(l=e.response)!=null&&l.message?{name:"hint",fn:t(()=>[X("span",vo,[b(m(e.response.name||e.response.message)+" ",1),e.response.readableMessage?(_(),I(re,{key:0},{default:t(()=>[b(m(e.response.readableMessage),1)]),_:1})):U("",!0)])]),key:"0"}:e.response?{name:"hint",fn:t(()=>{var p;return[a(ge,{icon:"timer",label:`${e.responseTimeString}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"]),a(ge,{icon:"straighten",label:`${e.formatNumber(((p=e.responseData)==null?void 0:p.usage.tokens)||0)} ${e.t("embedding.tokens")}`,size:"sm",class:"text-dim bg-transparent"},null,8,["label"])]}),key:"1"}:void 0]),1032,["bottom-slots","modelValue","disable","label"])]}),_:1},512)]),_:1}),e.isBusy?(_(),I(Me,{key:0,indeterminate:"",size:"1px"})):U("",!0),e.responseData?(_(),I(se,{key:1,class:"q-mt-lg"},{default:t(()=>[a(W,null,{default:t(()=>[a(K,{side:""},{default:t(()=>[a(fo,{"show-value":"",value:e.factuality,size:"60px",thickness:.1,color:e.factuality>50?"positive":"negative","track-color":"surface-mixed-200"},{default:t(()=>{var r,l;return[a(te,{name:(r=e.responseData)!=null&&r.result?"check":"close",color:(l=e.responseData)!=null&&l.result?"accent":"negative",size:"30px"},null,8,["name","color"])]}),_:1},8,["value","color"])]),_:1}),a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.responseData.result?e.t("reader.demo.grounding_result_true"):e.t("reader.demo.grounding_result_false")),1)]),_:1}),a(O,{caption:""},{default:t(()=>{var r;return[b(m((r=e.responseData)==null?void 0:r.reason),1)]}),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(ga,{outline:"",square:""},{default:t(()=>{var r,l,p;return[a(J,{label:(r=e.supportiveNum)==null?void 0:r.length,icon:"thumb_up",square:"",onClick:o[2]||(o[2]=x=>e.onFilter(!0)),outline:""},null,8,["label"]),a(ce),a(J,{label:(((l=e.responseData)==null?void 0:l.references.length)||0)-((p=e.supportiveNum)==null?void 0:p.length),icon:"thumb_down",square:"",onClick:o[3]||(o[3]=x=>e.onFilter(!1)),outline:""},null,8,["label"])]}),_:1})]),_:1})]),_:1})]),_:1})):U("",!0),(n=e.responseData)!=null&&n.references.length?(_(),I(se,{key:2},{default:t(()=>[a(ze,null,{default:t(()=>[a(ea,{name:"list2"},{default:t(()=>[(_(!0),ae(ue,null,he(e.references,r=>(_(),I(W,{clickable:"",key:r.url,href:r.url,target:"_blank",class:"card-details"},{default:t(()=>[a(K,{avatar:""},{default:t(()=>[a(te,{name:r.isSupportive?"thumb_up":"thumb_down",color:r.isSupportive?"positive":"negative"},null,8,["name","color"])]),_:2},1024),a(K,null,{default:t(()=>[a(O,{lines:"1",class:"text-italic"},{default:t(()=>[b("... "+m(r.keyQuote)+" ...",1)]),_:2},1024),a(O,{caption:""},{default:t(()=>[a(ge,{square:"",size:"sm",icon:`img:https://www.google.com/s2/favicons?sz=32&domain_url=${r.url}`,label:r.url,class:"text-caption q-mx-none bg-mixed-200",style:{"max-width":"60%"}},null,8,["icon","label"])]),_:2},1024)]),_:2},1024),a(K,{side:""},{default:t(()=>[a(te,{name:"open_in_new",size:"xs",class:"read-more-btn"})]),_:1})]),_:2},1032,["href"]))),128))]),_:1})]),_:1})]),_:1})):U("",!0)]}),_:1},512)}const ho=_e(yo,[["render",po],["__file","GroundingDemoComponent.vue"]]),bo=me({__name:"GroundingTab",setup(c,{expose:o}){o();const s={GroundingDemoComponent:ho};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function ko(c,o,s,e,g,f){return _(),I(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.GroundingDemoComponent,{"use-lazy-loading":!1})]),_:1})}const wo=_e(bo,[["render",ko],["__scopeId","data-v-0622c9bb"],["__file","GroundingTab.vue"]]),ia="https://llm-serp.jina.ai",Eo=me({__name:"UsageComponent",setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global"}),e=Re(),g=De(),{apiKey:f}=be(g),n=E(!1),r=E({}),l=E({q:"jina ai",location:""}),p=F(()=>{const S={};for(const[w,j]of Object.entries(l.value))j&&(S[w]=j);return S}),x=E({}),y=E([{header:"Authorization",value:`Bearer ${f.value}`,label:"auth_token",type:"toggle",url:"/api-dashboard/rate-limit",get disabled(){return!f.value},get indicator(){return!!x.value[this.header]},set(S){S?x.value[this.header]=this.value:delete x.value[this.header]}},{label:"country",type:"select",value:l.value.gl,options:[{value:"Default"},...wt],indicator:!0,set(S){if(this.value=S,S==="Default"){delete l.value.gl;return}l.value.gl=S},init(){this.value="Default"}},{label:"location",type:"text",value:l.value.location,indicator:!0,set(S){this.value=S,l.value.location=S}},{label:"language",type:"select",value:l.value.hl,indicator:!0,options:[{value:"Default"},...Et],set(S){if(this.value=S,S==="Default"){delete l.value.hl;return}l.value.hl=S},init(){this.value="Default"}},{label:"number",type:"select",options:[{value:10},{value:20},{value:30}],value:l.value.num,set(S){this.value=S||null;const w=Number(this.value);if(w===10){delete l.value.num;return}l.value.num=w},init(){this.set(10)}},{label:"page",type:"number",min:1,indicator:!0,value:l.value.page,set(S){this.value=S||null;const w=Number(this.value);if(w===1){delete l.value.page;return}l.value.page=w},init(){this.set(1)}}]),D=F(()=>{for(const C of y.value)C.disabled&&C.set(!1);const S=["Content-Type: application/json"];for(const[C,R]of Object.entries(x.value))if(R){if(typeof R=="string")S.push(`${C}: ${R}`);else if(Array.isArray(R))for(const A of R)S.push(`${C}: ${A}`)}const w=S.map(C=>`  -H "${C}"`).join(`\\
`);return`
\`\`\`bash
${[`curl ${ia}`,`${w}`,`  -d @- <<EOFEOF
  {
    ${JSON.stringify(p.value,null,4).slice(1,-1).trim()}
  }
EOFEOF`].join(` \\
`)}
\`\`\`
  `}),k=E(!1),P=async()=>{if(!f.value||!p.value.q)return;r.value={};const S={"Content-Type":"application/json"};for(const w of y.value)w.indicator&&w.header&&(S[w.header]=w.value);n.value=!0,fetch(ia,{method:"POST",headers:S,body:JSON.stringify(p.value)}).then(async w=>{var j;if((j=w.headers.get("content-type"))!=null&&j.includes("text/event-stream")){if(w.body){r.value={status:w.status,statusText:w.statusText,eventStream:!0,data:[]};const C=w.body.getReader(),R=new TextDecoder;for(;;){const{done:A,value:h}=await C.read();if(A){k.value=!1,n.value=!1;break}h&&(k.value=!0,R.decode(h).split(`

`).forEach(i=>{const v=i.split(`
`).find(B=>B.startsWith("data: "));if(!v)return;const L=v.replace(/data: /g,"");try{L&&r.value.data.push(L)}catch(B){console.error("Error:",B)}}))}}}else{r.value={status:w.status,statusText:w.statusText};const C=await w.json();r.value.data={status:w.status,type:"json",content:C}}}).catch(w=>{console.error("Error:",w),r.value={status:500,data:w.message}}).finally(()=>{n.value=!1,k.value=!1})};Be(()=>{y.value.forEach(S=>{S.init&&S.init()})});const H={t:s,$q:e,embeddingStore:g,apiKey:f,isBusy:n,response:r,payload:l,BASE_URL:ia,adaptablePayload:p,headers:x,availableParameters:y,adaptableCode:D,isStreaming:k,onExecute:P,UsageHeader:Tt,APIPanel:St};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}});function To(c,o,s,e,g,f){return _(),I(de,{flat:"",square:"",class:"column no-wrap full-height"},{default:t(()=>[a(e.UsageHeader,{"home-link":"/llm-serp-demo","issue-link":"https://github.com/jina-ai/node-serp/issues","is-support-c-s-p":!1,"api-link":""}),a(ce),a(se,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none",style:{"flex-grow":"1"}},{default:t(()=>[a(se,{class:"col-md-6 col-lg-5 col-xl-4 q-pa-none"},{default:t(()=>[a(ze,{class:"full-width"},{default:t(()=>[a(ea,{name:"list2"},{default:t(()=>[a(W,{key:"query",class:"q-pa-none"},{default:t(()=>[a(K,null,{default:t(()=>[a(Ce,{type:"textarea",rows:"1",modelValue:e.payload.q,"onUpdate:modelValue":o[0]||(o[0]=n=>e.payload.q=n),class:"full-width text-caption",filled:"",square:"","hide-bottom-space":"",label:e.t("llm_serp.query_label"),rules:[n=>!!n]},{prepend:t(()=>[a(te,{name:"search"})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1}),(_(!0),ae(ue,null,he(e.availableParameters,n=>(_(),ae(ue,{key:n.label},[n.disabled?U("",!0):(_(),I(W,{tag:"label",key:n.label},{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t(`llm_serp.parameters.${n.label}`)),1)]),_:2},1024),a(O,{caption:"",innerHTML:e.t(`llm_serp.parameters.${n.label}_explain`)},null,8,["innerHTML"]),n.url?(_(),I(O,{key:0,caption:"",class:"q-pt-sm"},{default:t(()=>[a(J,{href:n.url,label:e.t("deepsearch.learn_more"),size:"xs",outline:"",square:"",icon:"open_in_new",target:"_blank"},null,8,["href","label"])]),_:2},1024)):U("",!0)]),_:2},1024),n.type==="toggle"?(_(),I(K,{key:0,side:""},{default:t(()=>[a(we,{disable:n.disabled,"model-value":n.indicator,"onUpdate:modelValue":r=>n.set(r)},null,8,["disable","model-value","onUpdate:modelValue"])]),_:2},1024)):n.type==="text"||n.type==="number"?(_(),I(K,{key:1,side:""},{default:t(()=>[a(Ce,{"model-value":n.value,"onUpdate:modelValue":r=>n.set(r),filled:"",square:"",type:n.type,min:n.min,style:{"max-width":"100px"},disable:!n.indicator},null,8,["model-value","onUpdate:modelValue","type","min","disable"])]),_:2},1024)):n.type==="select"?(_(),I(K,{key:2,side:""},{default:t(()=>[a(Le,{modelValue:n.value,"onUpdate:modelValue":[r=>n.value=r,r=>n.set(r)],options:n.options,style:{"min-width":"100px"},filled:"",square:"","hide-bottom-space":"","emit-value":"","map-options":""},{option:t(({opt:r,itemProps:l})=>[a(W,$e({ref_for:!0},l),{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[X("code",null,m(r.value),1)]),_:2},1024),a(O,{caption:""},{default:t(()=>[b(m(r.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),selected:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[X("code",null,m(n.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):U("",!0)]),_:2},1024))],64))),128))]),_:1})]),_:1})]),_:1}),a(ce,{vertical:e.$q.screen.gt.sm},null,8,["vertical"]),a(e.APIPanel,{code:e.adaptableCode,onExecute:e.onExecute,loading:e.isBusy,"is-streaming":e.isStreaming,response:e.response,disabled:!e.apiKey},null,8,["code","loading","is-streaming","response","disabled"])]),_:1},8,["horizontal"])]),_:1})}const So=_e(Eo,[["render",To],["__file","UsageComponent.vue"]]),Ro=me({__name:"CostEstimator",setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global",inheritLocale:!0}),e=Fe(),g=E("quarterly"),f=E(!1),n=E("business"),r=E(5);Ze(n,u=>{r.value=u==="business"?5:1e4});const l=E("standard"),p=E(3),x=E(!1),y=E("steady"),D=E({"jina-embeddings":!0,"jina-clip":!1,"jina-colbert":!1,"jina-reranker":!1,ReaderLM:!1}),k=E("standard"),P=E(!1),H=E(!1),S=E(!1),w={usageTiers:{business:[{limit:5,price:0},{limit:10,price:2e3},{limit:25,price:5e3},{limit:50,price:1e4},{limit:100,price:2e4}],consumer:[{limit:1e4,price:0},{limit:5e4,price:2e3},{limit:1e5,price:5e3},{limit:5e5,price:1e4},{limit:1e6,price:2e4}]},modelPrices:{"jina-embeddings":0,"jina-clip":5e3,"jina-colbert":3e3,"jina-reranker":4e3,ReaderLM:2e3},supportTiers:{standard:0,premium:5e3,enterprise:15e3},features:{priorityResponse:2e3,dedicatedCSM:8e3,customModelTraining:1e4},basePrice:5e3},j=F(()=>{let u=w.basePrice;const v=w.usageTiers[n.value],L=v.find((B,M)=>r.value<=B.limit||M===v.length-1);if(u+=(L==null?void 0:L.price)||0,Object.entries(D.value).forEach(([B,M])=>{M&&w.modelPrices[B]>0&&(u+=w.modelPrices[B])}),u+=w.supportTiers[k.value],P.value&&(u+=w.features.priorityResponse),H.value&&(u+=w.features.dedicatedCSM),S.value&&(u+=w.features.customModelTraining),l.value==="poc")u=u*.4;else if(l.value==="department"){let B=.15;const M={limited:1,steady:.95,high:.9};x.value&&(u=u*1.1,B=.25),u=u*(1-B)*M[y.value]}return{monthly:u/3,quarterly:u,annual:u*4*.9,final:f.value?u*4*.9:u}}),C=[{label:s("estimator.labels.upTo",{count:5}),value:5},{label:s("estimator.labels.upTo",{count:10}),value:10},{label:s("estimator.labels.upTo",{count:25}),value:25},{label:s("estimator.labels.upTo",{count:50}),value:50},{label:s("estimator.labels.upTo",{count:100}),value:100}],R=[{label:s("estimator.labels.upTo",{count:1e4}),value:1e4},{label:s("estimator.labels.upTo",{count:5e4}),value:5e4},{label:s("estimator.labels.upTo",{count:1e5}),value:1e5},{label:s("estimator.labels.upTo",{count:5e5}),value:5e5},{label:s("estimator.labels.upTo",{count:1e6}),value:1e6}],A=F(()=>n.value==="business"&&r.value>100||n.value==="consumer"&&r.value>1e6),h=F({get(){return Object.entries(D.value).filter(([,u])=>u).map(([u])=>u)},set(u){for(let v of Object.keys(D.value))D.value[v]=!1;u.forEach(v=>{D.value[v]=!0})}}),T=["jina-embeddings","jina-clip","jina-colbert","jina-reranker","ReaderLM"],V=F(()=>[l.value==="standard"&&{title:s("estimator.messaging.standardFeatures"),icon:null,items:[{label:s("estimator.messaging.baseModelIncluded"),hasCheckmark:!0},{label:s("estimator.messaging.supportTierIncluded",{tier:s(`estimator.support.${k.value}`),hours:s("estimator.support.hoursQuarter",{hours:k.value==="standard"?10:k.value==="premium"?25:40})}),hasCheckmark:!0},{label:s(n.value==="business"?"estimator.messaging.usageTierBusiness":"estimator.messaging.usageTierConsumer",{count:r.value.toLocaleString()}),hasCheckmark:!0}]},h.value.length>1&&{title:s("estimator.messaging.selectedModels"),icon:"info",items:h.value.map(u=>({label:u}))},(P.value||H.value||S.value)&&{title:s("estimator.messaging.additionalFeatures"),icon:"info",items:[P.value&&{label:s("estimator.features.priority")},H.value&&{label:s("estimator.features.csm")},S.value&&{label:s("estimator.features.training")}].filter(Boolean)},l.value==="poc"&&{title:s("estimator.messaging.pocIncludes"),icon:"info",items:[{label:s("estimator.messaging.pocMetrics")},{label:s("estimator.messaging.pocCheckins")},{label:s("estimator.messaging.pocMigration")}]},l.value==="department"&&{title:s("estimator.messaging.deptIncludes"),icon:"info",items:[{label:s("estimator.messaging.deptReviews")},{label:s("estimator.messaging.deptRoadmap")},x.value&&{label:s("estimator.messaging.deptSponsor")},y.value==="high"&&{label:s("estimator.messaging.deptWorkshops")}].filter(Boolean)},A.value&&{title:s("estimator.messaging.enterpriseAlert"),icon:"warning",isAlert:!0,items:[]}].filter(Boolean));it(()=>{e.setLicenseConfig({contractType:l.value,pocDuration:p.value,hasBusinessSponsor:l.value==="department"?x.value:void 0,expectedGrowth:l.value==="department"?y.value:void 0,selectedModels:h.value,supportTier:k.value,priorityResponse:P.value,dedicatedCSM:H.value,customModelTraining:S.value,usageType:n.value,usageCount:r.value,paymentFrequency:f.value?"annual":"quarterly",price:j.value.final})});const i={t:s,userStore:e,paymentFrequency:g,isAnnual:f,usageType:n,usageCount:r,contractType:l,pocDuration:p,hasBusinessSponsor:x,expectedGrowth:y,selectedModels:D,supportTier:k,priorityResponse:P,dedicatedCSM:H,customModelTraining:S,prices:w,calculateTotalPrice:j,businessUsageOptions:C,consumerUsageOptions:R,showEnterpriseAlert:A,selectedModelsArray:h,allModelOptions:T,featuresSections:V};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function xo(c,o,s,e,g,f){return _(),I(de,{flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(se,{horizontal:c.$q.screen.gt.sm,class:"full-height"},{default:t(()=>[a(ze,{class:"col"},{default:t(()=>[a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.models.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.models.description")),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Le,{square:"",modelValue:e.selectedModelsArray,"onUpdate:modelValue":o[0]||(o[0]=n=>e.selectedModelsArray=n),multiple:"",options:e.allModelOptions,"use-chips":"","emit-value":"",filled:"",label:e.t("estimator.labels.selectAll")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.contractType.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t(`estimator.descriptions.contractType.${e.contractType}`)),1)]),_:1})]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(oa,{modelValue:e.contractType,"onUpdate:modelValue":o[1]||(o[1]=n=>e.contractType=n),options:[{label:e.t("estimator.contractType.standard"),value:"standard"},{label:e.t("estimator.contractType.department"),value:"department"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),e.contractType==="poc"?(_(),I(W,{key:0},{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("estimator.poc.duration")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.poc.description")),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Rt,{modelValue:e.pocDuration,"onUpdate:modelValue":o[2]||(o[2]=n=>e.pocDuration=n),min:3,max:6,step:1,label:"","label-always":""},null,8,["modelValue"])]),_:1})]),_:1})):U("",!0),e.contractType==="department"?(_(),ae(ue,{key:1},[a(W,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.department.executionModel")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.department.sponsorDescription")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.hasBusinessSponsor,"onUpdate:modelValue":o[3]||(o[3]=n=>e.hasBusinessSponsor=n),label:e.t("estimator.department.businessSponsor")},null,8,["modelValue","label"])]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.department.growthTitle")),1)]),_:1})]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(oa,{modelValue:e.expectedGrowth,"onUpdate:modelValue":o[5]||(o[5]=n=>e.expectedGrowth=n),options:[{label:e.t("estimator.department.growth.limited"),value:"limited",caption:e.t("estimator.department.growth.limitedDesc")},{label:e.t("estimator.department.growth.steady"),value:"steady",caption:e.t("estimator.department.growth.steadyDesc")},{label:e.t("estimator.department.growth.high"),value:"high",caption:e.t("estimator.department.growth.highDesc")}],type:"radio"},{item:t(({opt:n,index:r})=>[qe((_(),I(W,{tag:"label"},{default:t(()=>[a(K,{avatar:""},{default:t(()=>[a(Ca,{modelValue:e.expectedGrowth,"onUpdate:modelValue":o[4]||(o[4]=l=>e.expectedGrowth=l),val:n.value},null,8,["modelValue","val"])]),_:2},1024),a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(n.label),1)]),_:2},1024),a(O,{caption:""},{default:t(()=>[b(m(n.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ut]])]),_:1},8,["modelValue","options"])]),_:1})],64)):U("",!0),a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.usage.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t(`estimator.descriptions.usage.${e.usageType}`)),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Le,{class:"full-width",square:"",modelValue:e.usageCount,"onUpdate:modelValue":o[6]||(o[6]=n=>e.usageCount=n),options:e.usageType==="business"?e.businessUsageOptions:e.consumerUsageOptions,label:e.usageType==="business"?e.t("estimator.usage.businessCount"):e.t("estimator.usage.consumerCount"),filled:"","emit-value":"","map-options":"","option-label":"label","option-value":"value"},null,8,["modelValue","options","label"])]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(oa,{modelValue:e.usageType,"onUpdate:modelValue":o[7]||(o[7]=n=>e.usageType=n),options:[{label:e.t("estimator.usage.business"),value:"business"},{label:e.t("estimator.usage.consumer"),value:"consumer"}],type:"radio"},null,8,["modelValue","options"])]),_:1}),a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.support.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t(`estimator.descriptions.support.${e.supportTier}`)),1)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(Le,{modelValue:e.supportTier,"onUpdate:modelValue":o[8]||(o[8]=n=>e.supportTier=n),options:[{label:e.t("estimator.support.hoursQuarter",{hours:10}),value:"standard"},{label:e.t("estimator.support.hoursQuarter",{hours:25}),value:"premium"},{label:e.t("estimator.support.hoursQuarter",{hours:40}),value:"enterprise"}],filled:"",square:"","emit-value":"","map-options":"","option-label":"label","option-value":"value",label:e.t("estimator.labels.selectSupport")},null,8,["modelValue","options","label"])]),_:1})]),_:1}),e.contractType!=="poc"?(_(),ae(ue,{key:2},[a(W,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.features.title")),1)]),_:1})]),_:1}),a(W,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("estimator.features.priority")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.descriptions.features.priority")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.priorityResponse,"onUpdate:modelValue":o[9]||(o[9]=n=>e.priorityResponse=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(W,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("estimator.features.csm")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.descriptions.features.csm")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.dedicatedCSM,"onUpdate:modelValue":o[10]||(o[10]=n=>e.dedicatedCSM=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(W,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(e.t("estimator.features.training")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t("estimator.descriptions.features.training")),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.customModelTraining,"onUpdate:modelValue":o[11]||(o[11]=n=>e.customModelTraining=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):U("",!0)]),_:1}),a(ce,{vertical:c.$q.screen.gt.sm},null,8,["vertical"]),a(de,{class:"col-4 bg-mixed-200",flat:"",square:""},{default:t(()=>[a(se,{class:"q-pa-none"},{default:t(()=>[a(ze,{dense:""},{default:t(()=>[a(W,{class:"q-my-lg"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,{overline:""},{default:t(()=>[b(m(e.t("estimator.pricing.title")),1)]),_:1}),a(ea,{name:"list2"},{default:t(()=>[(_(),I(O,{key:e.calculateTotalPrice.final,class:"text-h5 q-py-md"},{default:t(()=>[b(m(e.contractType==="poc"?e.t("estimator.pricing.oneTime",{price:Math.round(e.calculateTotalPrice.monthly*e.pocDuration).toLocaleString()}):e.t("estimator.pricing.frequency",{price:e.calculateTotalPrice[e.isAnnual?"final":"quarterly"].toLocaleString(),frequency:e.t(`estimator.pricing.${e.isAnnual?"annual":"quarterly"}`)})),1)]),_:1}))]),_:1}),a(O,{caption:"",class:"text-dim"},{default:t(()=>[b(m(e.t("estimator.pricing.disclaimer")),1)]),_:1})]),_:1})]),_:1}),a(W,{tag:"label"},{default:t(()=>[a(K,null,{default:t(()=>[a(O,{class:"text-bold"},{default:t(()=>[b(m(e.t("estimator.payment.title")),1)]),_:1}),a(O,{caption:""},{default:t(()=>[b(m(e.t(`estimator.descriptions.payment.${e.isAnnual?"annual":"quarterly"}`)),1)]),_:1})]),_:1}),a(K,{side:""},{default:t(()=>[a(we,{modelValue:e.isAnnual,"onUpdate:modelValue":o[12]||(o[12]=n=>e.isAnnual=n),label:e.t("estimator.payment.annual"),"checked-icon":"percent"},null,8,["modelValue","label"])]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(J,{square:"",outline:"",icon:"handshake",label:e.t("estimator.pricing.cta"),padding:"lg",class:"full-width q-my-lg",to:"/contact-sales?license-config=true"},null,8,["label"])]),_:1}),a(ce),(_(!0),ae(ue,null,he(e.featuresSections,n=>(_(),ae(ue,{key:n.title},[a(O,{header:""},{default:t(()=>[b(m(n.title),1)]),_:2},1024),(_(!0),ae(ue,null,he(n.items,(r,l)=>(_(),I(W,{key:l},{default:t(()=>[a(K,{side:""},{default:t(()=>[a(te,{name:"task_alt",size:"xs"})]),_:1}),a(K,null,{default:t(()=>[a(O,null,{default:t(()=>[b(m(r.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["horizontal"])]),_:1})}const Io=_e(Ro,[["render",xo],["__file","CostEstimator.vue"]]),Do=me({__name:"ReaderDecideComponent",props:{originalURL:{type:String,default:""},disableQA:{type:Boolean,default:!1},disableOriginalURL:{type:Boolean,default:!1}},setup(c,{expose:o}){o();const{t:s}=fe({useScope:"global"}),e=De(),g=Re(),f=E(!0),n=E(!0),r=E(!1),l=c,p=E(l.originalURL||"https://jina.ai/news/a-practical-guide-to-implementing-deepsearch-deepresearch"),x=E(["engine_default","engine_default_timeout","engine_default_markdown","engine_default_html","browser","direct","cf_browser"]),y=E(x.value.reduce((i,u)=>(i[u]={content:"",timing:null,contentLength:null,isLoading:!1},i),{})),D=E(!1),k=i=>{const u=`https://r.jina.ai/${p.value}`,v=f.value?`"Authorization: Bearer ${e.apiKey}"`:"",L=n.value?'"X-No-Cache: true"':"";let B=`\`\`\`bash
curl ${u}`,M=!1;return i==="engine_default_markdown"?(B+=` \\
  -H "X-Return-Format: markdown"`,M=!0):i==="engine_default_html"?(B+=` \\
  -H "X-Return-Format: html"`,M=!0):i==="engine_default_timeout"?(B+=` \\
  -H "X-Timeout: 5"`,M=!0):i==="browser"?(B+=` \\
  -H "X-Engine: browser"`,M=!0):i==="cf_browser"?(B+=` \\
  -H "X-Engine: cf-browser-rendering"`,M=!0):i==="direct"&&(B+=` \\
  -H "X-Engine: direct"`,M=!0),n.value&&(B+=`${M?"":" \\"}
  -H ${L}`,M=!0),f.value&&(B+=`${M?"":" \\"}
  -H ${v}`),B+="\n```",B},P=i=>{const u={};return f.value&&(u.Authorization=`Bearer ${e.apiKey}`),n.value&&(u["X-No-Cache"]="true"),i==="engine_default_timeout"?u["X-Timeout"]="5":i==="engine_default_html"?u["X-Return-Format"]="html":i==="engine_default_markdown"?u["X-Return-Format"]="markdown":i==="browser"?u["X-Engine"]="browser":i==="cf_browser"?u["X-Engine"]="cf-browser-rendering":i==="direct"&&(u["X-Engine"]="direct"),u},H=async i=>{const u=`https://r.jina.ai/${p.value}`;y.value[i].isLoading=!0;const v=performance.now();try{const L=await fetch(u,{headers:P(i)}),B=performance.now();if(y.value[i].timing=Math.round(B-v),!L.ok){y.value[i].content=await L.json();return}const M=await L.text();y.value[i].contentLength=M.length,y.value[i].content=M}catch(L){y.value[i].content=L instanceof Error?L.message:String(L),y.value[i].contentLength=0,y.value[i].timing=0}finally{y.value[i].isLoading=!1}},S=async()=>{r.value=!0,D.value=!0,x.value.forEach(i=>{y.value[i]={content:"",timing:null,contentLength:null,isLoading:!0}});try{await Promise.all(x.value.map(i=>H(i)))}finally{D.value=!1}},w=F(()=>Object.values(y.value).some(i=>i.timing!==null)),j=F(()=>{let i=0;for(const u of x.value)y.value[u].timing!==null&&y.value[u].timing>i&&(i=y.value[u].timing);return i>0?i:1}),C=F(()=>{let i=0;for(const u of x.value)y.value[u].contentLength!==null&&y.value[u].contentLength>i&&(i=y.value[u].contentLength);return i>0?i:1}),V={t:s,embeddingStore:e,$q:g,useAuth:f,useNoCache:n,fetchWasClicked:r,props:l,originalURL:p,paramsGroup:x,results:y,isLoading:D,getReaderCode:k,getHeaders:P,fetchForParam:H,fetchAllURLs:S,hasResults:w,maxTiming:j,maxContentLength:C,getTimingPercentage:i=>y.value[i].timing===null?0:y.value[i].timing/j.value,getLengthPercentage:i=>y.value[i].contentLength===null?0:y.value[i].contentLength/C.value,getBarColor:i=>({engine_default:"primary",engine_default_timeout:"info",engine_default_markdown:"warning",engine_default_html:"negative",browser:"secondary",direct:"accent",cf_browser:"positive"})[i]||"primary",formatBytes:i=>{if(i===0)return"0 Bytes";const u=1024,v=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(i)/Math.log(u));return parseFloat((i/Math.pow(u,L)).toFixed(2))+" "+v[L]},get QInput(){return Ce}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Po={class:"row q-mt-sm"},Ko={class:"text-h6 q-mb-md"},Vo={class:"q-mb-lg"},Lo={class:"text-subtitle2 q-mb-sm"},Co={class:"col-3 text-right q-pr-md"},Ao={class:"col-8"},Oo={class:"absolute-full flex flex-center"},qo={class:"text-subtitle2 q-mb-sm"},Mo={class:"col-3 text-right q-pr-md"},Bo={class:"col-8"},Uo={class:"absolute-full flex flex-center"},jo={class:"row items-center"},No={class:"overflow-auto q-px-xs"};function Ho(c,o,s,e,g,f){const n=dt("q-markdown");return _(),I(de,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[a(se,{class:"q-pa-none"},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.originalURL,"onUpdate:modelValue":o[0]||(o[0]=r=>e.originalURL=r),label:e.t("reader.demo.your_url"),type:"url",loading:e.isLoading},null,8,["modelValue","label","loading"]),X("div",Po,[a(we,{modelValue:e.useAuth,"onUpdate:modelValue":o[1]||(o[1]=r=>e.useAuth=r),label:e.t("reader.demo.headers.auth_token"),size:"sm",icon:"o_key",class:"q-mr-md"},null,8,["modelValue","label"]),a(we,{modelValue:e.useNoCache,"onUpdate:modelValue":o[2]||(o[2]=r=>e.useNoCache=r),label:e.t("reader.demo.headers.no_cache"),size:"sm",icon:"o_cached"},null,8,["modelValue","label"])])]),_:1}),a(ce),a(se,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none"},{default:t(()=>[(_(!0),ae(ue,null,he(e.paramsGroup,(r,l)=>(_(),ae(ue,{key:r},[a(de,{class:"col q-pa-none",flat:"",square:""},{default:t(()=>[a(W,null,{default:t(()=>[a(K,null,{default:t(()=>[a(O,{lines:"1"},{default:t(()=>[b(m(e.t(`reader.demo.headers.${r}`)),1)]),_:2},1024),a(O,{caption:"",class:"text-dim",lines:"2"},{default:t(()=>[b(m(e.t(`reader.demo.headers.${r}_explain`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(n,{src:e.getReaderCode(r),"no-line-numbers":"","show-copy":"","copy-icon":"content_copy",class:"overflow-auto"},null,8,["src"])]),_:2},1024),l<e.paramsGroup.length-1?(_(),I(ce,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):U("",!0)],64))),128))]),_:1},8,["horizontal"]),a(ce),a(J,{square:"",label:e.t("reader.demo.fetch"),class:"full-width",icon:"download",onClick:e.fetchAllURLs,flat:"",padding:"md",loading:e.isLoading},null,8,["label","loading"]),e.fetchWasClicked?(_(),ae(ue,{key:0},[a(ce),e.hasResults?(_(),I(se,{key:0},{default:t(()=>[X("div",Ko,m(e.t("reader.demo.performance_compare")),1),X("div",Vo,[X("div",Lo,m(e.t("reader.demo.response_time")),1),(_(!0),ae(ue,null,he(e.paramsGroup,r=>(_(),ae("div",{class:"row items-center",key:r+"-time"},[X("div",Co,m(e.t(`reader.demo.headers.${r}`)),1),X("div",Ao,[a(Me,{value:e.getTimingPercentage(r),size:"25px",color:e.getBarColor(r),class:"q-mb-xs"},{default:t(()=>[X("div",Oo,[e.results[r].timing!==null?(_(),I(Ra,{key:0,color:"white","text-color":"black"},{default:t(()=>[b(m(e.results[r].timing)+"ms ",1)]),_:2},1024)):U("",!0)])]),_:2},1032,["value","color"])])]))),128))]),X("div",null,[X("div",qo,m(e.t("reader.demo.content_length")),1),(_(!0),ae(ue,null,he(e.paramsGroup,r=>(_(),ae("div",{class:"row items-center",key:r+"-length"},[X("div",Mo,m(e.t(`reader.demo.headers.${r}`)),1),X("div",Bo,[a(Me,{value:e.getLengthPercentage(r),size:"25px",color:e.getBarColor(r),class:"q-mb-xs"},{default:t(()=>[X("div",Uo,[e.results[r].contentLength!==null?(_(),I(Ra,{key:0,color:"white","text-color":"black"},{default:t(()=>[b(m(e.formatBytes(e.results[r].contentLength)),1)]),_:2},1024)):U("",!0)])]),_:2},1032,["value","color"])])]))),128))])]),_:1})):U("",!0),e.hasResults?(_(),I(ce,{key:1})):U("",!0),a(se,{horizontal:e.$q.screen.gt.sm,class:"q-pa-none overflow-auto"},{default:t(()=>[(_(!0),ae(ue,null,he(e.paramsGroup,(r,l)=>(_(),ae(ue,{key:r},[a(se,{class:"col column overflow-auto no-wrap q-pa-none"},{default:t(()=>[X("div",jo,[a(ge,{label:e.t(`reader.demo.headers.${r}`),size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim"},null,8,["label"]),e.results[r].timing!==null?(_(),I(ge,{key:0,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"timer"},{default:t(()=>[b(m(e.results[r].timing)+"ms ",1)]),_:2},1024)):U("",!0),e.results[r].contentLength!==null?(_(),I(ge,{key:1,size:"xs",outline:"",style:{"border-radius":"0"},class:"text-dim",icon:"straighten"},{default:t(()=>[b(m(e.formatBytes(e.results[r].contentLength)),1)]),_:2},1024)):U("",!0)]),e.isLoading&&!e.results[r].content?(_(),ae(ue,{key:0},he([100,300,200,200],p=>a(on,{type:"text",width:`${p}px`,key:p},null,8,["width"])),64)):U("",!0),X("pre",No,""+m(e.results[r].content)+`
          `,1)]),_:2},1024),l<e.paramsGroup.length-1?(_(),I(ce,{key:0,vertical:e.$q.screen.gt.sm},null,8,["vertical"])):U("",!0)],64))),128))]),_:1},8,["horizontal"]),a(ce)],64)):U("",!0)]),_:1})}const Go=_e(Do,[["render",Ho],["__file","ReaderDecideComponent.vue"]]),zo=`https://example1.png
https://example2.png`,Fo=me({inheritAttrs:!1,__name:"ImageRankComponent",setup(c,{expose:o}){o();const s=["https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-ai-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-ai-startup-landscape.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-chinese.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-Q2-ROSS.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-Q3-ROSS.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2021-top-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2022-ai-100.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2022-ai-startup-landscape.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023_agi_mvp_top_50.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023_ai_startup_german.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-Annual-Impactful-Tech-Company.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-Annual-Impactful-Tech-Team.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2023-China’s-High-Technology-Growth-Top-30.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2024_ai_startup_german.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/2024-wired.webp","https://raw.githubusercontent.com/jina-ai/image-assets/main/ai_hot_75.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/faz-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/forbes-ai-30.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/forbes-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/generative_developer_tools_Infrastructure.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/handelsblatt-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/juejin_top10.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/MIT_JINA_Cover1200.webp","https://raw.githubusercontent.com/jina-ai/image-assets/main/mit-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_1.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_2.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_3.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_4.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper_5.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-6.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-7.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-8.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-9.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-10.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/paper-11.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/preview.jpg","https://raw.githubusercontent.com/jina-ai/image-assets/main/tc-preview.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/video-apikey-holder.png","https://raw.githubusercontent.com/jina-ai/image-assets/main/wired-preview.png"],{t:e}=fe({useScope:"global"}),g=Re(),f=De(),{apiKey:n}=be(f),r=E(!1),l=E(""),p=E(s),x=E([]),y=E(!1),D=E(p.value.join(`
`)),k=E(""),P=E(!1),H=E(""),S=E(null),w=E(!0),j=["jina-embeddings-v4","jina-reranker-m0","jina-clip-v2","jina-clip-v1"],C=F(()=>{var v;return(v=x.value)!=null&&v.length?x.value.map(L=>({image:p.value[L.index],score:L.relevance_score})):p.value.map(L=>({image:L,score:null}))}),R=()=>{var v;switch((v=S.value)==null?void 0:v.name){case"jina-clip-v1":return ha;case"jina-clip-v2":return ha;default:return ct}},A=async()=>{var ne,G,$,ye;const v=`${ka}/v1/embeddings`,L={"Content-Type":"application/json",Authorization:`Bearer ${n.value}`},B={model:(ne=S.value)==null?void 0:ne.name,input:[{text:l.value}]},M=await fetch(v,{method:"POST",headers:L,body:JSON.stringify(B)});if(!M.ok){const ie=((G=await M.json())==null?void 0:G.detail)||`${M.status}: ${M.statusText}`;throw new Error(ie)}const Z=(await M.json()).data[0].embedding,N=16,Q=[];for(let ie=0;ie<p.value.length;ie+=N){const ke=p.value.slice(ie,ie+N),Pe={model:($=S.value)==null?void 0:$.name,input:ke.map(q=>({image:q}))},Te=await fetch(v,{method:"POST",headers:L,body:JSON.stringify(Pe)});if(!Te.ok){const q=((ye=await Te.json())==null?void 0:ye.detail)||`${Te.status}: ${Te.statusText}`;throw new Error(q)}const Oe=await Te.json();Q.push(...Oe.data.map(q=>q.embedding)),ie+N<p.value.length&&await new Promise(q=>setTimeout(q,500))}const le=Q.map((ie,ke)=>{const Pe=xt(Z,ie);return{index:ke,relevance_score:Pe}});le.sort((ie,ke)=>ke.relevance_score-ie.relevance_score),x.value=le},h=async()=>{var Z;const v=`${ka}/v1/rerank`,L={"Content-Type":"application/json",Authorization:`Bearer ${n.value}`},B={model:"jina-reranker-m0",query:l.value,documents:p.value.map(N=>({image:N})),return_documents:!1},M=await fetch(v,{method:"POST",headers:L,body:JSON.stringify(B)});if(!M.ok){const N=((Z=await M.json())==null?void 0:Z.detail)||`${M.status}: ${M.statusText}`;throw new Error(N)}const Y=await M.json();x.value=Y.results},u={IMAGE_ASSETS:s,PLACEHOLDER:zo,t:e,$q:g,embeddingStore:f,apiKey:n,isLoading:r,query:l,images:p,rankResult:x,showImageCollection:y,imagesInput:D,errorMsg:k,showImageDialog:P,selectedImage:H,currentModel:S,isModelsLoading:w,allowedModels:j,imageList:C,getIcon:R,rankImagesWithClip:A,rankImagesWithM0:h,runRankWorkflow:async()=>{var v;if(l.value){r.value=!0,k.value="";try{((v=S.value)==null?void 0:v.name)==="jina-reranker-m0"?await h():await A()}catch(L){k.value=L instanceof Error?L.message:String(L)}finally{r.value=!1}}},addImages:()=>{D.value&&(p.value=D.value.split(/\n|,\n|;/).map(v=>v.trim().replace(/"|'/g,"")).filter(v=>v),x.value=[])},onModelItemClick:v=>{S.value=v},get QInput(){return Ce},ModelDropDown:Oa};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Qo={class:"row full-width"},Yo={class:"text-negative text-caption"},Wo={class:"text-caption fit error-image"},Xo={class:"text-subtitle1 q-ma-none"},Jo={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};function Zo(c,o,s,e,g,f){return _(),ae(ue,null,[a(de,{square:"",flat:"",class:"column no-wrap full-height"},{default:t(()=>[X("div",Qo,[a(J,{flat:"",stretch:"",square:"",label:e.t("reranker.demo.add_images"),icon:"add_photo_alternate",onClick:o[0]||(o[0]=n=>e.showImageCollection=!0),disable:e.isLoading||e.isModelsLoading},null,8,["label","disable"]),a(e.ModelDropDown,{currentModel:e.currentModel,indicator:!1,label:e.t("reranker.demo.model_selector_label"),"default-model-name":"jina-embeddings-v4","model-list":e.allowedModels,onChooseModel:e.onModelItemClick,onModelsLoaded:o[1]||(o[1]=n=>e.isModelsLoading=!1),style:{width:"300px"}},{prepend:t(()=>[a(te,{name:"img:"+e.getIcon(),class:"q-mr-xs"},null,8,["name"])]),_:1},8,["currentModel","label"]),a(Ma,{onSubmit:pe(e.runRankWorkflow,["prevent"]),class:"col"},{default:t(()=>[a(e.QInput,{filled:"",modelValue:e.query,"onUpdate:modelValue":o[2]||(o[2]=n=>e.query=n),type:"search",placeholder:e.t("reranker.demo.your_query"),loading:e.isLoading||e.isModelsLoading,disable:e.isLoading||e.isModelsLoading,square:""},{prepend:t(()=>[a(te,{name:"search"})]),_:1},8,["modelValue","placeholder","loading","disable"])]),_:1})]),e.isLoading||e.isModelsLoading?(_(),I(Me,{key:0,indeterminate:"",size:"1px"})):U("",!0),e.errorMsg?(_(),I(se,{key:1},{default:t(()=>[X("span",Yo,m(e.errorMsg),1)]),_:1})):U("",!0),a(ce),a(se,{class:"row q-gutter-xs q-pa-xs"},{default:t(()=>[a(ea,{name:"list2"},{default:t(()=>[(_(!0),ae(ue,null,he(e.imageList,n=>(_(),I(de,{key:n.image,flat:"",square:"",bordered:"",class:"flex items-center justify-center",style:{width:"200px",height:"200px"},onClick:r=>{e.selectedImage=n.image,e.showImageDialog=!0}},{default:t(()=>[a(da,{src:n.image,style:{"max-height":"100%","max-width":"100%"}},{error:t(()=>[X("div",Wo,[a(te,{name:"error",class:"on-left"}),b(" "+m(e.t("reranker.demo.image_error"))+": ",1),o[6]||(o[6]=X("br",null,null,-1)),b(m(n.image),1)])]),_:2},1032,["src"]),n.score!==null?(_(),I(se,{key:0,class:"q-pa-none absolute-bottom lock-blur full-width text-center"},{default:t(()=>[a(ge,{square:"",icon:"readiness_score",label:Number(n.score).toFixed(4),class:"bg-dark-transparent",style:{"font-family":"monospace","border-radius":"0"}},{default:t(()=>[a(re,null,{default:t(()=>[b(m(e.t("reranker.demo.relevance_score",{_score:n.score})),1)]),_:2},1024)]),_:2},1032,["label"])]),_:2},1024)):U("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(Ne,{modelValue:e.showImageCollection,"onUpdate:modelValue":o[4]||(o[4]=n=>e.showImageCollection=n),maximized:e.$q.screen.lt.md},{default:t(()=>[a(de,{flat:"",class:"q-pa-md",style:Va({minWidth:e.$q.screen.lt.md?"100vw":"50vw"})},{default:t(()=>[a(se,null,{default:t(()=>[X("p",Xo,m(e.t("reranker.demo.image_collection")),1),qe(a(J,{flat:"",icon:"close",class:"absolute-top-right"},null,512),[[He]])]),_:1}),a(se,null,{default:t(()=>[a(e.QInput,{modelValue:e.imagesInput,"onUpdate:modelValue":[o[3]||(o[3]=n=>e.imagesInput=n),e.addImages],filled:"",square:"",autofocus:"",type:"textarea",label:e.t("reranker.demo.image_urls"),placeholder:e.PLACEHOLDER,autogrow:"",rows:"5","input-style":"font-family: monospace; font-size: 0.8rem;"},null,8,["modelValue","label"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"]),a(Ne,{modelValue:e.showImageDialog,"onUpdate:modelValue":o[5]||(o[5]=n=>e.showImageDialog=n),maximized:"","auto-close":""},{default:t(()=>[a(de,{flat:"",class:"q-pa-none row items-center"},{default:t(()=>[qe(a(J,{flat:"",icon:"close",class:"absolute-top-right z-top"},null,512),[[He]]),a(da,{src:e.selectedImage,fit:"contain",style:{"max-height":"100%","max-width":"100%"}},{error:t(()=>[X("div",Jo,[a(te,{name:"error",class:"on-left"}),b(" "+m(e.t("reranker.demo.image_error"))+": "+m(e.selectedImage),1)])]),_:1},8,["src"])]),_:1})]),_:1},8,["modelValue"])],64)}const $o=_e(Fo,[["render",Zo],["__scopeId","data-v-b92a6a8c"],["__file","ImageRankComponent.vue"]]),er=me({__name:"SeFoPage",setup(c,{expose:o}){o();const s={[ee.PRICING]:Sn,[ee.CODE]:It,[ee.RERANK_CODE]:Dt,[ee.READER_CODE]:Pt,[ee.CLASSIFY]:Kt,[ee.TOKENIZER]:Vt,[ee.INTEGRATIONS]:Lt,[ee.TEST]:Ct,[ee.SEARCH]:wa,[ee.VISUALIZE]:wa,[ee.BULK]:At,[ee.ONPREM]:null,[ee.KEY_MANAGER]:ro,[ee.AVATAR]:mo,[ee.GROUNDING]:wo,[ee.DEEPSEARCH]:Ot,[ee.LICENSE_CONFIG]:Io,[ee.CHAT]:an,[ee.RATE_LIMIT]:Ht,[ee.CONTACT_SALES]:nn,[ee.LLM_SERP]:So,[ee.ENGINE_SPEED_TEST]:Go,[ee.IMAGE_SEARCH]:$o},e=Re(),g=mt(),f=_t(),{t:n}=fe({useScope:"global"}),r=De(),{apiKey:l,classifiers:p,turnstileState:x}=be(r),y=Fe(),{user:D}=be(y),{models:k}=tn();g.params.tab===ee.CHAT?Sa({page:"deepsearch.chat_ui",banner:"banner-deepsearch.png",url:"api-dashboard/deepsearch-chat"}):Sa({page:"key_manager",banner:"banner-api.png",url:"api-dashboard"});const P=E(ba(g.params.tab instanceof Array?g.params.tab[0]:g.params.tab));Ze(()=>g.params.tab,j=>{const C=j instanceof Array?j[0]:j;!D.value.uid&&C===ee.KEY_MANAGER&&f.push({params:{tab:ee.READER_CODE},query:g.query}),P.value=C},{immediate:!0}),Be(()=>{navigator.userAgent.toLowerCase().includes("headless")||H()});async function H(){console.log("checkURLForParam");const j=new URLSearchParams(window.location.search);if(j.has("login")&&!D.value.uid){const C=new URL(window.location.href);C.searchParams.delete("login"),window.history.pushState({},"",C),e.dialog({component:Qt,persistent:!0})}if(j.has("sui")){const C=j.get("model"),R=k.value.find(h=>h.name===C),A=ba(j.get("sui")||"","page",R);if(P.value!==A)f.replace({params:{tab:A},query:{...g.query,sui:void 0}});else{const h=new URL(window.location.href);h.searchParams.delete("sui"),window.history.pushState({},"",h)}}if(j.has("task")){r.task=j.get("task")||"";const C=new URL(window.location.href);C.searchParams.delete("task"),window.history.pushState({},"",C)}if(j.has("model")){const C=j.get("model"),R=C&&k.value.find(A=>A.name===C);if(R&&P.value!==ee.CLASSIFY){const A=R.metadata.endpoints||[];[ee.CODE,ee.RERANK_CODE].includes(P.value)||(A.some(h=>["embedding","multi-vector"].includes(h))?P.value=ee.CODE:A.includes("rank")&&(P.value=ee.RERANK_CODE))}else p.value.length===0&&await r.getClassifiers(l.value),p.value.find(h=>h.classifier_id===C)&&(P.value=ee.CLASSIFY)}}const w={COMPONENTS:s,$q:e,route:g,router:f,t:n,embeddingStore:r,apiKey:l,classifiers:p,turnstileState:x,userStore:y,user:D,allModels:k,currentTab:P,checkURLForParam:H,openBrowserInfoDialog:()=>{e.dialog({component:qt,componentProps:{state:x.value}})},get EMBEDDING_TABS(){return ee},get TurnstileState(){return pt}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ar={key:0},tr={key:1},nr={class:"column no-wrap full-width",style:{"flex-grow":"1"}};function or(c,o,s,e,g,f){return _(),I(yt,{class:"row"},{default:t(()=>[e.turnstileState===e.TurnstileState.ERROR||e.turnstileState===e.TurnstileState.UNSUPPORTED?(_(),I(ft,{key:0,"inline-actions":"",class:"text-white bg-negative full-width"},{action:t(()=>[a(J,{square:"",outline:"",class:"q-mr-sm",label:e.t("landing_page.view_browser_info"),onClick:e.openBrowserInfoDialog},null,8,["label"]),a(J,{square:"",outline:"",to:"/contact-sales",label:e.t("landing_page.contact_sales")},null,8,["label"])]),default:t(()=>[a(te,{name:"report_problem",size:"sm",class:"q-mr-sm"}),e.turnstileState===e.TurnstileState.ERROR?(_(),ae("span",ar,m(e.t("embedding.turnstile_error")),1)):e.turnstileState===e.TurnstileState.UNSUPPORTED?(_(),ae("span",tr,m(e.t("embedding.turnstile_unsupported")),1)):U("",!0),b(" "+m(e.t("embedding.mistake_contact"))+" ",1)]),_:1})):U("",!0),X("div",nr,[(_(),I(gt(e.COMPONENTS[e.currentTab]),{asVisualizer:e.currentTab===e.EMBEDDING_TABS.VISUALIZE,maximizedWindow:!0},null,8,["asVisualizer"]))])]),_:1})}const Jr=_e(er,[["render",or],["__file","SeFoPage.vue"]]);export{Jr as default};
