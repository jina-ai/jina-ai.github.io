import{bS as c}from"./index.52e1461e.js";const m=c("news",{state:()=>({authors:[],blogs:{all:[],allNoRelease:[],featured:[],press:[],events:[],insights:[],"knowledge-base":[],releases:[],"tech-blog":[]},blogsMeta:{pagination:{limit:0,next:0,page:0,pages:0,prev:0,total:0}},allBlogs:[],updatedAt:void 0,accessedAt:"",lastAccessedAt:""}),getters:{hasNewPost:e=>{if(!e.accessedAt)return!0;if(e.blogs)return e.blogs.all.some(t=>new Date(t.publishedAt).getTime()>new Date(e.accessedAt).getTime())}},actions:{async getNews(e,t="authors,tags"){const a=`https://jina-ai-gmbh.ghost.io/ghost/api/content/posts/slug/${e}/?${new URLSearchParams({key:"2652cf20335454671600707967",include:t})}`,i=await fetch(a,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),{posts:n}=await i.json();return(n==null?void 0:n.length)>0?n.map(s=>({id:s.id,url:s.url,html:s.html,excerpt:s.excerpt,featureImage:s.feature_image,featureImageAlt:s.feature_image_alt,publishedAt:s.published_at,updatedAt:s.updated_at,title:s.title,slug:s.slug,readingTime:s.reading_time,featured:s.featured,primaryTag:s.primary_tag,authors:s.authors.map(l=>({id:l.id,name:l.name,bio:l.bio,location:l.location,profileImage:l.profile_image,slug:l.slug,url:l.url,twitter:l.twitter})),tags:s.tags.map(l=>({id:l.id,name:l.name,slug:l.slug,url:l.url,visibility:l.visibility}))}))[0]:null},async getNewsList({filter:e,include:t="authors,tags",page:a,limit:i=6}){let n={include:t,limit:String(i),key:"2652cf20335454671600707967"};e!==void 0&&(n=Object.assign(n,{filter:e})),a!==void 0&&(n=Object.assign(n,{page:String(a)}));const s="https://jina-ai-gmbh.ghost.io/ghost/api/content/posts/?"+new URLSearchParams(n),l=await fetch(s,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),{posts:o,meta:u}=await l.json();return{posts:o.map(r=>({id:r.id,url:r.url,html:r.html,excerpt:r.excerpt,featureImage:r.feature_image,featureImageAlt:r.feature_image_alt,publishedAt:r.published_at,updatedAt:r.updated_at,title:r.title,slug:r.slug,readingTime:r.reading_time,featured:r.featured,primaryTag:r.primary_tag,authors:r.authors.map(g=>({id:g.id,name:g.name,bio:g.bio,location:g.location,profileImage:g.profile_image,slug:g.slug,url:g.url,twitter:g.twitter})),tags:r.tags.map(g=>({id:g.id,name:g.name,slug:g.slug,url:g.url,visibility:g.visibility}))})),meta:u}},async getNewsBy({authors:e,tag:t="all",page:a=1,limit:i=6}){const n=[];e&&e.length>0&&n.push(`authors.slug:[${e.join(",")}]`),t!=="all"&&(t==="featured"?n.push("featured:true"):n.push(`tag:${t}`));const{posts:s,meta:l}=await this.getNewsList({filter:n.join("+"),page:a,limit:i});this.blogs[t]=s,this.blogsMeta=l},async getNewsBySlug(e,t="authors,tags"){return await this.getNews(e,t)},async getSuggestionNews(e,t){const{posts:a}=await this.getNewsList({limit:e,filter:t,page:1});return a},async getAllNews(){let e={limit:"all"};if(this.allBlogs.length>0&&this.updatedAt){e=Object.assign(e,{filter:`updated_at:>${this.updatedAt}`});const{posts:t}=await this.getNewsList(e);t.reverse().forEach(a=>{const i=this.allBlogs.findIndex(n=>n.id===a.id);i!==-1?this.allBlogs[i]=a:this.allBlogs.unshift(a)})}else{const{posts:t}=await this.getNewsList(e);this.allBlogs=t}this.allBlogs=[...this.allBlogs.sort((t,a)=>new Date(a.publishedAt).getTime()-new Date(t.publishedAt).getTime())],this.updatedAt=new Date().toISOString()},async getAuthors(){const e="https://jina-ai-gmbh.ghost.io/ghost/api/content/authors/?"+new URLSearchParams({key:"2652cf20335454671600707967",limit:"all"}),t=await fetch(e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),{authors:a}=await t.json();this.authors=a.map(i=>({id:i.id,name:i.name,bio:i.bio,location:i.location,profileImage:i.profile_image,slug:i.slug,url:i.url,twitter:i.twitter}))},async select(e){let t;return typeof e=="string"?t=[e]:t=e,this.allBlogs.filter(a=>t.some(i=>a.title.toLowerCase().includes(i.toLowerCase())))}},persist:!0});export{m as u};
