import{Q as _,a as h}from"./QItemLabel.6c68c515.js";import{P as E,b2 as se,bJ as ie,e as de,a6 as re,aA as U,az as ue,f as j,w as me,K as ce,J as ge,a5 as pe,h as _e,a7 as p,a8 as t,ah as o,an as P,a9 as m,ak as F,ad as l,af as d,ag as s,ae as x,Z as H,ac as W,am as M,aa as be,ab as fe,bH as he,ai as ve,bC as ye,bB as we,aO as J}from"./index.00861ec4.js";import{Q as v}from"./QTooltip.d7fa4c91.js";import{Q as Me}from"./QList.4877d8de.js";import{Q as ke}from"./QBtnDropdown.9000463b.js";import{C as K}from"./ClosePopup.b9cc98b2.js";import{u as ze}from"./embedding.654130f0.js";function qe(c){const u=Object.assign({noopener:!0},c),n=[];for(const i in u){const r=u[i];r===!0?n.push(i):(ie(r)||typeof r=="string"&&r!=="")&&n.push(i+"="+r)}return n.join(",")}function Z(c,u,n){let i=window.open;if(E.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)i=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(c,{openExternal:!0})}const r=i(c,"_blank",qe(n));if(r)return E.is.desktop&&r.focus(),r;u&&u()}var Fe=(c,u,n)=>{if(E.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(i=>{i?window.SafariViewController.show({url:c},se,u):Z(c,u,n)});return}return Z(c,u,n)};const Ae={class:"full-width ellipsis q-pl-md"},De=de({__name:"ModelDropDown",props:{currentModel:{},indicator:{type:Boolean,default:!0},category:{default:"embedding"},allowNone:{type:Boolean,default:!1},allowBAAI:{type:Boolean,default:!1},demoOnly:{type:Boolean,default:!1}},emits:["chooseModel","modelsLoaded"],setup(c,{emit:u}){const{t:n}=re({useScope:"global"}),i=ze(),{models:r,baseDeModel:G,baseEnModel:A,baseZhModel:X,jinaRerankerV1:Y}=U(i),ee=ue(),{language:k}=U(ee),B=j(null);let y=null;const z=j(!1),b=c,f=u,L=()=>{var e;f("chooseModel",(e=X.value)!=null?e:A.value)},Q=()=>{var e;f("chooseModel",(e=G.value)!=null?e:A.value)};me(k,e=>{b.category==="embedding"&&(e&&["zh-CN","zh-TW"].includes(e)?L():e==="de"&&Q())});const ae=()=>{var g;const e=((g=B.value)==null?void 0:g.$el)||B.value;e instanceof HTMLElement?(y=new IntersectionObserver(async a=>{a[0].isIntersecting&&(await te(),y==null||y.disconnect())},{root:null,threshold:.1}),y.observe(e)):console.error("Element is not an HTMLElement:",e)};ce(()=>{ge(()=>{setTimeout(()=>{ae()},100)})}),pe(()=>{y&&y.disconnect()});const S=[{name:"bge-small-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh-v1.5",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh-v1.5",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-small-en",meta_data:{token_length:512,output_dim:768,size:"45M",language:"en"},request_path:["embedding"]},{name:"bge-base-en",meta_data:{token_length:512,output_dim:768,size:"110M",language:"en"},request_path:["embedding"]},{name:"bge-large-en",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"en"},request_path:["embedding"]},{name:"bge-small-zh",meta_data:{token_length:512,output_dim:768,size:"45M",language:"zh"},request_path:["embedding"]},{name:"bge-base-zh",meta_data:{token_length:512,output_dim:768,size:"110M",language:"zh"},request_path:["embedding"]},{name:"bge-large-zh",meta_data:{token_length:512,output_dim:1024,size:"340M",language:"zh"},request_path:["embedding"]},{name:"bge-m3",meta_data:{token_length:1024,output_dim:2048,size:"1.3B",language:"multilingual"},request_path:["embedding"]}],C=_e(()=>b.allowBAAI?S:r.value.filter(e=>{const g=b.category==="multi-embeddings",a=e.request_path,w=g?["multi-embeddings","embedding"]:[b.category];return Array.isArray(a)?a.some(q=>w.includes(q)):w.includes(a)}).sort((e,g)=>g.replicas-e.replicas)),te=async()=>{z.value=!0,await i.getModels(),z.value=!1,b.category==="embedding"||b.category==="multi-embeddings"?r.value.length>0&&(k.value&&["zh-CN","zh-TW"].includes(k.value)?L():k.value==="de"?Q():b.allowBAAI?f("chooseModel",S[0]):f("chooseModel",A.value)):b.category==="rank"&&f("chooseModel",Y.value);for(const e of i.models)e.replicas=await i.getReplicas(i.apiKey,e.name);f("modelsLoaded")},ne=e=>{le("event","embedding_view_model_detail",{location:oe.location.href,model:e}),Fe(`https://huggingface.co/jinaai/${e}`)},le=window.gtag,oe=window.document,D=e=>e==="en"?"\u{1F1FA}\u{1F1F8}":e==="zh"?"\u{1F1E8}\u{1F1F3}\u{1F1FA}\u{1F1F8}":e==="de"?"\u{1F1E9}\u{1F1EA}\u{1F1FA}\u{1F1F8}":e==="es"?"\u{1F1EA}\u{1F1F8}\u{1F1FA}\u{1F1F8}":"\u{1F30D}";return(e,g)=>(m(),p(ke,{"no-caps":"",flat:"",square:"",stretch:"",icon:"img:"+(e.category==="rank"?o(ye):o(we)),loading:z.value,"disable-dropdown":z.value,class:P(e.$q.screen.lt.sm?"full-width q-py-md":""),ref_key:"componentRef",ref:B},{label:t(()=>[F("div",Ae,[l(x,null,{default:t(()=>[l(_,{caption:"",class:"text-grey text-left"},{default:t(()=>[d(s(e.category==="rank"?o(n)("embedding.select_rerank_model"):o(n)("embedding.select_embedding_model")),1)]),_:1}),e.currentModel?(m(),p(_,{key:0,class:"row justify-start"},{default:t(()=>{var a;return[F("code",null,s((a=e.currentModel)==null?void 0:a.name),1)]}),_:1})):e.demoOnly&&C.value.length>0?(m(),p(_,{key:1,class:"row justify-start"},{default:t(()=>[F("code",null,s(C.value[0].name),1)]),_:1})):(m(),p(_,{key:2,class:"row justify-start"},{default:t(()=>[d(s(o(n)("embedding.none")),1)]),_:1}))]),_:1})])]),default:t(()=>[l(Me,null,{default:t(()=>[e.allowNone?H((m(),p(W,{key:0,clickable:"",active:!e.currentModel,onClick:g[0]||(g[0]=a=>f("chooseModel",null)),class:"q-pa-md"},{default:t(()=>[l(x,null,{default:t(()=>[l(_,{overline:"",caption:""},{default:t(()=>[d(s(o(n)("embedding.none")),1)]),_:1}),l(_,{class:"text-weight-bold"},{default:t(()=>[d(s(o(n)(`embedding.${e.category}_none_description`)),1)]),_:1})]),_:1})]),_:1},8,["active"])),[[J],[K]]):M("",!0),(m(!0),be(ve,null,fe(C.value,(a,w)=>{var q;return H((m(),p(W,{key:w,clickable:"",active:a.name===((q=e.currentModel)==null?void 0:q.name),onClick:I=>f("chooseModel",a),class:"q-pa-md"},{default:t(()=>[l(x,null,{default:t(()=>[l(_,{class:P(["text-weight-bold",{"dynamic-text":a.tags&&a.tags.includes("multimodal")}])},{default:t(()=>[F("code",null,s(a.name),1)]),_:2},1032,["class"]),l(_,{overline:"",caption:""},{default:t(()=>[d(s(o(n)(`embedding.${a.name.replace(".","_")}_description`)),1)]),_:2},1024),l(_,{caption:"",class:"row"},{default:t(()=>{var I,R,T,$,N,V,O;return[e.allowBAAI?M("",!0):(m(),p(h,{key:0,label:a.replicas>0?o(n)("embedding.running"):o(n)("embedding.sleeping"),square:"",size:"xs",outline:"",icon:a.replicas>0?"play_circle_filled":"mdi-sleep",color:a.replicas>0?"positive":"warning",style:{"border-radius":"0"}},{default:t(()=>[l(v,{"max-width":"300px"},{default:t(()=>[d(s(o(n)("embedding.status_explain")),1)]),_:1})]),_:2},1032,["label","icon","color"])),a.tags&&a.tags.includes("multimodal")?(m(),p(h,{key:1,square:"",size:"xs",outline:"",color:a.name!==((I=e.currentModel)==null?void 0:I.name)?"grey-5":"",style:{"border-radius":"0"},label:o(n)("embedding.multimodal"),icon:"mms"},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.multimodal_explain")),1)]),_:1})]),_:2},1032,["color","label"])):M("",!0),a.request_path.includes("multi-embeddings")&&e.category.includes("embedding")?(m(),p(h,{key:2,color:a.name!==((R=e.currentModel)==null?void 0:R.name)?"grey-5":"",style:{"border-radius":"0"},icon:"grid_4x4",label:o(n)("embedding.multi_embedding"),square:"",size:"xs",outline:""},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.multi_embedding_explain")),1)]),_:1})]),_:2},1032,["color","label"])):M("",!0),l(h,{label:a.meta_data.token_length,square:"",color:a.name!==((T=e.currentModel)==null?void 0:T.name)?"grey-5":"",size:"xs",outline:"",icon:"notes",style:{"border-radius":"0"}},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.token_length_explain",{_tokenLength:a.meta_data.token_length})),1)]),_:2},1024)]),_:2},1032,["label","color"]),a.request_path.includes("embedding")?(m(),p(h,{key:3,label:a.meta_data.output_dim,square:"",color:a.name!==(($=e.currentModel)==null?void 0:$.name)?"grey-5":"",size:"xs",outline:"",icon:"mdi-axis-arrow",style:{"border-radius":"0"}},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.output_dim_explain",{_outputDim:a.meta_data.output_dim})),1)]),_:2},1024)]),_:2},1032,["label","color"])):M("",!0),l(h,{label:a.meta_data.size,square:"",size:"xs",color:a.name!==((N=e.currentModel)==null?void 0:N.name)?"grey-5":"",outline:"",icon:"mdi-matrix",style:{"border-radius":"0"}},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.size_explain",{_size:a.meta_data.size})),1)]),_:2},1024)]),_:2},1032,["label","color"]),l(h,{label:D(a.meta_data.language),square:"",color:a.name!==((V=e.currentModel)==null?void 0:V.name)?"grey-5":"",size:"xs",outline:"",style:{"border-radius":"0"}},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.language_explain",{_language:D(a.meta_data.language)})),1)]),_:2},1024)]),_:2},1032,["label","color"]),l(h,{icon:"img:/huggingface_logo.svg",square:"",size:"xs",outline:"",color:a.name!==((O=e.currentModel)==null?void 0:O.name)?"grey-5":"",style:{"border-radius":"0"},onClick:he(Be=>ne(a.name),["stop"]),clickable:"",label:o(n)("embedding.opensource")},{default:t(()=>[l(v,null,{default:t(()=>[d(s(o(n)("embedding.opensource_explain")),1)]),_:1})]),_:2},1032,["color","onClick","label"])]}),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[J],[K]])}),128))]),_:1})]),_:1},8,["icon","loading","disable-dropdown","class"]))}});export{De as _};
