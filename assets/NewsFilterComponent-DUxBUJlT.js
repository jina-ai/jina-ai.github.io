import{b as ue,Q as se}from"./QLinearProgress-PFv1H8qJ.js";import{s as de,aw as ce,dD as me,ax as fe,m as r,k as w,w as oe,p as O,b2 as re,J as ve,dE as Y,dF as ge,R as be,q as ye,j as he,ag as xe,n as Se,a1 as Pe,a2 as k,a7 as W,a3 as M,ae as U,ac as Ce,a5 as u,a4 as s,a8 as Be,a9 as we,be as Ve,aP as _e,bd as ke,aa as H,ab as pe,bg as Z,al as A,ad as F,aj as $,ct as ee,cu as te,ak as R}from"./index-CAVnrEMK.js";import{d as ae,Q as le}from"./QItemLabel-Bys79Bya.js";import{Q as ne}from"./QSelect-DcQz0oI1.js";import{Q as ie}from"./QTooltip-BCpDvwoA.js";import{N as Ne}from"./NewsVerticalCard-DJ_UyFiS.js";import{A as qe}from"./SXTooltip-Di8Ozm2N.js";function J(e,d){return[!0,!1].includes(e)?e:d}const Le=de({name:"QPagination",props:{...ce,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||me.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:d}){const{proxy:b}=ve(),{$q:a}=b,p=fe(e,a),c=r(()=>parseInt(e.min,10)),t=r(()=>parseInt(e.max,10)),P=r(()=>parseInt(e.maxPages,10)),N=r(()=>h.value+" / "+t.value),V=r(()=>J(e.boundaryLinks,e.input)),S=r(()=>J(e.boundaryNumbers,!e.input)),T=r(()=>J(e.directionLinks,e.input)),q=r(()=>J(e.ellipses,!e.input)),_=w(null),h=r({get:()=>e.modelValue,set:l=>{if(l=parseInt(l,10),e.disable||isNaN(l))return;const n=ue(l,c.value,t.value);e.modelValue!==n&&d("update:modelValue",n)}});oe(()=>`${c.value}|${t.value}`,()=>{h.value=e.modelValue});const E=r(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),j=r(()=>e.gutter in Y?`${Y[e.gutter]}px`:e.gutter||null),z=r(()=>j.value!==null?`--q-pagination-gutter-parent:-${j.value};--q-pagination-gutter-child:${j.value}`:null),v=r(()=>{const l=[e.iconFirst||a.iconSet.pagination.first,e.iconPrev||a.iconSet.pagination.prev,e.iconNext||a.iconSet.pagination.next,e.iconLast||a.iconSet.pagination.last];return a.lang.rtl===!0?l.reverse():l}),C=r(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),L=r(()=>ge(e,"flat")),B=r(()=>({[L.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),m=r(()=>{const l={[L.value]:!1};return e.activeDesign!==""&&(l[e.activeDesign]=!0),l}),y=r(()=>({...m.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),g=r(()=>{let l=Math.max(P.value,1+(q.value?2:0)+(S.value?2:0));const n={pgFrom:c.value,pgTo:t.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(t.value).length)}em`}};return P.value&&l<t.value-c.value+1&&(l=1+Math.floor(l/2)*2,n.pgFrom=Math.max(c.value,Math.min(t.value-l+1,e.modelValue-Math.floor(l/2))),n.pgTo=Math.min(t.value,n.pgFrom+l-1),S.value&&(n.boundaryStart=!0,n.pgFrom++),q.value&&n.pgFrom>c.value+(S.value?1:0)&&(n.ellipsesStart=!0,n.pgFrom++),S.value&&(n.boundaryEnd=!0,n.pgTo--),q.value&&n.pgTo<t.value-(S.value?1:0)&&(n.ellipsesEnd=!0,n.pgTo--)),n});function I(l){h.value=l}function X(l){h.value=h.value+l}const K=r(()=>{function l(){h.value=_.value,_.value=null}return{"onUpdate:modelValue":n=>{_.value=n},onKeyup:n=>{be(n,13)===!0&&l()},onBlur:l}});function x(l,n,Q){const o={"aria-label":n,"aria-current":"false",...B.value,...l};return Q===!0&&Object.assign(o,{"aria-current":"true",...y.value}),n!==void 0&&(e.toFn!==void 0?o.to=e.toFn(n):o.onClick=()=>{I(n)}),O(ye,o)}return Object.assign(b,{set:I,setByOffset:X}),()=>{const l=[],n=[];let Q;if(V.value===!0&&(l.push(x({key:"bls",disable:e.disable||e.modelValue<=c.value,icon:v.value[0]},c.value)),n.unshift(x({key:"ble",disable:e.disable||e.modelValue>=t.value,icon:v.value[3]},t.value))),T.value===!0&&(l.push(x({key:"bdp",disable:e.disable||e.modelValue<=c.value,icon:v.value[1]},e.modelValue-1)),n.unshift(x({key:"bdn",disable:e.disable||e.modelValue>=t.value,icon:v.value[2]},e.modelValue+1))),e.input!==!0){Q=[];const{pgFrom:o,pgTo:D,marginalStyle:f}=g.value;if(g.value.boundaryStart===!0){const i=c.value===e.modelValue;l.push(x({key:"bns",style:f,disable:e.disable,label:c.value},c.value,i))}if(g.value.boundaryEnd===!0){const i=t.value===e.modelValue;n.unshift(x({key:"bne",style:f,disable:e.disable,label:t.value},t.value,i))}g.value.ellipsesStart===!0&&l.push(x({key:"bes",style:f,disable:e.disable,label:"…",ripple:!1},o-1)),g.value.ellipsesEnd===!0&&n.unshift(x({key:"bee",style:f,disable:e.disable,label:"…",ripple:!1},D+1));for(let i=o;i<=D;i++)Q.push(x({key:`bpg${i}`,style:f,disable:e.disable,label:i},i,i===e.modelValue))}return O("div",{class:E.value,...C.value},[O("div",{class:"q-pagination__content row no-wrap items-center",style:z.value},[...l,e.input===!0?O(re,{class:"inline",style:{width:`${N.value.length/1.5}em`},type:"number",dense:!0,value:_.value,disable:e.disable,dark:p.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:N.value,min:c.value,max:t.value,...K.value}):O("div",{class:"q-pagination__middle row justify-center"},Q),...n])])}}}),Qe=he({__name:"NewsFilterComponent",props:{initiating:{type:Boolean},translatedAllBlogs:{},tab:{default:"all"},searchByTitle:{},allProducts:{},authorOptions:{},perPage:{default:10}},emits:["update:filteredBlogs","update:initiating"],setup(e,{expose:d,emit:b}){d();const a=e,p=b,{t:c,te:t}=xe({useScope:"global"}),P=Se(),N=w(!0),V=w(1),S=w(1),T=w(""),q=w([]),_=w([]),h=w([]),E=(v,C)=>{if(!C.trim())return v;const B=C.toLowerCase().split(/\s+/);return v.map(m=>{let y=0;return B.forEach(g=>{m.title.toLowerCase().includes(g)&&(y+=1)}),B.forEach(g=>{m.excerpt.toLowerCase().includes(g)&&(y+=1)}),B.forEach(g=>{m.html.toLowerCase().includes(g)&&(y+=.1)}),{blog:m,score:y}}).filter(m=>m.score>0).sort((m,y)=>y.score-m.score).map(m=>m.blog)};oe([()=>a.tab,V,()=>a.searchByTitle,T,_,q,()=>a.translatedAllBlogs],([v,C,L,B,m,y,g],[I,X,K,x,l,n])=>{(v!==I||L!==K||B!==x||JSON.stringify(m)!==JSON.stringify(l)||JSON.stringify(y)!==JSON.stringify(n))&&(V.value=1),v!==I&&(N.value=!0);let o=g;m.length>0&&(o=o.filter(f=>m.map(i=>i.value.toLowerCase()).some(i=>f.title.toLowerCase().includes(i)||f.title.toLowerCase().includes(c(i).toLowerCase())))),y.length>0&&(o=o.filter(f=>y.map(i=>i.value).some(i=>f.authors.map(G=>G.name).includes(i)))),v!=="all"&&(v==="featured"?o=o.filter(f=>f.featured):o=o.filter(f=>f.tags.map(i=>i.name.toLowerCase()).includes(v)));const D=L||B;if(D&&(o=E(o,D)),o&&o.length>0){const f=o.length;S.value=Math.ceil(f/a.perPage);const i=(V.value-1)*a.perPage,G=i+a.perPage;h.value=o.slice(i,G),p("update:filteredBlogs",h.value)}else S.value=0,V.value=1,h.value=[],p("update:filteredBlogs",[]);N.value=!1},{immediate:!0});const z={props:a,emit:p,t:c,te:t,$q:P,loading:N,currentPage:V,totalPage:S,localSearchByTitle:T,selectedAuthors:q,selectedProducts:_,filteredBlogs:h,searchBlogs:E,isUnread:v=>{const C=localStorage.getItem("lastAccessedAt");return C?new Date(v.publishedAt)>new Date(C):!1},NewsVerticalCard:Ne,AvatarsComponent:qe};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),Ae={class:"row justify-between"};function Fe(e,d,b,a,p,c){return k(),W("div",Ae,[b.initiating?(k(),M(se,{key:0,indeterminate:"",size:"xs"})):U("",!0),Ce("div",{class:H(["col-12 relative-position",{"col-md-9":!b.searchByTitle}])},[u(Ve,{name:"list2"},{default:s(()=>[(k(!0),W(Be,null,we(a.filteredBlogs,(t,P)=>(k(),M(a.NewsVerticalCard,{key:P,item:t,class:"q-my-md","un-read":a.isUnread(t)},null,8,["item","un-read"]))),128))]),_:1}),_e(u(Le,{"active-design":"outline","text-color":"text-dim","active-text-color":"primary",modelValue:a.currentPage,"onUpdate:modelValue":d[0]||(d[0]=t=>a.currentPage=t),max:a.totalPage,"max-pages":5,class:H(["row justify-center",a.$q.screen.gt.xs?"q-ma-xl":"q-ma-lg"])},null,8,["modelValue","max","class"]),[[ke,!a.loading&&a.filteredBlogs.length]])],2),!b.searchByTitle&&b.allProducts&&b.authorOptions?(k(),W("div",{key:1,class:H(["col-12 col-md-3 q-py-md",a.$q.screen.lt.md?"order-first":"q-pl-md"])},[u(re,{borderless:"",filled:"",square:"",modelValue:a.localSearchByTitle,"onUpdate:modelValue":d[1]||(d[1]=t=>a.localSearchByTitle=t),label:a.t("newsroom_page.search"),class:"col-auto"},{append:s(()=>[u(pe,{name:"search"})]),_:1},8,["modelValue","label"]),u(ne,{clearable:"",filled:"",modelValue:a.selectedProducts,"onUpdate:modelValue":d[2]||(d[2]=t=>a.selectedProducts=t),onClear:d[3]||(d[3]=t=>a.selectedProducts=[]),options:b.allProducts,square:"","use-chips":"",multiple:"","stack-label":"",label:a.t("newsroom_page.product")},{"selected-item":s(t=>[u(ae,{removable:"",outline:"",onRemove:P=>t.removeAtIndex(t.index),tabindex:t.tabindex,class:"q-ma-xs no-border-radius"},{default:s(()=>[t.opt.icon?(k(),M(Z,{key:0,size:"xs"},{default:s(()=>[u(le,{fit:"contain",src:t.opt.icon,loading:"lazy"},null,8,["src"])]),_:2},1024)):U("",!0),A(" "+F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),option:s(t=>[u($,ee(te(t.itemProps)),{default:s(()=>[u(R,{avatar:""},{default:s(()=>[t.opt.icon?(k(),M(Z,{key:0},{default:s(()=>[u(le,{fit:"contain",height:"32px",width:"32px",src:t.opt.icon,loading:"lazy"},null,8,["src"])]),_:2},1024)):U("",!0)]),_:2},1024),u(R,null,{default:s(()=>[A(F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label"]),u(ne,{clearable:"",filled:"",modelValue:a.selectedAuthors,"onUpdate:modelValue":d[4]||(d[4]=t=>a.selectedAuthors=t),onClear:d[5]||(d[5]=t=>a.selectedProducts=[]),options:b.authorOptions,square:"","use-chips":"",multiple:"","stack-label":"",label:a.t("newsroom_page.author")},{"selected-item":s(t=>[u(ae,{removable:"",outline:"",onRemove:P=>t.removeAtIndex(t.index),tabindex:t.tabindex,class:"q-ma-xs no-border-radius"},{default:s(()=>[u(a.AvatarsComponent,{authors:[t.opt.author]},{default:s(()=>[u(ie,null,{default:s(()=>[A(F(e.opt.label),1)]),_:1})]),_:2},1032,["authors"]),A(" "+F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1032,["onRemove","tabindex"])]),option:s(t=>[u($,ee(te(t.itemProps)),{default:s(()=>[u(R,{avatar:""},{default:s(()=>[u(a.AvatarsComponent,{authors:[t.opt.author]},{default:s(()=>[u(ie,null,{default:s(()=>[A(F(e.opt.label),1)]),_:1})]),_:2},1032,["authors"])]),_:2},1024),u(R,null,{default:s(()=>[A(F(a.te(t.opt.label)?a.t(t.opt.label):t.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label"])],2)):U("",!0)])}const Me=Pe(Qe,[["render",Fe],["__file","NewsFilterComponent.vue"]]);export{Me as N};
