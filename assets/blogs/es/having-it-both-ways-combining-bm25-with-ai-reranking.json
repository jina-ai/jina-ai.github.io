{
  "slug": "having-it-both-ways-combining-bm25-with-ai-reranking",
  "id": "6628fe61da339c00015740b9",
  "uuid": "13ce7c1f-bcdf-4746-93dd-5095291a2ed8",
  "title": "Lo mejor de ambos mundos: Combinando BM25 con la reordenación mediante IA",
  "html": "<p>Es importante mantenerse al día con las nuevas tecnologías de recuperación de información, pero es igualmente importante no romper componentes que han sido probados y han demostrado su valor comercial.</p><p>A pesar del crecimiento en la <a href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker?ref=jina-ai-gmbh.ghost.io\">búsqueda vectorial impulsada por IA</a>, la realidad es que la mayoría de las empresas aún dependen de tecnologías de búsqueda tradicionales, a menudo usando variantes del <a href=\"https://en.wikipedia.org/wiki/Okapi_BM25?ref=jina-ai-gmbh.ghost.io\">algoritmo BM25</a>. Es una tecnología confiable y probada por el tiempo. Cambiar a un sistema completamente nuevo no es solo un gran paso, sino que a menudo resulta impráctico, exigiendo recursos sustanciales y una revisión exhaustiva de las operaciones. Además, BM25 es un pilar de los motores de búsqueda léxica, comúnmente empleado en plataformas de búsqueda populares como Elasticsearch y Solr. Ya ofrece buenos resultados para muchos casos de uso.</p><p>Por lo tanto, muchas empresas dudan en hacer una transición completa a la búsqueda neuronal, a pesar de la evidencia convincente de que la búsqueda basada en IA <a href=\"https://db-engines.com/en/ranking_trend?ref=jina-ai-gmbh.ghost.io\" rel=\"noreferrer\">mejora significativamente la satisfacción del usuario y la calidad de los resultados</a>.</p><h2 id=\"retrieval-agnostic-neural-reranking\">Reordenamiento Neural Agnóstico de Recuperación</h2><p>Reranker es una incorporación revolucionaria al panorama de sistemas de búsqueda. Diseñado para mejorar el valor de los motores de búsqueda existentes como <a href=\"https://www.elastic.co/elasticsearch?ref=jina-ai-gmbh.ghost.io\">Elasticsearch</a>, funciona como una capa adicional, trabajando como un complemento para refinar la calidad de búsqueda entregada. No necesita saber qué tipo de tecnología de búsqueda está conectada, simplemente toma una lista de coincidencias y las reordena para mejorarlas.</p><p>Jina Reranker añade un nivel más profundo de comprensión a las tecnologías de búsqueda tradicionales. Algoritmos como BM25 hacen un buen trabajo recuperando documentos basados en la frecuencia de términos pero luchan para evaluar el significado de los textos que recuperan a la luz de la intención del usuario. Aquí es donde la IA sobresale: Reranker ayuda a producir resultados que están mejor alineados con lo que los usuarios están buscando.</p><p>Por lo tanto, para las empresas que quieren traer las poderosas ventajas de los modelos de IA a sus marcos de búsqueda, añadir Jina Reranker puede ser una decisión sabia y no incurre en las cargas de reemplazar una infraestructura de búsqueda existente. Se trata de refinar los resultados de búsqueda para hacerlos no solo aceptables, sino excepcionales: más relevantes y más precisos.</p><h2 id=\"why-jina-reranker\">¿Por qué Jina Reranker?</h2><p>Entre los modelos de reordenamiento, los <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">modelos Jina Reranker</a> destacan como <a href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker/?ref=jina-ai-gmbh.ghost.io\">líderes</a> con puntuaciones de vanguardia en <a href=\"https://jina.ai/news/smaller-faster-cheaper-jina-rerankers-turbo-and-tiny?ref=jina-ai-gmbh.ghost.io\">pruebas de rendimiento</a>.</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker/?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Maximizing Search Relevance and RAG Accuracy with Jina Reranker</div><div class=\"kg-bookmark-description\">Boost your search and RAG accuracy with Jina Reranker. Our new model improves the accuracy and relevance by 20% over simple vector search. Try it now for free!</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina.ai/icons/favicon-128x128.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/02/Reranker1.png\" alt=\"\"></div></a></figure><p>En este artículo, te mostraremos cómo implementar un sistema de recomendación para plataformas de comercio electrónico. Primero, analizaremos el rendimiento de un recuperador BM25 por sí solo. Luego, agregaremos Jina Reranker al pipeline de recuperación y veremos cómo los resultados se vuelven más relevantes y efectivos.</p><div class=\"kg-card kg-callout-card kg-callout-card-blue\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\">Puedes seguir el ejemplo en <a href=\"https://colab.research.google.com/github/jina-ai/workshops/blob/main/notebooks/embeddings/bm25/Retrieval_Reranker.ipynb?ref=jina-ai-gmbh.ghost.io\">Colab</a> o <a href=\"https://raw.githubusercontent.com/jina-ai/workshops/main/notebooks/embeddings/bm25/Retrieval_Reranker.ipynb?ref=jina-ai-gmbh.ghost.io\">descargando el notebook</a>.</div></div><h2 id=\"add-jina-reranker-to-your-existing-workflow\">Agrega Jina Reranker a tu flujo de trabajo existente:</h2><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png\" class=\"kg-image\" alt=\"Screenshot 2024-04-08 at 11.44.21\" loading=\"lazy\" width=\"2000\" height=\"468\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 2000w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Aquí está el desglose del flujo de trabajo actualizado que integra Jina Reranker:</p><ul><li><strong>Recuperación Inicial</strong>: Cuando se ingresa una consulta, el motor de búsqueda BM25 recupera documentos relevantes basándose principalmente en la coincidencia de términos de la consulta con los documentos.</li><li><strong>Reordenamiento</strong>: <code>jina-reranker-v1-base-en</code> toma estos resultados iniciales y usa IA de última generación para evaluar la relevancia de cada documento recuperado a la luz de la consulta del usuario.</li><li><strong>Devolución de Resultados</strong>: Jina Reranker luego reordena los resultados de búsqueda, asegurando que los documentos más relevantes se presenten en la parte superior.</li></ul><p>Nuestra <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">API fácil de usar</a> y documentación completa te guiarán a través de todo el proceso, requiriendo solo cambios mínimos en tu sistema.</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/reranker/?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Reranker API</div><div class=\"kg-bookmark-description\">Maximize the search relevancy and RAG accuracy at ease</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina.ai/icons/favicon-128x128.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina.ai/banner-reranker-api.png\" alt=\"\"></div></a></figure><h2 id=\"see-it-in-action-enhancing-e-commerce-search-with-jina-reranker\">Véalo en acción: Mejorando la búsqueda de comercio electrónico con Jina Reranker</h2><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg\" class=\"kg-image\" alt=\"BM25+Rerank dark (1)\" loading=\"lazy\" width=\"1600\" height=\"900\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 1000w, https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 1600w\" sizes=\"(min-width: 720px) 720px\"><figcaption><i><em class=\"italic\" style=\"white-space: pre-wrap;\">Una consulta pasa por BM25 y los documentos recuperados son refinados por Jina Reranker.</em></i></figcaption></figure><p>Veamos un ejemplo práctico de comercio electrónico para demostrar el impacto de Jina Reranker en aplicaciones del mundo real. El objetivo aquí es buscar listados de productos basados en la consulta de un usuario.</p><p>Para ilustrar esto, configuraremos dos pipelines de búsqueda usando el popular framework de búsqueda y orquestación de IA <a href=\"https://haystack.deepset.ai/?ref=jina-ai-gmbh.ghost.io\">Haystack by deepset</a>. El primer pipeline usa BM25 por sí solo. El segundo integra <code>jina-reranker-v1-base-en</code> en el sistema BM25. Puedes fácilmente reemplazar el componente <code>InMemoryDocumentStore</code> de Haystack con <code>ElasticsearchDocumentStore</code> para hacer el mismo experimento si tienes un cluster de Elasticsearch existente.</p><p>Usaremos <a href=\"https://www.kaggle.com/datasets/kuchhbhi/fashion-ecommerce-data?ref=jina-ai-gmbh.ghost.io\">un conjunto de datos de muestra</a> de Kaggle. Puedes descargar directamente el CSV <a href=\"https://raw.githubusercontent.com/jina-ai/workshops/main/notebooks/embeddings/bm25/fashion_data.csv?ref=jina-ai-gmbh.ghost.io\">aquí</a>. Esta comparación lado a lado muestra las mejoras aportadas al incorporar Jina Reranker en el flujo de trabajo de búsqueda.</p><p>Para empezar, instala todos los componentes necesarios:</p><pre><code class=\"language-bash\">pip install --q haystack-ai jina-haystack\n</code></pre><p>Configura la clave API de Jina como una variable de entorno. Puedes generar una <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">aquí</a>.</p><pre><code class=\"language-Python\">import os\nimport getpass\n\nos.environ[\"JINA_API_KEY\"] = getpass.getpass()\n</code></pre><p>Consulta un producto basado en nombres de productos. Por ejemplo:</p><pre><code class=\"language-Python\">short_query = \"Nightwear for Women\"\n</code></pre><p>Transforma cada fila CSV en un <code>Document</code>:</p><pre><code class=\"language-Python\">import csv\nfrom haystack import Document\n\ndocuments = []\nwith open(\"fashion_data.csv\") as f:\n    data = csv.reader(f, delimiter=\";\")\n    for row in data:\n      row_text = ''.join(row)\n      row_doc = Document(content=row_text, meta={\"prod_id\": row[0], \"prod_image\": row[1]})\n      documents.append(row_doc)\n</code></pre><h2 id=\"pipeline-1-bm25-only\">Pipeline #1: Solo BM25</h2><pre><code class=\"language-Python\">from haystack import Pipeline\nfrom haystack.document_stores.types import DuplicatePolicy\nfrom haystack.document_stores.in_memory import InMemoryDocumentStore\nfrom haystack.components.retrievers.in_memory import InMemoryBM25Retriever\n\ndocument_store=InMemoryDocumentStore()\ndocument_store.write_documents(documents=documents, policy=DuplicatePolicy.OVERWRITE)\n\nretriever = InMemoryBM25Retriever(document_store=document_store)\n\nrag_pipeline = Pipeline()\nrag_pipeline.add_component(\"retriever\", retriever)\n</code></pre><pre><code class=\"language-Python\">result = rag_pipeline.run(\n            {\n                \"retriever\": {\"query\": query, \"top_k\": 50},\n            }\n        )\n\nfor doc in result[\"retriever\"][\"documents\"]:\n    print(\"Product ID:\", doc.meta[\"prod_id\"])\n    print(\"Product Image:\", doc.meta[\"prod_image\"])\n    print(\"Score:\", doc.score)\n    print(\"-\"*100)\n</code></pre><p>Aquí están las miniaturas de los 50 resultados devueltos por BM25:<br></p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_f2dc26e35fe66ac84c1d641a47bebbce.png\" class=\"kg-image\" alt=\"image\" loading=\"lazy\" width=\"446\" height=\"1088\"></figure><p>Podemos ver que los resultados están relacionados con ropa de dormir, coincidiendo parcialmente con la consulta, pero las coincidencias más relevantes (imágenes resaltadas en negrita en la cuadrícula anterior) parecen perderse entre la multitud de productos recuperados por BM25. En la práctica, usar solo BM25 significa que un usuario recibiría principalmente resultados no relacionados en la parte superior de la página.</p><h2 id=\"pipeline-2-bm25-jina-reranker\">Pipeline #2: BM25 + Jina Reranker</h2><p>El siguiente script describe cómo construir este pipeline paso a paso:</p><pre><code class=\"language-Python\">from haystack_integrations.components.rankers.jina import JinaRanker\n\nranker_retriever = InMemoryBM25Retriever(document_store=document_store)\n\nranker = JinaRanker()\n\nranker_pipeline = Pipeline()\nranker_pipeline.add_component(\"ranker_retriever\", ranker_retriever)\nranker_pipeline.add_component(\"ranker\", ranker)\n\nranker_pipeline.connect(\"ranker_retriever.documents\", \"ranker.documents\")\n</code></pre><pre><code class=\"language-Python\">result = ranker_pipeline.run(\n            {\n                \"ranker_retriever\": {\"query\": query, \"top_k\": 50},\n                \"ranker\": {\"query\": query, \"top_k\": 10},\n            }\n        )\n\nfor doc in result[\"ranker\"][\"documents\"]:\n    print(\"Product ID:\", doc.meta[\"prod_id\"])\n    print(\"Product Image:\", doc.meta[\"prod_image\"])\n    print(\"Score:\", doc.score)\n    print(\"-\"*100)\n</code></pre><p>Aquí están los 10 mejores resultados devueltos por Jina Reranker:</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_05929b0008a1ced2bf724dd8b89d0ec5.png\" class=\"kg-image\" alt=\"image\" loading=\"lazy\" width=\"442\" height=\"218\"></figure><p>En comparación con BM25, Jina Reranker devuelve una colección de respuestas mucho más relevante. En nuestro entorno de comercio electrónico, esto se traduce en una mejor experiencia de usuario y una mayor probabilidad de compras.</p><h2 id=\"impact-of-integrating-jina-reranker-with-bm25\">Impacto de la Integración de Jina Reranker con BM25</h2><p>Siguiendo nuestro caso de estudio en el dominio del comercio electrónico, está claro que la integración de Jina Reranker con motores de búsqueda tradicionales como Elasticsearch marca un salto significativo en la tecnología de búsqueda. Aquí hay una descripción general de cómo esta integración mejora la experiencia de búsqueda:</p><ul><li><strong>Tasas de Acierto Mejoradas</strong>: La fusión de Jina Reranker y la búsqueda tradicional ha aumentado notablemente la frecuencia de resultados relevantes. Esto hace que el proceso de búsqueda sea más preciso, alineándose estrechamente con las consultas de los usuarios.</li><li><strong>Mejor Experiencia de Usuario</strong>: Hay una mejora tangible en la calidad de los resultados de búsqueda. Esto indica que las capacidades combinadas de Jina Reranker y BM25 están mejor alineadas con las necesidades específicas de los usuarios, mejorando su experiencia general de búsqueda.</li><li><strong>Alta Precisión para Consultas Complejas</strong>: Cuando se trata de búsquedas difíciles, esta sinergia asegura una comprensión más detallada tanto de la consulta como del contenido relacionado. Esto se traduce en resultados más precisos y exactos.</li></ul><h2 id=\"ready-to-elevate-your-search-experience\">¿Listo para Elevar tu Experiencia de Búsqueda?</h2><p>Jina Reranker es tu solución ideal para aumentar la relevancia de tus resultados de búsqueda. Se integra perfectamente con tu sistema de búsqueda existente y puede implementarse rápidamente con un mínimo de codificación.</p><p>Si te intriga lo que has leído hasta ahora y estás ansioso por ver la diferencia que Jina Reranker puede hacer, ¿por qué no lo pruebas? Comienza tu viaje y sé testigo del poder transformador de los <a href=\"https://jina.ai/?ref=jina-ai-gmbh.ghost.io\">modelos Search Foundation de Jina AI</a> en tu propio entorno.</p>",
  "comment_id": "6628fe61da339c00015740b9",
  "feature_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_56e4debd659c41d7b40a33256ccdce6c.jpeg",
  "featured": false,
  "visibility": "public",
  "created_at": "2024-04-24T14:43:13.000+02:00",
  "updated_at": "2024-07-08T21:11:33.000+02:00",
  "published_at": "2024-04-24T15:38:08.000+02:00",
  "custom_excerpt": "Learn how to integrate Jina Reranker with lexical search engines to take advantage of superior semantic understanding while avoiding the downsides of migrating to a fully-fledged vector search infrastructure.",
  "codeinjection_head": null,
  "codeinjection_foot": null,
  "custom_template": null,
  "canonical_url": null,
  "authors": [
    {
      "id": "6620de1e7f510100015da95e",
      "name": "Yuting Zhang",
      "slug": "yuting",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/Yuting-Portrait-1.jpeg",
      "cover_image": null,
      "bio": null,
      "website": null,
      "location": null,
      "facebook": null,
      "twitter": null,
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/yuting/"
    },
    {
      "id": "65e85e35b22368000152a4bf",
      "name": "Francesco Kruk",
      "slug": "francesco",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/03/Portrait-Picture_Low.jpg",
      "cover_image": null,
      "bio": null,
      "website": null,
      "location": null,
      "facebook": null,
      "twitter": null,
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/francesco/"
    }
  ],
  "tags": [
    {
      "id": "634a1a8ccebfc1003d8ab706",
      "name": "Tech Blog",
      "slug": "tech-blog",
      "description": null,
      "feature_image": null,
      "visibility": "public",
      "og_image": null,
      "og_title": null,
      "og_description": null,
      "twitter_image": null,
      "twitter_title": null,
      "twitter_description": null,
      "meta_title": null,
      "meta_description": null,
      "codeinjection_head": null,
      "codeinjection_foot": null,
      "canonical_url": null,
      "accent_color": null,
      "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
    }
  ],
  "primary_author": {
    "id": "6620de1e7f510100015da95e",
    "name": "Yuting Zhang",
    "slug": "yuting",
    "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/Yuting-Portrait-1.jpeg",
    "cover_image": null,
    "bio": null,
    "website": null,
    "location": null,
    "facebook": null,
    "twitter": null,
    "meta_title": null,
    "meta_description": null,
    "url": "https://jina-ai-gmbh.ghost.io/author/yuting/"
  },
  "primary_tag": {
    "id": "634a1a8ccebfc1003d8ab706",
    "name": "Tech Blog",
    "slug": "tech-blog",
    "description": null,
    "feature_image": null,
    "visibility": "public",
    "og_image": null,
    "og_title": null,
    "og_description": null,
    "twitter_image": null,
    "twitter_title": null,
    "twitter_description": null,
    "meta_title": null,
    "meta_description": null,
    "codeinjection_head": null,
    "codeinjection_foot": null,
    "canonical_url": null,
    "accent_color": null,
    "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
  },
  "url": "https://jina-ai-gmbh.ghost.io/podcast/having-it-both-ways-combining-bm25-with-ai-reranking/",
  "excerpt": "Aprende cómo integrar Jina Reranker con motores de búsqueda léxica para aprovechar una comprensión semántica superior mientras evitas los inconvenientes de migrar a una infraestructura completa de búsqueda vectorial.",
  "reading_time": 6,
  "access": true,
  "comments": false,
  "og_image": null,
  "og_title": null,
  "og_description": null,
  "twitter_image": null,
  "twitter_title": null,
  "twitter_description": null,
  "meta_title": null,
  "meta_description": null,
  "email_subject": null,
  "frontmatter": null,
  "feature_image_alt": "Black background embellished with binary code, featuring a central tech-inspired emblem with multicolored dots, BM25 tag, con",
  "feature_image_caption": null
}