{
  "slug": "having-it-both-ways-combining-bm25-with-ai-reranking",
  "id": "6628fe61da339c00015740b9",
  "uuid": "13ce7c1f-bcdf-4746-93dd-5095291a2ed8",
  "title": "BM25와 AI 재순위화의 결합: 두 가지 장점을 모두 취하기",
  "html": "<p>새로운 정보 검색 기술의 발전을 따라가는 것도 중요하지만, 이미 비즈니스 가치를 입증하고 신뢰할 수 있는 구성 요소를 깨뜨리지 않는 것도 똑같이 중요합니다.</p><p><a href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker?ref=jina-ai-gmbh.ghost.io\">AI 기반 벡터 검색</a>의 성장에도 불구하고, 대부분의 기업들은 여전히 <a href=\"https://en.wikipedia.org/wiki/Okapi_BM25?ref=jina-ai-gmbh.ghost.io\">BM25 알고리즘</a>의 변형을 사용하는 전통적인 검색 기술에 의존하고 있습니다. 이는 신뢰할 수 있고 검증된 기술입니다. 완전히 새로운 시스템으로 전환하는 것은 큰 변화일 뿐만 아니라, 상당한 리소스와 운영의 전면적인 개편이 필요하기 때문에 현실적으로 어려운 경우가 많습니다. 또한, BM25는 Elasticsearch와 Solr 같은 널리 사용되는 검색 엔진 플랫폼에서 사용되는 어휘 검색 엔진의 핵심이며, 많은 사용 사례에서 이미 좋은 결과를 보여주고 있습니다.</p><p>따라서 많은 기업들은 AI 기반 검색이 <a href=\"https://db-engines.com/en/ranking_trend?ref=jina-ai-gmbh.ghost.io\" rel=\"noreferrer\">사용자 만족도와 결과 품질을 크게 향상시킨다는</a> 설득력 있는 증거에도 불구하고 신경망 검색으로의 완전한 전환을 주저하고 있습니다.</p><h2 id=\"retrieval-agnostic-neural-reranking\">검색 방식에 구애받지 않는 신경망 재순위화</h2><p>Reranker는 검색 시스템 환경에 혁신적인 추가 기능입니다. <a href=\"https://www.elastic.co/elasticsearch?ref=jina-ai-gmbh.ghost.io\">Elasticsearch</a>와 같은 기존 검색 엔진의 가치를 높이기 위해 설계되었으며, 검색 품질을 개선하는 애드온처럼 작동하는 추가 계층으로 기능합니다. 어떤 검색 기술과 연결되어 있는지 알 필요 없이, 단순히 매치 리스트를 받아 더 나은 순서로 재정렬합니다.</p><p>Jina Reranker는 전통적인 검색 기술에 더 깊은 이해도를 추가합니다. BM25와 같은 알고리즘은 용어 빈도를 기반으로 문서를 검색하는 데는 좋지만, 사용자의 의도를 고려하여 검색된 텍스트의 의미를 평가하는 데는 어려움을 겪습니다. 이것이 AI가 뛰어난 부분입니다: Reranker는 사용자가 찾고자 하는 것에 더 잘 부합하는 결과를 만들어내는 데 도움을 줍니다.</p><p>따라서 AI 모델의 강력한 장점을 검색 프레임워크에 도입하고자 하는 기업에게 Jina Reranker를 추가하는 것은 현명한 선택이 될 수 있으며, 기존 검색 인프라를 교체하는 부담을 지지 않아도 됩니다. 이는 검색 결과를 단순히 수용 가능한 수준이 아닌, 더 관련성 있고 정확한 탁월한 수준으로 개선하는 것에 관한 것입니다.</p><h2 id=\"why-jina-reranker\">Jina Reranker를 선택하는 이유</h2><p>재순위화 모델들 중에서 <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">Jina Reranker 모델</a>은 <a href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker/?ref=jina-ai-gmbh.ghost.io\">선두주자</a>로서 <a href=\"https://jina.ai/news/smaller-faster-cheaper-jina-rerankers-turbo-and-tiny?ref=jina-ai-gmbh.ghost.io\">성능 벤치마크</a>에서 최신 점수를 기록하며 돋보입니다.</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker/?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Maximizing Search Relevance and RAG Accuracy with Jina Reranker</div><div class=\"kg-bookmark-description\">Boost your search and RAG accuracy with Jina Reranker. Our new model improves the accuracy and relevance by 20% over simple vector search. Try it now for free!</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina.ai/icons/favicon-128x128.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/02/Reranker1.png\" alt=\"\"></div></a></figure><p>이 글에서는 e-commerce 플랫폼을 위한 추천 시스템을 구현하는 방법을 보여드리겠습니다. 먼저 BM25 검색기 자체의 성능을 분석한 다음, 검색 파이프라인에 Jina Reranker를 추가하여 결과가 어떻게 더 관련성 있고 효과적이 되는지 살펴보겠습니다.</p><div class=\"kg-card kg-callout-card kg-callout-card-blue\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\"><a href=\"https://colab.research.google.com/github/jina-ai/workshops/blob/main/notebooks/embeddings/bm25/Retrieval_Reranker.ipynb?ref=jina-ai-gmbh.ghost.io\">Colab</a>에서 따라하거나 <a href=\"https://raw.githubusercontent.com/jina-ai/workshops/main/notebooks/embeddings/bm25/Retrieval_Reranker.ipynb?ref=jina-ai-gmbh.ghost.io\">노트북을 다운로드</a>하여 진행할 수 있습니다.</div></div><h2 id=\"add-jina-reranker-to-your-existing-workflow\">기존 워크플로우에 Jina Reranker 추가하기:</h2><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png\" class=\"kg-image\" alt=\"Screenshot 2024-04-08 at 11.44.21\" loading=\"lazy\" width=\"2000\" height=\"468\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_ead786ce675a16e1d2b30dcaf479c9f0.png 2000w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Jina Reranker를 통합한 업데이트된 워크플로우 내용입니다:</p><ul><li><strong>초기 검색</strong>: 쿼리가 입력되면 BM25 검색 엔진이 쿼리 용어와 문서를 매칭하여 관련 문서를 검색합니다.</li><li><strong>재순위화</strong>: <code>jina-reranker-v1-base-en</code>이 이러한 초기 결과를 가져와 최신 AI를 사용하여 사용자의 쿼리에 비추어 각 검색된 문서의 관련성을 평가합니다.</li><li><strong>결과 반환</strong>: Jina Reranker는 검색 결과의 순서를 재배열하여 가장 관련성 높은 문서가 상위에 표시되도록 합니다.</li></ul><p>우리의 <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">사용하기 쉬운 API</a>와 포괄적인 문서는 시스템에 최소한의 변경만으로도 전체 프로세스를 안내해드립니다.</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/reranker/?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Reranker API</div><div class=\"kg-bookmark-description\">Maximize the search relevancy and RAG accuracy at ease</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina.ai/icons/favicon-128x128.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina.ai/banner-reranker-api.png\" alt=\"\"></div></a></figure><h2 id=\"see-it-in-action-enhancing-e-commerce-search-with-jina-reranker\">실제 작동 확인하기: Jina Reranker로 E-Commerce 검색 개선하기</h2><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg\" class=\"kg-image\" alt=\"BM25+Rerank dark (1)\" loading=\"lazy\" width=\"1600\" height=\"900\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 1000w, https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_25d8f98d26cab1a5375a4f3d8ffa9278-1.jpeg 1600w\" sizes=\"(min-width: 720px) 720px\"><figcaption><i><em class=\"italic\" style=\"white-space: pre-wrap;\">쿼리가 BM25를 통과하고 검색된 문서들이 Jina Reranker에 의해 개선됩니다.</em></i></figcaption></figure><p>실제 애플리케이션에서 Jina Reranker의 영향을 보여주기 위해 실용적인 e-commerce 예제를 살펴보겠습니다. 여기서의 목표는 사용자의 쿼리를 기반으로 제품 목록을 검색하는 것입니다.</p><p>이를 설명하기 위해, 인기 있는 AI 검색 및 오케스트레이션 프레임워크인 <a href=\"https://haystack.deepset.ai/?ref=jina-ai-gmbh.ghost.io\">deepset의 Haystack</a>을 사용하여 두 개의 검색 파이프라인을 설정하겠습니다. 첫 번째 파이프라인은 BM25만 사용합니다. 두 번째는 BM25 시스템에 <code>jina-reranker-v1-base-en</code>을 통합합니다. 기존 Elasticsearch 클러스터가 있다면 Haystack의 <code>InMemoryDocumentStore</code> 구성 요소를 <code>ElasticsearchDocumentStore</code>로 쉽게 교체하여 동일한 실험을 수행할 수 있습니다.</p><p>Kaggle의 <a href=\"https://www.kaggle.com/datasets/kuchhbhi/fashion-ecommerce-data?ref=jina-ai-gmbh.ghost.io\">샘플 데이터셋</a>을 사용할 것입니다. CSV를 <a href=\"https://raw.githubusercontent.com/jina-ai/workshops/main/notebooks/embeddings/bm25/fashion_data.csv?ref=jina-ai-gmbh.ghost.io\">여기서</a> 직접 다운로드할 수 있습니다. 이 나란한 비교는 검색 워크플로우에 Jina Reranker를 통합함으로써 가져오는 향상을 보여줍니다.</p><p>시작하려면 필요한 모든 구성 요소를 설치하세요:</p><pre><code class=\"language-bash\">pip install --q haystack-ai jina-haystack\n</code></pre><p>Jina API Key를 환경 변수로 설정하세요. <a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">여기서</a> 생성할 수 있습니다.</p><pre><code class=\"language-Python\">import os\nimport getpass\n\nos.environ[\"JINA_API_KEY\"] = getpass.getpass()\n</code></pre><p>제품명을 기반으로 제품을 검색하세요. 예를 들어:</p><pre><code class=\"language-Python\">short_query = \"Nightwear for Women\"\n</code></pre><p>각 CSV 행을 <code>Document</code>로 변환합니다:</p><pre><code class=\"language-Python\">import csv\nfrom haystack import Document\n\ndocuments = []\nwith open(\"fashion_data.csv\") as f:\n    data = csv.reader(f, delimiter=\";\")\n    for row in data:\n      row_text = ''.join(row)\n      row_doc = Document(content=row_text, meta={\"prod_id\": row[0], \"prod_image\": row[1]})\n      documents.append(row_doc)\n</code></pre><h2 id=\"pipeline-1-bm25-only\">파이프라인 #1: BM25만 사용</h2><pre><code class=\"language-Python\">from haystack import Pipeline\nfrom haystack.document_stores.types import DuplicatePolicy\nfrom haystack.document_stores.in_memory import InMemoryDocumentStore\nfrom haystack.components.retrievers.in_memory import InMemoryBM25Retriever\n\ndocument_store=InMemoryDocumentStore()\ndocument_store.write_documents(documents=documents, policy=DuplicatePolicy.OVERWRITE)\n\nretriever = InMemoryBM25Retriever(document_store=document_store)\n\nrag_pipeline = Pipeline()\nrag_pipeline.add_component(\"retriever\", retriever)\n</code></pre><pre><code class=\"language-Python\">result = rag_pipeline.run(\n            {\n                \"retriever\": {\"query\": query, \"top_k\": 50},\n            }\n        )\n\nfor doc in result[\"retriever\"][\"documents\"]:\n    print(\"Product ID:\", doc.meta[\"prod_id\"])\n    print(\"Product Image:\", doc.meta[\"prod_image\"])\n    print(\"Score:\", doc.score)\n    print(\"-\"*100)\n</code></pre><p>BM25가 반환한 50개 결과의 썸네일입니다:<br></p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_f2dc26e35fe66ac84c1d641a47bebbce.png\" class=\"kg-image\" alt=\"image\" loading=\"lazy\" width=\"446\" height=\"1088\"></figure><p>결과가 잠옷과 관련되어 쿼리와 부분적으로 일치하는 것을 볼 수 있지만, 가장 관련성 높은 매칭(격자에서 굵게 표시된 이미지)이 BM25가 검색한 수많은 제품 사이에서 묻혀버리는 것 같습니다. 실제로 BM25만 사용하면 사용자는 페이지 상단에 주로 관련 없는 결과를 받게 됩니다.</p><h2 id=\"pipeline-2-bm25-jina-reranker\">파이프라인 #2: BM25 + Jina Reranker</h2><p>아래 스크립트는 이 파이프라인을 단계별로 구성하는 방법을 보여줍니다:</p><pre><code class=\"language-Python\">from haystack_integrations.components.rankers.jina import JinaRanker\n\nranker_retriever = InMemoryBM25Retriever(document_store=document_store)\n\nranker = JinaRanker()\n\nranker_pipeline = Pipeline()\nranker_pipeline.add_component(\"ranker_retriever\", ranker_retriever)\nranker_pipeline.add_component(\"ranker\", ranker)\n\nranker_pipeline.connect(\"ranker_retriever.documents\", \"ranker.documents\")\n</code></pre><pre><code class=\"language-Python\">result = ranker_pipeline.run(\n            {\n                \"ranker_retriever\": {\"query\": query, \"top_k\": 50},\n                \"ranker\": {\"query\": query, \"top_k\": 10},\n            }\n        )\n\nfor doc in result[\"ranker\"][\"documents\"]:\n    print(\"Product ID:\", doc.meta[\"prod_id\"])\n    print(\"Product Image:\", doc.meta[\"prod_image\"])\n    print(\"Score:\", doc.score)\n    print(\"-\"*100)\n</code></pre><p>Jina Reranker가 반환한 상위 10개 결과입니다:</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_05929b0008a1ced2bf724dd8b89d0ec5.png\" class=\"kg-image\" alt=\"image\" loading=\"lazy\" width=\"442\" height=\"218\"></figure><p>BM25와 비교하면, Jina Reranker는 훨씬 더 관련성 높은 답변 모음을 반환합니다. 이커머스 환경에서 이는 더 나은 사용자 경험과 구매 가능성 증가로 이어집니다.</p><h2 id=\"impact-of-integrating-jina-reranker-with-bm25\">BM25와 Jina Reranker 통합의 영향</h2><p>이커머스 도메인에서의 사례 연구를 통해, Jina Reranker와 Elasticsearch 같은 전통적인 검색 엔진의 통합이 검색 기술에서 중요한 도약임이 분명해졌습니다. 이 통합이 검색 경험을 개선하는 방법을 살펴보겠습니다:</p><ul><li><strong>향상된 적중률</strong>: Jina Reranker와 전통적인 검색의 결합으로 관련 결과의 빈도가 눈에 띄게 증가했습니다. 이는 검색 프로세스를 더 정확하게 만들어 사용자 쿼리와 긴밀하게 연결됩니다.</li><li><strong>개선된 사용자 경험</strong>: 검색 결과의 품질이 눈에 띄게 향상되었습니다. 이는 Jina Reranker와 BM25의 결합된 기능이 사용자의 특정 요구사항과 더 잘 부합하여 전반적인 검색 경험을 향상시킨다는 것을 보여줍니다.</li><li><strong>복잡한 쿼리에 대한 높은 정확도</strong>: 어려운 검색의 경우, 이러한 시너지는 쿼리와 관련 콘텐츠에 대한 더 상세한 이해를 보장합니다. 이는 더 정확하고 선명한 결과로 이어집니다.</li></ul><h2 id=\"ready-to-elevate-your-search-experience\">검색 경험을 향상시킬 준비가 되셨나요?</h2><p>Jina Reranker는 검색 결과의 관련성을 높이기 위한 이상적인 솔루션입니다. 기존 검색 시스템과 원활하게 통합되며 최소한의 코딩으로 신속하게 구현할 수 있습니다.</p><p>지금까지 읽은 내용이 흥미롭고 Jina Reranker가 만들어낼 수 있는 차이를 직접 확인하고 싶으시다면 한번 시도해보세요. <a href=\"https://jina.ai/?ref=jina-ai-gmbh.ghost.io\">Jina AI의 Search Foundation 모델</a>이 여러분의 환경에서 가져올 변혁적인 힘을 직접 경험해보세요.</p>",
  "comment_id": "6628fe61da339c00015740b9",
  "feature_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/upload_56e4debd659c41d7b40a33256ccdce6c.jpeg",
  "featured": false,
  "visibility": "public",
  "created_at": "2024-04-24T14:43:13.000+02:00",
  "updated_at": "2024-07-08T21:11:33.000+02:00",
  "published_at": "2024-04-24T15:38:08.000+02:00",
  "custom_excerpt": "Learn how to integrate Jina Reranker with lexical search engines to take advantage of superior semantic understanding while avoiding the downsides of migrating to a fully-fledged vector search infrastructure.",
  "codeinjection_head": null,
  "codeinjection_foot": null,
  "custom_template": null,
  "canonical_url": null,
  "authors": [
    {
      "id": "6620de1e7f510100015da95e",
      "name": "Yuting Zhang",
      "slug": "yuting",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/Yuting-Portrait-1.jpeg",
      "cover_image": null,
      "bio": null,
      "website": null,
      "location": null,
      "facebook": null,
      "twitter": null,
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/yuting/"
    },
    {
      "id": "65e85e35b22368000152a4bf",
      "name": "Francesco Kruk",
      "slug": "francesco",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/03/Portrait-Picture_Low.jpg",
      "cover_image": null,
      "bio": null,
      "website": null,
      "location": null,
      "facebook": null,
      "twitter": null,
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/francesco/"
    }
  ],
  "tags": [
    {
      "id": "634a1a8ccebfc1003d8ab706",
      "name": "Tech Blog",
      "slug": "tech-blog",
      "description": null,
      "feature_image": null,
      "visibility": "public",
      "og_image": null,
      "og_title": null,
      "og_description": null,
      "twitter_image": null,
      "twitter_title": null,
      "twitter_description": null,
      "meta_title": null,
      "meta_description": null,
      "codeinjection_head": null,
      "codeinjection_foot": null,
      "canonical_url": null,
      "accent_color": null,
      "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
    }
  ],
  "primary_author": {
    "id": "6620de1e7f510100015da95e",
    "name": "Yuting Zhang",
    "slug": "yuting",
    "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/04/Yuting-Portrait-1.jpeg",
    "cover_image": null,
    "bio": null,
    "website": null,
    "location": null,
    "facebook": null,
    "twitter": null,
    "meta_title": null,
    "meta_description": null,
    "url": "https://jina-ai-gmbh.ghost.io/author/yuting/"
  },
  "primary_tag": {
    "id": "634a1a8ccebfc1003d8ab706",
    "name": "Tech Blog",
    "slug": "tech-blog",
    "description": null,
    "feature_image": null,
    "visibility": "public",
    "og_image": null,
    "og_title": null,
    "og_description": null,
    "twitter_image": null,
    "twitter_title": null,
    "twitter_description": null,
    "meta_title": null,
    "meta_description": null,
    "codeinjection_head": null,
    "codeinjection_foot": null,
    "canonical_url": null,
    "accent_color": null,
    "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
  },
  "url": "https://jina-ai-gmbh.ghost.io/podcast/having-it-both-ways-combining-bm25-with-ai-reranking/",
  "excerpt": "완벽한 벡터 검색 인프라로의 마이그레이션에 따르는 단점을 피하면서 우수한 의미적 이해의 장점을 활용하기 위해 Jina Reranker를 어휘 검색 엔진과 통합하는 방법을 알아보세요.",
  "reading_time": 6,
  "access": true,
  "comments": false,
  "og_image": null,
  "og_title": null,
  "og_description": null,
  "twitter_image": null,
  "twitter_title": null,
  "twitter_description": null,
  "meta_title": null,
  "meta_description": null,
  "email_subject": null,
  "frontmatter": null,
  "feature_image_alt": "Black background embellished with binary code, featuring a central tech-inspired emblem with multicolored dots, BM25 tag, con",
  "feature_image_caption": null
}