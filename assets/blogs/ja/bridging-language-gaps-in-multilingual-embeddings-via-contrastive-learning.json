{
  "slug": "bridging-language-gaps-in-multilingual-embeddings-via-contrastive-learning",
  "id": "67066bd652567c0001d0f2cd",
  "uuid": "1130051f-f343-4eb2-9956-9b574c212704",
  "title": "対照学習による多言語埋め込みにおける言語ギャップの架橋",
  "html": "<p>多言語モデルにおける主要な課題の1つは、「<strong>言語ギャップ</strong>」です。これは、異なる言語で同じ意味を持つフレーズが、本来あるべき程度には近接してクラスタリングされない現象を指します。理想的には、ある言語のテキストと、その他の言語での等価表現は類似した表現（つまり、非常に近い埋め込み）を持つべきであり、これにより異なる言語のテキストに対して同じように機能するクロス言語アプリケーションが可能になります。しかし、モデルは微妙にテキストの言語を表現してしまい、クロス言語パフォーマンスの低下につながる「言語ギャップ」を生み出します。</p><p>この記事では、この言語ギャップと、それがテキスト埋め込みモデルのパフォーマンスにどのような影響を与えるかを探ります。私たちは、<code>jina-xlm-roberta</code>モデルと最新の<code>jina-embeddings-v3</code>を使用して、同じ言語内のパラフレーズや異なる言語ペア間の翻訳の意味的整列を評価する実験を行いました。これらの実験により、異なるトレーニング条件下で、類似または同一の意味を持つフレーズがどの程度うまくクラスタリングされるかが明らかになりました。</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/news/jina-embeddings-v3-a-frontier-multilingual-embedding-model/?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Jina Embeddings v3: A Frontier Multilingual Embedding Model</div><div class=\"kg-bookmark-description\">jina-embeddings-v3 is a frontier multilingual text embedding model with 570M parameters and 8192 token-length, outperforming the latest proprietary embeddings from OpenAI and Cohere on MTEB.</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina-ai-gmbh.ghost.io/content/images/icon/favicon-128x128-6.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/thumbnail/v3banner-1.png\" alt=\"\" onerror=\"this.style.display = 'none'\"></div></a></figure><p>私たちはまた、クロス言語の意味的整列を改善するためのトレーニング手法、特に対照学習における<strong>パラレル多言語データ</strong>の導入についても実験を行いました。この記事では、その洞察と結果を共有します。</p><h2 id=\"multilingual-model-training-creates-and-reduces-the-language-gap\"><strong>多言語モデルトレーニングは言語ギャップを作り出し、そして縮小する</strong></h2><p>テキスト埋め込みモデルのトレーニングは、通常2つの主要な部分からなる多段階プロセスを含みます：</p><ol><li><a href=\"https://aclanthology.org/2023.acl-long.49/?ref=jina-ai-gmbh.ghost.io\"><strong>マスク言語モデリング</strong></a>（MLM）：事前学習は通常、一部のトークンがランダムにマスクされた大量のテキストを使用します。モデルはこれらのマスクされたトークンを予測するようトレーニングされます。この手順により、モデルは構文、語彙的意味論、実世界の制約から生じる可能性のあるトークン間の選択依存関係を含む、トレーニングデータの言語パターンを学習します。</li><li><a href=\"https://paperswithcode.com/task/contrastive-learning?ref=jina-ai-gmbh.ghost.io\"><strong>対照学習</strong></a>：事前学習後、モデルは意味的に類似したテキストの埋め込みをより近づけ、（任意で）類似していないものをより遠ざけるために、キュレーションされた、または半キュレーションされたデータでさらにトレーニングされます。このトレーニングでは、意味的類似性が既に知られているか、少なくとも信頼性高く推定されているテキストのペア、トリプレット、あるいはグループを使用することができます。これには複数のサブステージがある場合があり、このプロセスの部分に対して様々なトレーニング戦略が存在します。新しい研究が頻繁に発表されており、最適なアプローチについての明確なコンセンサスはありません。</li></ol><p>言語ギャップがどのように生じ、どのように解消できるかを理解するには、両段階の役割を見る必要があります。</p><h3 id=\"masked-language-pretraining\"><strong>マスク言語事前学習</strong></h3><p>テキスト埋め込みモデルのクロス言語能力の一部は、事前学習中に獲得されます。</p><p>同源語や借用語により、モデルは大量のテキストデータから言語間の意味的整列の一部を学習することが可能になります。例えば、英語の <em>banana</em> とフランス語の <em>banane</em>（およびドイツ語の <em>Banane</em>）は、頻出し、綴りも十分似ているため、埋め込みモデルは\"banan-\"のような形の単語が言語間で類似した分布パターンを持つことを学習できます。この情報を活用して、言語間で見た目が異なる他の単語も同様の意味を持つことをある程度学習し、文法構造がどのように翻訳されるかさえも理解できます。</p><p>しかし、これは明示的なトレーニングなしに起こります。</p><p><code>jina-embeddings-v3</code>の事前学習済みバックボーンである<code>jina-xlm-roberta</code>モデルを使用して、マスク言語事前学習から言語間の等価性をどの程度学習したかをテストしました。英語の文章をドイツ語、オランダ語、簡体字中国語、日本語に翻訳したセットの2次元<a href=\"https://pair-code.github.io/understanding-umap/?ref=jina-ai-gmbh.ghost.io\">UMAP 文章表現</a>をプロットしました。結果は以下の図の通りです：</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/jina_xlm_roberta_mlm_representation.png\" class=\"kg-image\" alt=\"Multilingual scatterplot showing word embeddings' alignment across five languages on UMAP dimensions.\" loading=\"lazy\" width=\"1000\" height=\"800\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/jina_xlm_roberta_mlm_representation.png 600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/jina_xlm_roberta_mlm_representation.png 1000w\" sizes=\"(min-width: 720px) 720px\"></figure><div class=\"kg-card kg-callout-card kg-callout-card-blue\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\">英語の文章とそのドイツ語、オランダ語、中国語、日本語への翻訳の2次元 UMAP 投影。グレーの線は非英語の文章と、それらが翻訳された元の英語文章を結んでいます。<br><br>これらの文章は <code spellcheck=\"false\" style=\"white-space: pre-wrap;\">jina-xlm-roberta</code> の埋め込み空間で、強く言語固有のクラスターを形成する傾向があります。ただし、この投影では2次元への投影の副作用かもしれない外れ値がいくつか見られます。</div></div><p>事前学習が同じ言語の文章の埋め込みを非常に強くクラスタリングしていることがわかります。これはより高次元の空間での分布を2次元に投影したものなので、例えば、英語の文章の良いドイツ語訳が、その英語元文の埋め込みに最も近いドイツ語文の埋め込みである可能性はまだあります。しかし、英語の文章の埋め込みは、意味的に同一または非常に近いドイツ語文よりも、別の英語文に近い可能性が高いことを示しています。</p><p>また、ドイツ語とオランダ語が他の言語ペアよりもはるかに近いクラスターを形成していることにも注目してください。これは、比較的近い関係にある2つの言語としては驚くべきことではありません。ドイツ語とオランダ語は、時に部分的に相互理解が可能なほど似ています。</p><p>日本語と中国語も他の言語よりも近いように見えます。両者は同じような関係ではありませんが、書き言葉の日本語は通常<em>漢字</em>（漢字）、中国語では<em>hànzì</em>を使用します。日本語はこれらの文字の大部分を中国語と共有しており、両言語は一つまたは複数の漢字/hànzì で書かれる多くの単語を共有しています。MLM の観点からは、これはドイツ語とオランダ語の間にある視覚的な類似性と同じ種類のものです。</p><p>この「言語ギャップ」は、2つの言語それぞれ2文ずつを見るだけでもより単純な形で確認できます：</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--8-.png\" class=\"kg-image\" alt=\"Graph illustrating linguistic relationships with color-coded lines, data points for English and German phrases, and an &quot;MLM P\" loading=\"lazy\" width=\"1815\" height=\"1014\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/image--8-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/image--8-.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/10/image--8-.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--8-.png 1815w\" sizes=\"(min-width: 720px) 720px\"></figure><p>MLM は自然にテキストを言語でクラスタリングする傾向があるため、\"my dog is blue\" と \"my cat is red\" は、それらのドイツ語の対応訳から遠く離れて一緒にクラスタリングされています。以前のブログ記事で議論された「<a href=\"https://jina.ai/news/the-what-and-why-of-text-image-modality-gap-in-clip-models/?ref=jina-ai-gmbh.ghost.io\">モダリティギャップ</a>」とは異なり、これは言語間の表面的な類似点と相違点から生じると考えられます：類似した綴り、印刷における同じ文字列の使用、そして可能性として形態論と構文構造の類似性（共通の語順や単語の構築方法）です。</p><p>要するに、モデルが MLM 事前学習で言語間の等価性を学習している程度は、言語によるテキストのクラスタリングへの強いバイアスを克服するには十分ではありません。大きな言語ギャップが残ります。</p><h3 id=\"contrastive-learning\"><strong>対照学習</strong></h3><p>理想的には、埋め込みモデルは言語に無関心で、その埋め込みに一般的な意味のみをエンコードすることが望ましいです。そのようなモデルでは、言語によるクラスタリングは見られず、言語ギャップも存在しないはずです。ある言語の文章は、良い翻訳に非常に近く、たとえ同じ言語であっても、別の意味を持つ他の文章からは遠く離れているべきです。以下の図のようになります：</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-10---1-.png\" class=\"kg-image\" alt=\"Graph displays &quot;Clustering by Meaning&quot; with multilingual labels, emphasizing abstract concepts on a dark backdrop.\" loading=\"lazy\" width=\"1815\" height=\"1014\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/output-10---1-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/output-10---1-.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/10/output-10---1-.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-10---1-.png 1815w\" sizes=\"(min-width: 720px) 720px\"></figure><p>MLM 事前学習だけではそれを達成できないため、埋め込みにおけるテキストの意味的表現を改善するために追加の<em>対照学習</em>技術を使用します。</p><p>対照学習では、意味的に類似または相違があることが分かっているテキストのペアや、一方のペアがもう一方よりも類似していることが分かっているトリプレットを使用します。トレーニング中に、これらのテキストペアとトリプレット間の既知の関係を反映するように重みが調整されます。</p><p>私たちの対照学習データセットには30の言語が含まれていますが、ペアとトリプレットの97%は単一言語内のものであり、クロス言語のペアやトリプレットは3%にすぎません。しかし、この3%だけでも劇的な結果を生み出しています：<code>jina-embeddings-v3</code>からの埋め込みの UMAP 投影が示すように、埋め込みはほとんど言語クラスタリングを示さず、意味的に類似したテキストは言語に関係なく近い埋め込みを生成します。</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/jina_xlm_contrastive_representation.png\" class=\"kg-image\" alt=\"Scatter plot on black background showing language distribution post-contrastive training with UMAP dimensions.\" loading=\"lazy\" width=\"1000\" height=\"800\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/jina_xlm_contrastive_representation.png 600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/jina_xlm_contrastive_representation.png 1000w\" sizes=\"(min-width: 720px) 720px\"></figure><p>これを確認するため、STS17 データセットにおいて <code>jina-xlm-roberta</code> と <code>jina-embeddings-v3</code> が生成した表現の Spearman 相関を測定しました。</p><div class=\"kg-card kg-callout-card kg-callout-card-blue\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\"><a href=\"https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient?ref=jina-ai-gmbh.ghost.io\"><b><strong style=\"white-space: pre-wrap;\">Spearman 相関</strong></b></a>は順位相関を測定します。つまり、2つの順序付けられたリストがどの程度一致しているかを示します。実際のスコアよりも、どのアイテムが他のアイテムより上位または下位にランク付けされるかの方が重要であるため、これは埋め込みモデルを互いに、また人間のスコアと比較するための良い仕組みです。</div></div><p>以下の表は、翻訳されたテキストの異なる言語間での意味的類似性ランキングの Spearman 相関を示しています。英語の文のセットを取り、それらの埋め込みと特定の参照文の埋め込みとの類似性を測定し、最も類似性が高いものから低いものへと順序付けます。その後、それらの文を別の言語に翻訳してランキングプロセスを繰り返します。理想的な言語横断的な埋め込みモデルでは、2つの順序付けられたリストは同じになり、Spearman 相関は 1.0 となります。</p><p>以下のグラフと表は、<code>jina-xlm-roberta</code> と <code>jina-embeddings-v3</code> の両方を使用して、STS17 ベンチマークにおける英語と他の6言語との比較結果を示しています。</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-4---1-.png\" class=\"kg-image\" alt=\"Bar chart comparing Spearman Correlation for English paired with AR, DE, ES, FR, IT, NL, colored in red and blue by alphabet \" loading=\"lazy\" width=\"2000\" height=\"1056\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/output-4---1-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/output-4---1-.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/10/output-4---1-.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-4---1-.png 2085w\" sizes=\"(min-width: 720px) 720px\"></figure>\n<!--kg-card-begin: html-->\n<table>\n<thead>\n<tr>\n<th><strong>Task</strong></th>\n<th><strong><code>jina-xlm-roberta</code></strong></th>\n<th><strong><code>jina-embeddings-v3</code></strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>English ↔ Arabic</td>\n<td>0.1581</td>\n<td><strong>0.7977</strong></td>\n</tr>\n<tr>\n<td>English ↔ German</td>\n<td>0.2136</td>\n<td><strong>0.8366</strong></td>\n</tr>\n<tr>\n<td>English ↔ Spanish</td>\n<td>0.1049</td>\n<td><strong>0.8509</strong></td>\n</tr>\n<tr>\n<td>English ↔ French</td>\n<td>0.1659</td>\n<td><strong>0.8378</strong></td>\n</tr>\n<tr>\n<td>English ↔ Italian</td>\n<td>0.2293</td>\n<td><strong>0.8674</strong></td>\n</tr>\n<tr>\n<td>English ↔ Dutch</td>\n<td>0.2387</td>\n<td><strong>0.8398</strong></td>\n</tr>\n</tbody>\n</table>\n<!--kg-card-end: html-->\n<p>事前学習と比較して、対照学習が生む大きな違いがここに示されています。学習データの中で言語横断的なデータはわずか3%しかありませんが、<code>jina-embeddings-v3</code> モデルは事前学習で獲得した言語間のギャップをほぼ解消するのに十分な言語横断的な意味論を学習しています。</p><h2 id=\"english-vs-the-world-can-other-languages-keep-up-in-alignment\">英語対世界：他の言語は整列性を保てるか？</h2><p>私たちは <code>jina-embeddings-v3</code> を89の言語で学習させ、特に広く使用されている30の書き言葉に焦点を当てました。大規模な多言語学習コーパスを構築する努力にもかかわらず、対照学習で使用したデータの約半分は依然として英語が占めています。英語のデータの膨大さに比べると、豊富なテキスト資料が入手可能な広く使用されているグローバル言語を含む他の言語は、依然として比較的少ない割合となっています。</p><p>この英語の優位性を考えると、英語の表現は他の言語よりも整列性が高いのでしょうか？これを探るために、フォローアップ実験を実施しました。</p><p>私たちは <a href=\"https://huggingface.co/datasets/jinaai/parallel-sentences?ref=jina-ai-gmbh.ghost.io\"><code>parallel-sentences</code></a> というデータセットを構築しました。これは1,000組の英語テキストペアで構成され、「アンカー」と「ポジティブ」から成り、ポジティブテキストはアンカーテキストから論理的に導き出されるものです。</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://huggingface.co/datasets/jinaai/parallel-sentences?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">jinaai/parallel-sentences · Datasets at Hugging Face</div><div class=\"kg-bookmark-description\">We're on a journey to advance and democratize artificial intelligence through open source and open science.</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina-ai-gmbh.ghost.io/content/images/icon/favicon-3.ico\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/thumbnail/parallel-sentences.png\" alt=\"\" onerror=\"this.style.display = 'none'\"></div></a></figure><p>例えば、以下の表の最初の行を見てください。これらの文は意味的に完全に同一ではありませんが、互換性のある意味を持っています。同じ状況を情報豊かに説明しています。</p><p>私たちはこれらのペアを GPT-4 を使用してドイツ語、オランダ語、中国語（簡体字）、中国語（繁体字）、日本語の5言語に翻訳し、品質を確保するために手動で検査を行いました。</p>\n<!--kg-card-begin: html-->\n<table>\n<thead>\n<tr>\n<th><strong>Language</strong></th>\n<th><strong>Anchor</strong></th>\n<th><strong>Positive</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>English</td>\n<td>Two young girls are playing outside in a non-urban environment.</td>\n<td>Two girls are playing outside.</td>\n</tr>\n<tr>\n<td>German</td>\n<td>Zwei junge Mädchen spielen draußen in einer nicht urbanen Umgebung.</td>\n<td>Zwei Mädchen spielen draußen.</td>\n</tr>\n<tr>\n<td>Dutch</td>\n<td>Twee jonge meisjes spelen buiten in een niet-stedelijke omgeving.</td>\n<td>Twee meisjes spelen buiten.</td>\n</tr>\n<tr>\n<td>Chinese (Simplified)</td>\n<td>两个年轻女孩在非城市环境中玩耍。</td>\n<td>两个女孩在外面玩。</td>\n</tr>\n<tr>\n<td>Chinese (Traditional)</td>\n<td>兩個年輕女孩在非城市環境中玩耍。</td>\n<td>兩個女孩在外面玩。</td>\n</tr>\n<tr>\n<td>Japanese</td>\n<td>2人の若い女の子が都市環境ではない場所で遊んでいます。</td>\n<td>二人の少女が外で遊んでいます。</td>\n</tr>\n</tbody>\n</table>\n<!--kg-card-end: html-->\n<p>その後、<code>jina-embeddings-v3</code> を使用して各テキストペアをエンコードし、それらの間のコサイン類似度を計算しました。以下の図と表は、各言語のコサイン類似度スコアの分布と平均類似度を示しています：</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/1_monolingual_distribution_triplets.png\" class=\"kg-image\" alt=\"Graph showing cosine similarity distributions for textual pairs in English, German, Dutch, Chinese, and Japanese against dens\" loading=\"lazy\" width=\"1060\" height=\"590\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/1_monolingual_distribution_triplets.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/1_monolingual_distribution_triplets.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/1_monolingual_distribution_triplets.png 1060w\" sizes=\"(min-width: 720px) 720px\"></figure>\n<!--kg-card-begin: html-->\n<table>\n<thead>\n<tr>\n<th><strong>Language</strong></th>\n<th><strong>Average Cosine Similarity</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>English</td>\n<td>0.9078</td>\n</tr>\n<tr>\n<td>German</td>\n<td>0.8949</td>\n</tr>\n<tr>\n<td>Dutch</td>\n<td>0.8844</td>\n</tr>\n<tr>\n<td>Chinese (Simplified)</td>\n<td>0.8876</td>\n</tr>\n<tr>\n<td>Chinese (Traditional)</td>\n<td>0.8933</td>\n</tr>\n<tr>\n<td>Japanese</td>\n<td>0.8895</td>\n</tr>\n</tbody>\n</table>\n<!--kg-card-end: html-->\n<p>学習データにおける英語の優位性にもかかわらず、<code>jina-embeddings-v3</code> は英語と同程度に、ドイツ語、オランダ語、日本語、そして両形式の中国語における意味的類似性を認識することができます。</p><h2 id=\"breaking-language-barriers-cross-lingual-alignment-beyond-english\"><strong>言語の壁を破る：英語を超えた言語横断的整列</strong></h2><p>クロス言語の表現整合性の研究は、通常、英語を含む言語ペアを対象としています。理論的には、この偏りによって実際に起きていることが見えにくくなる可能性があります。モデルは、他の言語ペアが適切にサポートされているかどうかを検証せずに、すべてを英語の等価物にできるだけ近づけるように最適化しているかもしれません。</p><p>これを調べるため、私たちは <code>parallel-sentences</code> データセットを使用して、英語のバイリンガルペアだけでなく、クロスリンガルな整合性に関する実験を行いました。</p><p>以下の表は、異なる言語ペア間で等価なテキスト（共通の英語ソースの翻訳）におけるコサイン類似度の分布を示しています。理想的には、すべてのペアでコサイン類似度が1（つまり、意味的な埋め込みが同一）となるはずです。実際にはそれは不可能ですが、優れたモデルであれば翻訳ペアで非常に高いコサイン値を示すことが期待されます。</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--9-.png\" class=\"kg-image\" alt=\"Density graph charting cross-lingual cosine similarities for language pairs using jina-embeddings-v3 model.\" loading=\"lazy\" width=\"978\" height=\"584\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/image--9-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--9-.png 978w\" sizes=\"(min-width: 720px) 720px\"></figure>\n<!--kg-card-begin: html-->\n<table>\n<thead>\n<tr>\n<th><strong>Language Pair</strong></th>\n<th><strong>Average Cosine Similarity</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>German ↔ Dutch</td>\n<td>0.8779</td>\n</tr>\n<tr>\n<td>German ↔ Japanese</td>\n<td>0.8664</td>\n</tr>\n<tr>\n<td>Chinese (Simplified) ↔ Japanese</td>\n<td>0.8534</td>\n</tr>\n<tr>\n<td>Dutch ↔ Chinese (Simplified)</td>\n<td>0.8479</td>\n</tr>\n<tr>\n<td>Chinese (Simplified) ↔ Chinese (Traditional)</td>\n<td>0.8758</td>\n</tr>\n</tbody>\n</table>\n<!--kg-card-end: html-->\n<p>異なる言語間の類似度スコアは同じ言語内の互換性のあるテキスト間と比べてやや低いものの、依然として非常に高い値を示しています。オランダ語とドイツ語の翻訳間のコサイン類似度は、ドイツ語内の互換性のあるテキスト間とほぼ同じ高さです。</p><p>これは、ドイツ語とオランダ語が非常に似ている言語であることを考えると、驚くことではないかもしれません。同様に、ここでテストした2種類の中国語は実際には2つの異なる言語ではなく、同じ言語の文体的に少し異なる形態にすぎません。しかし、オランダ語と中国語、あるいはドイツ語と日本語のような非常に異なる言語ペアでも、意味的に等価なテキスト間で非常に強い類似性を示していることがわかります。</p><p>これらの非常に高い類似度の値が、翻訳者として ChatGPT を使用したことの副作用である可能性を考慮しました。これを検証するため、<a href=\"https://help.ted.com/hc/en-us/articles/360018572954-How-do-I-find-transcripts-for-TED-and-TEDx-talks?ref=jina-ai-gmbh.ghost.io\">TED Talks の人手による英語とドイツ語の翻訳原稿</a>をダウンロードし、整合された翻訳文が同様の高い相関を示すかどうかを確認しました。</p><p>結果は、以下の図からわかるように、機械翻訳データよりもさらに強い相関を示しました。</p><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--10-.png\" class=\"kg-image\" alt=\"Graph of cross-lingual alignment density EN-DE with peak around cosine similarity 1.0, titled &quot;jina-embeddings-v3: Cross-ling\" loading=\"lazy\" width=\"988\" height=\"590\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/image--10-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/image--10-.png 988w\" sizes=\"(min-width: 720px) 720px\"></figure><h2 id=\"how-much-does-cross-language-data-contribute-to-cross-language-alignment\">クロス言語データはクロス言語整合性にどの程度寄与しているか？</h2><p>言語間の差異の消失と高いクロス言語パフォーマンスは、明示的にクロス言語であるトレーニングデータの割合（わずか3%）と比較して不釣り合いに見えます。</p><p>そこで、クロス言語が実際に寄与しているかどうかをテストしました。</p><p>クロス言語データなしで <code>jina-embeddings-v3</code> を完全に再トレーニングするのは小規模な実験としては費用がかかりすぎるため、Hugging Face から <a href=\"https://huggingface.co/FacebookAI/xlm-roberta-base?ref=jina-ai-gmbh.ghost.io\"><code>xlm-roberta-base</code> モデル</a>をダウンロードし、<code>jina-embeddings-v3</code> のトレーニングに使用したデータのサブセットを使用して対照学習でさらにトレーニングを行いました。特に、クロス言語データの量を調整して2つのケースをテストしました：クロス言語データなしのケースと、ペアの20%がクロス言語のケースです。トレーニングのメタパラメータは以下の表のとおりです：</p>\n<!--kg-card-begin: html-->\n<table id=\"e30425bb-015e-4956-8872-b1b64cdd7ad0\" class=\"simple-table\"><tbody><tr id=\"daa3cfcc-9012-411b-8da3-05c7c6f4b371\"><td id=\"<j<o\" class=\"\" style=\"width:187.9375px\"><strong>Backbone</strong></td><td id=\"DU<d\" class=\"\"><strong>% Cross-Language</strong></td><td id=\"@Feo\" class=\"\"><strong>Learning Rate</strong></td><td id=\"fZNx\" class=\"\"><strong>Loss Function</strong></td><td id=\"Rv}\\\" class=\"\"><strong>Temperature</strong></td></tr><tr id=\"f3a2d068-d902-4fc1-8c89-269a5ebbb135\"><td id=\"<j<o\" class=\"\" style=\"width:187.9375px\"><code>xlm-roberta-base </code><strong>without</strong> X-language data</td><td id=\"DU<d\" class=\"\">0%</td><td id=\"@Feo\" class=\"\">5e-4</td><td id=\"fZNx\" class=\"\">InfoNCE</td><td id=\"Rv}\\\" class=\"\">0.05</td></tr><tr id=\"52887e22-326c-46cd-b79c-d6dcd110c1d2\"><td id=\"<j<o\" class=\"\" style=\"width:187.9375px\"><code>xlm-roberta-base</code><strong> with </strong>X-language data</td><td id=\"DU<d\" class=\"\">20%</td><td id=\"@Feo\" class=\"\">5e-4</td><td id=\"fZNx\" class=\"\">InfoNCE</td><td id=\"Rv}\\\" class=\"\">0.05</td></tr></tbody></table>\n<!--kg-card-end: html-->\n<p>その後、<a href=\"https://github.com/embeddings-benchmark/mteb?ref=jina-ai-gmbh.ghost.io\">MTEB の STS17 および STS22 ベンチマーク</a>とスピアマン相関を使用して、両モデルのクロスリンガルパフォーマンスを評価しました。結果は以下の通りです：</p><h3 id=\"sts17\"><strong>STS17</strong></h3><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-6---1-.png\" class=\"kg-image\" alt=\"Bar graph showing Spearman correlation for language pairs on STS17 with and without parallel corpus.\" loading=\"lazy\" width=\"2000\" height=\"1032\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/output-6---1-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/output-6---1-.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/10/output-6---1-.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-6---1-.png 2133w\" sizes=\"(min-width: 720px) 720px\"></figure>\n<!--kg-card-begin: html-->\n<table id=\"de30bf7f-d1a9-43f4-8e5f-15bf65c59674\" class=\"simple-table\"><tbody><tr id=\"5c6440a6-eba9-404a-a5f1-88099bc6702d\"><td id=\"{N[x\" class=\"\"><strong>Language Pair</strong></td><td id=\"jGmJ\" class=\"\"><strong>With parallel corpora</strong></td><td id=\"p<ZH\" class=\"\"><strong>Without parallel corpora</strong></td></tr><tr id=\"33f08461-58aa-43f3-9ed1-577f8676e99d\"><td id=\"{N[x\" class=\"\">English ↔ Arabic</td><td id=\"jGmJ\" class=\"\"><strong>0.6418</strong></td><td id=\"p<ZH\" class=\"\">0.5875</td></tr><tr id=\"9875386d-2043-4d9d-8252-e53ec525ec29\"><td id=\"{N[x\" class=\"\">English ↔ German</td><td id=\"jGmJ\" class=\"\">0.7364</td><td id=\"p<ZH\" class=\"\"><strong>0.7390</strong></td></tr><tr id=\"15d28a12-3a80-4176-9984-69b5d8a7d8ff\"><td id=\"{N[x\" class=\"\">English ↔ Spanish</td><td id=\"jGmJ\" class=\"\"><strong>0.6968</strong></td><td id=\"p<ZH\" class=\"\">0.6799</td></tr><tr id=\"21821558-c8b9-4c34-8ec5-9db3ca7d9328\"><td id=\"{N[x\" class=\"\">English ↔ French</td><td id=\"jGmJ\" class=\"\"><strong>0.7066</strong></td><td id=\"p<ZH\" class=\"\">0.6944</td></tr><tr id=\"a2e3b5e5-8e4a-4270-abff-5d059ff6be72\"><td id=\"{N[x\" class=\"\">English ↔ Italian</td><td id=\"jGmJ\" class=\"\"><strong>0.7232</strong></td><td id=\"p<ZH\" class=\"\">0.7070</td></tr><tr id=\"95daf20f-2a82-4431-8581-a4ce24d81462\"><td id=\"{N[x\" class=\"\">English ↔ Dutch</td><td id=\"jGmJ\" class=\"\"><strong>0.7597</strong></td><td id=\"p<ZH\" class=\"\">0.7468</td></tr><tr id=\"4fd4c45a-a69e-4e33-b057-9c5f10b99fdb\"><td id=\"{N[x\" class=\"\">English ↔ Turkish</td><td id=\"jGmJ\" class=\"\"><strong>0.6933</strong></td><td id=\"p<ZH\" class=\"\">0.6050</td></tr></tbody></table>\n<!--kg-card-end: html-->\n<h3 id=\"sts22\"><strong>STS22</strong></h3><figure class=\"kg-card kg-image-card\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-7---1-.png\" class=\"kg-image\" alt=\"Chart comparing models of language alignment, showing Spearman correlation scores for eight language pairs with and without p\" loading=\"lazy\" width=\"2000\" height=\"1032\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/10/output-7---1-.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/10/output-7---1-.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/10/output-7---1-.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/2024/10/output-7---1-.png 2133w\" sizes=\"(min-width: 720px) 720px\"></figure>\n<!--kg-card-begin: html-->\n<table id=\"e53757df-8a0e-42ec-ba05-715baa3c77cd\" class=\"simple-table\"><tbody><tr id=\"45c43b8c-b1b7-4ac0-91b0-1e07025f1b92\"><td id=\"OF=p\" class=\"\"><strong>言語ペア</strong></td><td id=\"P<\\i\" class=\"\"><strong>パラレルコーパスあり</strong></td><td id=\"LAtp\" class=\"\"><strong>パラレルコーパスなし</strong></td></tr><tr id=\"696ebe11-3eda-49ef-8dfe-608f9b71430b\"><td id=\"OF=p\" class=\"\">English ↔ Spanish</td><td id=\"P<\\i\" class=\"\"><strong>0.7710</strong></td><td id=\"LAtp\" class=\"\">0.7675</td></tr><tr id=\"eb4c1d81-7d98-453d-af3f-95b2adccfb55\"><td id=\"OF=p\" class=\"\">Simplified Chinese ↔ English</td><td id=\"P<\\i\" class=\"\"><strong>0.6885</strong></td><td id=\"LAtp\" class=\"\">0.6860</td></tr><tr id=\"533cefd3-b30e-4d6a-9350-8f5d28b17ba6\"><td id=\"OF=p\" class=\"\">Spanish ↔ Italian</td><td id=\"P<\\i\" class=\"\"><strong>0.6829</strong></td><td id=\"LAtp\" class=\"\">0.6814</td></tr><tr id=\"d3ecdd71-44bb-4a3b-9ac2-8cc90a785d5f\"><td id=\"OF=p\" class=\"\">German ↔ French</td><td id=\"P<\\i\" class=\"\"><strong>0.5763</strong></td><td id=\"LAtp\" class=\"\">0.5496</td></tr><tr id=\"c6242853-4da7-4369-b1f1-1a27262a487a\"><td id=\"OF=p\" class=\"\">German ↔ English</td><td id=\"P<\\i\" class=\"\">0.5439</td><td id=\"LAtp\" class=\"\"><strong>0.5566</strong></td></tr><tr id=\"31a4a5ba-199c-4904-b926-ff0561aac1b5\"><td id=\"OF=p\" class=\"\">Polish ↔ English</td><td id=\"P<\\i\" class=\"\">0.6966</td><td id=\"LAtp\" class=\"\"><strong>0.7156</strong></td></tr><tr id=\"4f529d81-e8c9-4e5d-a705-36e357abebc3\"><td id=\"OF=p\" class=\"\">German ↔ English</td><td id=\"P<\\i\" class=\"\"><strong>0.5832</strong></td><td id=\"LAtp\" class=\"\">0.5478</td></tr><tr id=\"cd1429f7-c810-4a0e-9dca-88e2c83157bc\"><td id=\"OF=p\" class=\"\">French ↔ Polish</td><td id=\"P<\\i\" class=\"\">0.8451</td><td id=\"LAtp\" class=\"\">0.8451</td></tr></tbody></table>\n<!--kg-card-end: html-->\n<p>テストした言語ペアのほとんどにおいて、クロスリンガル学習データがほとんどまたはまったく改善をもたらさなかったことに驚きました。より大きなデータセットを使用して完全に学習されたモデルでもこの結果が維持されるかどうかを確信することは難しいですが、明示的なクロス言語学習があまり効果を持たないという証拠を確かに示しています。</p><p>ただし、STS17 には English/Arabic と English/Turkish のペアも含まれていることに注目してください。これらは両方とも、私たちの学習データであまり表現されていない言語です。使用した XML-RoBERTa モデルは、アラビア語が 2.25%、トルコ語が 2.32% の事前学習データで、これは他のテストした言語よりもはるかに少ない割合です。この実験で使用した小規模な対照学習データセットでは、アラビア語は 1.7%、トルコ語は 1.8% しかありませんでした。</p><p>これらの2つの言語ペアは、クロス言語データでの学習が明確な違いをもたらした唯一のテストケースです。学習データにあまり表現されていない言語の場合、明示的なクロス言語データがより効果的だと考えていますが、結論を出す前にこの分野をさらに探求する必要があります。対照学習におけるクロス言語データの役割と効果は、Jina AI が積極的に研究を行っている分野です。</p><h2 id=\"conclusion\">結論</h2><p>Masked Language Modeling のような従来の言語事前学習手法では、「言語ギャップ」が残ります。これは、異なる言語の意味的に類似したテキストが、本来あるべき程度には近接しないという問題です。Jina Embeddings の対照学習レジメンは、このギャップを減少または解消するのに非常に効果的であることを示しました。</p><p>なぜこれが機能するのかは完全には明確ではありません。対照学習では明示的にクロス言語テキストペアを使用していますが、その量はごくわずかで、高品質なクロス言語結果を確保する上で実際にどの程度の役割を果たしているのかは不明確です。より制御された条件で明確な効果を示そうとする試みは、明確な結果を生み出しませんでした。</p><p>しかし、<strong><code>jina-embeddings-v3</code> が事前学習の言語ギャップを克服し、多言語アプリケーションのための強力なツールとなっていることは明らかです。</strong>複数の言語にわたって同等の強力なパフォーマンスを必要とするあらゆるタスクに使用する準備ができています。</p><p><code>jina-embeddings-v3</code> は、私たちの <a href=\"https://jina.ai/embeddings?ref=jina-ai-gmbh.ghost.io\">Embeddings API</a>（100万トークンまで無料）、または AWS や Azure を通じて使用できます。これらのプラットフォーム以外や社内で使用する場合は、CC BY-NC 4.0 ライセンスの下でライセンスされていることにご注意ください。商用利用にご興味がある場合は、<a href=\"https://jina.ai/contact-sales?ref=jina-ai-gmbh.ghost.io\">お問い合わせください</a>。</p>",
  "comment_id": "67066bd652567c0001d0f2cd",
  "feature_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/10/gap-blog-1.jpg",
  "featured": false,
  "visibility": "public",
  "created_at": "2024-10-09T13:41:10.000+02:00",
  "updated_at": "2024-10-10T20:15:26.000+02:00",
  "published_at": "2024-10-09T14:42:22.000+02:00",
  "custom_excerpt": "Multilingual models often face a \"language gap,\" where similar phrases in different languages don't align. We show how contrastive learning can bridge this gap, enhancing cross-language performance.",
  "codeinjection_head": null,
  "codeinjection_foot": null,
  "custom_template": null,
  "canonical_url": null,
  "authors": [
    {
      "id": "6360e7e05e0f6e004d70bd99",
      "name": "Bo Wang",
      "slug": "bo",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/4B483B29-E306-402B-8635-64866C458406.jpeg",
      "cover_image": null,
      "bio": "Developer @Jina, Contributor to open source ",
      "website": "https://bwanglzu.github.io/",
      "location": "Berlin",
      "facebook": null,
      "twitter": "@bo_wangbo",
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/bo/"
    },
    {
      "id": "632ae7353e4e55003d52598e",
      "name": "Scott Martens",
      "slug": "scott",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/photo-of-me-cropped.jpg",
      "cover_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/shanshui-ernie-crop.png",
      "bio": "A rogue AI created by Canada's Weapon X program.\n\nContent Creator @ Jina AI",
      "website": "https://jina.ai",
      "location": "Berlin",
      "facebook": null,
      "twitter": null,
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/scott/"
    },
    {
      "id": "632ade4a3e4e55003d525971",
      "name": "Alex C-G",
      "slug": "alexcg",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/09/alex.jpg",
      "cover_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/twitter_banner.jpg",
      "bio": "Open-source Evangelist @ Jina AI. Old, grim, and full of Vim",
      "website": null,
      "location": "Berlin, Germany",
      "facebook": null,
      "twitter": "@alexcg",
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/alexcg/"
    }
  ],
  "tags": [
    {
      "id": "634a1a8ccebfc1003d8ab706",
      "name": "Tech Blog",
      "slug": "tech-blog",
      "description": null,
      "feature_image": null,
      "visibility": "public",
      "og_image": null,
      "og_title": null,
      "og_description": null,
      "twitter_image": null,
      "twitter_title": null,
      "twitter_description": null,
      "meta_title": null,
      "meta_description": null,
      "codeinjection_head": null,
      "codeinjection_foot": null,
      "canonical_url": null,
      "accent_color": null,
      "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
    }
  ],
  "primary_author": {
    "id": "6360e7e05e0f6e004d70bd99",
    "name": "Bo Wang",
    "slug": "bo",
    "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/4B483B29-E306-402B-8635-64866C458406.jpeg",
    "cover_image": null,
    "bio": "Developer @Jina, Contributor to open source ",
    "website": "https://bwanglzu.github.io/",
    "location": "Berlin",
    "facebook": null,
    "twitter": "@bo_wangbo",
    "meta_title": null,
    "meta_description": null,
    "url": "https://jina-ai-gmbh.ghost.io/author/bo/"
  },
  "primary_tag": {
    "id": "634a1a8ccebfc1003d8ab706",
    "name": "Tech Blog",
    "slug": "tech-blog",
    "description": null,
    "feature_image": null,
    "visibility": "public",
    "og_image": null,
    "og_title": null,
    "og_description": null,
    "twitter_image": null,
    "twitter_title": null,
    "twitter_description": null,
    "meta_title": null,
    "meta_description": null,
    "codeinjection_head": null,
    "codeinjection_foot": null,
    "canonical_url": null,
    "accent_color": null,
    "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
  },
  "url": "https://jina-ai-gmbh.ghost.io/podcast/bridging-language-gaps-in-multilingual-embeddings-via-contrastive-learning/",
  "excerpt": "多言語モデルは、異なる言語の類似フレーズが一致しないという「言語ギャップ」に直面することがよくあります。対照学習によってこのギャップを埋め、言語間のパフォーマンスを向上させる方法を示します。",
  "reading_time": 13,
  "access": true,
  "comments": false,
  "og_image": null,
  "og_title": null,
  "og_description": null,
  "twitter_image": null,
  "twitter_title": null,
  "twitter_description": null,
  "meta_title": null,
  "meta_description": null,
  "email_subject": null,
  "frontmatter": null,
  "feature_image_alt": "Neon green squares form intricate patterns on a black digital background, creating a dynamic, abstract design.",
  "feature_image_caption": null
}