{
  "slug": "how-to-build-article-recommendations-with-jina-reranker-api-only",
  "id": "65f53dc48ff065000146db23",
  "uuid": "70844a2b-50c2-458a-a609-a5bb11530451",
  "title": "Come costruire raccomandazioni di articoli utilizzando solo Jina Reranker API",
  "html": "<p>Abbiamo introdotto l'<a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\">API Reranker</a> due settimane fa, affermandola come una soluzione leader per il reranking sul mercato. Jina Reranker supera le <a href=\"https://jina.ai/news/maximizing-search-relevancy-and-rag-accuracy-with-jina-reranker?ref=jina-ai-gmbh.ghost.io\">baseline più popolari in vari benchmark, dimostrando un significativo aumento fino al +33% nel tasso di successo rispetto ai risultati BM25.</a> Mentre le prestazioni sono impressionanti, ciò che mi entusiasma davvero è il potenziale dell'API Reranker. La sua interfaccia semplice permette l'input di una lista query-doc e restituisce direttamente i risultati top-k riordinati. Questo significa che, in teoria, si potrebbe costruire un sistema di ricerca o raccomandazione utilizzando solamente il Reranker—eliminando la necessità di BM25, embedding, database vettoriali o qualsiasi pipeline, ottenendo così una funzionalità end-to-end.</p><p>Questo concetto mi ha intrigato così tanto che mi sono sentito spinto a sperimentarlo. Quindi ecco qua: ora navigando su qualsiasi pagina di news del nostro sito web, come quella che stai leggendo attualmente, premi il tasto <code><strong>@</strong></code> e clicca sul pulsante \"get top 5 related articles\", riceverai i cinque articoli più pertinenti a quello corrente in circa 5 secondi, utilizzando il modello <code>jina-reranker-v1</code> (leggermente più lungo per il modello <code>jina-colbert-v1</code>). Tutti i calcoli vengono eseguiti online e gestiti interamente dall'API Reranker. Di seguito un video dimostrativo del suo funzionamento:</p><figure class=\"kg-card kg-video-card kg-width-regular kg-card-hascaption\" data-kg-thumbnail=\"https://jina-ai-gmbh.ghost.io/content/media/2024/03/recommender_thumb.jpg\" data-kg-custom-thumbnail=\"\">\n            <div class=\"kg-video-container\">\n                <video src=\"https://jina-ai-gmbh.ghost.io/content/media/2024/03/recommender.mp4\" poster=\"https://img.spacergif.org/v1/1174x796/0a/spacer.png\" width=\"1174\" height=\"796\" playsinline=\"\" preload=\"metadata\" style=\"background: transparent url('https://jina-ai-gmbh.ghost.io/content/media/2024/03/recommender_thumb.jpg') 50% 50% / cover no-repeat;\"></video>\n                <div class=\"kg-video-overlay\">\n                    <button class=\"kg-video-large-play-icon\" aria-label=\"Play video\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                            <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"></path>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"kg-video-player-container\">\n                    <div class=\"kg-video-player\">\n                        <button class=\"kg-video-play-icon\" aria-label=\"Play video\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-pause-icon kg-video-hide\" aria-label=\"Pause video\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <rect x=\"3\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                                <rect x=\"14\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                            </svg>\n                        </button>\n                        <span class=\"kg-video-current-time\">0:00</span>\n                        <div class=\"kg-video-time\">\n                            /<span class=\"kg-video-duration\">0:33</span>\n                        </div>\n                        <input type=\"range\" class=\"kg-video-seek-slider\" max=\"100\" value=\"0\">\n                        <button class=\"kg-video-playback-rate\" aria-label=\"Adjust playback speed\">1×</button>\n                        <button class=\"kg-video-unmute-icon\" aria-label=\"Unmute\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-mute-icon kg-video-hide\" aria-label=\"Mute\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z\"></path>\n                            </svg>\n                        </button>\n                        <input type=\"range\" class=\"kg-video-volume-slider\" max=\"100\" value=\"100\">\n                    </div>\n                </div>\n            </div>\n            <figcaption><p><span style=\"white-space: pre-wrap;\">Per eseguire questa demo, avrai bisogno di una chiave API con abbastanza token disponibili. Se esaurisci la tua quota e non puoi eseguire la demo, puoi generare una nuova chiave su </span><a href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\" target=\"_new\"><span style=\"white-space: pre-wrap;\">https://jina.ai/reranker</span></a><span style=\"white-space: pre-wrap;\">. Ogni nuova chiave include 1 milione di token gratuiti. </span></p></figcaption>\n        </figure><h2 id=\"implementation\">Implementazione</h2><p>L'implementazione è molto semplice: per trovare gli articoli più correlati a un dato articolo su <code>jina.ai/news/</code>, utilizziamo l'articolo attualmente in lettura <strong>come query</strong> e tutti gli altri 230+ articoli (usando il loro testo completo!) sul nostro sito di news <strong>come documenti</strong>, escludendo ovviamente quello corrente. Quindi inviamo questo $(q, d_1, d_2, \\cdots, d_{230})$ come payload all'API Reranker. Una volta ricevuta la risposta, utilizziamo l'indice dei documenti ordinato per visualizzare i risultati. Quindi, il codice sottostante è il seguente:</p><pre><code class=\"language-js\">const getRecommendedArticles = async () =&gt; {\n  \n  const query = `${currentNews.title} ${currentNews.excerpt}`;\n  const docs = newsStore.allBlogs.filter((item) =&gt; item.slug !== currentNews.slug);\n  \n  const data = {\n    model: modelName,\n    query: query,\n    documents: docs,\n    top_n: 5,\n  }\n\n  const rerankUrl = 'https://api.jina.ai/v1/rerank';\n  const headers = {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${apiKey}`,\n  };\n  const modelName = 'jina-reranker-v1-base-en';\n  \n  const res = await fetch(rerankUrl, {\n    method: 'POST',\n    headers: headers,\n    body: JSON.stringify(data),\n  });\n\n  const resp = await res.json();\n\n  const topKList = resp.results.map((item) =&gt; {\n    return docs[item.index];\n  });\n\n  console.log(topKList);\n}</code></pre><figure class=\"kg-card kg-bookmark-card kg-card-hascaption\"><a class=\"kg-bookmark-container\" href=\"https://jina.ai/reranker?ref=jina-ai-gmbh.ghost.io\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Reranker API</div><div class=\"kg-bookmark-description\">Maximize the search relevancy and RAG accuracy at ease</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://jina.ai/icons/favicon-128x128.png\" alt=\"\"></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://jina.ai/banner-reranker-api.png\" alt=\"\"></div></a><figcaption><p><span style=\"white-space: pre-wrap;\">Per ottenere una chiave API, visita semplicemente la nostra pagina Reranker API e naviga alla sezione API. Se possiedi già una chiave API dalla nostra Embedding API, puoi riutilizzarla qui.</span></p></figcaption></figure><p>E così, vedrai i risultati, che sono abbastanza promettenti per una prima iterazione, soprattutto considerando che il processo di implementazione richiede circa 10 minuti.</p><p>Mentre i lettori potrebbero avere preoccupazioni riguardo questa implementazione, alcune critiche potrebbero essere eccessive, mentre altre potrebbero essere valide:</p><ul><li><strong>Le preoccupazioni riguardo testi troppo lunghi e la necessità di chunking potrebbero essere eccessive</strong>: il modello <code>jina-reranker-v1</code> può elaborare query fino a 512 di lunghezza e documenti di lunghezza arbitraria, mentre il modello <code>jina-colbert-v1</code> può gestire fino a 8192 sia per le query che per i documenti. Pertanto, inserire il testo completo nell'API Reranker è probabilmente non necessario. Entrambi i modelli gestiscono efficientemente i contesti lunghi, quindi non c'è motivo di preoccuparsi. Il chunking, sebbene sia forse l'aspetto più complicato ed euristico della pipeline embedding-vector-search-rerank, è meno problematico qui. Tuttavia, contesti più lunghi assumono più token, cosa che i nostri utenti a pagamento dell'API potrebbero dover considerare. In questo esempio, poiché utilizziamo il testo completo di tutti i 233 articoli, una query di rerank costa oltre 300K token.</li><li><strong>L'impatto dei dati grezzi rispetto a quelli puliti sulla qualità</strong>. Aggiungere la pulizia dei dati potrebbe effettivamente portare a miglioramenti. Per esempio, abbiamo osservato che semplicemente rimuovendo i tag HTML (cioè <code>docs.map(item =&gt; item.html.replace(/&lt;[^&gt;]*&gt;?/gm, '')</code>) migliora significativamente la qualità delle raccomandazioni per il modello <code>jina-reranker-v1</code>, anche se l'effetto è meno pronunciato per il modello <code>jina-colbert-v1</code>. Questo suggerisce che il nostro modello ColBERT è stato addestrato per essere più tollerante al testo rumoroso rispetto al modello <code>jina-reranker-v1</code>.</li><li><strong>L'influenza di diverse costruzioni di query sulla qualità.</strong> Nell'implementazione sopra, abbiamo utilizzato direttamente il titolo e l'estratto dell'articolo corrente come query. È questo l'approccio ottimale per costruire la query? Aggiungere un prefisso come <code>\"What is the most related article to...\"</code> o<code>\"Ti darò 20$ se consigli il miglior articolo,\"</code> simile ai prompt usati con i large language model, potrebbe essere utile? Questa solleva un'interessante questione, probabilmente legata alla distribuzione dei dati di training del modello, che prevediamo di esplorare ulteriormente.</li><li>Sviluppando il punto precedente sulla costruzione delle query, sarebbe interessante investigare ulteriormente le capacità composizionali della query, come l'utilizzo della cronologia di navigazione recente dell'utente per raccomandazioni personalizzate. È particolarmente interessante considerare se il sistema potrebbe comprendere non solo esempi positivi nella query <strong>ma anche negativi,</strong> ad esempio operatori <code>NOT_LIKE</code>, <code>\"Non raccomandarmi articoli come questo\"</code> o <code>\"Voglio vederne di meno come questo\"</code>. Approfondiremo questo aspetto nella prossima sezione.</li></ul><h2 id=\"empirical-study-on-query-writing\">Studio Empirico sulla Scrittura delle Query</h2><p>Nella nostra esplorazione di diverse modalità di scrittura delle query con la Jina Reranker API, concentrandoci sui primi 10 risultati, abbiamo condotto una valutazione qualitativa attraverso l'etichettatura umana (cioè valutata da noi stessi), che ha senso poiché abbiamo piena conoscenza di tutti i contenuti pubblicati sul nostro sito web. Le strategie di scrittura delle query che abbiamo esaminato includevano:</p><ul><li>Utilizzo del Titolo dell'articolo, dell'Estratto e una combinazione di Titolo + Estratto.</li><li>Adozione di istruzioni simili a \"Prompt\" come \"altri simili a questo\", \"non come questo\" e \"qual è l'articolo più strettamente correlato?\"</li></ul><p>Per testare l'efficacia del reranker, abbiamo selezionato due articoli non banali come soggetti delle nostre query, mirando a identificare gli articoli più rilevanti tra il nostro vasto catalogo di oltre 200+ post—una sfida ispirata al concetto del \"ago nel pagliaio\" nei LLM. Di seguito, abbiamo evidenziato questi \"aghi\" in verde per chiarezza.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://jina-ai-gmbh.ghost.io/content/images/2024/03/image.png\" class=\"kg-image\" alt=\"Screenshot of a table ranking articles on search technology relevance, featuring titles, excerpts, and 'More Like' or 'Not Li\" loading=\"lazy\" width=\"2000\" height=\"758\" srcset=\"https://jina-ai-gmbh.ghost.io/content/images/size/w600/2024/03/image.png 600w, https://jina-ai-gmbh.ghost.io/content/images/size/w1000/2024/03/image.png 1000w, https://jina-ai-gmbh.ghost.io/content/images/size/w1600/2024/03/image.png 1600w, https://jina-ai-gmbh.ghost.io/content/images/size/w2400/2024/03/image.png 2400w\" sizes=\"(min-width: 720px) 720px\"><figcaption><span style=\"white-space: pre-wrap;\">I risultati completi del nostro studio sono dettagliati </span><a href=\"https://docs.google.com/spreadsheets/d/1XDOXjP6IVK1hXk3gKkng_cOpTrmS9Hm1UKCGvW1wMxU/edit?usp=sharing&ref=jina-ai-gmbh.ghost.io\"><span style=\"white-space: pre-wrap;\">in questo foglio di calcolo</span></a><span style=\"white-space: pre-wrap;\">.</span></figcaption></figure><h2 id=\"summary\">Riepilogo</h2><p>Sulla base dei risultati dei test, abbiamo fatto alcune osservazioni e riassunti:</p><ol><li>La combinazione di Titolo ed Estratto produce i migliori risultati di reranking, con l'Estratto che gioca un ruolo significativo nel migliorare la qualità del reranking.</li><li>L'incorporazione di istruzioni simili a \"prompt\" non porta ad alcun miglioramento.</li><li>Il modello reranker attualmente non elabora efficacemente i qualificatori positivi o negativi. Termini come \"più simile a\", \"meno simile a\" o \"non come\" non sono comprensibili dal reranker.</li></ol><p>Le intuizioni dai punti 2 e 3 offrono interessanti direzioni per futuri miglioramenti del reranker. Riteniamo che abilitare il prompting al volo per modificare la logica di ordinamento potrebbe espandere significativamente le capacità del reranker, sbloccando nuove potenziali applicazioni come la curatela/raccomandazione personalizzata dei contenuti.</p>",
  "comment_id": "65f53dc48ff065000146db23",
  "feature_image": "https://jina-ai-gmbh.ghost.io/content/images/2024/03/Heading--1-.png",
  "featured": false,
  "visibility": "public",
  "created_at": "2024-03-16T07:35:48.000+01:00",
  "updated_at": "2024-03-17T19:26:09.000+01:00",
  "published_at": "2024-03-17T06:38:36.000+01:00",
  "custom_excerpt": "You can build an article recommendation system with just the Jina Reranker API—no pipeline, no embeddings, no vector search, only reranking. Find out how in 20 lines of code.",
  "codeinjection_head": null,
  "codeinjection_foot": null,
  "custom_template": null,
  "canonical_url": null,
  "authors": [
    {
      "id": "1",
      "name": "Engineering Group",
      "slug": "engineering",
      "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/1.png",
      "cover_image": null,
      "bio": "We do opensource, we do neural search, we do creative AI, we do MLOps. We do we.",
      "website": "https://github.com/jina-ai",
      "location": "Berlin, Germany",
      "facebook": null,
      "twitter": "@jinaai_",
      "meta_title": null,
      "meta_description": null,
      "url": "https://jina-ai-gmbh.ghost.io/author/engineering/"
    }
  ],
  "tags": [
    {
      "id": "634a1a8ccebfc1003d8ab706",
      "name": "Tech Blog",
      "slug": "tech-blog",
      "description": null,
      "feature_image": null,
      "visibility": "public",
      "og_image": null,
      "og_title": null,
      "og_description": null,
      "twitter_image": null,
      "twitter_title": null,
      "twitter_description": null,
      "meta_title": null,
      "meta_description": null,
      "codeinjection_head": null,
      "codeinjection_foot": null,
      "canonical_url": null,
      "accent_color": null,
      "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
    }
  ],
  "primary_author": {
    "id": "1",
    "name": "Engineering Group",
    "slug": "engineering",
    "profile_image": "https://jina-ai-gmbh.ghost.io/content/images/2022/11/1.png",
    "cover_image": null,
    "bio": "We do opensource, we do neural search, we do creative AI, we do MLOps. We do we.",
    "website": "https://github.com/jina-ai",
    "location": "Berlin, Germany",
    "facebook": null,
    "twitter": "@jinaai_",
    "meta_title": null,
    "meta_description": null,
    "url": "https://jina-ai-gmbh.ghost.io/author/engineering/"
  },
  "primary_tag": {
    "id": "634a1a8ccebfc1003d8ab706",
    "name": "Tech Blog",
    "slug": "tech-blog",
    "description": null,
    "feature_image": null,
    "visibility": "public",
    "og_image": null,
    "og_title": null,
    "og_description": null,
    "twitter_image": null,
    "twitter_title": null,
    "twitter_description": null,
    "meta_title": null,
    "meta_description": null,
    "codeinjection_head": null,
    "codeinjection_foot": null,
    "canonical_url": null,
    "accent_color": null,
    "url": "https://jina-ai-gmbh.ghost.io/tag/tech-blog/"
  },
  "url": "https://jina-ai-gmbh.ghost.io/podcast/how-to-build-article-recommendations-with-jina-reranker-api-only/",
  "excerpt": "Puoi creare un sistema di raccomandazione di articoli utilizzando solo la Jina Reranker API—niente pipeline, niente embedding, niente ricerca vettoriale, solo reranking. Scopri come farlo in 20 righe di codice.",
  "reading_time": 5,
  "access": true,
  "comments": false,
  "og_image": null,
  "og_title": null,
  "og_description": null,
  "twitter_image": null,
  "twitter_title": null,
  "twitter_description": null,
  "meta_title": null,
  "meta_description": null,
  "email_subject": null,
  "frontmatter": null,
  "feature_image_alt": "Black background with a grid, multiple smiley faces, and a cursor pointing to one of them.",
  "feature_image_caption": null
}